{{/*
  Partial: components/recette-alerts.html

  Rôle
  - Rendre un bloc d’alertes d’allergènes pour une recette.

  Entrée (dict) attendue:
    {
      "alerts": dict {           // requis - produit par functions/recette-alerts.html
        "autres":   []string,
        "gluten":   []string,
        "lait":     []string,
        "lactose":  []string,
        "porc":     []string,
      },
      "iconSize": string,        // optionnel - taille icônes (ex: "1rem", "1.2rem"), défaut "1rem"
      "class": string,           // optionnel - classes CSS supplémentaires pour le conteneur
      "card": bool,              // optionnel - wrapper dans une carte (true par défaut)
    }

  Comportement
  - Affiche un conteneur avec les sections présentes:
      • Allergènes divers (liste déjà libellée "Nom: ingrédients…")
      • Gluten
      • Produits laitier
      • Lactose
      • Porc
  - N’affiche rien si toutes les listes sont vides.
*/}}

{{- $in := . | default (dict) -}}
{{- $alerts := (index $in "alerts") | default (dict) -}}
{{- $iconSize := (index $in "iconSize") | default "1rem" -}}
{{- $extraClass := (index $in "class") | default "" -}}
{{- $useCard := (index $in "card") | default true -}}

{{- $autres := (index $alerts "autres") | default (slice) -}}
{{- $gluten := (index $alerts "gluten") | default (slice) -}}
{{- $lait := (index $alerts "lait") | default (slice) -}}
{{- $lactose := (index $alerts "lactose") | default (slice) -}}
{{- $porc := (index $alerts "porc") | default (slice) -}}

{{- $hasAny := or (len $autres) (len $gluten) (len $lait) (len $lactose) (len $porc) -}}
{{- if $hasAny -}}

  {{- if $useCard -}}
  <div class="card border-danger shadow small px-4 card-body print-nocard {{ $extraClass }}">
  {{- else -}}
  <div class="{{ $extraClass }}">
  {{- end -}}

    {{- with $autres -}}
    <div>
      <span class="me-2">{{ partial "components/icon-svg" (dict "name" "exclamation-triangle" "size" $iconSize) }}</span>
      Allergènes divers:
      <span class="fw-bold</div>">{{ delimit . ", " }}</span>
    </div>
    {{- end -}}

    {{- with $gluten -}}
    <div>
      <span class="me-2">{{ partial "components/icon-svg" (dict "name" "gluten" "size" $iconSize) }}</span>
      Gluten :
      <span class="fw-bold">{{ delimit . ", " }}</span>
    </div>
    {{- end -}}

    {{- with $lait -}}
    <div>
      <span class="me-2">{{ partial "components/icon-svg" (dict "name" "milk-box" "size" $iconSize) }}</span>
      Produits laitier :
      <span class="fw-bold">{{ delimit . ", " }}</span>
    </div>
    {{- end -}}

    {{- with $lactose -}}
    <div>
      <span class="me-2">{{ partial "components/icon-svg" (dict "name" "milk-box" "size" $iconSize) }}</span>
      Lactose :
      <span class="fw-bold">{{ delimit . ", " }}</span>
    </div>
    {{- end -}}

    {{- with $porc -}}
    <div>
      <span class="me-2">{{ partial "components/icon-svg" (dict "name" "no-vegan" "size" $iconSize) }}</span>
      Porc:
      <span class="fw-bold">{{ delimit . ", " }}</span>
    </div>
    {{- end -}}

  </div>
{{- end -}}
