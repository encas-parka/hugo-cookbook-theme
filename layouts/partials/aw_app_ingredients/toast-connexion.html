  <!-- Indicateur de connexion temps réel -->
  <div class="position-fixed bottom-0 end-0 p-2" style="z-index: 1040;">
    <div
      class="btn-sm btn d-flex align-items-center gap-1 shadow-sm"
      :class="[
                realtimeStatus.isConnected ? 'btn-success' : 'btn-danger',
                realtimeStatus.isConnecting ? 'disabled' : ''
            ]"
      @click="attemptReconnection()"
      style="
        border-radius: 1rem;
        font-size: 0.75rem;
        opacity: 0.8;
        backdrop-filter: blur(10px);
      "
    >
      <i
        :class="[
                    realtimeStatus.isConnecting ? 'fas fa-sync-alt fa-spin' :
                    realtimeStatus.isConnected ? 'fas fa-broadcast-tower' : 'fas fa-broadcast-tower'
                ]"
        style="font-size: 0.65rem;"
      ></i>
      <span v-if="realtimeStatus.isConnecting">Reconnexion...</span>
      <span v-else-if="realtimeStatus.isConnected">Connecté</span>
      <span v-else>Déconnecté</span>
      <span v-if="realtimeStatus.retryCount > 0" class="badge bg-light text-dark" style="font-size: 0.65rem;">
        [[realtimeStatus.retryCount]]/[[realtimeStatus.maxRetries]]
      </span>
    </div>
  </div>

<!-- Toast génériques -->
<div
  class="toast-container position-fixed bottom-0 end-0 p-3"
  style="z-index: 1046;"
>
  <div
    v-for="toast in toasts"
    :key="toast.id"
    class="toast"
    :class="{ 'show': toast.show }"
    role="alert"
    aria-live="assertive"
    aria-atomic="true"
  >
    <div
      class="toast-header"
      :class="{
        'bg-success text-white': toast.type === 'success',
        'bg-danger text-white': toast.type === 'danger',
        'bg-warning text-dark': toast.type === 'warning',
        'bg-info text-white': toast.type === 'info',
        'bg-light text-dark': toast.type === 'light',
        'bg-secondary text-white': toast.type === 'secondary'
      }"
    >
      <i :class="getToastIcon(toast.type)" class="me-2"></i>
      <strong class="me-auto">[[ toast.title ]]</strong>
      <button
        type="button"
        class="btn-close"
        :class="{
          'btn-close-white': toast.type !== 'warning' && toast.type !== 'light',
          'btn-close-dark': toast.type === 'warning' || toast.type === 'light'
        }"
        @click="hideToast(toast.id)"
        aria-label="Fermer"
      ></button>
    </div>
    <div class="toast-body">
      [[ toast.message ]]
    </div>
  </div>
</div>

<!-- Toast de notification de connexion perdue -->
<div
  class="toast-container position-fixed bottom-0 end-0 p-3"
  style="z-index: 1045;"
>
  <div
    class="toast"
    :class="{ 'show': !realtimeStatus.isConnected && realtimeStatus.showDisconnectedToast }"
    role="alert"
    aria-live="assertive"
    aria-atomic="true"
  >
    <div class="toast-header bg-danger text-white">
      <i class="fas fa-exclamation-triangle me-2"></i>
      <strong class="me-auto">Connexion perdue</strong>
      <button
        type="button"
        class="btn-close btn-close-white"
        @click="closeDisconnectedToast()"
        aria-label="Fermer"
      ></button>
    </div>
    <div class="toast-body">
      <p class="mb-3">
        La synchronisation temps réel a été perdue. Les changements ne seront
        pas mis à jour en temps réel.
      </p>
      <div v-if="!isAuthenticated" class="alert alert-warning mb-3">
        <i class="fas fa-user-lock me-2"></i>
        Vous devez être connecté pour accéder à la synchronisation temps réel.
      </div>
      <div class="d-flex gap-2">
        <button
          v-if="!isAuthenticated"
          class="btn btn-primary btn-sm"
          onclick="window.location.href='/login'"
        >
          <i class="fas fa-sign-in-alt me-1"></i>
          Se connecter
        </button>
        <button
          v-else
          class="btn btn-primary btn-sm"
          @click="attemptReconnection()"
          :disabled="realtimeStatus.isConnecting"
        >
          <i class="fas fa-sync-alt me-1"></i>
          <span v-if="realtimeStatus.isConnecting">Reconnexion...</span>
          <span v-else>Rétablir</span>
        </button>
        <button
          class="btn btn-secondary btn-sm"
          @click="closeDisconnectedToast()"
        >
          Fermer
        </button>
      </div>
    </div>
  </div>
</div>
