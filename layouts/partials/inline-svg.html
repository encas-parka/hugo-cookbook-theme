{{- /*
	inline-svg.html partial

	@author @sean-au

	@access public

  @prints SVG HTML tag with utility classes (CSS required)

  @context
    string: svg path relative to assets dir OR
    dict:
      src: svg path relative to assets dir
      em: font size in em units (1-5) (defaults to 1)
      block: true/false (defaults to false)
      title: SVG title
      desc: SVG desc

	@example {{ partial "inline-svg" . }}

 ****************************************************/ -}}

 {{- /* 1. Extraire le chemin du fichier SVG, quel que soit le contexte d'appel. */ -}}
 {{- $srcPath := "" -}}
 {{- if reflect.IsMap . -}}
   {{- $srcPath = .src -}}
 {{- else -}}
   {{- $srcPath = . -}}
 {{- end -}}

 {{- /* 2. Vérifier si la ressource existe AVANT de tenter de la traiter. */ -}}
 {{- if and $srcPath (resources.Get $srcPath) -}}

   {{- /* 3. La ressource existe, on exécute la logique originale du partial. */ -}}
   {{- $sanitize := partial "hugo-inline-svg/private/sanitize" . -}}
   {{- $params := partial "hugo-inline-svg/private/params" . -}}
   {{- $params = partial "hugo-inline-svg/private/regex" $params -}}
   {{- $svgHTML := partial "hugo-inline-svg/private/format" $params -}}
   {{- $svgHTML -}}

 {{- else -}}

   {{- /* 4. La ressource n'existe pas, on affiche un avertissement et un commentaire HTML. */ -}}
   {{- warnf "Partial 'inline-svg': Fichier SVG introuvable à l'emplacement : %q. Contexte de l'appel : %s" $srcPath .Page.File.Path -}}
   {{- printf "<!-- SVG introuvable: %s -->" $srcPath | safeHTML -}}

 {{- end -}}
