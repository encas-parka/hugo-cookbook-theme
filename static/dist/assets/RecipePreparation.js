import{D as T,a as ta,Z as sa,O as ra}from"./icons.js";import{d as W,V as o,e as k,m as e,i as X,h as p,g as r,a2 as h,u as x,W as P,a7 as na,X as u,b as i,c as Z,aQ as E,t as ia,p as oa}from"./appwrite.js";import{g as la}from"./products-display.js";import{F as S}from"./Fieldset.js";import{S as V}from"./SvelteMarkdown.js";var va=o('<span class="ml-1 inline-flex align-middle print:hidden"><!></span>'),da=o('<span class="text-base-content/70 ml-1"> </span>'),pa=o('<span class="text-base-content/70 print-xs text-sm before:mx-1"> </span>'),ca=o('<li class="grid grid-cols-[auto_1fr] items-baseline gap-x-2 gap-y-0"><span class="truncate font-medium"> <!></span> <div class="flex flex-wrap items-baseline gap-x-1"><span><span class="tabular-nums"> </span> <span class="ml-1"> </span> <!></span> <!></div></li>'),ua=o('<ul class="break-inside-avoid space-y-2 print:space-y-1"></ul>'),ma=o('<div class="space-y-6 print:space-y-2"><!> <div class="text-base-content/60 flex items-center gap-1 text-sm"><!> <span>→ Allergènes</span></div></div>');function Qa(w,l){W(l,!0);const m=x(()=>l.servings/l.defaultServings),b=x(()=>{const a=new Map;return l.ingredients.forEach(s=>{const t=s.type||"Autres";a.has(t)||a.set(t,[]),a.get(t).push(s)}),a});function $(a){const s=E(a.originalQuantity,a.originalUnit,e(m)),t=E(a.normalizedQuantity,a.normalizedUnit,e(m));return{...a,originalDisplayQuantity:s.formattedNumber,originalDisplayUnit:s.unit,normalizedDisplayQuantity:t.formattedNumber,normalizedDisplayUnit:t.unit,hasDifferentQuantities:s.formattedNumber!==t.formattedNumber||s.unit!==t.unit}}var z=ma(),_=r(z);k(_,17,()=>[...e(b)],([a,s])=>a,(a,s)=>{var t=x(()=>ia(e(s),2));let v=()=>e(t)[0],g=()=>e(t)[1];const N=x(()=>la(v()));S(a,{get legend(){return e(N).displayName},get iconComponent(){return e(N).icon},children:(D,A)=>{var Q=ua();k(Q,21,g,X,(j,c)=>{const f=x(()=>$(e(c)));var F=ca(),U=r(F),R=r(U),q=p(R);{var B=n=>{var d=va(),y=r(d);T(y,{class:"h-4 w-4 opacity-70"}),i(n,d)};h(q,n=>{e(c).allergens&&e(c).allergens.length>0&&n(B)})}var G=p(U,2),L=r(G),M=r(L),H=r(M),O=p(M,2),J=r(O),K=p(O,2);{var Y=n=>{var d=da(),y=r(d);P(()=>u(y,`(${e(f).normalizedDisplayQuantity??""}
                    ${e(f).normalizedDisplayUnit??""})`)),i(n,d)};h(K,n=>{e(f).hasDifferentQuantities&&n(Y)})}var aa=p(L,2);{var ea=n=>{var d=pa(),y=r(d);P(()=>u(y,`(${e(c).comment??""})`)),i(n,d)};h(aa,n=>{e(c).comment&&n(ea)})}P(()=>{na(U,"title",e(c).name),u(R,`${e(c).name??""} : `),u(H,e(f).originalDisplayQuantity),u(J,e(f).originalDisplayUnit)}),i(j,F)}),i(D,Q)},$$slots:{default:!0}})});var C=p(_,2),I=r(C);T(I,{class:"h-4 w-4"}),i(w,z),Z()}var _a=o('<div class="prose max-w-none"><!></div>'),ga=o('<div class="prose max-w-none"><!></div>'),fa=o('<div class="flex items-start gap-2"><div class="text-sm"> </div></div>'),ya=o('<div class="space-y-2 print:space-y-1"></div>'),xa=o('<div class="space-y-4"><!> <!> <!></div>');function Pa(w,l){W(l,!0);let m=oa(l,"astuces",19,()=>[]);var b=xa(),$=r(b);{var z=a=>{S(a,{legend:"Préparation à l'avance",get iconComponent(){return sa},legendSize:"text-lg",iconSize:18,children:(s,t)=>{var v=_a(),g=r(v);V(g,{get source(){return l.preparation24h}}),i(s,v)},$$slots:{default:!0}})};h($,a=>{l.preparation24h&&a(z)})}var _=p($,2);S(_,{legend:"Préparation",get iconComponent(){return ta},legendSize:"text-lg",children:(a,s)=>{var t=ga(),v=r(t);V(v,{get source(){return l.preparation}}),i(a,t)},$$slots:{default:!0}});var C=p(_,2);{var I=a=>{var s=ya();k(s,21,m,X,(t,v)=>{S(t,{legend:"Astuces",get iconComponent(){return ra},legendSize:"text-sm",children:(g,N)=>{var D=fa(),A=r(D),Q=r(A);P(()=>u(Q,e(v).astuce)),i(g,D)},$$slots:{default:!0}})}),i(a,s)};h(C,a=>{m().length>0&&a(I)})}i(w,b),Z()}export{Qa as R,Pa as a};
