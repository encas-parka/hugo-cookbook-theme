import{H as V,a as ta,$ as sa,V as ra}from"./icons.js";import{d as O,V as o,e as F,m as e,i as W,h as p,g as r,a2 as h,u as x,W as P,a4 as na,X as u,b as i,c as X,aR as E,t as ia,p as oa}from"./appwrite.js";import{g as la}from"./products-display.js";import{F as Q}from"./Fieldset.js";import{S as H}from"./SvelteMarkdown.js";var da=o('<span class="ml-1 inline-flex align-middle print:hidden"><!></span>'),va=o('<span class="text-base-content/70 ml-1"> </span>'),pa=o('<span class="text-base-content/70 print-xs text-sm before:mx-1"> </span>'),ca=o('<li class="grid grid-cols-[auto_1fr] items-baseline gap-x-2 gap-y-0"><span class="truncate font-medium"> <!></span> <div class="flex flex-wrap items-baseline gap-x-1"><span><span class="tabular-nums"> </span> <span class="ml-1"> </span> <!></span> <!></div></li>'),ua=o('<ul class="break-inside-avoid space-y-2 print:space-y-1"></ul>'),ma=o('<div class="space-y-6 print:space-y-2"><!> <div class="text-base-content/60 flex items-center gap-1 text-sm"><!> <span>→ Allergènes</span></div></div>');function Sa(w,l){O(l,!0);const m=x(()=>l.servings/l.defaultServings),b=x(()=>{const a=new Map;return l.ingredients.forEach(s=>{const t=s.type||"Autres";a.has(t)||a.set(t,[]),a.get(t).push(s)}),a});function $(a){const s=E(a.originalQuantity,a.originalUnit,e(m)),t=E(a.normalizedQuantity,a.normalizedUnit,e(m));return{...a,originalDisplayQuantity:s.formattedNumber,originalDisplayUnit:s.unit,normalizedDisplayQuantity:t.formattedNumber,normalizedDisplayUnit:t.unit,hasDifferentQuantities:s.formattedNumber!==t.formattedNumber||s.unit!==t.unit}}var z=ma(),g=r(z);F(g,17,()=>[...e(b)],([a,s])=>a,(a,s)=>{var t=x(()=>ia(e(s),2));let d=()=>e(t)[0],_=()=>e(t)[1];const N=x(()=>la(d()));Q(a,{get legend(){return e(N).displayName},get iconComponent(){return e(N).icon},legendFont:"font-light",legendSize:"text-sm",children:(D,k)=>{var S=ua();F(S,21,_,W,(j,c)=>{const f=x(()=>$(e(c)));var A=ca(),U=r(A),R=r(U),q=p(R);{var B=n=>{var v=da(),y=r(v);V(y,{class:"h-4 w-4 opacity-70"}),i(n,v)};h(q,n=>{e(c).allergens&&e(c).allergens.length>0&&n(B)})}var G=p(U,2),L=r(G),M=r(L),J=r(M),T=p(M,2),K=r(T),Y=p(T,2);{var Z=n=>{var v=va(),y=r(v);P(()=>u(y,`(${e(f).normalizedDisplayQuantity??""}
                    ${e(f).normalizedDisplayUnit??""})`)),i(n,v)};h(Y,n=>{e(f).hasDifferentQuantities&&n(Z)})}var aa=p(L,2);{var ea=n=>{var v=pa(),y=r(v);P(()=>u(y,`(${e(c).comment??""})`)),i(n,v)};h(aa,n=>{e(c).comment&&n(ea)})}P(()=>{na(U,"title",e(c).name),u(R,`${e(c).name??""} : `),u(J,e(f).originalDisplayQuantity),u(K,e(f).originalDisplayUnit)}),i(j,A)}),i(D,S)},$$slots:{default:!0}})});var C=p(g,2),I=r(C);V(I,{class:"h-4 w-4"}),i(w,z),X()}var ga=o('<div class="prose max-w-none"><!></div>'),_a=o('<div class="prose max-w-none"><!></div>'),fa=o('<div class="flex items-start gap-2"><div class="text-sm"> </div></div>'),ya=o('<div class="space-y-2 print:space-y-1"></div>'),xa=o('<div class="space-y-4"><!> <!> <!></div>');function Pa(w,l){O(l,!0);let m=oa(l,"astuces",19,()=>[]);var b=xa(),$=r(b);{var z=a=>{Q(a,{legend:"Préparation à l'avance",get iconComponent(){return sa},legendSize:"text-lg",iconSize:18,children:(s,t)=>{var d=ga(),_=r(d);H(_,{get source(){return l.preparation24h}}),i(s,d)},$$slots:{default:!0}})};h($,a=>{l.preparation24h&&a(z)})}var g=p($,2);Q(g,{legend:"Préparation",get iconComponent(){return ta},legendSize:"text-lg",children:(a,s)=>{var t=_a(),d=r(t);H(d,{get source(){return l.preparation}}),i(a,t)},$$slots:{default:!0}});var C=p(g,2);{var I=a=>{var s=ya();F(s,21,m,W,(t,d)=>{Q(t,{legend:"Astuces",get iconComponent(){return ra},legendSize:"text-sm",children:(_,N)=>{var D=fa(),k=r(D),S=r(k);P(()=>u(S,e(d).astuce)),i(_,D)},$$slots:{default:!0}})}),i(a,s)};h(C,a=>{m().length>0&&a(I)})}i(w,b),X()}export{Sa as R,Pa as a};
