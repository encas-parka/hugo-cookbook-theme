import{x as E,W as o,o as A,g as e,z as G,B as p,A as r,$ as h,u as x,X as w,a3 as ta,Y as u,v as i,w as W,G as sa,j as ra,au as T}from"./vendor.js";import{P as j}from"./appwrite.js";import{g as na}from"./products-display.js";import{F as Q}from"./Fieldset.js";import{D as B,a as ia,Z as oa,O as la}from"./icons.js";var va=o('<span class="ml-1 inline-flex align-middle print:hidden"><!></span>'),da=o('<span class="text-base-content/70 ml-1"> </span>'),pa=o('<span class="text-base-content/70 print-xs text-sm before:mx-1"> </span>'),ca=o('<li class="grid grid-cols-[auto_1fr] items-baseline gap-x-2 gap-y-0"><span class="truncate font-medium"> <!></span> <div class="flex flex-wrap items-baseline gap-x-1"><span><span class="tabular-nums"> </span> <span class="ml-1"> </span> <!></span> <!></div></li>'),ua=o('<ul class="break-inside-avoid space-y-2 print:space-y-1"></ul>'),ma=o('<div class="space-y-6 print:space-y-2"><!> <div class="text-base-content/60 flex items-center gap-1 text-sm"><!> <span>→ Allergènes</span></div></div>');function Pa(S,l){E(l,!0);const m=x(()=>l.servings/l.defaultServings),b=x(()=>{const a=new Map;return l.ingredients.forEach(s=>{const t=s.type||"Autres";a.has(t)||a.set(t,[]),a.get(t).push(s)}),a});function $(a){const s=j(a.originalQuantity,a.originalUnit,e(m)),t=j(a.normalizedQuantity,a.normalizedUnit,e(m));return{...a,originalDisplayQuantity:s.formattedNumber,originalDisplayUnit:s.unit,normalizedDisplayQuantity:t.formattedNumber,normalizedDisplayUnit:t.unit,hasDifferentQuantities:s.formattedNumber!==t.formattedNumber||s.unit!==t.unit}}var z=ma(),_=r(z);A(_,17,()=>[...e(b)],([a,s])=>a,(a,s)=>{var t=x(()=>sa(e(s),2));let v=()=>e(t)[0],g=()=>e(t)[1];const N=x(()=>na(v()));Q(a,{get legend(){return e(N).displayName},get iconComponent(){return e(N).icon},children:(D,k)=>{var P=ua();A(P,21,g,G,(X,c)=>{const f=x(()=>$(e(c)));var F=ca(),U=r(F),R=r(U),Y=p(R);{var Z=n=>{var d=va(),y=r(d);B(y,{class:"h-4 w-4 opacity-70"}),i(n,d)};h(Y,n=>{e(c).allergens&&e(c).allergens.length>0&&n(Z)})}var q=p(U,2),L=r(q),M=r(L),H=r(M),O=p(M,2),J=r(O),K=p(O,2);{var V=n=>{var d=da(),y=r(d);w(()=>u(y,`(${e(f).normalizedDisplayQuantity??""}
                    ${e(f).normalizedDisplayUnit??""})`)),i(n,d)};h(K,n=>{e(f).hasDifferentQuantities&&n(V)})}var aa=p(L,2);{var ea=n=>{var d=pa(),y=r(d);w(()=>u(y,`(${e(c).comment??""})`)),i(n,d)};h(aa,n=>{e(c).comment&&n(ea)})}w(()=>{ta(U,"title",e(c).name),u(R,`${e(c).name??""} : `),u(H,e(f).originalDisplayQuantity),u(J,e(f).originalDisplayUnit)}),i(X,F)}),i(D,P)},$$slots:{default:!0}})});var C=p(_,2),I=r(C);B(I,{class:"h-4 w-4"}),i(S,z),W()}var _a=o('<div class="prose max-w-none"><!></div>'),ga=o('<div class="prose max-w-none"><!></div>'),fa=o('<div class="flex items-start gap-2"><div class="text-sm"> </div></div>'),ya=o('<div class="space-y-2 print:space-y-1"></div>'),xa=o('<div class="space-y-4"><!> <!> <!></div>');function wa(S,l){E(l,!0);let m=ra(l,"astuces",19,()=>[]);var b=xa(),$=r(b);{var z=a=>{Q(a,{legend:"Préparation à l'avance",get iconComponent(){return oa},legendSize:"text-lg",iconSize:18,children:(s,t)=>{var v=_a(),g=r(v);T(g,{get source(){return l.preparation24h}}),i(s,v)},$$slots:{default:!0}})};h($,a=>{l.preparation24h&&a(z)})}var _=p($,2);Q(_,{legend:"Préparation",get iconComponent(){return ia},legendSize:"text-lg",children:(a,s)=>{var t=ga(),v=r(t);T(v,{get source(){return l.preparation}}),i(a,t)},$$slots:{default:!0}});var C=p(_,2);{var I=a=>{var s=ya();A(s,21,m,G,(t,v)=>{Q(t,{legend:"Astuces",get iconComponent(){return la},legendSize:"text-sm",children:(g,N)=>{var D=fa(),k=r(D),P=r(k);w(()=>u(P,e(v).astuce)),i(g,D)},$$slots:{default:!0}})}),i(a,s)};h(C,a=>{m().length>0&&a(I)})}i(S,b),W()}export{Pa as R,wa as a};
