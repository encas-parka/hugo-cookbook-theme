import{Z as H,x as J,W as v,B as c,A as r,$ as h,g as o,u as T,X as P,Y as M,v as n,w as K,b as W,aa as $,E as R,s as X,a as z,D as Y,o as ee}from"./vendor.B7h_mkEd.js";import{a as B,n as I,L as ae}from"./appwrite.5W8SCupm.js";import{U as N,ab as te,c as re,P as se}from"./icons.DKN5kzXq.js";import{C as oe,T as ne}from"./CreateTeamModal.Df7lWUPu.js";import{n as Z}from"./index.BUL8Pmq2.js";import"./editor.L4rklAfR.js";import"./markdown.BkFahWn2.js";import"./ConfirmModal.DRp-kO_g.js";import"./InfoCollapse.CWSikkxb.js";var ie=(i,a)=>a.onClick(a.team.$id),de=(i,a)=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),a.onClick(a.team.$id))},le=v('<p class="text-base-content/70 mb-2 line-clamp-2 text-sm"> </p>'),ve=v('<div class="badge badge-warning badge-sm gap-1"> </div>'),ce=(i,a)=>{i.stopPropagation(),a()},me=v(`<button class="btn btn-ghost btn-xs text-error" title="Quitter l'équipe"><!> Quitter</button>`),ue=v("<span></span>"),be=v('<div class="card bg-base-100 border-base-200 hover:border-primary/50 group cursor-pointer border text-left shadow-xl transition-all hover:shadow-2xl" role="button" tabindex="0"><div class="card-body"><div class="mb-2 flex items-start justify-between"><h3 class="card-title group-hover:text-primary text-lg transition-colors"> </h3></div> <!> <div class="text-base-content/70 mt-2 flex items-center gap-4 text-sm"><div class="flex items-center gap-1"><!> <span> </span></div> <!></div> <div class="card-actions mt-4 justify-between"><!> <span class="text-primary flex items-center gap-1 text-xs font-semibold opacity-0 transition-opacity group-hover:opacity-100">Gérer <!></span></div></div></div>');function _e(i,a){J(a,!0);const q=T(()=>{const e=B.userId;return e&&a.team.members.find(l=>l.id===e)?.roles?.[0]||null}),b=T(()=>a.team.members.filter(e=>e.confirmed)),_=T(()=>a.team.members.filter(e=>!e.confirmed).length),w=T(()=>a.team.prefs?.description),E=T(()=>{const e=a.team.members.find(t=>t.id===B.userId);return e&&e.confirmed});async function D(){const e=a.team.members.find(t=>t.id===B.userId);e&&e.roles?.[0]!=="owner"&&await I.removeMember(a.teamId,e.$id)}var g=be();g.__click=[ie,a],g.__keydown=[de,a];var U=r(g),y=r(U),L=r(y),O=r(L),A=c(y,2);{var S=e=>{var t=le(),l=r(t);P(()=>M(l,o(w))),n(e,t)};h(A,e=>{o(w)&&e(S)})}var j=c(A,2),s=r(j),d=r(s);N(d,{class:"h-4 w-4"});var k=c(d,2),Q=r(k),V=c(s,2);{var m=e=>{var t=ve(),l=r(t);P(()=>M(l,`${o(_)??""} invitation${o(_)>1?"s":""}`)),n(e,t)};h(V,e=>{o(q)==="owner"&&o(_)>0&&e(m)})}var f=c(j,2),x=r(f);{var C=e=>{var t=me();t.__click=[ce,D];var l=r(t);re(l,{class:"h-4 w-4"}),n(e,t)},G=e=>{var t=ue();n(e,t)};h(x,e=>{o(E)&&o(q)!=="owner"?e(C):e(G,!1)})}var u=c(x,2),p=c(r(u));te(p,{class:"h-4 w-4"}),P(()=>{M(O,a.team.name),M(Q,`${o(b).length??""} membre${o(b).length>1?"s":""}`)}),n(i,g),K()}H(["click","keydown"]);function F(i,a){z(a,!0)}var fe=v('<button class="btn btn-primary"><!> Créer une équipe</button>'),pe=v('<div class="alert alert-warning"><span>Vous devez être connecté pour voir vos équipes</span></div>'),ge=v('<div class="alert alert-error shadow-lg"><span> </span></div>'),xe=v(`<div class="bg-base-200 rounded-box border-base-200 border-2 border-dashed py-20 text-center"><div class="bg-base-200 mb-4 inline-block rounded-full p-4"><!></div> <h3 class="mb-2 text-lg font-bold">Aucune équipe</h3> <p class="text-base-content/60 mb-6">Vous n'avez pas encore créé ou rejoint d'équipe.</p> <button class="btn btn-primary btn-sm">Créer ma première équipe</button></div>`),he=v('<div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3"></div>'),we=v('<div class="mx-auto max-w-7xl px-4 py-8"><!></div> <!> <!>',1);function Ae(i,a){J(a,!0);const q=s=>{var d=fe();d.__click=[F,b];var k=r(d);se(k,{class:"h-4 w-4"}),n(s,d)};let b=X(!1),_=X(null);function w(s){z(_,s,!0)}function E(){z(_,null)}function D(){z(b,!1)}function g(s){D(),w(s)}W(()=>{ae()}),W(()=>{Z.setConfig({title:"Équipes",actions:q})}),$(()=>{Z.reset()});var U=we(),y=R(U),L=r(y);{var O=s=>{var d=pe();n(s,d)},A=s=>{var d=Y(),k=R(d);{var Q=m=>{var f=ge(),x=r(f),C=r(x);P(()=>M(C,I.error)),n(m,f)},V=m=>{var f=Y(),x=R(f);{var C=u=>{var p=xe(),e=r(p),t=r(e);N(t,{class:"h-8 w-8 opacity-50"});var l=c(e,6);l.__click=[F,b],n(u,p)},G=u=>{var p=he();ee(p,21,()=>I.teams,e=>e.$id,(e,t)=>{_e(e,{get team(){return o(t)},get teamId(){return o(t).$id},onClick:l=>w(l)})}),n(u,p)};h(x,u=>{I.count===0?u(C):u(G,!1)},!0)}n(m,f)};h(k,m=>{I.error?m(Q):m(V,!1)},!0)}n(s,d)};h(L,s=>{B.isAuthenticated?s(A,!1):s(O)})}var S=c(y,2);oe(S,{get isOpen(){return o(b)},onClose:D,onSuccess:g});var j=c(S,2);ne(j,{get teamId(){return o(_)},onClose:E}),n(i,U),K()}H(["click"]);export{Ae as default};
