import{j as Ve,D as Q,E as L,$ as l,v as s,W as v,B as n,A as t,X as b,Y as g,a2 as Xe,b as _e,aa as Ye,w as Ge,x as Je,g as e,u as H,a as h,s as M,Z as Ke,a3 as $e,al as ea,o as X,z as Y}from"./vendor.B7h_mkEd.js";import{z as aa,a as O,y as fe,B as ra}from"./appwrite.5W8SCupm.js";import{R as ta}from"./RecipeRegimeBadges.DVWfhtza.js";import{R as sa,a as ia}from"./RecipePreparation.naNSO7Is.js";import{Z as na,s as va,_ as da,U as oa}from"./icons.DKN5kzXq.js";import{R as la,a as ca}from"./RecipeVariants.EfVM0X_t.js";import{n as ge}from"./index.BUL8Pmq2.js";import"./editor.L4rklAfR.js";import"./markdown.BkFahWn2.js";import"./products-display.CZc2PMhO.js";import"./Fieldset.Dv39p1Lh.js";var pa=v('<div class="text-base-content/70 text-sm"> <!></div>'),ua=v(`<div class="alert alert-error alert-soft"><!> <div class="text-sm">Les auteur·ices de la recette ne l'ont <strong>pas testé</strong> </div></div>`);function _a(S,p){let q=Ve(p,"isChecked",3,!1);var f=Q(),B=L(f);{var R=_=>{var A=pa(),I=t(A),z=n(I);{var D=U=>{var Z=Xe();b(()=>g(Z,`et pour ${p.checkedFor??""} couverts`)),s(U,Z)};l(z,U=>{p.checkedFor&&U(D)})}b(()=>g(I,`Cette recette a été testée pour ${p.defaultServings??""} couverts `)),s(_,A)},a=_=>{var A=ua(),I=t(A);na(I,{class:"h-5 w-5"});var z=n(I,2),D=n(t(z),2);b(()=>g(D,` pour le
      nombre de couverts indiqué par défaut (${p.defaultServings??""}).`)),s(_,A)};l(B,_=>{q()?_(R):_(a,!1)})}s(S,f)}function ga(S,p){const q=S.target,f=parseInt(q.value);!isNaN(f)&&f>0&&h(p,f,!0)}var fa=(S,p)=>fe(`/recipe/${e(p)?.$id}/duplicate`),ma=(S,p)=>fe(`/recipe/${e(p)?.$id}/edit`),ba=v('<button class="btn btn-primary"><!> Éditer</button>'),xa=v('<div class="flex items-center gap-4"><button class="btn btn-secondary"><!> Créer une version alternative</button> <!></div>'),ha=v('<div class="flex items-center justify-center py-20"><div class="loading loading-spinner loading-lg"></div></div>'),ya=v('<div class="alert alert-error"><div><h3 class="font-bold">Erreur</h3> <div> </div></div></div>'),wa=v("<div><!></div>"),ka=v('<p class="text-base-content/60 text-lg print:text-sm"> </p>'),Ra=v('<div class="mb-2"><span class="badge badge-primary badge-soft"> </span></div>'),Aa=v('<div class="mb-2 flex flex-wrap gap-2 print:hidden"><!> <p class="text-base-content/70 text-base italic"> </p></div>'),Sa=v('<span class="badge badge-warning">Servir Chaud</span>'),Ia=v('<span class="badge badge-info">Servir Froid</span>'),Ca=v('<div class="mb-2"><!></div>'),Ba=v('<span class="badge badge-warning">Avec Cuisson</span>'),Da=v('<span class="badge badge-info">Sans Cuisson</span>'),Ea=v('<div class="mb-2"><!></div>'),ja=v('<span class="badge badge-error"> </span>'),qa=v('<div class="flex w-fit flex-wrap items-center gap-2"><span class="text-base-content/70 font-semibold">Allergenes :</span> <!></div>'),za=v('<span class="badge"> </span>'),Ua=v('<div class="flex flex-wrap gap-2"></div>'),Fa=v('<p class="text-end text-base"> </p>'),Na=v('<div class="mt-8 print:hidden"><!></div>'),Pa=v('<div class="card bg-base-100"><div class="card-body"><div class="mb-4 print:mb-2"><div class="flex items-center justify-between gap-x-10 gap-y-4"><h1 class="flex items-center gap-3 text-2xl font-bold print:text-xl"><svg class="me-2 size-9"><use></use></svg> </h1> <!></div> <!></div> <!> <div class="border-base-300 mb-6 border-b pb-4 print:mb-1 print:pb-2"><div class="flex flex-wrap items-center justify-between gap-4"><div class="flex gap-2"><!> <!></div> <!> <!></div></div> <div class="mb-6 flex flex-wrap items-center justify-between gap-6 print:hidden"><div class="flex items-center gap-4"><label for="servings-input" class="flex items-center gap-2 font-medium"><!> Nombre de couverts à servir :</label> <input id="servings-input" type="number" min="1" class="input input-bordered input-primary w-24"/></div> <!></div> <div class="flex justify-between"><p class="print-only font-medium"> </p> <!></div> <div class="mt-8 grid grid-cols-1 gap-8 lg:grid-cols-3 print:mt-2 print:grid-cols-10 print:gap-4" style="break-before: avoid;"><div class=" lg:col-span-1 print:col-span-4"><div class="sticky top-4 print:static"><!></div></div> <div class="lg:col-span-2 print:col-span-6"><!></div></div></div></div> <!> <!>',1),Wa=v('<div class="mx-auto max-w-7xl px-4 py-8"><!></div>');function Ja(S,p){Je(p,!0);const q=u=>{var o=Q(),F=L(o);{var T=N=>{var y=xa(),w=t(y);w.__click=[fa,a];var P=t(w);va(P,{size:18});var W=n(w,2);{var C=E=>{var j=ba();j.__click=[ma,a];var V=t(j);da(V,{size:18}),s(E,j)};l(W,E=>{(e(a).permissionWrite&&O.userId&&e(a).permissionWrite.includes(O.userId)||e(a).createdBy&&e(a).createdBy===O.userId)&&E(C)})}s(N,y)};l(F,N=>{O.isAuthenticated&&e(a)&&N(T)})}s(u,o)};let f=H(()=>p.params?.uuid),B=M(!0),R=M(null),a=M(null),_=M(4);_e(()=>{e(f)?I(e(f)):(h(R,"UUID de recette manquant"),h(B,!1))});const A=H(()=>{if(!e(a)?.ingredients)return[];const u=new Set;return e(a).ingredients.forEach(o=>{o.allergens&&Array.isArray(o.allergens)&&o.allergens.forEach(F=>u.add(F))}),Array.from(u).sort()});async function I(u){h(B,!0),h(R,null);try{const o=await aa.getRecipeByUuid(u);if(!o){h(R,"Impossible de charger les détails de la recette");return}h(a,o,!0),h(_,o.plate,!0)}catch(o){console.error("Erreur lors du chargement de la recette:",o),h(R,o instanceof Error?o.message:"Erreur lors du chargement",!0)}finally{h(B,!1)}}_e(()=>{ge.setConfig({title:e(a)?.title||"Recette",actions:q})}),Ye(()=>{ge.reset()});const z=H(()=>e(a)?ra(e(a).typeR,e(a).categories||void 0):{label:"",iconId:"no-cat"});var D=Wa(),U=t(D);{var Z=u=>{var o=ha();s(u,o)},me=u=>{var o=Q(),F=L(o);{var T=y=>{var w=ya(),P=t(w),W=n(t(P),2),C=t(W);b(()=>g(C,e(R))),s(y,w)},N=y=>{var w=Q(),P=L(w);{var W=C=>{var E=Pa(),j=L(E),V=t(j),G=t(V),J=t(G),K=t(J),$=t(K),be=t($),xe=n($),he=n(K,2);{var ye=r=>{var i=wa(),c=t(i);ta(c,{get regimes(){return e(a).regime},iconOnly:!1}),s(r,i)};l(he,r=>{e(a)?.regime&&e(a).regime.length>0&&r(ye)})}var we=n(J,2);{var ke=r=>{var i=ka(),c=t(i);b(()=>g(c,`une recette de ${e(a).auteur??""}`)),s(r,i)};l(we,r=>{e(a).auteur&&r(ke)})}var ee=n(G,2);{var Re=r=>{var i=Aa(),c=t(i);X(c,17,()=>e(a).categories,Y,(d,m)=>{var ue=Ra(),Qe=t(ue),Te=t(Qe);b(()=>g(Te,e(m))),s(d,ue)});var k=n(c,2),x=t(k);b(()=>g(x,e(a).description)),s(r,i)};l(ee,r=>{(e(a).description||e(a).categories&&e(a).categories.length>0)&&r(Re)})}var ae=n(ee,2),Ae=t(ae),re=t(Ae),te=t(re);{var Se=r=>{var i=Ca(),c=t(i);{var k=d=>{var m=Sa();s(d,m)},x=d=>{var m=Ia();s(d,m)};l(c,d=>{e(a).serveHot?d(k):d(x,!1)})}s(r,i)};l(te,r=>{e(a)?.serveHot!==void 0&&r(Se)})}var Ie=n(te,2);{var Ce=r=>{var i=Ea(),c=t(i);{var k=d=>{var m=Ba();s(d,m)},x=d=>{var m=Da();s(d,m)};l(c,d=>{e(a).cuisson?d(k):d(x,!1)})}s(r,i)};l(Ie,r=>{e(a)?.cuisson!==void 0&&r(Ce)})}var se=n(re,2);{var Be=r=>{var i=qa(),c=n(t(i),2);X(c,17,()=>e(A),Y,(k,x)=>{var d=ja(),m=t(d);b(()=>g(m,e(x))),s(k,d)}),s(r,i)};l(se,r=>{e(A).length>0&&r(Be)})}var De=n(se,2);{var Ee=r=>{var i=Ua();X(i,21,()=>e(a).materiel,Y,(c,k)=>{var x=za(),d=t(x);b(()=>g(d,e(k))),s(c,x)}),s(r,i)};l(De,r=>{e(a)?.materiel&&e(a).materiel.length>0&&r(Ee)})}var ie=n(ae,2),ne=t(ie),ve=t(ne),je=t(ve);oa(je,{class:"h-5 w-5"});var de=n(ve,2);de.__input=[ga,_];var qe=n(ne,2);{var ze=r=>{_a(r,{get isChecked(){return e(a).check},get defaultServings(){return e(a).plate}})};l(qe,r=>{e(a).check!==void 0&&r(ze)})}var oe=n(ie,2),le=t(oe),Ue=t(le),Fe=n(le,2);{var Ne=r=>{var i=Fa(),c=t(i);b(()=>g(c,e(a).quantite_desc)),s(r,i)};l(Fe,r=>{e(a).quantite_desc&&r(Ne)})}var Pe=n(oe,2),ce=t(Pe),We=t(ce),He=t(We);sa(He,{get ingredients(){return e(a).ingredients},get servings(){return e(_)},get defaultServings(){return e(a).plate}});var Le=n(ce,2),Ze=t(Le);{let r=H(()=>e(a).preparation24h||void 0),i=H(()=>e(a).astuces||[]);ia(Ze,{get preparation(){return e(a).preparation},get preparation24h(){return e(r)},get astuces(){return e(i)}})}var pe=n(j,2);{var Me=r=>{var i=Na(),c=t(i);ca(c,{get recipeId(){return e(f)}}),s(r,i)};l(pe,r=>{e(f)&&r(Me)})}var Oe=n(pe,2);la(Oe,{get auteur(){return e(a).auteur},get createdBy(){return e(a).createdBy},get id(){return e(a).$id},get createdAt(){return e(a).$createdAt},get updatedAt(){return e(a).$updatedAt}}),b(()=>{$e(be,"href",`/icons/sprite.svg#${e(z).iconId}`),g(xe,` ${e(a).title??""}`),ea(de,e(_)),g(Ue,`Quantité pour ${e(_)??""} couverts`)}),s(C,E)};l(P,C=>{e(a)&&C(W)},!0)}s(y,w)};l(F,y=>{e(R)?y(T):y(N,!1)},!0)}s(u,o)};l(U,u=>{e(B)?u(Z):u(me,!1)})}s(S,D),Ge()}Ke(["click","input"]);export{Ja as default};
