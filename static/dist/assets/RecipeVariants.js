import"./icons.js";import{d as T,V as c,h as s,g as t,a2 as _,W as u,X as l,b as d,c as q,Z as J,q as S,Y as K,af as N,j as B,k as L,m as r,v as V,a6 as P,u as Q,e as U,a0 as $,i as aa}from"./appwrite.js";var ea=c('<div><span class="font-semibold">Modifié le :</span> </div>'),ta=c('<div class="bg-base-200 rounded-box mt-12 p-6 text-sm opacity-60 print:hidden"><div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"><div><span class="font-semibold">Auteur :</span> </div> <div><span class="font-semibold">ID :</span> <span class="font-mono"> </span></div> <div><span class="font-semibold">Créé le :</span> </div> <!></div></div>');function ca(b,a){T(a,!0);var m=ta(),h=t(m),g=t(h),A=s(t(g)),o=s(g,2),x=s(t(o),2),I=t(x),w=s(o,2),D=s(t(w)),e=s(w,2);{var n=i=>{var y=ea(),f=s(t(y));u(k=>l(f,` ${k??""}`),[()=>new Intl.DateTimeFormat("fr-FR",{dateStyle:"long",timeStyle:"short"}).format(new Date(a.updatedAt))]),d(i,y)};_(e,i=>{a.updatedAt&&a.updatedAt!==a.createdAt&&i(n)})}u(i=>{l(A,` ${(a.auteur||a.createdBy||"Inconnu")??""}`),l(I,a.id),l(D,` ${i??""}`)},[()=>new Intl.DateTimeFormat("fr-FR",{dateStyle:"long",timeStyle:"short"}).format(new Date(a.createdAt))]),d(b,m),q()}var ra=c('<div class="card bg-base-100 mt-4 shadow-sm"><div class="card-body p-4"><div class="loading loading-spinner loading-sm"></div></div></div>'),sa=(b,a)=>$(`/recipe/${r(a).$id}`),ia=c('<span class="badge badge-ghost badge-xs"> </span>'),da=c('<span class="badge badge-primary badge-xs badge-soft">Originale</span>'),na=c('<button class="btn btn-ghost"><div class="flex items-center gap-2 text-sm"> <!> <!></div></button>'),oa=c('<div class="card bg-base-100 mt-4 shadow-sm"><div class="card-body p-4"><h4 class="card-title flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg> </h4> <div class="flex flex-wrap gap-4"></div></div></div>');function ga(b,a){T(a,!0);let m=S(K([])),h=S(null),g=S(!0);async function A(){V(g,!0);try{const e=await P.getVariantGroup(a.recipeId,2);V(h,e.root,!0),V(m,e.variants.sort((n,i)=>n.title.localeCompare(i.title,"fr-FR")),!0)}catch(e){console.error("[RecipeVariants] Erreur chargement:",e)}finally{V(g,!1)}}N(()=>{A()});let o=Q(()=>r(m).filter(e=>e.$id!==a.recipeId));var x=B(),I=L(x);{var w=e=>{var n=ra();d(e,n)},D=e=>{var n=B(),i=L(n);{var y=f=>{var k=oa(),z=t(k),M=t(z),E=s(t(M)),G=s(M,2);U(G,21,()=>r(o),aa,(H,p)=>{var F=na();F.__click=[sa,p];var O=t(F),C=t(O),j=s(C);{var W=v=>{var R=ia(),Z=t(R);u(()=>l(Z,r(p).versionLabel)),d(v,R)};_(j,v=>{r(p).versionLabel&&v(W)})}var X=s(j,2);{var Y=v=>{var R=da();d(v,R)};_(X,v=>{r(p).$id===r(h)?.$id&&v(Y)})}u(()=>l(C,`${r(p).title??""} `)),d(H,F)}),u(()=>l(E,` ${r(o).length??""} variante${r(o).length>1?"s":""}
        de cette recette`)),d(f,k)};_(i,f=>{r(o).length>0&&f(y)},!0)}d(e,n)};_(I,e=>{r(g)?e(w):e(D,!1)})}d(b,x),q()}J(["click"]);export{ca as R,ga as a};
