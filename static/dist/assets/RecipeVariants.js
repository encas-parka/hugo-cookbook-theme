import{y as U}from"./icons.js";import{d as O,v as m,h as i,g as r,I as A,w as I,x as g,b as n,c as Z,o as e,B as W,y as M,z as X,Z as Y,j as G,k as J,m as s,A as D,J as $,u as aa,e as ea,E as ta,i as ra}from"./appwrite.js";var sa=m('<div><span class="font-semibold">Modifié le :</span> </div>'),ia=m('<div class="bg-base-200 rounded-box mt-12 p-6 text-sm opacity-60 print:hidden"><div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"><div><span class="font-semibold">Auteur :</span> </div> <div><span class="font-semibold">ID :</span> <span class="font-mono"> </span></div> <div><span class="font-semibold">Créé le :</span> </div> <!></div></div>');function ma(F,t){O(t,!0);var f=ia(),p=r(f),l=r(p),S=i(r(l));e(l);var o=i(l,2),_=i(r(o),2),V=r(_,!0);e(_),e(o);var u=i(o,2),k=i(r(u));e(u);var a=i(u,2);{var v=d=>{var b=sa(),h=i(r(b));e(b),I(x=>g(h,` ${x??""}`),[()=>new Intl.DateTimeFormat("fr-FR",{dateStyle:"long",timeStyle:"short"}).format(new Date(t.updatedAt))]),n(d,b)};A(a,d=>{t.updatedAt&&t.updatedAt!==t.createdAt&&d(v)})}e(p),e(f),I(d=>{g(S,` ${(t.auteur||t.createdBy||"Inconnu")??""}`),g(V,t.id),g(k,` ${d??""}`)},[()=>new Intl.DateTimeFormat("fr-FR",{dateStyle:"long",timeStyle:"short"}).format(new Date(t.createdAt))]),n(F,f),Z()}var da=m('<div class="card bg-base-100 mt-4 shadow-sm"><div class="card-body p-4"><div class="loading loading-spinner loading-sm"></div></div></div>'),na=m('<span class="badge badge-ghost badge-xs"> </span>'),oa=m('<span class="badge badge-primary badge-xs badge-soft">Originale</span>'),va=m('<button class="btn btn-ghost"><div class="flex items-center gap-2 text-sm"> <!> <!></div></button>'),la=m('<div class="card bg-base-100 mt-4 shadow-sm"><div class="card-body p-4"><h4 class="card-title flex items-center gap-2"><!> </h4> <div class="flex flex-wrap gap-4"></div></div></div>');function fa(F,t){O(t,!0);let f=M(X([])),p=M(null),l=M(!0);async function S(){D(l,!0);try{const a=await $.getVariantGroup(t.recipeId,2);D(p,a.root,!0),D(f,a.variants.sort((v,d)=>v.title.localeCompare(d.title,"fr-FR")),!0)}catch(a){console.error("[RecipeVariants] Erreur chargement:",a)}finally{D(l,!1)}}Y(()=>{S()});let o=aa(()=>s(f).filter(a=>a.$id!==t.recipeId));var _=G(),V=J(_);{var u=a=>{var v=da();n(a,v)},k=a=>{var v=G(),d=J(v);{var b=h=>{var x=la(),B=r(x),C=r(B),E=r(C);U(E,{class:"h-4 w-4"});var q=i(E);e(C);var L=i(C,2);ea(L,21,()=>s(o),ra,(H,y)=>{var R=va();R.__click=()=>ta(`/recipe/${s(y).$id}`);var T=r(R),j=r(T),z=i(j);{var K=c=>{var w=na(),Q=r(w,!0);e(w),I(()=>g(Q,s(y).versionLabel)),n(c,w)};A(z,c=>{s(y).versionLabel&&c(K)})}var N=i(z,2);{var P=c=>{var w=oa();n(c,w)};A(N,c=>{s(y).$id===s(p)?.$id&&c(P)})}e(T),e(R),I(()=>g(j,`${s(y).title??""} `)),n(H,R)}),e(L),e(B),e(x),I(()=>g(q,` ${s(o).length??""} variante${s(o).length>1?"s":""}
        de cette recette`)),n(h,x)};A(d,h=>{s(o).length>0&&h(b)},!0)}n(a,v)};A(V,a=>{s(l)?a(u):a(k,!1)})}n(F,_),Z()}W(["click"]);export{ma as R,fa as a};
