import{u as K}from"./icons.js";import{d as B,V as c,h as s,g as t,a2 as p,W as u,X as l,b as d,c as E,Z as N,q as S,Y as P,ag as Q,j,k as q,m as r,v as I,a3 as U,u as $,e as aa,a0 as ea,i as ta}from"./appwrite.js";var ra=c('<div><span class="font-semibold">Modifié le :</span> </div>'),sa=c('<div class="bg-base-200 rounded-box mt-12 p-6 text-sm opacity-60 print:hidden"><div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"><div><span class="font-semibold">Auteur :</span> </div> <div><span class="font-semibold">ID :</span> <span class="font-mono"> </span></div> <div><span class="font-semibold">Créé le :</span> </div> <!></div></div>');function ma(b,a){B(a,!0);var m=sa(),h=t(m),g=t(h),V=s(t(g)),o=s(g,2),x=s(t(o),2),k=t(x),y=s(o,2),D=s(t(y)),e=s(y,2);{var n=i=>{var w=ra(),f=s(t(w));u(R=>l(f,` ${R??""}`),[()=>new Intl.DateTimeFormat("fr-FR",{dateStyle:"long",timeStyle:"short"}).format(new Date(a.updatedAt))]),d(i,w)};p(e,i=>{a.updatedAt&&a.updatedAt!==a.createdAt&&i(n)})}u(i=>{l(V,` ${(a.auteur||a.createdBy||"Inconnu")??""}`),l(k,a.id),l(D,` ${i??""}`)},[()=>new Intl.DateTimeFormat("fr-FR",{dateStyle:"long",timeStyle:"short"}).format(new Date(a.createdAt))]),d(b,m),E()}var ia=c('<div class="card bg-base-100 mt-4 shadow-sm"><div class="card-body p-4"><div class="loading loading-spinner loading-sm"></div></div></div>'),da=(b,a)=>ea(`/recipe/${r(a).$id}`),na=c('<span class="badge badge-ghost badge-xs"> </span>'),oa=c('<span class="badge badge-primary badge-xs badge-soft">Originale</span>'),va=c('<button class="btn btn-ghost"><div class="flex items-center gap-2 text-sm"> <!> <!></div></button>'),la=c('<div class="card bg-base-100 mt-4 shadow-sm"><div class="card-body p-4"><h4 class="card-title flex items-center gap-2"><!> </h4> <div class="flex flex-wrap gap-4"></div></div></div>');function fa(b,a){B(a,!0);let m=S(P([])),h=S(null),g=S(!0);async function V(){I(g,!0);try{const e=await U.getVariantGroup(a.recipeId,2);I(h,e.root,!0),I(m,e.variants.sort((n,i)=>n.title.localeCompare(i.title,"fr-FR")),!0)}catch(e){console.error("[RecipeVariants] Erreur chargement:",e)}finally{I(g,!1)}}Q(()=>{V()});let o=$(()=>r(m).filter(e=>e.$id!==a.recipeId));var x=j(),k=q(x);{var y=e=>{var n=ia();d(e,n)},D=e=>{var n=j(),i=q(n);{var w=f=>{var R=la(),G=t(R),C=t(G),M=t(C);K(M,{class:"h-4 w-4"});var O=s(M),W=s(C,2);aa(W,21,()=>r(o),ta,(X,_)=>{var F=va();F.__click=[da,_];var Y=t(F),L=t(Y),T=s(L);{var Z=v=>{var A=na(),J=t(A);u(()=>l(J,r(_).versionLabel)),d(v,A)};p(T,v=>{r(_).versionLabel&&v(Z)})}var z=s(T,2);{var H=v=>{var A=oa();d(v,A)};p(z,v=>{r(_).$id===r(h)?.$id&&v(H)})}u(()=>l(L,`${r(_).title??""} `)),d(X,F)}),u(()=>l(O,` ${r(o).length??""} variante${r(o).length>1?"s":""}
        de cette recette`)),d(f,R)};p(i,f=>{r(o).length>0&&f(w)},!0)}d(e,n)};p(k,e=>{r(g)?e(y):e(D,!1)})}d(b,x),E()}N(["click"]);export{ma as R,fa as a};
