(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const Jt=!1;var Qt=Array.isArray,Oe=Array.prototype.indexOf,Re=Array.from,Ct=Object.defineProperty,it=Object.getOwnPropertyDescriptor,Ne=Object.prototype,ke=Array.prototype,Fe=Object.getPrototypeOf,Mt=Object.isExtensible;const De=()=>{};function $e(t){for(var e=0;e<t.length;e++)t[e]()}function Le(){var t,e,n=new Promise((r,s)=>{t=r,e=s});return{promise:n,resolve:t,reject:e}}const S=2,Zt=4,Me=8,G=16,W=32,H=64,Ot=128,R=256,gt=512,b=1024,N=2048,B=4096,X=8192,ft=16384,Rt=32768,Xt=65536,jt=1<<17,je=1<<18,ct=1<<19,Ue=1<<20,It=1<<21,Nt=1<<22,wt=1<<23,Pt=Symbol("$state"),te=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ee(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function qe(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ze(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function We(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Be(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ve(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ke(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ye(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ge(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const m=Symbol();function He(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function ne(t){return t===this.v}let Je=!1,x=null;function mt(t){x=t}function re(t,e=!1,n){x={p:x,c:null,e:null,s:t,x:null,l:null}}function se(t){var e=x,n=e.e;if(n!==null){e.e=null;for(var r of n)pe(r)}return x=e.p,{}}function ie(){return!0}let Q=[];function Qe(){var t=Q;Q=[],$e(t)}function ot(t){if(Q.length===0){var e=Q;queueMicrotask(()=>{e===Q&&Qe()})}Q.push(t)}const Ze=new WeakMap;function le(t){var e=v;if(e===null)return _.f|=wt,t;if((e.f&Rt)===0){if((e.f&Ot)===0)throw!e.parent&&t instanceof Error&&oe(t),t;e.b.error(t)}else yt(t,e)}function yt(t,e){for(;e!==null;){if((e.f&Ot)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&oe(t),t}function oe(t){const e=Ze.get(t);e&&(Ct(t,"message",{value:e.message}),Ct(t,"stack",{value:e.stack}))}const pt=new Set;let P=null,xt=new Set,j=[],kt=null,Tt=!1;class A{current=new Map;#t=new Map;#e=new Set;#r=0;#n=null;#o=[];#s=[];#l=[];#i=[];#u=[];#f=[];skipped_effects=new Set;process(e){j=[];var n=A.apply(this);for(const i of e)this.#h(i);if(this.#r===0){this.#d();var r=this.#s,s=this.#l;this.#s=[],this.#l=[],this.#i=[],P=null,Ut(r),Ut(s),this.#n?.resolve()}else this.#c(this.#s),this.#c(this.#l),this.#c(this.#i);n();for(const i of this.#o)at(i);this.#o=[]}#h(e){e.f^=b;for(var n=e.first;n!==null;){var r=n.f,s=(r&(W|H))!==0,i=s&&(r&b)!==0,o=i||(r&X)!==0||this.skipped_effects.has(n);if(!o&&n.fn!==null){s?n.f^=b:(r&Zt)!==0?this.#l.push(n):(r&b)===0&&((r&Nt)!==0&&n.b?.is_pending()?this.#o.push(n):bt(n)&&((n.f&G)!==0&&this.#i.push(n),at(n)));var u=n.first;if(u!==null){n=u;continue}}var l=n.parent;for(n=n.next;n===null&&l!==null;)n=l.next,l=l.parent}}#c(e){for(const n of e)((n.f&N)!==0?this.#u:this.#f).push(n),I(n,b);e.length=0}capture(e,n){this.#t.has(e)||this.#t.set(e,n),this.current.set(e,e.v)}activate(){P=this}deactivate(){P=null}flush(){if(j.length>0){if(this.activate(),Xe(),P!==null&&P!==this)return}else this.#r===0&&this.#d();this.deactivate();for(const e of xt)if(xt.delete(e),e(),P!==null)break}#d(){for(const e of this.#e)e();if(this.#e.clear(),pt.size>1){this.#t.clear();let e=!0;for(const n of pt){if(n===this){e=!1;continue}for(const[r,s]of this.current){if(n.current.has(r))if(e)n.current.set(r,s);else continue;ue(r)}if(j.length>0){P=n;const r=A.apply(n);for(const s of j)n.#h(s);j=[],r()}}P=null}pt.delete(this)}increment(){this.#r+=1}decrement(){this.#r-=1;for(const e of this.#u)I(e,N),tt(e);for(const e of this.#f)I(e,B),tt(e);this.flush()}add_callback(e){this.#e.add(e)}settled(){return(this.#n??=Le()).promise}static ensure(){if(P===null){const e=P=new A;pt.add(P),A.enqueue(()=>{P===e&&e.flush()})}return P}static enqueue(e){ot(e)}static apply(e){return De}}function Xe(){var t=Z;Tt=!0;try{var e=0;for(zt(!0);j.length>0;){var n=A.ensure();if(e++>1e3){var r,s;tn()}n.process(j),q.clear()}}finally{Tt=!1,zt(t),kt=null}}function tn(){try{Be()}catch(t){yt(t,kt)}}let K=null;function Ut(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(ft|X))===0&&bt(r)&&(K=[],at(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?we(r):r.fn=null),K?.length>0)){q.clear();for(const s of K)at(s);K=[]}}K=null}}function ue(t){if(t.reactions!==null)for(const e of t.reactions){const n=e.f;(n&S)!==0?ue(e):(n&(Nt|G))!==0&&(I(e,N),tt(e))}}function tt(t){for(var e=kt=t;e.parent!==null;){e=e.parent;var n=e.f;if(Tt&&e===v&&(n&G)!==0)return;if((n&(H|W))!==0){if((n&b)===0)return;e.f^=b}}j.push(e)}function Ft(t){let e=0,n=$t(0),r;return()=>{hn()&&(a(n),pn(()=>(e===0&&(r=St(()=>t(()=>lt(n)))),e+=1,()=>{ot(()=>{e-=1,e===0&&(r?.(),r=void 0,lt(n))})})))}}var en=Xt|ct|Ot;function nn(t,e,n){new rn(t,e,n)}class rn{parent;#t=!1;#e;#r=null;#n;#o;#s;#l=null;#i=null;#u=null;#f=null;#h=0;#c=0;#d=!1;#_=null;#g=()=>{this.#_&&ce(this.#_,this.#h)};#w=Ft(()=>(this.#_=$t(this.#h),()=>{this.#_=null}));constructor(e,n,r){this.#e=e,this.#n=n,this.#o=r,this.parent=v.b,this.#t=!!this.#n.pending,this.#s=vn(()=>{v.b=this;{try{this.#l=V(()=>r(this.#e))}catch(s){this.error(s)}this.#c>0?this.#p():this.#t=!1}},en)}#m(){try{this.#l=V(()=>this.#o(this.#e))}catch(e){this.error(e)}this.#t=!1}#y(){const e=this.#n.pending;e&&(this.#i=V(()=>e(this.#e)),A.enqueue(()=>{this.#l=this.#v(()=>(A.ensure(),V(()=>this.#o(this.#e)))),this.#c>0?this.#p():(vt(this.#i,()=>{this.#i=null}),this.#t=!1)}))}is_pending(){return this.#t||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#v(e){var n=v,r=_,s=x;z(this.#s),O(this.#s),mt(this.#s.ctx);try{return e()}catch(i){return le(i),null}finally{z(n),O(r),mt(s)}}#p(){const e=this.#n.pending;this.#l!==null&&(this.#f=document.createDocumentFragment(),sn(this.#l,this.#f)),this.#i===null&&(this.#i=V(()=>e(this.#e)))}#a(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#a(e);return}this.#c+=e,this.#c===0&&(this.#t=!1,this.#i&&vt(this.#i,()=>{this.#i=null}),this.#f&&(this.#e.before(this.#f),this.#f=null),ot(()=>{A.ensure().flush()}))}update_pending_count(e){this.#a(e),this.#h+=e,xt.add(this.#g)}get_effect_pending(){return this.#w(),a(this.#_)}error(e){var n=this.#n.onerror;let r=this.#n.failed;if(this.#d||!n&&!r)throw e;this.#l&&(D(this.#l),this.#l=null),this.#i&&(D(this.#i),this.#i=null),this.#u&&(D(this.#u),this.#u=null);var s=!1,i=!1;const o=()=>{if(s){He();return}s=!0,i&&Ge(),A.ensure(),this.#h=0,this.#u!==null&&vt(this.#u,()=>{this.#u=null}),this.#t=this.has_pending_snippet(),this.#l=this.#v(()=>(this.#d=!1,V(()=>this.#o(this.#e)))),this.#c>0?this.#p():this.#t=!1};var u=_;try{O(null),i=!0,n?.(e,o),i=!1}catch(l){yt(l,this.#s&&this.#s.parent)}finally{O(u)}r&&ot(()=>{this.#u=this.#v(()=>{this.#d=!0;try{return V(()=>{r(this.#e,()=>e,()=>o)})}catch(l){return yt(l,this.#s.parent),null}finally{this.#d=!1}})})}}function sn(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var s=n===r?null:_e(n);e.append(n),n=s}}function ln(t){var e=S|N,n=_!==null&&(_.f&S)!==0?_:null;return v===null||n!==null&&(n.f&R)!==0?e|=R:v.f|=ct,{ctx:x,deps:null,effects:null,equals:ne,f:e,fn:t,reactions:null,rv:0,v:m,wv:0,parent:n??v,ac:null}}function M(t){const e=ln(t);return ye(e),e}function ae(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)D(e[n])}}function on(t){for(var e=t.parent;e!==null;){if((e.f&S)===0)return e;e=e.parent}return null}function Dt(t){var e,n=v;z(on(t));try{ae(t),e=Pe(t)}finally{z(n)}return e}function fe(t){var e=Dt(t);if(t.equals(e)||(t.v=e,t.wv=be()),!et){var n=(U||(t.f&R)!==0)&&t.deps!==null?B:b;I(t,n)}}const q=new Map;function $t(t,e){var n={f:0,v:t,reactions:null,equals:ne,rv:0,wv:0};return n}function E(t,e){const n=$t(t);return ye(n),n}function w(t,e,n=!1){_!==null&&(!F||(_.f&jt)!==0)&&ie()&&(_.f&(S|G|Nt|jt))!==0&&!$?.includes(t)&&Ye();let r=n?rt(e):e;return ce(t,r)}function ce(t,e){if(!t.equals(e)){var n=t.v;et?q.set(t,e):q.set(t,n),t.v=e;var r=A.ensure();r.capture(t,n),(t.f&S)!==0&&((t.f&N)!==0&&Dt(t),I(t,(t.f&R)===0?b:B)),t.wv=be(),he(t,N),v!==null&&(v.f&b)!==0&&(v.f&(W|H))===0&&(T===null?yn([t]):T.push(t))}return e}function lt(t){w(t,t.v+1)}function he(t,e){var n=t.reactions;if(n!==null)for(var r=n.length,s=0;s<r;s++){var i=n[s],o=i.f,u=(o&N)===0;u&&I(i,e),(o&S)!==0?he(i,B):u&&((o&G)!==0&&K!==null&&K.push(i),tt(i))}}function rt(t){if(typeof t!="object"||t===null||Pt in t)return t;const e=Fe(t);if(e!==Ne&&e!==ke)return t;var n=new Map,r=Qt(t),s=E(0),i=Y,o=u=>{if(Y===i)return u();var l=_,f=Y;O(null),Bt(i);var c=u();return O(l),Bt(f),c};return r&&n.set("length",E(t.length)),new Proxy(t,{defineProperty(u,l,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&Ve();var c=n.get(l);return c===void 0?c=o(()=>{var d=E(f.value);return n.set(l,d),d}):w(c,f.value,!0),!0},deleteProperty(u,l){var f=n.get(l);if(f===void 0){if(l in u){const c=o(()=>E(m));n.set(l,c),lt(s)}}else w(f,m),lt(s);return!0},get(u,l,f){if(l===Pt)return t;var c=n.get(l),d=l in u;if(c===void 0&&(!d||it(u,l)?.writable)&&(c=o(()=>{var h=rt(d?u[l]:m),g=E(h);return g}),n.set(l,c)),c!==void 0){var p=a(c);return p===m?void 0:p}return Reflect.get(u,l,f)},getOwnPropertyDescriptor(u,l){var f=Reflect.getOwnPropertyDescriptor(u,l);if(f&&"value"in f){var c=n.get(l);c&&(f.value=a(c))}else if(f===void 0){var d=n.get(l),p=d?.v;if(d!==void 0&&p!==m)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return f},has(u,l){if(l===Pt)return!0;var f=n.get(l),c=f!==void 0&&f.v!==m||Reflect.has(u,l);if(f!==void 0||v!==null&&(!c||it(u,l)?.writable)){f===void 0&&(f=o(()=>{var p=c?rt(u[l]):m,h=E(p);return h}),n.set(l,f));var d=a(f);if(d===m)return!1}return c},set(u,l,f,c){var d=n.get(l),p=l in u;if(r&&l==="length")for(var h=f;h<d.v;h+=1){var g=n.get(h+"");g!==void 0?w(g,m):h in u&&(g=o(()=>E(m)),n.set(h+"",g))}if(d===void 0)(!p||it(u,l)?.writable)&&(d=o(()=>E(void 0)),w(d,rt(f)),n.set(l,d));else{p=d.v!==m;var k=o(()=>rt(f));w(d,k)}var dt=Reflect.getOwnPropertyDescriptor(u,l);if(dt?.set&&dt.set.call(c,f),!p){if(r&&typeof l=="string"){var _t=n.get("length"),L=Number(l);Number.isInteger(L)&&L>=_t.v&&w(_t,L+1)}lt(s)}return!0},ownKeys(u){a(s);var l=Reflect.ownKeys(u).filter(d=>{var p=n.get(d);return p===void 0||p.v!==m});for(var[f,c]of n)c.v!==m&&!(f in u)&&l.push(f);return l},setPrototypeOf(){Ke()}})}var qt,de;function un(){if(qt===void 0){qt=window;var t=Element.prototype,e=Node.prototype,n=Text.prototype;it(e,"firstChild").get,de=it(e,"nextSibling").get,Mt(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Mt(n)&&(n.__t=void 0)}}function an(t=""){return document.createTextNode(t)}function _e(t){return de.call(t)}function Lt(t){var e=_,n=v;O(null),z(null);try{return t()}finally{O(e),z(n)}}function fn(t){v===null&&_===null&&We(),_!==null&&(_.f&R)!==0&&v===null&&ze(),et&&qe()}function cn(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function ht(t,e,n,r=!0){var s=v;s!==null&&(s.f&X)!==0&&(t|=X);var i={ctx:x,deps:null,nodes_start:null,nodes_end:null,f:t|N,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{at(i),i.f|=Rt}catch(l){throw D(i),l}else e!==null&&tt(i);if(r){var o=i;if(n&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&(o.f&ct)===0&&(o=o.first),o!==null&&(o.parent=s,s!==null&&cn(o,s),_!==null&&(_.f&S)!==0&&(t&H)===0)){var u=_;(u.effects??=[]).push(o)}}return i}function hn(){return _!==null&&!F}function dn(t){fn();var e=v.f,n=!_&&(e&W)!==0&&(e&Rt)===0;if(n){var r=x;(r.e??=[]).push(t)}else return pe(t)}function pe(t){return ht(Zt|Ue,t,!1)}function _n(t){A.ensure();const e=ht(H|ct,t,!0);return(n={})=>new Promise(r=>{n.outro?vt(e,()=>{D(e),r(void 0)}):(D(e),r(void 0))})}function pn(t,e=0){return ht(Me|e,t,!0)}function vn(t,e=0){var n=ht(G|e,t,!0);return n}function V(t,e=!0){return ht(W|ct,t,!0,e)}function ve(t){var e=t.teardown;if(e!==null){const n=et,r=_;Wt(!0),O(null);try{e.call(null)}finally{Wt(n),O(r)}}}function ge(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const s=n.ac;s!==null&&Lt(()=>{s.abort(te)});var r=n.next;(n.f&H)!==0?n.parent=null:D(n,e),n=r}}function gn(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&W)===0&&D(e),e=n}}function D(t,e=!0){var n=!1;(e||(t.f&je)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(wn(t.nodes_start,t.nodes_end),n=!0),ge(t,e&&!n),Et(t,0),I(t,ft);var r=t.transitions;if(r!==null)for(const i of r)i.stop();ve(t);var s=t.parent;s!==null&&s.first!==null&&we(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function wn(t,e){for(;t!==null;){var n=t===e?null:_e(t);t.remove(),t=n}}function we(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function vt(t,e){var n=[];me(t,n,!0),mn(n,()=>{D(t),e&&e()})}function mn(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var s of t)s.out(r)}else e()}function me(t,e,n){if((t.f&X)===0){if(t.f^=X,t.transitions!==null)for(const o of t.transitions)(o.is_global||n)&&e.push(o);for(var r=t.first;r!==null;){var s=r.next,i=(r.f&Xt)!==0||(r.f&W)!==0;me(r,e,i?n:!1),r=s}}}let Z=!1;function zt(t){Z=t}let et=!1;function Wt(t){et=t}let _=null,F=!1;function O(t){_=t}let v=null;function z(t){v=t}let $=null;function ye(t){_!==null&&($===null?$=[t]:$.push(t))}let y=null,C=0,T=null;function yn(t){T=t}let Ee=1,ut=0,Y=ut;function Bt(t){Y=t}let U=!1;function be(){return++Ee}function bt(t){var e=t.f;if((e&N)!==0)return!0;if((e&B)!==0){var n=t.deps,r=(e&R)!==0;if(n!==null){var s,i,o=(e&gt)!==0,u=r&&v!==null&&!U,l=n.length;if((o||u)&&(v===null||(v.f&ft)===0)){var f=t,c=f.parent;for(s=0;s<l;s++)i=n[s],(o||!i?.reactions?.includes(f))&&(i.reactions??=[]).push(f);o&&(f.f^=gt),u&&c!==null&&(c.f&R)===0&&(f.f^=R)}for(s=0;s<l;s++)if(i=n[s],bt(i)&&fe(i),i.wv>t.wv)return!0}(!r||v!==null&&!U)&&I(t,b)}return!1}function Se(t,e,n=!0){var r=t.reactions;if(r!==null&&!$?.includes(t))for(var s=0;s<r.length;s++){var i=r[s];(i.f&S)!==0?Se(i,e,!1):e===i&&(n?I(i,N):(i.f&b)!==0&&I(i,B),tt(i))}}function Pe(t){var e=y,n=C,r=T,s=_,i=U,o=$,u=x,l=F,f=Y,c=t.f;y=null,C=0,T=null,U=(c&R)!==0&&(F||!Z||_===null),_=(c&(W|H))===0?t:null,$=null,mt(t.ctx),F=!1,Y=++ut,t.ac!==null&&(Lt(()=>{t.ac.abort(te)}),t.ac=null);try{t.f|=It;var d=t.fn,p=d(),h=t.deps;if(y!==null){var g;if(Et(t,C),h!==null&&C>0)for(h.length=C+y.length,g=0;g<y.length;g++)h[C+g]=y[g];else t.deps=h=y;if(!U||(c&S)!==0&&t.reactions!==null)for(g=C;g<h.length;g++)(h[g].reactions??=[]).push(t)}else h!==null&&C<h.length&&(Et(t,C),h.length=C);if(ie()&&T!==null&&!F&&h!==null&&(t.f&(S|B|N))===0)for(g=0;g<T.length;g++)Se(T[g],t);return s!==null&&s!==t&&(ut++,T!==null&&(r===null?r=T:r.push(...T))),(t.f&wt)!==0&&(t.f^=wt),p}catch(k){return le(k)}finally{t.f^=It,y=e,C=n,T=r,_=s,U=i,$=o,mt(u),F=l,Y=f}}function En(t,e){let n=e.reactions;if(n!==null){var r=Oe.call(n,t);if(r!==-1){var s=n.length-1;s===0?n=e.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(e.f&S)!==0&&(y===null||!y.includes(e))&&(I(e,B),(e.f&(R|gt))===0&&(e.f^=gt),ae(e),Et(e,0))}function Et(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)En(t,n[r])}function at(t){var e=t.f;if((e&ft)===0){I(t,b);var n=v,r=Z;v=t,Z=!0;try{(e&G)!==0?gn(t):ge(t),ve(t);var s=Pe(t);t.teardown=typeof s=="function"?s:null,t.wv=Ee;var i;Jt&&Je&&(t.f&N)!==0&&t.deps}finally{Z=r,v=n}}}function a(t){var e=t.f,n=(e&S)!==0;if(_!==null&&!F){var r=v!==null&&(v.f&ft)!==0;if(!r&&!$?.includes(t)){var s=_.deps;if((_.f&It)!==0)t.rv<ut&&(t.rv=ut,y===null&&s!==null&&s[C]===t?C++:y===null?y=[t]:(!U||!y.includes(t))&&y.push(t));else{(_.deps??=[]).push(t);var i=t.reactions;i===null?t.reactions=[_]:i.includes(_)||i.push(_)}}}else if(n&&t.deps===null&&t.effects===null){var o=t,u=o.parent;u!==null&&(u.f&R)===0&&(o.f^=R)}if(et){if(q.has(t))return q.get(t);if(n){o=t;var l=o.v;return((o.f&b)===0&&o.reactions!==null||Ce(o))&&(l=Dt(o)),q.set(o,l),l}}else n&&(o=t,bt(o)&&fe(o));if((t.f&wt)!==0)throw t.v;return t.v}function Ce(t){if(t.v===m)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(q.has(e)||(e.f&S)!==0&&Ce(e))return!0;return!1}function St(t){var e=F;try{return F=!0,t()}finally{F=e}}const bn=-7169;function I(t,e){t.f=t.f&bn|e}const Sn=["touchstart","touchmove"];function Pn(t){return Sn.includes(t)}const Cn=new Set,Vt=new Set;function In(t,e,n,r={}){function s(i){if(r.capture||st.call(e,i),!i.cancelBubble)return Lt(()=>n?.call(this,i))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?ot(()=>{e.addEventListener(t,s,r)}):e.addEventListener(t,s,r),s}function At(t,e,n,r={}){var s=In(e,t,n,r);return()=>{t.removeEventListener(e,s,r)}}let Kt=null;function st(t){var e=this,n=e.ownerDocument,r=t.type,s=t.composedPath?.()||[],i=s[0]||t.target;Kt=t;var o=0,u=Kt===t&&t.__root;if(u){var l=s.indexOf(u);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var f=s.indexOf(e);if(f===-1)return;l<=f&&(o=l)}if(i=s[o]||t.target,i!==e){Ct(t,"currentTarget",{configurable:!0,get(){return i||n}});var c=_,d=v;O(null),z(null);try{for(var p,h=[];i!==null;){var g=i.assignedSlot||i.parentNode||i.host||null;try{var k=i["__"+r];if(k!=null&&(!i.disabled||t.target===i))if(Qt(k)){var[dt,..._t]=k;dt.apply(i,[t,..._t])}else k.call(i,t)}catch(L){p?h.push(L):p=L}if(t.cancelBubble||g===e||g===null)break;i=g}if(p){for(let L of h)queueMicrotask(()=>{throw L});throw p}}finally{t.__root=e,delete t.currentTarget,O(c),z(d)}}}function xn(t,e){return Tn(t,e)}const J=new Map;function Tn(t,{target:e,anchor:n,props:r={},events:s,context:i,intro:o=!0}){un();var u=new Set,l=d=>{for(var p=0;p<d.length;p++){var h=d[p];if(!u.has(h)){u.add(h);var g=Pn(h);e.addEventListener(h,st,{passive:g});var k=J.get(h);k===void 0?(document.addEventListener(h,st,{passive:g}),J.set(h,1)):J.set(h,k+1)}}};l(Re(Cn)),Vt.add(l);var f=void 0,c=_n(()=>{var d=n??e.appendChild(an());return nn(d,{pending:()=>{}},p=>{if(i){re({});var h=x;h.c=i}s&&(r.$$events=s),f=t(p,r)||{},i&&se()}),()=>{for(var p of u){e.removeEventListener(p,st);var h=J.get(p);--h===0?(document.removeEventListener(p,st),J.delete(p)):J.set(p,h)}Vt.delete(l),d!==n&&d.parentNode?.removeChild(d)}});return An.set(f,c),f}let An=new WeakMap;function On(t,e,n,r){var s=r,i=!0,o=()=>(i&&(i=!1,s=St(r)),s),u;u=t[e],u===void 0&&r!==void 0&&(u=o());var l;return l=()=>{var f=t[e];return f===void 0?o():(i=!0,f)},l}function Ie(t){x===null&&ee(),dn(()=>{const e=St(t);if(typeof e=="function")return e})}function Rn(t){x===null&&ee(),Ie(()=>()=>St(t))}const Nn="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Nn);const xe=typeof window<"u"?window:void 0;function kn(t){let e=t.activeElement;for(;e?.shadowRoot;){const n=e.shadowRoot.activeElement;if(n===e)break;e=n}return e}class Fn{#t;#e;constructor(e={}){const{window:n=xe,document:r=n?.document}=e;n!==void 0&&(this.#t=r,this.#e=Ft(s=>{const i=At(n,"focusin",s),o=At(n,"focusout",s);return()=>{i(),o()}}))}get current(){return this.#e?.(),this.#t?kn(this.#t):null}}new Fn;function Dn(t,e){return t}function $n(t,e){let n=E(null);const r=M(()=>Dn(e));function s(...i){if(a(n))a(n).timeout&&clearTimeout(a(n).timeout);else{let o,u;const l=new Promise((f,c)=>{o=f,u=c});w(n,{timeout:null,runner:null,promise:l,resolve:o,reject:u},!0)}return a(n).runner=async()=>{if(!a(n))return;const o=a(n);w(n,null);try{o.resolve(await t.apply(this,i))}catch(u){o.reject(u)}},a(n).timeout=setTimeout(a(n).runner,a(r)),a(n).promise}return s.cancel=async()=>{(!a(n)||a(n).timeout===null)&&(await new Promise(i=>setTimeout(i,0)),!a(n)||a(n).timeout===null)||(clearTimeout(a(n).timeout),a(n).reject("Cancelled"),w(n,null))},s.runScheduledNow=async()=>{(!a(n)||!a(n).timeout)&&(await new Promise(i=>setTimeout(i,0)),!a(n)||!a(n).timeout)||(clearTimeout(a(n).timeout),a(n).timeout=null,await a(n).runner?.())},Object.defineProperty(s,"pending",{enumerable:!0,get(){return!!a(n)?.timeout}}),s}function Ln(t,e){switch(t){case"local":return e.localStorage;case"session":return e.sessionStorage}}function Te(t,e,n,r,s,i){if(t===null||typeof t!="object")return t;const o=Object.getPrototypeOf(t);if(o!==null&&o!==Object.prototype&&!Array.isArray(t))return t;let u=n.get(t);return u||(u=new Proxy(t,{get:(l,f)=>(r?.(),Te(Reflect.get(l,f),e,n,r,s,i)),set:(l,f,c)=>(s?.(),Reflect.set(l,f,c),i(e),!0)}),n.set(t,u)),u}class Yt{#t;#e;#r;#n;#o;#s;#l=new WeakMap;constructor(e,n,r={}){const{storage:s="local",serializer:i={serialize:JSON.stringify,deserialize:JSON.parse},syncTabs:o=!0}=r,u="window"in r?r.window:xe;if(this.#t=n,this.#e=e,this.#r=i,u===void 0)return;const l=Ln(s,u);this.#n=l;const f=l.getItem(e);f!==null?this.#t=this.#u(f):this.#f(n),o&&s==="local"&&(this.#o=Ft(c=>{this.#s=c;const d=At(u,"storage",this.#i);return()=>{d(),this.#s=void 0}}))}get current(){this.#o?.();const e=this.#n?.getItem(this.#e),n=e?this.#u(e):this.#t;return Te(n,n,this.#l,this.#o?.bind(this),this.#s?.bind(this),this.#f.bind(this))}set current(e){this.#f(e),this.#s?.()}#i=e=>{e.key!==this.#e||e.newValue===null||(this.#t=this.#u(e.newValue),this.#s?.())};#u(e){try{return this.#r.deserialize(e)}catch(n){console.error(`Error when parsing "${e}" from persisted store "${this.#e}"`,n);return}}#f(e){try{e!=null&&this.#n?.setItem(this.#e,this.#r.serialize(e))}catch(n){console.error(`Error when writing value from persisted store "${this.#e}" to ${this.#n}`,n)}}}function Mn(t="your-main-id"){return typeof window>"u"?t:new URLSearchParams(window.location.search).get("listId")||t}function Gt(t,e){return`${t}_${e}`}const{Query:nt}=window.Appwrite,Ht=1e3,jn=500;class Un{#t=E(null);#e=E(!1);#r=E(null);#n=E(null);#o=E(null);#s=M(()=>()=>a(this.#r)?.current.products??[]);get products(){return a(this.#s)}set products(e){w(this.#s,e)}#l=M(()=>()=>a(this.#r)?.current.loading??!1);get loading(){return a(this.#l)}set loading(e){w(this.#l,e)}#i=M(()=>()=>a(this.#r)?.current.error??null);get error(){return a(this.#i)}set error(e){w(this.#i,e)}#u=M(()=>()=>a(this.#r)?.current.syncing??!1);get syncing(){return a(this.#u)}set syncing(e){w(this.#u,e)}#f=M(()=>()=>a(this.#r)?.current.realtimeConnected??!1);get realtimeConnected(){return a(this.#f)}set realtimeConnected(e){w(this.#f,e)}#h=M(()=>()=>a(this.#n)?.current.lastSync??null);get lastSync(){return a(this.#h)}set lastSync(e){w(this.#h,e)}#c=M(()=>()=>a(this.#n)?.current.mainId??null);get mainId(){return a(this.#c)}set mainId(e){w(this.#c,e)}get currentMainId(){return a(this.#t)}get isInitialized(){return a(this.#e)}#d=$n(()=>{this.#p()},jn);async initialize(e){if(!e?.trim())throw new Error("mainId invalide fourni");if(a(this.#e)&&a(this.#t)===e){console.log(`[ProductsStore] Déjà initialisé pour mainId: ${e}`);return}console.log(`[ProductsStore] Initialisation avec mainId: ${e}`),w(this.#t,e,!0),w(this.#e,!0),this.#_(e),this.products.length>0&&a(this.#n).current.mainId===e?(console.log(`[ProductsStore] Utilisation du cache (${this.products.length} produits)`),this.#w()):(console.log("[ProductsStore] Chargement initial depuis Appwrite"),await this.#g(e)),this.#y(e)}#_(e){if(a(this.#r)&&a(this.#n))return;const n=Gt("products-state",e),r=Gt("products-sync-state",e);console.log(`[ProductsStore] Clés de stockage: ${n}, ${r}`),w(this.#r,new Yt(n,{products:[],loading:!1,error:null,syncing:!1,realtimeConnected:!1}),!0),w(this.#n,new Yt(r,{lastSync:null,mainId:null}),!0)}async#g(e){if(!a(this.#r))throw new Error("ProductsStore non initialisé");this.#a({loading:!0,error:null});try{const n=await window.AppwriteClient.getDatabases(),r=window.AppwriteClient.getConfig(),s=await n.listDocuments(r.APPWRITE_CONFIG.databaseId,r.APPWRITE_CONFIG.collections.products,[nt.equal("mainId",e),nt.limit(Ht)]);this.#a({products:s.documents,loading:!1,error:null}),this.#p(),console.log(`[ProductsStore] ${s.documents.length} produits chargés`)}catch(n){const r=n instanceof Error?n.message:"Erreur lors du chargement";throw this.#a({loading:!1,error:r}),console.error("[ProductsStore]",r,n),n}}async#w(){if(a(this.#n)?.current.lastSync){this.#a({syncing:!0});try{const e=await window.AppwriteClient.getDatabases(),n=window.AppwriteClient.getConfig(),r=await e.listDocuments(n.APPWRITE_CONFIG.databaseId,n.APPWRITE_CONFIG.collections.products,[nt.greaterThan("$updatedAt",a(this.#n).current.lastSync),nt.equal("mainId",a(this.#t)),nt.limit(Ht)]);r.documents.length>0&&(this.#m(r.documents),this.#p(),console.log(`[ProductsStore] ${r.documents.length} mises à jour synchronisées`)),this.#a({syncing:!1})}catch(e){console.error("[ProductsStore] Erreur sync:",e),this.#a({syncing:!1})}}}#m(e){const n=this.products,r=new Map(e.map(u=>[u.$id,u])),s=n.map(u=>r.get(u.$id)??u),i=new Set(n.map(u=>u.$id)),o=e.filter(u=>!i.has(u.$id));this.#a({products:[...s,...o]})}#y(e){a(this.#o)?.(),console.log("[ProductsStore] Configuration realtime:",e),w(this.#o,window.AppwriteClient.subscribeToCollections(["products"],e,n=>this.#v(n),{onConnect:()=>{console.log("[ProductsStore] Realtime connecté"),this.#a({realtimeConnected:!0})},onDisconnect:()=>{console.log("[ProductsStore] Realtime déconnecté"),this.#a({realtimeConnected:!1})},onError:n=>{console.error("[ProductsStore] Erreur realtime:",n)}}),!0)}#v(e){const{events:n,payload:r}=e;if(!r||!a(this.#r))return;const s=r,i=n.some(l=>l.includes(".create")),o=n.some(l=>l.includes(".update")),u=n.some(l=>l.includes(".delete"));i?this.products.some(f=>f.$id===s.$id)||this.#a({products:[...this.products,s]}):o?this.#a({products:this.products.map(l=>l.$id===s.$id?s:l)}):u&&this.#a({products:this.products.filter(l=>l.$id!==s.$id)}),this.#d()}#p(){!a(this.#t)||!a(this.#n)||(a(this.#n).current={lastSync:new Date().toISOString(),mainId:a(this.#t)})}#a(e){a(this.#r)&&(a(this.#r).current={...a(this.#r).current,...e})}async forceReload(e){await this.#g(e)}destroy(){a(this.#o)?.(),w(this.#o,null),console.log("[ProductsStore] Ressources nettoyées")}clearCache(){if(!a(this.#r)||!a(this.#n)){console.warn("[ProductsStore] Store non initialisé");return}this.#a({products:[],loading:!1,error:null,syncing:!1,realtimeConnected:!1}),a(this.#n).current={lastSync:null,mainId:null},console.log(`[ProductsStore] Cache vidé pour ${a(this.#t)}`)}}const Ae=new Un,qn=t=>Ae.initialize(t),zn=()=>Ae.destroy();function Wn(t,e){re(e,!0);let n=On(e,"mainId",19,Mn);Ie(async()=>{console.log("[ProductsComponent] Montage du composant");try{await window.AppwriteClient.initializeAppwrite(),console.log("[ProductsComponent] mainId",n()),await qn(n())}catch(r){console.error("[ProductsComponent] Erreur lors de l'initialisation:",r)}}),Rn(()=>{console.log("[ProductsComponent] Démontage du composant"),zn()}),se()}xn(Wn,{target:document.getElementById("app_products")});
