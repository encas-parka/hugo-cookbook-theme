(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const ii=!1;var Nn=Array.isArray,Aa=Array.prototype.indexOf,Xs=Array.from,Ls=Object.defineProperty,It=Object.getOwnPropertyDescriptor,ai=Object.getOwnPropertyDescriptors,oi=Object.prototype,Ra=Array.prototype,cs=Object.getPrototypeOf,vr=Object.isExtensible;function nn(t){return typeof t=="function"}const ee=()=>{};function Pa(t){return t()}function Us(t){for(var e=0;e<t.length;e++)t[e]()}function ci(){var t,e,n=new Promise((s,r)=>{t=s,e=r});return{promise:n,resolve:t,reject:e}}function Ta(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const n=[];for(const s of t)if(n.push(s),n.length===e)break;return n}const Qe=2,Zs=4,ls=8,Wt=16,yt=32,Qt=64,Os=128,Ze=256,ss=512,je=1024,Ke=2048,Pt=4096,et=8192,Vt=16384,Fs=32768,Gt=65536,gr=1<<17,Ma=1<<18,dn=1<<19,li=1<<20,Hs=1<<21,ds=1<<22,Ut=1<<23,vt=Symbol("$state"),di=Symbol("legacy props"),Da=Symbol(""),Pn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function $a(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ka(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function xa(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function qa(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ja(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Ca(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Na(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function La(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ua(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ha(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ba(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const us=1,fs=2,ui=4,za=8,Wa=16,Qa=1,Va=2,Ga=4,Ka=8,Ya=16,Ja=1,Xa=2,De=Symbol(),Za="http://www.w3.org/1999/xhtml",Oa="http://www.w3.org/2000/svg",Fa="@attach";function eo(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function to(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let no=!1;function fi(t){return t===this.v}function so(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function hi(t){return!so(t,this.v)}let un=!1,ro=!1;function io(){un=!0}const ao=[];function Ft(t,e=!1,n=!1){return ts(t,new Map,"",ao,null,n)}function ts(t,e,n,s,r=null,i=!1){if(typeof t=="object"&&t!==null){var a=e.get(t);if(a!==void 0)return a;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(Nn(t)){var o=Array(t.length);e.set(t,o),r!==null&&e.set(r,o);for(var c=0;c<t.length;c+=1){var d=t[c];c in t&&(o[c]=ts(d,e,n,s,null,i))}return o}if(cs(t)===oi){o={},e.set(t,o),r!==null&&e.set(r,o);for(var u in t)o[u]=ts(t[u],e,n,s,null,i);return o}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!i)return ts(t.toJSON(),e,n,s,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let Se=null;function rn(t){Se=t}function J(t,e=!1,n){Se={p:Se,c:null,e:null,s:t,x:null,l:un&&!e?{s:null,u:null,$:[]}:null}}function X(t){var e=Se,n=e.e;if(n!==null){e.e=null;for(var s of n)Mi(s)}return Se=e.p,{}}function Ln(){return!un||Se!==null&&Se.l===null}let Ct=[];function pi(){var t=Ct;Ct=[],Us(t)}function At(t){if(Ct.length===0&&!Tn){var e=Ct;queueMicrotask(()=>{e===Ct&&pi()})}Ct.push(t)}function oo(){for(;Ct.length>0;)pi()}const co=new WeakMap;function vi(t){var e=W;if(e===null)return V.f|=Ut,t;if((e.f&Fs)===0){if((e.f&Os)===0)throw!e.parent&&t instanceof Error&&gi(t),t;e.b.error(t)}else an(t,e)}function an(t,e){for(;e!==null;){if((e.f&Os)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&gi(t),t}function gi(t){const e=co.get(t);e&&(Ls(t,"message",{value:e.message}),Ls(t,"stack",{value:e.stack}))}const On=new Set;let ce=null,ns=null,Bs=new Set,rt=[],hs=null,zs=!1,Tn=!1;class Xe{current=new Map;#e=new Map;#t=new Set;#n=0;#r=null;#o=[];#c=[];#s=[];#l=[];#d=[];#u=[];skipped_effects=new Set;process(e){rt=[],ns=null;var n=Xe.apply(this);for(const i of e)this.#f(i);if(this.#n===0){this.#h();var s=this.#c,r=this.#s;this.#c=[],this.#s=[],this.#l=[],ns=this,ce=null,mr(s),mr(r),ns=null,this.#r?.resolve()}else this.#i(this.#c),this.#i(this.#s),this.#i(this.#l);n();for(const i of this.#o)kn(i);this.#o=[]}#f(e){e.f^=je;for(var n=e.first;n!==null;){var s=n.f,r=(s&(yt|Qt))!==0,i=r&&(s&je)!==0,a=i||(s&et)!==0||this.skipped_effects.has(n);if(!a&&n.fn!==null){r?n.f^=je:(s&Zs)!==0?this.#s.push(n):(s&je)===0&&((s&ds)!==0&&n.b?.is_pending()?this.#o.push(n):gs(n)&&((n.f&Wt)!==0&&this.#l.push(n),kn(n)));var o=n.first;if(o!==null){n=o;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)n=c.next,c=c.parent}}#i(e){for(const n of e)((n.f&Ke)!==0?this.#d:this.#u).push(n),Le(n,je);e.length=0}capture(e,n){this.#e.has(e)||this.#e.set(e,n),this.current.set(e,e.v)}activate(){ce=this}deactivate(){ce=null}flush(){if(rt.length>0){if(this.activate(),mi(),ce!==null&&ce!==this)return}else this.#n===0&&this.#h();this.deactivate();for(const e of Bs)if(Bs.delete(e),e(),ce!==null)break}#h(){for(const e of this.#t)e();if(this.#t.clear(),On.size>1){this.#e.clear();let e=!0;for(const n of On){if(n===this){e=!1;continue}for(const[s,r]of this.current){if(n.current.has(s))if(e)n.current.set(s,r);else continue;yi(s)}if(rt.length>0){ce=n;const s=Xe.apply(n);for(const r of rt)n.#f(r);rt=[],s()}}ce=null}On.delete(this)}increment(){this.#n+=1}decrement(){this.#n-=1;for(const e of this.#d)Le(e,Ke),Bt(e);for(const e of this.#u)Le(e,Pt),Bt(e);this.flush()}add_callback(e){this.#t.add(e)}settled(){return(this.#r??=ci()).promise}static ensure(){if(ce===null){const e=ce=new Xe;On.add(ce),Tn||Xe.enqueue(()=>{ce===e&&e.flush()})}return ce}static enqueue(e){At(e)}static apply(e){return ee}}function lo(t){var e=Tn;Tn=!0;try{for(var n;;){if(oo(),rt.length===0&&(ce?.flush(),rt.length===0))return hs=null,n;mi()}}finally{Tn=e}}function mi(){var t=sn;zs=!0;try{var e=0;for(_r(!0);rt.length>0;){var n=Xe.ensure();if(e++>1e3){var s,r;uo()}n.process(rt),St.clear()}}finally{zs=!1,_r(t),hs=null}}function uo(){try{Ca()}catch(t){an(t,hs)}}let jt=null;function mr(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var s=t[n++];if((s.f&(Vt|et))===0&&gs(s)&&(jt=[],kn(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null&&s.ac===null?xi(s):s.fn=null),jt?.length>0)){St.clear();for(const r of jt)kn(r);jt=[]}}jt=null}}function yi(t){if(t.reactions!==null)for(const e of t.reactions){const n=e.f;(n&Qe)!==0?yi(e):(n&(ds|Wt))!==0&&(Le(e,Ke),Bt(e))}}function Bt(t){for(var e=hs=t;e.parent!==null;){e=e.parent;var n=e.f;if(zs&&e===W&&(n&Wt)!==0)return;if((n&(Qt|yt))!==0){if((n&je)===0)return;e.f^=je}}rt.push(e)}function er(t){let e=0,n=Rt(0),s;return()=>{Ro()&&(l(n),Di(()=>(e===0&&(s=Bn(()=>t(()=>it(n)))),e+=1,()=>{At(()=>{e-=1,e===0&&(s?.(),s=void 0,it(n))})})))}}var fo=Gt|dn|Os;function ho(t,e,n){new po(t,e,n)}class po{parent;#e=!1;#t;#n=null;#r;#o;#c;#s=null;#l=null;#d=null;#u=null;#f=0;#i=0;#h=!1;#p=null;#v=()=>{this.#p&&on(this.#p,this.#f)};#w=er(()=>(this.#p=Rt(this.#f),()=>{this.#p=null}));constructor(e,n,s){this.#t=e,this.#r=n,this.#o=s,this.parent=W.b,this.#e=!!this.#r.pending,this.#c=Mt(()=>{W.b=this;{try{this.#s=qe(()=>s(this.#t))}catch(r){this.error(r)}this.#i>0?this.#m():this.#e=!1}},fo)}#b(){try{this.#s=qe(()=>this.#o(this.#t))}catch(e){this.error(e)}this.#e=!1}#g(){const e=this.#r.pending;e&&(this.#l=qe(()=>e(this.#t)),Xe.enqueue(()=>{this.#s=this.#a(()=>(Xe.ensure(),qe(()=>this.#o(this.#t)))),this.#i>0?this.#m():(Et(this.#l,()=>{this.#l=null}),this.#e=!1)}))}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#r.pending}#a(e){var n=W,s=V,r=Se;dt(this.#c),We(this.#c),rn(this.#c.ctx);try{return e()}catch(i){return vi(i),null}finally{dt(n),We(s),rn(r)}}#m(){const e=this.#r.pending;this.#s!==null&&(this.#u=document.createDocumentFragment(),vo(this.#s,this.#u)),this.#l===null&&(this.#l=qe(()=>e(this.#t)))}#y(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#y(e);return}this.#i+=e,this.#i===0&&(this.#e=!1,this.#l&&Et(this.#l,()=>{this.#l=null}),this.#u&&(this.#t.before(this.#u),this.#u=null),At(()=>{Xe.ensure().flush()}))}update_pending_count(e){this.#y(e),this.#f+=e,Bs.add(this.#v)}get_effect_pending(){return this.#w(),l(this.#p)}error(e){var n=this.#r.onerror;let s=this.#r.failed;if(this.#h||!n&&!s)throw e;this.#s&&(ke(this.#s),this.#s=null),this.#l&&(ke(this.#l),this.#l=null),this.#d&&(ke(this.#d),this.#d=null);var r=!1,i=!1;const a=()=>{if(r){to();return}r=!0,i&&Ba(),Xe.ensure(),this.#f=0,this.#d!==null&&Et(this.#d,()=>{this.#d=null}),this.#e=this.has_pending_snippet(),this.#s=this.#a(()=>(this.#h=!1,qe(()=>this.#o(this.#t)))),this.#i>0?this.#m():this.#e=!1};var o=V;try{We(null),i=!0,n?.(e,a),i=!1}catch(c){an(c,this.#c&&this.#c.parent)}finally{We(o)}s&&At(()=>{this.#d=this.#a(()=>{this.#h=!0;try{return qe(()=>{s(this.#t,()=>e,()=>a)})}catch(c){return an(c,this.#c.parent),null}finally{this.#h=!1}})})}}function vo(t,e){for(var n=t.nodes_start,s=t.nodes_end;n!==null;){var r=n===s?null:Hn(n);e.append(n),n=r}}function wi(t,e,n){const s=Ln()?Un:tr;if(e.length===0){n(t.map(s));return}var r=ce,i=W,a=go();Promise.all(e.map(o=>mo(o))).then(o=>{a();try{n([...t.map(s),...o])}catch(c){(i.f&Vt)===0&&an(c,i)}r?.deactivate(),bi()}).catch(o=>{an(o,i)})}function go(){var t=W,e=V,n=Se,s=ce;return function(){dt(t),We(e),rn(n),s?.activate()}}function bi(){dt(null),We(null),rn(null)}function Un(t){var e=Qe|Ke,n=V!==null&&(V.f&Qe)!==0?V:null;return W===null||n!==null&&(n.f&Ze)!==0?e|=Ze:W.f|=dn,{ctx:Se,deps:null,effects:null,equals:fi,f:e,fn:t,reactions:null,rv:0,v:De,wv:0,parent:n??W,ac:null}}function mo(t,e){let n=W;n===null&&ka();var s=n.b,r=void 0,i=Rt(De),a=!V,o=new Map;return Mo(()=>{var c=ci();r=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject)}catch(h){c.reject(h)}var d=ce,u=s.is_pending();a&&(s.update_pending_count(1),u||(d.increment(),o.get(d)?.reject(Pn),o.set(d,c)));const f=(h,v=void 0)=>{u||d.activate(),v?v!==Pn&&(i.f|=Ut,on(i,v)):((i.f&Ut)!==0&&(i.f^=Ut),on(i,h)),a&&(s.update_pending_count(-1),u||d.decrement()),bi()};c.promise.then(f,h=>f(null,h||"unknown"))}),rr(()=>{for(const c of o.values())c.reject(Pn)}),new Promise(c=>{function d(u){function f(){u===r?c(i):d(r)}u.then(f,f)}d(r)})}function Q(t){const e=Un(t);return Ci(e),e}function tr(t){const e=Un(t);return e.equals=hi,e}function _i(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)ke(e[n])}}function yo(t){for(var e=t.parent;e!==null;){if((e.f&Qe)===0)return e;e=e.parent}return null}function nr(t){var e,n=W;dt(yo(t));try{_i(t),e=Hi(t)}finally{dt(n)}return e}function Ii(t){var e=nr(t);if(t.equals(e)||(t.v=e,t.wv=Li()),!Kt){var n=(wt||(t.f&Ze)!==0)&&t.deps!==null?Pt:je;Le(t,n)}}const St=new Map;function Rt(t,e){var n={f:0,v:t,reactions:null,equals:fi,rv:0,wv:0};return n}function A(t,e){const n=Rt(t);return Ci(n),n}function wo(t,e=!1,n=!0){const s=Rt(t);return e||(s.equals=hi),un&&n&&Se!==null&&Se.l!==null&&(Se.l.s??=[]).push(s),s}function p(t,e,n=!1){V!==null&&(!Fe||(V.f&gr)!==0)&&Ln()&&(V.f&(Qe|Wt|ds|gr))!==0&&!gt?.includes(t)&&Ha();let s=n?he(e):e;return on(t,s)}function on(t,e){if(!t.equals(e)){var n=t.v;Kt?St.set(t,e):St.set(t,n),t.v=e;var s=Xe.ensure();s.capture(t,n),(t.f&Qe)!==0&&((t.f&Ke)!==0&&nr(t),Le(t,(t.f&Ze)===0?je:Pt)),t.wv=Li(),Si(t,Ke),Ln()&&W!==null&&(W.f&je)!==0&&(W.f&(yt|Qt))===0&&(Ye===null?ko([t]):Ye.push(t))}return e}function it(t){p(t,t.v+1)}function Si(t,e){var n=t.reactions;if(n!==null)for(var s=Ln(),r=n.length,i=0;i<r;i++){var a=n[i],o=a.f;if(!(!s&&a===W)){var c=(o&Ke)===0;c&&Le(a,e),(o&Qe)!==0?Si(a,Pt):c&&((o&Wt)!==0&&jt!==null&&jt.push(a),Bt(a))}}}function he(t){if(typeof t!="object"||t===null||vt in t)return t;const e=cs(t);if(e!==oi&&e!==Ra)return t;var n=new Map,s=Nn(t),r=A(0),i=mt,a=o=>{if(mt===i)return o();var c=V,d=mt;We(null),Sr(i);var u=o();return We(c),Sr(d),u};return s&&n.set("length",A(t.length)),new Proxy(t,{defineProperty(o,c,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&La();var u=n.get(c);return u===void 0?u=a(()=>{var f=A(d.value);return n.set(c,f),f}):p(u,d.value,!0),!0},deleteProperty(o,c){var d=n.get(c);if(d===void 0){if(c in o){const u=a(()=>A(De));n.set(c,u),it(r)}}else p(d,De),it(r);return!0},get(o,c,d){if(c===vt)return t;var u=n.get(c),f=c in o;if(u===void 0&&(!f||It(o,c)?.writable)&&(u=a(()=>{var v=he(f?o[c]:De),y=A(v);return y}),n.set(c,u)),u!==void 0){var h=l(u);return h===De?void 0:h}return Reflect.get(o,c,d)},getOwnPropertyDescriptor(o,c){var d=Reflect.getOwnPropertyDescriptor(o,c);if(d&&"value"in d){var u=n.get(c);u&&(d.value=l(u))}else if(d===void 0){var f=n.get(c),h=f?.v;if(f!==void 0&&h!==De)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return d},has(o,c){if(c===vt)return!0;var d=n.get(c),u=d!==void 0&&d.v!==De||Reflect.has(o,c);if(d!==void 0||W!==null&&(!u||It(o,c)?.writable)){d===void 0&&(d=a(()=>{var h=u?he(o[c]):De,v=A(h);return v}),n.set(c,d));var f=l(d);if(f===De)return!1}return u},set(o,c,d,u){var f=n.get(c),h=c in o;if(s&&c==="length")for(var v=d;v<f.v;v+=1){var y=n.get(v+"");y!==void 0?p(y,De):v in o&&(y=a(()=>A(De)),n.set(v+"",y))}if(f===void 0)(!h||It(o,c)?.writable)&&(f=a(()=>A(void 0)),p(f,he(d)),n.set(c,f));else{h=f.v!==De;var I=a(()=>he(d));p(f,I)}var b=Reflect.getOwnPropertyDescriptor(o,c);if(b?.set&&b.set.call(u,d),!h){if(s&&typeof c=="string"){var S=n.get("length"),M=Number(c);Number.isInteger(M)&&M>=S.v&&p(S,M+1)}it(r)}return!0},ownKeys(o){l(r);var c=Reflect.ownKeys(o).filter(f=>{var h=n.get(f);return h===void 0||h.v!==De});for(var[d,u]of n)u.v!==De&&!(d in o)&&c.push(d);return c},setPrototypeOf(){Ua()}})}function yr(t){try{if(t!==null&&typeof t=="object"&&vt in t)return t[vt]}catch{}return t}function bo(t,e){return Object.is(yr(t),yr(e))}var wr,Ei,Ai,Ri;function _o(){if(wr===void 0){wr=window,Ei=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;Ai=It(e,"firstChild").get,Ri=It(e,"nextSibling").get,vr(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),vr(n)&&(n.__t=void 0)}}function Tt(t=""){return document.createTextNode(t)}function cn(t){return Ai.call(t)}function Hn(t){return Ri.call(t)}function g(t,e){return cn(t)}function z(t,e=!1){{var n=cn(t);return n instanceof Comment&&n.data===""?Hn(n):n}}function w(t,e=1,n=!1){let s=t;for(;e--;)s=Hn(s);return s}function Io(t){t.textContent=""}function sr(){return!1}function So(t,e){if(e){const n=document.body;t.autofocus=!0,At(()=>{document.activeElement===n&&t.focus()})}}let br=!1;function Eo(){br||(br=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function ps(t){var e=V,n=W;We(null),dt(null);try{return t()}finally{We(e),dt(n)}}function Pi(t,e,n,s=n){t.addEventListener(e,()=>ps(n));const r=t.__on_r;r?t.__on_r=()=>{r(),s(!0)}:t.__on_r=()=>s(!0),Eo()}function Ti(t){W===null&&V===null&&ja(),V!==null&&(V.f&Ze)!==0&&W===null&&qa(),Kt&&xa()}function Ao(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function ut(t,e,n,s=!0){var r=W;r!==null&&(r.f&et)!==0&&(t|=et);var i={ctx:Se,deps:null,nodes_start:null,nodes_end:null,f:t|Ke,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{kn(i),i.f|=Fs}catch(c){throw ke(i),c}else e!==null&&Bt(i);if(s){var a=i;if(n&&a.deps===null&&a.teardown===null&&a.nodes_start===null&&a.first===a.last&&(a.f&dn)===0&&(a=a.first),a!==null&&(a.parent=r,r!==null&&Ao(a,r),V!==null&&(V.f&Qe)!==0&&(t&Qt)===0)){var o=V;(o.effects??=[]).push(a)}}return i}function Ro(){return V!==null&&!Fe}function rr(t){const e=ut(ls,null,!1);return Le(e,je),e.teardown=t,e}function tt(t){Ti();var e=W.f,n=!V&&(e&yt)!==0&&(e&Fs)===0;if(n){var s=Se;(s.e??=[]).push(t)}else return Mi(t)}function Mi(t){return ut(Zs|li,t,!1)}function Po(t){return Ti(),ut(ls|li,t,!0)}function To(t){Xe.ensure();const e=ut(Qt|dn,t,!0);return(n={})=>new Promise(s=>{n.outro?Et(e,()=>{ke(e),s(void 0)}):(ke(e),s(void 0))})}function ir(t){return ut(Zs,t,!1)}function Mo(t){return ut(ds|dn,t,!0)}function Di(t,e=0){return ut(ls|e,t,!0)}function le(t,e=[],n=[]){wi(e,n,s=>{ut(ls,()=>t(...s.map(l)),!0)})}function Mt(t,e=0){var n=ut(Wt|e,t,!0);return n}function qe(t,e=!0){return ut(yt|dn,t,!0,e)}function $i(t){var e=t.teardown;if(e!==null){const n=Kt,s=V;Ir(!0),We(null);try{e.call(null)}finally{Ir(n),We(s)}}}function ki(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const r=n.ac;r!==null&&ps(()=>{r.abort(Pn)});var s=n.next;(n.f&Qt)!==0?n.parent=null:ke(n,e),n=s}}function Do(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&yt)===0&&ke(e),e=n}}function ke(t,e=!0){var n=!1;(e||(t.f&Ma)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&($o(t.nodes_start,t.nodes_end),n=!0),ki(t,e&&!n),rs(t,0),Le(t,Vt);var s=t.transitions;if(s!==null)for(const i of s)i.stop();$i(t);var r=t.parent;r!==null&&r.first!==null&&xi(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function $o(t,e){for(;t!==null;){var n=t===e?null:Hn(t);t.remove(),t=n}}function xi(t){var e=t.parent,n=t.prev,s=t.next;n!==null&&(n.next=s),s!==null&&(s.prev=n),e!==null&&(e.first===t&&(e.first=s),e.last===t&&(e.last=n))}function Et(t,e){var n=[];ar(t,n,!0),qi(n,()=>{ke(t),e&&e()})}function qi(t,e){var n=t.length;if(n>0){var s=()=>--n||e();for(var r of t)r.out(s)}else e()}function ar(t,e,n){if((t.f&et)===0){if(t.f^=et,t.transitions!==null)for(const a of t.transitions)(a.is_global||n)&&e.push(a);for(var s=t.first;s!==null;){var r=s.next,i=(s.f&Gt)!==0||(s.f&yt)!==0;ar(s,e,i?n:!1),s=r}}}function vs(t){ji(t,!0)}function ji(t,e){if((t.f&et)!==0){t.f^=et,(t.f&je)===0&&(Le(t,Ke),Bt(t));for(var n=t.first;n!==null;){var s=n.next,r=(n.f&Gt)!==0||(n.f&yt)!==0;ji(n,r?e:!1),n=s}if(t.transitions!==null)for(const i of t.transitions)(i.is_global||e)&&i.in()}}let sn=!1;function _r(t){sn=t}let Kt=!1;function Ir(t){Kt=t}let V=null,Fe=!1;function We(t){V=t}let W=null;function dt(t){W=t}let gt=null;function Ci(t){V!==null&&(gt===null?gt=[t]:gt.push(t))}let Ce=null,Ve=0,Ye=null;function ko(t){Ye=t}let Ni=1,$n=0,mt=$n;function Sr(t){mt=t}let wt=!1;function Li(){return++Ni}function gs(t){var e=t.f;if((e&Ke)!==0)return!0;if((e&Pt)!==0){var n=t.deps,s=(e&Ze)!==0;if(n!==null){var r,i,a=(e&ss)!==0,o=s&&W!==null&&!wt,c=n.length;if((a||o)&&(W===null||(W.f&Vt)===0)){var d=t,u=d.parent;for(r=0;r<c;r++)i=n[r],(a||!i?.reactions?.includes(d))&&(i.reactions??=[]).push(d);a&&(d.f^=ss),o&&u!==null&&(u.f&Ze)===0&&(d.f^=Ze)}for(r=0;r<c;r++)if(i=n[r],gs(i)&&Ii(i),i.wv>t.wv)return!0}(!s||W!==null&&!wt)&&Le(t,je)}return!1}function Ui(t,e,n=!0){var s=t.reactions;if(s!==null&&!gt?.includes(t))for(var r=0;r<s.length;r++){var i=s[r];(i.f&Qe)!==0?Ui(i,e,!1):e===i&&(n?Le(i,Ke):(i.f&je)!==0&&Le(i,Pt),Bt(i))}}function Hi(t){var e=Ce,n=Ve,s=Ye,r=V,i=wt,a=gt,o=Se,c=Fe,d=mt,u=t.f;Ce=null,Ve=0,Ye=null,wt=(u&Ze)!==0&&(Fe||!sn||V===null),V=(u&(yt|Qt))===0?t:null,gt=null,rn(t.ctx),Fe=!1,mt=++$n,t.ac!==null&&(ps(()=>{t.ac.abort(Pn)}),t.ac=null);try{t.f|=Hs;var f=t.fn,h=f(),v=t.deps;if(Ce!==null){var y;if(rs(t,Ve),v!==null&&Ve>0)for(v.length=Ve+Ce.length,y=0;y<Ce.length;y++)v[Ve+y]=Ce[y];else t.deps=v=Ce;if(!wt||(u&Qe)!==0&&t.reactions!==null)for(y=Ve;y<v.length;y++)(v[y].reactions??=[]).push(t)}else v!==null&&Ve<v.length&&(rs(t,Ve),v.length=Ve);if(Ln()&&Ye!==null&&!Fe&&v!==null&&(t.f&(Qe|Pt|Ke))===0)for(y=0;y<Ye.length;y++)Ui(Ye[y],t);return r!==null&&r!==t&&($n++,Ye!==null&&(s===null?s=Ye:s.push(...Ye))),(t.f&Ut)!==0&&(t.f^=Ut),h}catch(I){return vi(I)}finally{t.f^=Hs,Ce=e,Ve=n,Ye=s,V=r,wt=i,gt=a,rn(o),Fe=c,mt=d}}function xo(t,e){let n=e.reactions;if(n!==null){var s=Aa.call(n,t);if(s!==-1){var r=n.length-1;r===0?n=e.reactions=null:(n[s]=n[r],n.pop())}}n===null&&(e.f&Qe)!==0&&(Ce===null||!Ce.includes(e))&&(Le(e,Pt),(e.f&(Ze|ss))===0&&(e.f^=ss),_i(e),rs(e,0))}function rs(t,e){var n=t.deps;if(n!==null)for(var s=e;s<n.length;s++)xo(t,n[s])}function kn(t){var e=t.f;if((e&Vt)===0){Le(t,je);var n=W,s=sn;W=t,sn=!0;try{(e&Wt)!==0?Do(t):ki(t),$i(t);var r=Hi(t);t.teardown=typeof r=="function"?r:null,t.wv=Ni;var i;ii&&ro&&(t.f&Ke)!==0&&t.deps}finally{sn=s,W=n}}}async function qo(){await Promise.resolve(),lo()}function l(t){var e=t.f,n=(e&Qe)!==0;if(V!==null&&!Fe){var s=W!==null&&(W.f&Vt)!==0;if(!s&&!gt?.includes(t)){var r=V.deps;if((V.f&Hs)!==0)t.rv<$n&&(t.rv=$n,Ce===null&&r!==null&&r[Ve]===t?Ve++:Ce===null?Ce=[t]:(!wt||!Ce.includes(t))&&Ce.push(t));else{(V.deps??=[]).push(t);var i=t.reactions;i===null?t.reactions=[V]:i.includes(V)||i.push(V)}}}else if(n&&t.deps===null&&t.effects===null){var a=t,o=a.parent;o!==null&&(o.f&Ze)===0&&(a.f^=Ze)}if(Kt){if(St.has(t))return St.get(t);if(n){a=t;var c=a.v;return((a.f&je)===0&&a.reactions!==null||Bi(a))&&(c=nr(a)),St.set(a,c),c}}else n&&(a=t,gs(a)&&Ii(a));if((t.f&Ut)!==0)throw t.v;return t.v}function Bi(t){if(t.v===De)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(St.has(e)||(e.f&Qe)!==0&&Bi(e))return!0;return!1}function Bn(t){var e=Fe;try{return Fe=!0,t()}finally{Fe=e}}const jo=-7169;function Le(t,e){t.f=t.f&jo|e}function Co(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(vt in t)Ws(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&vt in n&&Ws(n)}}}function Ws(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let s in t)try{Ws(t[s],e)}catch{}const n=cs(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const s=ai(n);for(let r in s){const i=s[r].get;if(i)try{i.call(t)}catch{}}}}}function No(t){return t.endsWith("capture")&&t!=="gotpointercapture"&&t!=="lostpointercapture"}const Lo=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Uo(t){return Lo.includes(t)}const Ho={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Bo(t){return t=t.toLowerCase(),Ho[t]??t}const zo=["touchstart","touchmove"];function Wo(t){return zo.includes(t)}const zi=new Set,Qs=new Set;function or(t,e,n,s={}){function r(i){if(s.capture||An.call(e,i),!i.cancelBubble)return ps(()=>n?.call(this,i))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?At(()=>{e.addEventListener(t,r,s)}):e.addEventListener(t,r,s),r}function Vs(t,e,n,s={}){var r=or(e,t,n,s);return()=>{t.removeEventListener(e,r,s)}}function Ds(t,e,n,s,r){var i={capture:s,passive:r},a=or(t,e,n,i);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&rr(()=>{e.removeEventListener(t,a,i)})}function Dt(t){for(var e=0;e<t.length;e++)zi.add(t[e]);for(var n of Qs)n(t)}let Er=null;function An(t){var e=this,n=e.ownerDocument,s=t.type,r=t.composedPath?.()||[],i=r[0]||t.target;Er=t;var a=0,o=Er===t&&t.__root;if(o){var c=r.indexOf(o);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var d=r.indexOf(e);if(d===-1)return;c<=d&&(a=c)}if(i=r[a]||t.target,i!==e){Ls(t,"currentTarget",{configurable:!0,get(){return i||n}});var u=V,f=W;We(null),dt(null);try{for(var h,v=[];i!==null;){var y=i.assignedSlot||i.parentNode||i.host||null;try{var I=i["__"+s];if(I!=null&&(!i.disabled||t.target===i))if(Nn(I)){var[b,...S]=I;b.apply(i,[t,...S])}else I.call(i,t)}catch(M){h?v.push(M):h=M}if(t.cancelBubble||y===e||y===null)break;i=y}if(h){for(let M of v)queueMicrotask(()=>{throw M});throw h}}finally{t.__root=e,delete t.currentTarget,We(u),dt(f)}}}function Wi(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function ln(t,e){var n=W;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function j(t,e){var n=(e&Ja)!==0,s=(e&Xa)!==0,r,i=!t.startsWith("<!>");return()=>{r===void 0&&(r=Wi(i?t:"<!>"+t),n||(r=cn(r)));var a=s||Ei?document.importNode(r,!0):r.cloneNode(!0);if(n){var o=cn(a),c=a.lastChild;ln(o,c)}else ln(a,a);return a}}function Qo(t,e,n="svg"){var s=!t.startsWith("<!>"),r=`<${n}>${s?t:"<!>"+t}</${n}>`,i;return()=>{if(!i){var a=Wi(r),o=cn(a);i=cn(o)}var c=i.cloneNode(!0);return ln(c,c),c}}function Vo(t,e){return Qo(t,e,"svg")}function $s(t=""){{var e=Tt(t+"");return ln(e,e),e}}function ne(){var t=document.createDocumentFragment(),e=document.createComment(""),n=Tt();return t.append(e,n),ln(e,n),t}function E(t,e){t!==null&&t.before(e)}function re(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function Go(t,e){return Ko(t,e)}const en=new Map;function Ko(t,{target:e,anchor:n,props:s={},events:r,context:i,intro:a=!0}){_o();var o=new Set,c=f=>{for(var h=0;h<f.length;h++){var v=f[h];if(!o.has(v)){o.add(v);var y=Wo(v);e.addEventListener(v,An,{passive:y});var I=en.get(v);I===void 0?(document.addEventListener(v,An,{passive:y}),en.set(v,1)):en.set(v,I+1)}}};c(Xs(zi)),Qs.add(c);var d=void 0,u=To(()=>{var f=n??e.appendChild(Tt());return ho(f,{pending:()=>{}},h=>{if(i){J({});var v=Se;v.c=i}r&&(s.$$events=r),d=t(h,s)||{},i&&X()}),()=>{for(var h of o){e.removeEventListener(h,An);var v=en.get(h);--v===0?(document.removeEventListener(h,An),en.delete(h)):en.set(h,v)}Qs.delete(c),f!==n&&f.parentNode?.removeChild(f)}});return Yo.set(d,u),d}let Yo=new WeakMap;function Y(t,e,n=!1){var s=t,r=null,i=null,a=De,o=n?Gt:0,c=!1;const d=(v,y=!0)=>{c=!0,h(y,v)};var u=null;function f(){u!==null&&(u.lastChild.remove(),s.before(u),u=null);var v=a?r:i,y=a?i:r;v&&vs(v),y&&Et(y,()=>{a?i=null:r=null})}const h=(v,y)=>{if(a!==(a=v)){var I=sr(),b=s;if(I&&(u=document.createDocumentFragment(),u.append(b=Tt())),a?r??=y&&qe(()=>y(b)):i??=y&&qe(()=>y(b)),I){var S=ce,M=a?r:i,$=a?i:r;M&&S.skipped_effects.delete(M),$&&S.skipped_effects.add($),S.add_callback(f)}else f()}};Mt(()=>{c=!1,e(d),c||h(null,null)},o)}let Ht=null;function Ar(t){Ht=t}function xn(t,e){return e}function Jo(t,e,n){for(var s=t.items,r=[],i=e.length,a=0;a<i;a++)ar(e[a].e,r,!0);var o=i>0&&r.length===0&&n!==null;if(o){var c=n.parentNode;Io(c),c.append(n),s.clear(),nt(t,e[0].prev,e[i-1].next)}qi(r,()=>{for(var d=0;d<i;d++){var u=e[d];o||(s.delete(u.k),nt(t,u.prev,u.next)),ke(u.e,!o)}})}function lt(t,e,n,s,r,i=null){var a=t,o={flags:e,items:new Map,first:null},c=(e&ui)!==0;if(c){var d=t;a=d.appendChild(Tt())}var u=null,f=!1,h=new Map,v=tr(()=>{var S=n();return Nn(S)?S:S==null?[]:Xs(S)}),y,I;function b(){Xo(I,y,o,h,a,r,e,s,n),i!==null&&(y.length===0?u?vs(u):u=qe(()=>i(a)):u!==null&&Et(u,()=>{u=null}))}Mt(()=>{I??=W,y=l(v);var S=y.length;if(!(f&&S===0)){f=S===0;var M,$,P,T;if(sr()){var R=new Set,k=ce;for($=0;$<S;$+=1){P=y[$],T=s(P,$);var x=o.items.get(T)??h.get(T);x?(e&(us|fs))!==0&&Qi(x,P,$,e):(M=Vi(null,o,null,null,P,T,$,r,e,n,!0),h.set(T,M)),R.add(T)}for(const[Z,ie]of o.items)R.has(Z)||k.skipped_effects.add(ie.e);k.add_callback(b)}else b();l(v)}})}function Xo(t,e,n,s,r,i,a,o,c){var d=(a&za)!==0,u=(a&(us|fs))!==0,f=e.length,h=n.items,v=n.first,y=v,I,b=null,S,M=[],$=[],P,T,R,k;if(d)for(k=0;k<f;k+=1)P=e[k],T=o(P,k),R=h.get(T),R!==void 0&&(R.a?.measure(),(S??=new Set).add(R));for(k=0;k<f;k+=1){if(P=e[k],T=o(P,k),R=h.get(T),R===void 0){var x=s.get(T);if(x!==void 0){s.delete(T),h.set(T,x);var Z=b?b.next:y;nt(n,b,x),nt(n,x,Z),ks(x,Z,r),b=x}else{var ie=y?y.e.nodes_start:r;b=Vi(ie,n,b,b===null?n.first:b.next,P,T,k,i,a,c)}h.set(T,b),M=[],$=[],y=b.next;continue}if(u&&Qi(R,P,k,a),(R.e.f&et)!==0&&(vs(R.e),d&&(R.a?.unfix(),(S??=new Set).delete(R))),R!==y){if(I!==void 0&&I.has(R)){if(M.length<$.length){var H=$[0],B;b=H.prev;var be=M[0],Ee=M[M.length-1];for(B=0;B<M.length;B+=1)ks(M[B],H,r);for(B=0;B<$.length;B+=1)I.delete($[B]);nt(n,be.prev,Ee.next),nt(n,b,be),nt(n,Ee,H),y=H,b=Ee,k-=1,M=[],$=[]}else I.delete(R),ks(R,y,r),nt(n,R.prev,R.next),nt(n,R,b===null?n.first:b.next),nt(n,b,R),b=R;continue}for(M=[],$=[];y!==null&&y.k!==T;)(y.e.f&et)===0&&(I??=new Set).add(y),$.push(y),y=y.next;if(y===null)continue;R=y}M.push(R),b=R,y=R.next}if(y!==null||I!==void 0){for(var de=I===void 0?[]:Xs(I);y!==null;)(y.e.f&et)===0&&de.push(y),y=y.next;var C=de.length;if(C>0){var N=(a&ui)!==0&&f===0?r:null;if(d){for(k=0;k<C;k+=1)de[k].a?.measure();for(k=0;k<C;k+=1)de[k].a?.fix()}Jo(n,de,N)}}d&&At(()=>{if(S!==void 0)for(R of S)R.a?.apply()}),t.first=n.first&&n.first.e,t.last=b&&b.e;for(var ae of s.values())ke(ae.e);s.clear()}function Qi(t,e,n,s){(s&us)!==0&&on(t.v,e),(s&fs)!==0?on(t.i,n):t.i=n}function Vi(t,e,n,s,r,i,a,o,c,d,u){var f=Ht,h=(c&us)!==0,v=(c&Wa)===0,y=h?v?wo(r,!1,!1):Rt(r):r,I=(c&fs)===0?a:Rt(a),b={i:I,v:y,k:i,a:null,e:null,prev:n,next:s};Ht=b;try{if(t===null){var S=document.createDocumentFragment();S.append(t=Tt())}return b.e=qe(()=>o(t,y,I,d),no),b.e.prev=n&&n.e,b.e.next=s&&s.e,n===null?u||(e.first=b):(n.next=b,n.e.next=b.e),s!==null&&(s.prev=b,s.e.prev=b.e),b}finally{Ht=f}}function ks(t,e,n){for(var s=t.next?t.next.e.nodes_start:n,r=e?e.e.nodes_start:n,i=t.e.nodes_start;i!==null&&i!==s;){var a=Hn(i);r.before(i),i=a}}function nt(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function pe(t,e,...n){var s=t,r=ee,i;Mt(()=>{r!==(r=e())&&(i&&(ke(i),i=null),i=qe(()=>r(s,...n)))},Gt)}function Gi(t,e,n){var s=t,r,i,a=null,o=null;function c(){i&&(Et(i),i=null),a&&(a.lastChild.remove(),s.before(a),a=null),i=o,o=null}Mt(()=>{if(r!==(r=e())){var d=sr();if(r){var u=s;d&&(a=document.createDocumentFragment(),a.append(u=Tt()),i&&ce.skipped_effects.add(i)),o=qe(()=>n(u,r))}d?ce.add_callback(c):c()}},Gt)}function Zo(t,e,n,s,r,i){var a,o,c=null,d=t,u,f=Ht;Mt(()=>{const h=e()||null;var v=Oa;if(h!==a){var y=Ht;Ar(f),u&&(h===null?Et(u,()=>{u=null,o=null}):h===o?vs(u):ke(u)),h&&h!==o&&(u=qe(()=>{if(c=document.createElementNS(v,h),ln(c,c),s){var I=c.appendChild(Tt());s(c,I)}W.nodes_end=c,d.before(c)})),a=h,a&&(o=a),Ar(y)}},Gt)}function Ki(t,e){var n=void 0,s;Mt(()=>{n!==(n=e())&&(s&&(ke(s),s=null),n&&(s=qe(()=>{ir(()=>n(t))})))})}function Yi(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=Yi(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function Oo(){for(var t,e,n=0,s="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=Yi(t))&&(s&&(s+=" "),s+=e);return s}function Fo(t){return typeof t=="object"?Oo(t):t??""}const Rr=[...` 	
\r\f \v\uFEFF`];function ec(t,e,n){var s=t==null?"":""+t;if(e&&(s=s?s+" "+e:e),n){for(var r in n)if(n[r])s=s?s+" "+r:r;else if(s.length)for(var i=r.length,a=0;(a=s.indexOf(r,a))>=0;){var o=a+i;(a===0||Rr.includes(s[a-1]))&&(o===s.length||Rr.includes(s[o]))?s=(a===0?"":s.substring(0,a))+s.substring(o+1):a=o}}return s===""?null:s}function Pr(t,e=!1){var n=e?" !important;":";",s="";for(var r in t){var i=t[r];i!=null&&i!==""&&(s+=" "+r+": "+i+n)}return s}function xs(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function tc(t,e){if(e){var n="",s,r;if(Array.isArray(e)?(s=e[0],r=e[1]):s=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,a=0,o=!1,c=[];s&&c.push(...Object.keys(s).map(xs)),r&&c.push(...Object.keys(r).map(xs));var d=0,u=-1;const I=t.length;for(var f=0;f<I;f++){var h=t[f];if(o?h==="/"&&t[f-1]==="*"&&(o=!1):i?i===h&&(i=!1):h==="/"&&t[f+1]==="*"?o=!0:h==='"'||h==="'"?i=h:h==="("?a++:h===")"&&a--,!o&&i===!1&&a===0){if(h===":"&&u===-1)u=f;else if(h===";"||f===I-1){if(u!==-1){var v=xs(t.substring(d,u).trim());if(!c.includes(v)){h!==";"&&f++;var y=t.substring(d,f).trim();n+=" "+y+";"}}d=f+1,u=-1}}}}return s&&(n+=Pr(s)),r&&(n+=Pr(r,!0)),n=n.trim(),n===""?null:n}return t==null?null:String(t)}function at(t,e,n,s,r,i){var a=t.__className;if(a!==n||a===void 0){var o=ec(n,s,i);o==null?t.removeAttribute("class"):e?t.className=o:t.setAttribute("class",o),t.__className=n}else if(i&&r!==i)for(var c in i){var d=!!i[c];(r==null||d!==!!r[c])&&t.classList.toggle(c,d)}return i}function qs(t,e={},n,s){for(var r in n){var i=n[r];e[r]!==i&&(n[r]==null?t.style.removeProperty(r):t.style.setProperty(r,i,s))}}function nc(t,e,n,s){var r=t.__style;if(r!==e){var i=tc(e,s);i==null?t.removeAttribute("style"):t.style.cssText=i,t.__style=e}else s&&(Array.isArray(s)?(qs(t,n?.[0],s[0]),qs(t,n?.[1],s[1],"important")):qs(t,n,s));return s}function is(t,e,n=!1){if(t.multiple){if(e==null)return;if(!Nn(e))return eo();for(var s of t.options)s.selected=e.includes(Mn(s));return}for(s of t.options){var r=Mn(s);if(bo(r,e)){s.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Ji(t){var e=new MutationObserver(()=>{is(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),rr(()=>{e.disconnect()})}function Gs(t,e,n=e){var s=!0;Pi(t,"change",r=>{var i=r?"[selected]":":checked",a;if(t.multiple)a=[].map.call(t.querySelectorAll(i),Mn);else{var o=t.querySelector(i)??t.querySelector("option:not([disabled])");a=o&&Mn(o)}n(a)}),ir(()=>{var r=e();if(is(t,r,s),s&&r===void 0){var i=t.querySelector(":checked");i!==null&&(r=Mn(i),n(r))}t.__value=r,s=!1}),Ji(t)}function Mn(t){return"__value"in t?t.__value:t.value}const In=Symbol("class"),Sn=Symbol("style"),Xi=Symbol("is custom element"),Zi=Symbol("is html");function sc(t,e){var n=cr(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function rc(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function bt(t,e,n,s){var r=cr(t);r[e]!==(r[e]=n)&&(e==="loading"&&(t[Da]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Oi(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function ic(t,e,n,s,r=!1,i=!1){var a=cr(t),o=a[Xi],c=!a[Zi],d=e||{},u=t.tagName==="OPTION";for(var f in e)f in n||(n[f]=null);n.class?n.class=Fo(n.class):n[In]&&(n.class=null),n[Sn]&&(n.style??=null);var h=Oi(t);for(const P in n){let T=n[P];if(u&&P==="value"&&T==null){t.value=t.__value="",d[P]=T;continue}if(P==="class"){var v=t.namespaceURI==="http://www.w3.org/1999/xhtml";at(t,v,T,s,e?.[In],n[In]),d[P]=T,d[In]=n[In];continue}if(P==="style"){nc(t,T,e?.[Sn],n[Sn]),d[P]=T,d[Sn]=n[Sn];continue}var y=d[P];if(!(T===y&&!(T===void 0&&t.hasAttribute(P)))){d[P]=T;var I=P[0]+P[1];if(I!=="$$")if(I==="on"){const R={},k="$$"+P;let x=P.slice(2);var b=Uo(x);if(No(x)&&(x=x.slice(0,-7),R.capture=!0),!b&&y){if(T!=null)continue;t.removeEventListener(x,d[k],R),d[k]=null}if(T!=null)if(b)t[`__${x}`]=T,Dt([x]);else{let Z=function(ie){d[P].call(this,ie)};var $=Z;d[k]=or(x,t,Z,R)}else b&&(t[`__${x}`]=void 0)}else if(P==="style")bt(t,P,T);else if(P==="autofocus")So(t,!!T);else if(!o&&(P==="__value"||P==="value"&&T!=null))t.value=t.__value=T;else if(P==="selected"&&u)rc(t,T);else{var S=P;c||(S=Bo(S));var M=S==="defaultValue"||S==="defaultChecked";if(T==null&&!o&&!M)if(a[P]=null,S==="value"||S==="checked"){let R=t;const k=e===void 0;if(S==="value"){let x=R.defaultValue;R.removeAttribute(S),R.defaultValue=x,R.value=R.__value=k?x:null}else{let x=R.defaultChecked;R.removeAttribute(S),R.defaultChecked=x,R.checked=k?x:!1}}else t.removeAttribute(P);else M||h.includes(S)&&(o||typeof T!="string")?(t[S]=T,S in a&&(a[S]=De)):typeof T!="function"&&bt(t,S,T)}}}return d}function Tr(t,e,n=[],s=[],r,i=!1,a=!1){wi(n,s,o=>{var c=void 0,d={},u=t.nodeName==="SELECT",f=!1;if(Mt(()=>{var v=e(...o.map(l)),y=ic(t,c,v,r,i,a);f&&u&&"value"in v&&is(t,v.value);for(let b of Object.getOwnPropertySymbols(d))v[b]||ke(d[b]);for(let b of Object.getOwnPropertySymbols(v)){var I=v[b];b.description===Fa&&(!c||I!==c[b])&&(d[b]&&ke(d[b]),d[b]=qe(()=>Ki(t,()=>I))),y[b]=I}c=y}),u){var h=t;ir(()=>{is(h,c.value,!0),Ji(h)})}f=!0})}function cr(t){return t.__attributes??={[Xi]:t.nodeName.includes("-"),[Zi]:t.namespaceURI===Za}}var Mr=new Map;function Oi(t){var e=t.getAttribute("is")||t.nodeName,n=Mr.get(e);if(n)return n;Mr.set(e,n=[]);for(var s,r=t,i=Element.prototype;i!==r;){s=ai(r);for(var a in s)s[a].set&&n.push(a);r=cs(r)}return n}const ac=()=>performance.now(),pt={tick:t=>requestAnimationFrame(t),now:()=>ac(),tasks:new Set};function Fi(){const t=pt.now();pt.tasks.forEach(e=>{e.c(t)||(pt.tasks.delete(e),e.f())}),pt.tasks.size!==0&&pt.tick(Fi)}function oc(t){let e;return pt.tasks.size===0&&pt.tick(Fi),{promise:new Promise(n=>{pt.tasks.add(e={c:t,f:n})}),abort(){pt.tasks.delete(e)}}}function cc(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function Dr(t){const e={},n=t.split(";");for(const s of n){const[r,i]=s.split(":");if(!r||i===void 0)break;const a=cc(r.trim());e[a]=i.trim()}return e}const lc=t=>t;function ea(t,e,n){var s=Ht,r,i,a,o=null;s.a??={element:t,measure(){r=this.element.getBoundingClientRect()},apply(){if(a?.abort(),i=this.element.getBoundingClientRect(),r.left!==i.left||r.right!==i.right||r.top!==i.top||r.bottom!==i.bottom){const c=e()(this.element,{from:r,to:i},n?.());a=ta(this.element,c,void 0,1,()=>{a?.abort(),a=void 0})}},fix(){if(!t.getAnimations().length){var{position:c,width:d,height:u}=getComputedStyle(t);if(c!=="absolute"&&c!=="fixed"){var f=t.style;o={position:f.position,width:f.width,height:f.height,transform:f.transform},f.position="absolute",f.width=d,f.height=u;var h=t.getBoundingClientRect();if(r.left!==h.left||r.top!==h.top){var v=`translate(${r.left-h.left}px, ${r.top-h.top}px)`;f.transform=f.transform?`${f.transform} ${v}`:v}}}},unfix(){if(o){var c=t.style;c.position=o.position,c.width=o.width,c.height=o.height,c.transform=o.transform}}},s.a.element=t}function ta(t,e,n,s,r){if(nn(e)){var i,a=!1;return At(()=>{if(!a){var I=e({direction:"in"});i=ta(t,I,n,s,r)}}),{abort:()=>{a=!0,i?.abort()},deactivate:()=>i.deactivate(),reset:()=>i.reset(),t:()=>i.t()}}if(!e?.duration)return r(),{abort:ee,deactivate:ee,reset:ee,t:()=>s};const{delay:o=0,css:c,tick:d,easing:u=lc}=e;var f=[];if(d&&d(0,1),c){var h=Dr(c(0,1));f.push(h,h)}var v=()=>1-s,y=t.animate(f,{duration:o,fill:"forwards"});return y.onfinish=()=>{y.cancel();var I=1-s,b=s-I,S=e.duration*Math.abs(b),M=[];if(S>0){var $=!1;if(c)for(var P=Math.ceil(S/16.666666666666668),T=0;T<=P;T+=1){var R=I+b*u(T/P),k=Dr(c(R,1-R));M.push(k),$||=k.overflow==="hidden"}$&&(t.style.overflow="hidden"),v=()=>{var x=y.currentTime;return I+b*u(x/S)},d&&oc(()=>{if(y.playState!=="running")return!1;var x=v();return d(x,1-x),!0})}y=t.animate(M,{duration:S,fill:"forwards"}),y.onfinish=()=>{v=()=>s,d?.(s,1-s),r()}},{abort:()=>{y&&(y.cancel(),y.effect=null,y.onfinish=ee)},deactivate:()=>{r=ee},reset:()=>{},t:()=>v()}}function Ge(t,e,n=e){var s=new WeakSet;Pi(t,"input",async r=>{var i=r?t.defaultValue:t.value;if(i=js(t)?Cs(i):i,n(i),ce!==null&&s.add(ce),await qo(),i!==(i=e())){var a=t.selectionStart,o=t.selectionEnd;t.value=i??"",o!==null&&(t.selectionStart=a,t.selectionEnd=Math.min(o,t.value.length))}}),Bn(e)==null&&t.value&&(n(js(t)?Cs(t.value):t.value),ce!==null&&s.add(ce)),Di(()=>{var r=e();if(t===document.activeElement){var i=ns??ce;if(s.has(i))return}js(t)&&r===Cs(t.value)||t.type==="date"&&!r&&!t.value||r!==t.value&&(t.value=r??"")})}function js(t){var e=t.type;return e==="number"||e==="range"}function Cs(t){return t===""?null:+t}function dc(t=!1){const e=Se,n=e.l.u;if(!n)return;let s=()=>Co(e.s);if(t){let r=0,i={};const a=Un(()=>{let o=!1;const c=e.s;for(const d in c)c[d]!==i[d]&&(i[d]=c[d],o=!0);return o&&r++,r});s=()=>l(a)}n.b.length&&Po(()=>{$r(e,s),Us(n.b)}),tt(()=>{const r=Bn(()=>n.m.map(Pa));return()=>{for(const i of r)typeof i=="function"&&i()}}),n.a.length&&tt(()=>{$r(e,s),Us(n.a)})}function $r(t,e){if(t.l.s)for(const n of t.l.s)l(n);e()}let Fn=!1;function uc(t){var e=Fn;try{return Fn=!1,[t(),Fn]}finally{Fn=e}}const fc={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function ve(t,e,n){return new Proxy({props:t,exclude:e},fc)}const hc={get(t,e){let n=t.props.length;for(;n--;){let s=t.props[n];if(nn(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s)return s[e]}},set(t,e,n){let s=t.props.length;for(;s--;){let r=t.props[s];nn(r)&&(r=r());const i=It(r,e);if(i&&i.set)return i.set(n),!0}return!1},getOwnPropertyDescriptor(t,e){let n=t.props.length;for(;n--;){let s=t.props[n];if(nn(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s){const r=It(s,e);return r&&!r.configurable&&(r.configurable=!0),r}}},has(t,e){if(e===vt||e===di)return!1;for(let n of t.props)if(nn(n)&&(n=n()),n!=null&&e in n)return!0;return!1},ownKeys(t){const e=[];for(let n of t.props)if(nn(n)&&(n=n()),!!n){for(const s in n)e.includes(s)||e.push(s);for(const s of Object.getOwnPropertySymbols(n))e.includes(s)||e.push(s)}return e}};function ye(...t){return new Proxy({props:t},hc)}function Ne(t,e,n,s){var r=!un||(n&Va)!==0,i=(n&Ka)!==0,a=(n&Ya)!==0,o=s,c=!0,d=()=>(c&&(c=!1,o=a?Bn(s):s),o),u;if(i){var f=vt in t||di in t;u=It(t,e)?.set??(f&&e in t?$=>t[e]=$:void 0)}var h,v=!1;i?[h,v]=uc(()=>t[e]):h=t[e],h===void 0&&s!==void 0&&(h=d(),u&&(r&&Na(),u(h)));var y;if(r?y=()=>{var $=t[e];return $===void 0?d():(c=!0,$)}:y=()=>{var $=t[e];return $!==void 0&&(o=void 0),$===void 0?o:$},r&&(n&Ga)===0)return y;if(u){var I=t.$$legacy;return(function($,P){return arguments.length>0?((!r||!P||I||v)&&u(P?y():$),$):y()})}var b=!1,S=((n&Qa)!==0?Un:tr)(()=>(b=!1,y()));i&&l(S);var M=W;return(function($,P){if(arguments.length>0){const T=P?l(S):r&&i?he($):$;return p(S,T),b=!0,o!==void 0&&(o=T),$}return Kt&&b||(M.f&Vt)!==0?S.v:l(S)})}function pc(t){Se===null&&$a(),un&&Se.l!==null?vc(Se).m.push(t):tt(()=>{const e=Bn(t);if(typeof e=="function")return e})}function vc(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const gc="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(gc);const mc="modulepreload",yc=function(t){return"/"+t},kr={},xr=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){let d=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};var a=d;document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");r=d(n.map(u=>{if(u=yc(u),u in kr)return;kr[u]=!0;const f=u.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":mc,f||(v.as="script"),v.crossOrigin="",v.href=u,c&&v.setAttribute("nonce",c),document.head.appendChild(v),f)return new Promise((y,I)=>{v.addEventListener("load",y),v.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return r.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})};class _t extends Map{#e=new Map;#t=A(0);#n=A(0);#r=mt||-1;constructor(e){if(super(),e){for(var[n,s]of e)super.set(n,s);this.#n.v=super.size}}#o(e){return mt===this.#r?A(e):Rt(e)}has(e){var n=this.#e,s=n.get(e);if(s===void 0){var r=super.get(e);if(r!==void 0)s=this.#o(0),n.set(e,s);else return l(this.#t),!1}return l(s),!0}forEach(e,n){this.#c(),super.forEach(e,n)}get(e){var n=this.#e,s=n.get(e);if(s===void 0){var r=super.get(e);if(r!==void 0)s=this.#o(0),n.set(e,s);else{l(this.#t);return}}return l(s),super.get(e)}set(e,n){var s=this.#e,r=s.get(e),i=super.get(e),a=super.set(e,n),o=this.#t;if(r===void 0)r=this.#o(0),s.set(e,r),p(this.#n,super.size),it(o);else if(i!==n){it(r);var c=o.reactions===null?null:new Set(o.reactions),d=c===null||!r.reactions?.every(u=>c.has(u));d&&it(o)}return a}delete(e){var n=this.#e,s=n.get(e),r=super.delete(e);return s!==void 0&&(n.delete(e),p(this.#n,super.size),p(s,-1),it(this.#t)),r}clear(){if(super.size!==0){super.clear();var e=this.#e;p(this.#n,0);for(var n of e.values())p(n,-1);it(this.#t),e.clear()}}#c(){l(this.#t);var e=this.#e;if(this.#n.v!==e.size){for(var n of super.keys())if(!e.has(n)){var s=this.#o(0);e.set(n,s)}}for([,s]of this.#e)l(s)}keys(){return l(this.#t),super.keys()}values(){return this.#c(),super.values()}entries(){return this.#c(),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return l(this.#n),super.size}}class wc{#e;#t;constructor(e,n){this.#e=e,this.#t=er(n)}get current(){return this.#t(),this.#e()}}const bc=/\(.+\)/,_c=new Set(["all","print","screen","and","or","not","only"]);class Ic extends wc{constructor(e,n){let s=bc.test(e)||e.split(/[\s,]+/).some(i=>_c.has(i.trim()))?e:`(${e})`;const r=window.matchMedia(s);super(()=>r.matches,i=>Vs(r,"change",i))}}const Sc=typeof window<"u"?window:void 0;function Ec(t){let e=t.activeElement;for(;e?.shadowRoot;){const n=e.shadowRoot.activeElement;if(n===e)break;e=n}return e}class Ac{#e;#t;constructor(e={}){const{window:n=Sc,document:s=n?.document}=e;n!==void 0&&(this.#e=s,this.#t=er(r=>{const i=Vs(n,"focusin",r),a=Vs(n,"focusout",r);return()=>{i(),a()}}))}get current(){return this.#t?.(),this.#e?Ec(this.#e):null}}new Ac;function Rc(t){return typeof t=="function"}function Pc(t,e){if(Rc(t)){const s=t();return s===void 0?e:s}return t===void 0?e:t}function Tc(t,e){let n=A(null);const s=Q(()=>Pc(e,250));function r(...i){if(l(n))l(n).timeout&&clearTimeout(l(n).timeout);else{let a,o;const c=new Promise((d,u)=>{a=d,o=u});p(n,{timeout:null,runner:null,promise:c,resolve:a,reject:o},!0)}return l(n).runner=async()=>{if(!l(n))return;const a=l(n);p(n,null);try{a.resolve(await t.apply(this,i))}catch(o){a.reject(o)}},l(n).timeout=setTimeout(l(n).runner,l(s)),l(n).promise}return r.cancel=async()=>{(!l(n)||l(n).timeout===null)&&(await new Promise(i=>setTimeout(i,0)),!l(n)||l(n).timeout===null)||(clearTimeout(l(n).timeout),l(n).reject("Cancelled"),p(n,null))},r.runScheduledNow=async()=>{(!l(n)||!l(n).timeout)&&(await new Promise(i=>setTimeout(i,0)),!l(n)||!l(n).timeout)||(clearTimeout(l(n).timeout),l(n).timeout=null,await l(n).runner?.())},Object.defineProperty(r,"pending",{enumerable:!0,get(){return!!l(n)?.timeout}}),r}function ot(t){if(!t?.trim())return null;try{return JSON.parse(t)}catch(e){return console.warn("[ProductsStore] Erreur parsing JSON:",e),null}}function ms(t){return t?.length?t.filter(e=>e.quantity!=null&&e.unit).map(e=>({q:typeof e.quantity=="number"?e.quantity:parseFloat(e.quantity),u:e.unit})).filter(e=>!isNaN(e.q)):[]}function ys(t){if(!t?.length)return[];const e=new Map;return t.forEach(n=>{if(!n.q||!n.u||typeof n.q!="number"||isNaN(n.q))return;const s=e.get(n.u)||0;e.set(n.u,s+n.q)}),Array.from(e.entries()).map(([n,s])=>({q:s,u:n}))}function ws(t,e){if(!t?.length)return{numeric:[],display:"✅ Complet"};if(!e?.length){const o=t.map(c=>Nt(c.q.toString(),c.u)).join(" et ");return{numeric:t,display:o}}const n=new Map,s=new Map;t.forEach(o=>{const c=parseFloat(o.q);isNaN(c)||n.set(o.u,(n.get(o.u)||0)+c)}),e.forEach(o=>{s.set(o.u,(s.get(o.u)||0)+o.q)});const r=[],i=[];n.forEach((o,c)=>{const d=s.get(c)||0,u=o-d;u>0&&(r.push({q:u,u:c}),i.push(Nt(u.toString(),c)))});const a=i.length>0?i.join(" et "):"✅ Complet";return{numeric:r,display:a}}function Ue(t){return t?.length?t.map(e=>Nt(e.q.toString(),e.u)).join(" et "):"-"}function Nt(t,e){const n=parseFloat(t);if(isNaN(n))return`${t} ${e}`;if((e==="gr."||e==="ml")&&n>=1e3){const s=n/1e3,r=e==="gr."?"kg":"l.";let a=(Math.round(s*100)/100).toString();return a.endsWith(",0")&&(a=a.slice(0,-2)),a.endsWith(",00")&&(a=a.slice(0,-3)),`${a} ${r}`}if(!["gr.","ml","kg","l."].includes(e)){let r=(Math.round(n*10)/10).toString();return r.endsWith(",0")&&(r=r.slice(0,-2)),`${r} ${e}`}return`${n} ${e}`}function lr(t){if(!t?.length)return[];const e=new Map;return t.forEach(({q:n,u:s})=>{if(typeof n=="number"&&!isNaN(n)){const r=e.get(s)||0;e.set(s,r+n)}}),Array.from(e.entries()).map(([n,s])=>({q:s,u:n}))}function Mc(t){return t?Object.values(t).some(e=>e.recipes?.some(n=>n.q!==void 0||n.u!==void 0)):!1}function dr(t){if(!t)return[];const e=Object.values(t).flatMap(n=>n.totalConsolidated);return lr(e)}function na(t,e){const n=new Map,s=new Map;t.forEach(({q:a,u:o})=>{n.set(o,(n.get(o)||0)+a)}),e.forEach(({q:a,u:o})=>{s.set(o,(s.get(o)||0)+a)});const r=[],i=new Set([...n.keys(),...s.keys()]);for(const a of i){const o=n.get(a)||0,c=s.get(a)||0,d=o-c;Math.abs(d)>.001&&r.push({q:d,u:a})}return r}function ur(t){if(!t?.length)return"Équilibré";const e=t.filter(s=>s.q>0),n=t.filter(s=>s.q<0);if(e.length>0&&n.length>0){const s=e.map(i=>Nt(i.q.toString(),i.u)).join(" et "),r=n.map(i=>Nt(Math.abs(i.q).toString(),i.u)).join(" et ");return`${s} disponibles, ${r} manquant${n.length>1?"s":""}`}else return e.length>0?e.map(s=>"+"+Nt(s.q.toString(),s.u)).join(" et ")+" disponibles":n.length>0?n.map(s=>Nt(Math.abs(s.q).toString(),s.u)).join(" et ")+` manquant${n.length>1?"s":""}`:"Équilibré"}function Dc(t,e){if(e.searchQuery.trim()){const n=e.searchQuery.toLowerCase();if(!t.productName.toLowerCase().includes(n))return!1}return!(e.selectedStores.length>0&&(!t.storeInfo?.storeName||!e.selectedStores.includes(t.storeInfo.storeName))||e.selectedWho.length>0&&(!t.who||!t.who.some(n=>e.selectedWho.includes(n)))||e.selectedProductTypes.length>0&&(!t.productType||!e.selectedProductTypes.includes(t.productType))||e.selectedTemperatures.length>0&&!(e.selectedTemperatures.includes("frais")&&t.pFrais||e.selectedTemperatures.includes("surgele")&&t.pSurgel))}function qr(t){return{...t,products:t.products?.map(e=>typeof e=="string"?e:e.$id)||[],mainId:t.mainId}}function $c(t){const e=ot(t.specs)??null,n=ys(ms(t.purchases??[]));let s=[];e?.quantity&&(s=[e.quantity]);const{numeric:r,display:i}=ws(s,n),a=ot(t.stockReel)??null,o=Ue(n),c=t.store?ot(t.store):null,d=a?`${a.quantity} ${a.unit}`:o;return{$id:t.$id,$createdAt:t.$createdAt,$updatedAt:t.$updatedAt,productHugoUuid:t.productHugoUuid||"",productName:t.productName,productType:t.productType||"none",pFrais:e?.pFrais??!1,pSurgel:e?.pSurgel??!1,nbRecipes:0,totalAssiettes:0,isSynced:t.isSynced,mainId:t.mainId,totalNeededRaw:[],status:t.status,who:t.who,store:t.store,stockReel:t.stockReel,previousNames:t.previousNames,isMerged:t.isMerged,mergedFrom:t.mergedFrom,mergeDate:t.mergeDate,mergeReason:t.mergeReason,mergedInto:t.mergedInto,totalNeededOverride:t.totalNeededOverride,purchases:t.purchases,specs:t.specs,byDate:{},storeInfo:c,stockParsed:a,specsParsed:e,totalNeededArray:s,totalPurchasesArray:n,missingQuantityArray:r,stockOrTotalPurchases:d,displayTotalNeeded:Ue(s),displayTotalPurchases:o,displayMissingQuantity:i,totalNeededOverrideParsed:ot(t.totalNeededOverride),displayTotalOverride:(()=>{const u=ot(t.totalNeededOverride);return u?Ue([u.totalOverride]):""})()}}function es(t,e){const n=t.purchases??e.purchases,s=t.specs??e.specs,r=s?ot(s):e.specsParsed,i=ys(ms(n??[])),a=Ue(i);let o=e.totalNeededArray;!e.productHugoUuid&&r?.quantity&&(o=[r.quantity]);const{numeric:c,display:d}=ws(o,i),u=t.stockReel??e.stockReel,f=u?ot(u):e.stockParsed,h=t.store??e.store,v=h?ot(h):e.storeInfo,y=f?`${f.quantity} ${f.unit}`:a;return t.purchases===void 0&&e.purchases?.length&&console.log(`[ProductsStore] Fusion intelligente : préservation de ${e.purchases.length} purchases pour ${e.productName}`),{...e,$updatedAt:t.$updatedAt,productName:t.productName??e.productName,productType:t.productType??e.productType,isSynced:t.isSynced??e.isSynced,mainId:t.mainId??e.mainId,pFrais:r?.pFrais??e.pFrais,pSurgel:r?.pSurgel??e.pSurgel,status:t.status??e.status,who:t.who??e.who,store:h,stockReel:u,specs:s,purchases:n,previousNames:t.previousNames??e.previousNames,isMerged:t.isMerged??e.isMerged,mergedFrom:t.mergedFrom??e.mergedFrom,mergeDate:t.mergeDate??e.mergeDate,mergeReason:t.mergeReason??e.mergeReason,mergedInto:t.mergedInto??e.mergedInto,totalNeededOverride:t.totalNeededOverride??e.totalNeededOverride,storeInfo:v,stockParsed:f,specsParsed:r,totalNeededArray:o,totalPurchasesArray:i,missingQuantityArray:c,stockOrTotalPurchases:y,displayTotalPurchases:a,displayMissingQuantity:d,displayTotalNeeded:Ue(o),totalNeededOverrideParsed:ot(t.totalNeededOverride??e.totalNeededOverride),displayTotalOverride:(()=>{const I=ot(t.totalNeededOverride??e.totalNeededOverride);return I?Ue([I.totalOverride]):""})()}}class kc{#e=A(he([]));MAX_TOASTS=3;get toasts(){return[...l(this.#e)].sort((e,n)=>n.timestamp-e.timestamp)}create(e){const n=e.id||crypto.randomUUID(),s={id:n,state:e.state,message:e.message,timestamp:Date.now(),source:e.source||"user",timeoutId:void 0,details:e.details,actions:e.actions||[]};return this.#t(s),n}update(e,n){const s=l(this.#e).findIndex(i=>i.id===e);if(s===-1)return;const r=l(this.#e)[s];r.timeoutId&&clearTimeout(r.timeoutId),l(this.#e)[s]={...r,state:n.state||r.state,message:n.message||r.message,source:n.source||r.source,actions:n.actions||r.actions},this.#n(l(this.#e)[s])}async track(e,n){const s=this.create({id:n.id,state:"loading",message:n.loading,source:"user"});try{const r=await e;return this.update(s,{state:"success",message:n.success||"Opération réussie"}),r}catch(r){throw this.update(s,{state:"error",message:n.error||"Erreur lors de l'opération"}),r}}dismiss(e){const n=l(this.#e).findIndex(r=>r.id===e);if(n===-1)return;const s=l(this.#e)[n];s.timeoutId&&clearTimeout(s.timeoutId),l(this.#e).splice(n,1)}dismissAll(){l(this.#e).forEach(e=>{e.timeoutId&&clearTimeout(e.timeoutId)}),p(this.#e,[],!0)}#t(e){if(e.source==="user"){const n=l(this.#e).findIndex(s=>s.source==="user");n>=0?l(this.#e)[n]=e:l(this.#e).push(e)}else{const n=l(this.#e).filter(s=>s.source!=="user");if(n.length>=2){const s=n[0];this.dismiss(s.id)}l(this.#e).push(e)}l(this.#e).length>this.MAX_TOASTS&&l(this.#e).splice(0,l(this.#e).length-this.MAX_TOASTS),this.#n(e)}#n(e){if(e.state!=="success"&&e.state!=="info")return;const n=e.source==="realtime-other"?4e3:2e3;e.timeoutId=setTimeout(()=>{this.dismiss(e.id)},n)}success(e,n){return this.create({state:"success",message:e,details:n})}error(e,n){return this.create({state:"error",message:e,details:n})}warning(e,n){return this.create({state:"warning",message:e,source:n?.source||"system",details:n?.details,actions:n?.actions})}info(e,n){return this.create({state:"info",message:e,source:n?.source||"system",details:n?.details})}loading(e,n){return this.create({state:"loading",message:e,details:n})}}const Je=new kc;function Ns(t,e,n,s){function r(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(u){try{d(s.next(u))}catch(f){a(f)}}function c(u){try{d(s.throw(u))}catch(f){a(f)}}function d(u){u.done?i(u.value):r(u.value).then(o,c)}d((s=s.apply(t,[])).next())})}function xc(t,e,n,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?s:n==="a"?s.call(t):s?s.value:e.get(t)}class _{constructor(e,n,s){this.method=e,this.attribute=n,s!==void 0&&(Array.isArray(s)?this.values=s:this.values=[s])}toString(){return JSON.stringify({method:this.method,attribute:this.attribute,values:this.values})}}_.equal=(t,e)=>new _("equal",t,e).toString();_.notEqual=(t,e)=>new _("notEqual",t,e).toString();_.lessThan=(t,e)=>new _("lessThan",t,e).toString();_.lessThanEqual=(t,e)=>new _("lessThanEqual",t,e).toString();_.greaterThan=(t,e)=>new _("greaterThan",t,e).toString();_.greaterThanEqual=(t,e)=>new _("greaterThanEqual",t,e).toString();_.isNull=t=>new _("isNull",t).toString();_.isNotNull=t=>new _("isNotNull",t).toString();_.between=(t,e,n)=>new _("between",t,[e,n]).toString();_.startsWith=(t,e)=>new _("startsWith",t,e).toString();_.endsWith=(t,e)=>new _("endsWith",t,e).toString();_.select=t=>new _("select",void 0,t).toString();_.search=(t,e)=>new _("search",t,e).toString();_.orderDesc=t=>new _("orderDesc",t).toString();_.orderAsc=t=>new _("orderAsc",t).toString();_.orderRandom=()=>new _("orderRandom").toString();_.cursorAfter=t=>new _("cursorAfter",void 0,t).toString();_.cursorBefore=t=>new _("cursorBefore",void 0,t).toString();_.limit=t=>new _("limit",void 0,t).toString();_.offset=t=>new _("offset",void 0,t).toString();_.contains=(t,e)=>new _("contains",t,e).toString();_.notContains=(t,e)=>new _("notContains",t,e).toString();_.notSearch=(t,e)=>new _("notSearch",t,e).toString();_.notBetween=(t,e,n)=>new _("notBetween",t,[e,n]).toString();_.notStartsWith=(t,e)=>new _("notStartsWith",t,e).toString();_.notEndsWith=(t,e)=>new _("notEndsWith",t,e).toString();_.createdBefore=t=>_.lessThan("$createdAt",t);_.createdAfter=t=>_.greaterThan("$createdAt",t);_.createdBetween=(t,e)=>_.between("$createdAt",t,e);_.updatedBefore=t=>_.lessThan("$updatedAt",t);_.updatedAfter=t=>_.greaterThan("$updatedAt",t);_.updatedBetween=(t,e)=>_.between("$updatedAt",t,e);_.or=t=>new _("or",void 0,t.map(e=>JSON.parse(e))).toString();_.and=t=>new _("and",void 0,t.map(e=>JSON.parse(e))).toString();_.distanceEqual=(t,e,n,s=!0)=>new _("distanceEqual",t,[[e,n,s]]).toString();_.distanceNotEqual=(t,e,n,s=!0)=>new _("distanceNotEqual",t,[[e,n,s]]).toString();_.distanceGreaterThan=(t,e,n,s=!0)=>new _("distanceGreaterThan",t,[[e,n,s]]).toString();_.distanceLessThan=(t,e,n,s=!0)=>new _("distanceLessThan",t,[[e,n,s]]).toString();_.intersects=(t,e)=>new _("intersects",t,[e]).toString();_.notIntersects=(t,e)=>new _("notIntersects",t,[e]).toString();_.crosses=(t,e)=>new _("crosses",t,[e]).toString();_.notCrosses=(t,e)=>new _("notCrosses",t,[e]).toString();_.overlaps=(t,e)=>new _("overlaps",t,[e]).toString();_.notOverlaps=(t,e)=>new _("notOverlaps",t,[e]).toString();_.touches=(t,e)=>new _("touches",t,[e]).toString();_.notTouches=(t,e)=>new _("notTouches",t,[e]).toString();class m extends Error{constructor(e,n=0,s="",r=""){super(e),this.name="AppwriteException",this.message=e,this.code=n,this.type=s,this.response=r}}class st{constructor(){this.config={endpoint:"https://cloud.appwrite.io/v1",endpointRealtime:"",project:"",jwt:"",locale:"",session:"",devkey:""},this.headers={"x-sdk-name":"Web","x-sdk-platform":"client","x-sdk-language":"web","x-sdk-version":"21.4.0","X-Appwrite-Response-Format":"1.8.0"},this.realtime={socket:void 0,timeout:void 0,heartbeat:void 0,url:"",channels:new Set,subscriptions:new Map,subscriptionsCounter:0,reconnect:!0,reconnectAttempts:0,lastMessage:void 0,connect:()=>{clearTimeout(this.realtime.timeout),this.realtime.timeout=window?.setTimeout(()=>{this.realtime.createSocket()},50)},getTimeout:()=>{switch(!0){case this.realtime.reconnectAttempts<5:return 1e3;case this.realtime.reconnectAttempts<15:return 5e3;case this.realtime.reconnectAttempts<100:return 1e4;default:return 6e4}},createHeartbeat:()=>{this.realtime.heartbeat&&clearTimeout(this.realtime.heartbeat),this.realtime.heartbeat=window?.setInterval(()=>{var e;(e=this.realtime.socket)===null||e===void 0||e.send(JSON.stringify({type:"ping"}))},2e4)},createSocket:()=>{var e,n,s;if(this.realtime.channels.size<1){this.realtime.reconnect=!1,(e=this.realtime.socket)===null||e===void 0||e.close();return}const r=new URLSearchParams;this.config.project&&r.set("project",this.config.project),this.realtime.channels.forEach(a=>{r.append("channels[]",a)});const i=this.config.endpointRealtime+"/realtime?"+r.toString();(i!==this.realtime.url||!this.realtime.socket||((n=this.realtime.socket)===null||n===void 0?void 0:n.readyState)>WebSocket.OPEN)&&(this.realtime.socket&&((s=this.realtime.socket)===null||s===void 0?void 0:s.readyState)<WebSocket.CLOSING&&(this.realtime.reconnect=!1,this.realtime.socket.close()),this.realtime.url=i,this.realtime.socket=new WebSocket(i),this.realtime.socket.addEventListener("message",this.realtime.onMessage),this.realtime.socket.addEventListener("open",a=>{this.realtime.reconnectAttempts=0,this.realtime.createHeartbeat()}),this.realtime.socket.addEventListener("close",a=>{var o,c,d;if(!this.realtime.reconnect||((c=(o=this.realtime)===null||o===void 0?void 0:o.lastMessage)===null||c===void 0?void 0:c.type)==="error"&&((d=this.realtime)===null||d===void 0?void 0:d.lastMessage.data).code===1008){this.realtime.reconnect=!0;return}const u=this.realtime.getTimeout();console.error(`Realtime got disconnected. Reconnect will be attempted in ${u/1e3} seconds.`,a.reason),setTimeout(()=>{this.realtime.reconnectAttempts++,this.realtime.createSocket()},u)}))},onMessage:e=>{var n,s;try{const r=JSON.parse(e.data);switch(this.realtime.lastMessage=r,r.type){case"connected":let i=this.config.session;if(!i){const c=JSON.parse((n=window.localStorage.getItem("cookieFallback"))!==null&&n!==void 0?n:"{}");i=c?.[`a_session_${this.config.project}`]}const a=r.data;i&&!a.user&&((s=this.realtime.socket)===null||s===void 0||s.send(JSON.stringify({type:"authentication",data:{session:i}})));break;case"event":let o=r.data;if(o?.channels){if(!o.channels.some(d=>this.realtime.channels.has(d)))return;this.realtime.subscriptions.forEach(d=>{o.channels.some(u=>d.channels.includes(u))&&setTimeout(()=>d.callback(o))})}break;case"pong":break;case"error":throw r.data;default:break}}catch(r){console.error(r)}},cleanUp:e=>{this.realtime.channels.forEach(n=>{e.includes(n)&&(Array.from(this.realtime.subscriptions).some(([r,i])=>i.channels.includes(n))||this.realtime.channels.delete(n))})}}}setEndpoint(e){if(!e.startsWith("http://")&&!e.startsWith("https://"))throw new m("Invalid endpoint URL: "+e);return this.config.endpoint=e,this.config.endpointRealtime=e.replace("https://","wss://").replace("http://","ws://"),this}setEndpointRealtime(e){if(!e.startsWith("ws://")&&!e.startsWith("wss://"))throw new m("Invalid realtime endpoint URL: "+e);return this.config.endpointRealtime=e,this}setProject(e){return this.headers["X-Appwrite-Project"]=e,this.config.project=e,this}setJWT(e){return this.headers["X-Appwrite-JWT"]=e,this.config.jwt=e,this}setLocale(e){return this.headers["X-Appwrite-Locale"]=e,this.config.locale=e,this}setSession(e){return this.headers["X-Appwrite-Session"]=e,this.config.session=e,this}setDevKey(e){return this.headers["X-Appwrite-Dev-Key"]=e,this.config.devkey=e,this}subscribe(e,n){let s=typeof e=="string"?[e]:e;s.forEach(i=>this.realtime.channels.add(i));const r=this.realtime.subscriptionsCounter++;return this.realtime.subscriptions.set(r,{channels:s,callback:n}),this.realtime.connect(),()=>{this.realtime.subscriptions.delete(r),this.realtime.cleanUp(s),this.realtime.connect()}}prepareRequest(e,n,s={},r={}){if(e=e.toUpperCase(),s=Object.assign({},this.headers,s),typeof window<"u"&&window.localStorage){const a=window.localStorage.getItem("cookieFallback");a&&(s["X-Fallback-Cookies"]=a)}let i={method:e,headers:s};if(s["X-Appwrite-Dev-Key"]===void 0&&(i.credentials="include"),e==="GET")for(const[a,o]of Object.entries(st.flatten(r)))n.searchParams.append(a,o);else switch(s["content-type"]){case"application/json":i.body=JSON.stringify(r);break;case"multipart/form-data":const a=new FormData;for(const[o,c]of Object.entries(r))if(c instanceof File)a.append(o,c,c.name);else if(Array.isArray(c))for(const d of c)a.append(`${o}[]`,d);else a.append(o,c);i.body=a,delete s["content-type"];break}return{uri:n.toString(),options:i}}chunkedUpload(e,n,s={},r={},i){var a;return Ns(this,void 0,void 0,function*(){const[o,c]=(a=Object.entries(r).find(([f,h])=>h instanceof File))!==null&&a!==void 0?a:[];if(!c||!o)throw new Error("File not found in payload");if(c.size<=st.CHUNK_SIZE)return yield this.call(e,n,s,r);let d=0,u=null;for(;d<c.size;){let f=d+st.CHUNK_SIZE;f>=c.size&&(f=c.size),s["content-range"]=`bytes ${d}-${f-1}/${c.size}`;const h=c.slice(d,f);let v=Object.assign({},r);v[o]=new File([h],c.name),u=yield this.call(e,n,s,v),i&&typeof i=="function"&&i({$id:u.$id,progress:Math.round(f/c.size*100),sizeUploaded:f,chunksTotal:Math.ceil(c.size/st.CHUNK_SIZE),chunksUploaded:Math.ceil(f/st.CHUNK_SIZE)}),u&&u.$id&&(s["x-appwrite-id"]=u.$id),d=f}return u})}ping(){return Ns(this,void 0,void 0,function*(){return this.call("GET",new URL(this.config.endpoint+"/ping"))})}call(e,n,s={},r={},i="json"){var a,o;return Ns(this,void 0,void 0,function*(){const{uri:c,options:d}=this.prepareRequest(e,n,s,r);let u=null;const f=yield fetch(c,d);if(f.type==="opaque")throw new m(`Invalid Origin. Register your new client (${window.location.host}) as a new Web platform on your project console dashboard`,403,"forbidden","");const h=f.headers.get("x-appwrite-warning");if(h&&h.split(";").forEach(y=>console.warn("Warning: "+y)),!((a=f.headers.get("content-type"))===null||a===void 0)&&a.includes("application/json")?u=yield f.json():i==="arrayBuffer"?u=yield f.arrayBuffer():u={message:yield f.text()},400<=f.status){let y="";throw!((o=f.headers.get("content-type"))===null||o===void 0)&&o.includes("application/json")||i==="arrayBuffer"?y=JSON.stringify(u):y=u?.message,new m(u?.message,f.status,u?.type,y)}const v=f.headers.get("X-Fallback-Cookies");return typeof window<"u"&&window.localStorage&&v&&(window.console.warn("Appwrite is using localStorage for session management. Increase your security by adding a custom domain as your API endpoint."),window.localStorage.setItem("cookieFallback",v)),u})}static flatten(e,n=""){let s={};for(const[r,i]of Object.entries(e)){let a=n?n+"["+r+"]":r;Array.isArray(i)?s=Object.assign(Object.assign({},s),st.flatten(i,a)):s[a]=i}return s}}st.CHUNK_SIZE=1024*1024*5;class qn{constructor(e){this.client=e}static flatten(e,n=""){let s={};for(const[r,i]of Object.entries(e)){let a=n?n+"["+r+"]":r;Array.isArray(i)?s=Object.assign(Object.assign({},s),qn.flatten(i,a)):s[a]=i}return s}}qn.CHUNK_SIZE=5*1024*1024;class qc{constructor(e){this.client=e}get(){const e="/account",n={},s=new URL(this.client.config.endpoint+e),r={};return this.client.call("get",s,r,n)}create(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={userId:e,email:n[0],password:n[1],name:n[2]};const r=s.userId,i=s.email,a=s.password,o=s.name;if(typeof r>"u")throw new m('Missing required parameter: "userId"');if(typeof i>"u")throw new m('Missing required parameter: "email"');if(typeof a>"u")throw new m('Missing required parameter: "password"');const c="/account",d={};typeof r<"u"&&(d.userId=r),typeof i<"u"&&(d.email=i),typeof a<"u"&&(d.password=a),typeof o<"u"&&(d.name=o);const u=new URL(this.client.config.endpoint+c),f={"content-type":"application/json"};return this.client.call("post",u,f,d)}updateEmail(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={email:e,password:n[0]};const r=s.email,i=s.password;if(typeof r>"u")throw new m('Missing required parameter: "email"');if(typeof i>"u")throw new m('Missing required parameter: "password"');const a="/account/email",o={};typeof r<"u"&&(o.email=r),typeof i<"u"&&(o.password=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("patch",c,d,o)}listIdentities(e,...n){let s;!e||e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={queries:e,total:n[0]};const r=s.queries,i=s.total,a="/account/identities",o={};typeof r<"u"&&(o.queries=r),typeof i<"u"&&(o.total=i);const c=new URL(this.client.config.endpoint+a),d={};return this.client.call("get",c,d,o)}deleteIdentity(e){let n;e&&typeof e=="object"&&!Array.isArray(e)?n=e||{}:n={identityId:e};const s=n.identityId;if(typeof s>"u")throw new m('Missing required parameter: "identityId"');const r="/account/identities/{identityId}".replace("{identityId}",s),i={},a=new URL(this.client.config.endpoint+r),o={"content-type":"application/json"};return this.client.call("delete",a,o,i)}createJWT(){const e="/account/jwts",n={},s=new URL(this.client.config.endpoint+e),r={"content-type":"application/json"};return this.client.call("post",s,r,n)}listLogs(e,...n){let s;!e||e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={queries:e,total:n[0]};const r=s.queries,i=s.total,a="/account/logs",o={};typeof r<"u"&&(o.queries=r),typeof i<"u"&&(o.total=i);const c=new URL(this.client.config.endpoint+a),d={};return this.client.call("get",c,d,o)}updateMFA(e){let n;e&&typeof e=="object"&&!Array.isArray(e)?n=e||{}:n={mfa:e};const s=n.mfa;if(typeof s>"u")throw new m('Missing required parameter: "mfa"');const r="/account/mfa",i={};typeof s<"u"&&(i.mfa=s);const a=new URL(this.client.config.endpoint+r),o={"content-type":"application/json"};return this.client.call("patch",a,o,i)}createMfaAuthenticator(e){let n;e&&typeof e=="object"&&!Array.isArray(e)&&"type"in e?n=e||{}:n={type:e};const s=n.type;if(typeof s>"u")throw new m('Missing required parameter: "type"');const r="/account/mfa/authenticators/{type}".replace("{type}",s),i={},a=new URL(this.client.config.endpoint+r),o={"content-type":"application/json"};return this.client.call("post",a,o,i)}createMFAAuthenticator(e){let n;e&&typeof e=="object"&&!Array.isArray(e)&&"type"in e?n=e||{}:n={type:e};const s=n.type;if(typeof s>"u")throw new m('Missing required parameter: "type"');const r="/account/mfa/authenticators/{type}".replace("{type}",s),i={},a=new URL(this.client.config.endpoint+r),o={"content-type":"application/json"};return this.client.call("post",a,o,i)}updateMfaAuthenticator(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)&&"type"in e?s=e||{}:s={type:e,otp:n[0]};const r=s.type,i=s.otp;if(typeof r>"u")throw new m('Missing required parameter: "type"');if(typeof i>"u")throw new m('Missing required parameter: "otp"');const a="/account/mfa/authenticators/{type}".replace("{type}",r),o={};typeof i<"u"&&(o.otp=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("put",c,d,o)}updateMFAAuthenticator(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)&&"type"in e?s=e||{}:s={type:e,otp:n[0]};const r=s.type,i=s.otp;if(typeof r>"u")throw new m('Missing required parameter: "type"');if(typeof i>"u")throw new m('Missing required parameter: "otp"');const a="/account/mfa/authenticators/{type}".replace("{type}",r),o={};typeof i<"u"&&(o.otp=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("put",c,d,o)}deleteMfaAuthenticator(e){let n;e&&typeof e=="object"&&!Array.isArray(e)&&"type"in e?n=e||{}:n={type:e};const s=n.type;if(typeof s>"u")throw new m('Missing required parameter: "type"');const r="/account/mfa/authenticators/{type}".replace("{type}",s),i={},a=new URL(this.client.config.endpoint+r),o={"content-type":"application/json"};return this.client.call("delete",a,o,i)}deleteMFAAuthenticator(e){let n;e&&typeof e=="object"&&!Array.isArray(e)&&"type"in e?n=e||{}:n={type:e};const s=n.type;if(typeof s>"u")throw new m('Missing required parameter: "type"');const r="/account/mfa/authenticators/{type}".replace("{type}",s),i={},a=new URL(this.client.config.endpoint+r),o={"content-type":"application/json"};return this.client.call("delete",a,o,i)}createMfaChallenge(e){let n;e&&typeof e=="object"&&!Array.isArray(e)&&"factor"in e?n=e||{}:n={factor:e};const s=n.factor;if(typeof s>"u")throw new m('Missing required parameter: "factor"');const r="/account/mfa/challenge",i={};typeof s<"u"&&(i.factor=s);const a=new URL(this.client.config.endpoint+r),o={"content-type":"application/json"};return this.client.call("post",a,o,i)}createMFAChallenge(e){let n;e&&typeof e=="object"&&!Array.isArray(e)&&"factor"in e?n=e||{}:n={factor:e};const s=n.factor;if(typeof s>"u")throw new m('Missing required parameter: "factor"');const r="/account/mfa/challenge",i={};typeof s<"u"&&(i.factor=s);const a=new URL(this.client.config.endpoint+r),o={"content-type":"application/json"};return this.client.call("post",a,o,i)}updateMfaChallenge(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={challengeId:e,otp:n[0]};const r=s.challengeId,i=s.otp;if(typeof r>"u")throw new m('Missing required parameter: "challengeId"');if(typeof i>"u")throw new m('Missing required parameter: "otp"');const a="/account/mfa/challenge",o={};typeof r<"u"&&(o.challengeId=r),typeof i<"u"&&(o.otp=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("put",c,d,o)}updateMFAChallenge(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={challengeId:e,otp:n[0]};const r=s.challengeId,i=s.otp;if(typeof r>"u")throw new m('Missing required parameter: "challengeId"');if(typeof i>"u")throw new m('Missing required parameter: "otp"');const a="/account/mfa/challenge",o={};typeof r<"u"&&(o.challengeId=r),typeof i<"u"&&(o.otp=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("put",c,d,o)}listMfaFactors(){const e="/account/mfa/factors",n={},s=new URL(this.client.config.endpoint+e),r={};return this.client.call("get",s,r,n)}listMFAFactors(){const e="/account/mfa/factors",n={},s=new URL(this.client.config.endpoint+e),r={};return this.client.call("get",s,r,n)}getMfaRecoveryCodes(){const e="/account/mfa/recovery-codes",n={},s=new URL(this.client.config.endpoint+e),r={};return this.client.call("get",s,r,n)}getMFARecoveryCodes(){const e="/account/mfa/recovery-codes",n={},s=new URL(this.client.config.endpoint+e),r={};return this.client.call("get",s,r,n)}createMfaRecoveryCodes(){const e="/account/mfa/recovery-codes",n={},s=new URL(this.client.config.endpoint+e),r={"content-type":"application/json"};return this.client.call("post",s,r,n)}createMFARecoveryCodes(){const e="/account/mfa/recovery-codes",n={},s=new URL(this.client.config.endpoint+e),r={"content-type":"application/json"};return this.client.call("post",s,r,n)}updateMfaRecoveryCodes(){const e="/account/mfa/recovery-codes",n={},s=new URL(this.client.config.endpoint+e),r={"content-type":"application/json"};return this.client.call("patch",s,r,n)}updateMFARecoveryCodes(){const e="/account/mfa/recovery-codes",n={},s=new URL(this.client.config.endpoint+e),r={"content-type":"application/json"};return this.client.call("patch",s,r,n)}updateName(e){let n;e&&typeof e=="object"&&!Array.isArray(e)?n=e||{}:n={name:e};const s=n.name;if(typeof s>"u")throw new m('Missing required parameter: "name"');const r="/account/name",i={};typeof s<"u"&&(i.name=s);const a=new URL(this.client.config.endpoint+r),o={"content-type":"application/json"};return this.client.call("patch",a,o,i)}updatePassword(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={password:e,oldPassword:n[0]};const r=s.password,i=s.oldPassword;if(typeof r>"u")throw new m('Missing required parameter: "password"');const a="/account/password",o={};typeof r<"u"&&(o.password=r),typeof i<"u"&&(o.oldPassword=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("patch",c,d,o)}updatePhone(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={phone:e,password:n[0]};const r=s.phone,i=s.password;if(typeof r>"u")throw new m('Missing required parameter: "phone"');if(typeof i>"u")throw new m('Missing required parameter: "password"');const a="/account/phone",o={};typeof r<"u"&&(o.phone=r),typeof i<"u"&&(o.password=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("patch",c,d,o)}getPrefs(){const e="/account/prefs",n={},s=new URL(this.client.config.endpoint+e),r={};return this.client.call("get",s,r,n)}updatePrefs(e){let n;e&&typeof e=="object"&&!Array.isArray(e)&&"prefs"in e?n=e||{}:n={prefs:e};const s=n.prefs;if(typeof s>"u")throw new m('Missing required parameter: "prefs"');const r="/account/prefs",i={};typeof s<"u"&&(i.prefs=s);const a=new URL(this.client.config.endpoint+r),o={"content-type":"application/json"};return this.client.call("patch",a,o,i)}createRecovery(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={email:e,url:n[0]};const r=s.email,i=s.url;if(typeof r>"u")throw new m('Missing required parameter: "email"');if(typeof i>"u")throw new m('Missing required parameter: "url"');const a="/account/recovery",o={};typeof r<"u"&&(o.email=r),typeof i<"u"&&(o.url=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("post",c,d,o)}updateRecovery(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={userId:e,secret:n[0],password:n[1]};const r=s.userId,i=s.secret,a=s.password;if(typeof r>"u")throw new m('Missing required parameter: "userId"');if(typeof i>"u")throw new m('Missing required parameter: "secret"');if(typeof a>"u")throw new m('Missing required parameter: "password"');const o="/account/recovery",c={};typeof r<"u"&&(c.userId=r),typeof i<"u"&&(c.secret=i),typeof a<"u"&&(c.password=a);const d=new URL(this.client.config.endpoint+o),u={"content-type":"application/json"};return this.client.call("put",d,u,c)}listSessions(){const e="/account/sessions",n={},s=new URL(this.client.config.endpoint+e),r={};return this.client.call("get",s,r,n)}deleteSessions(){const e="/account/sessions",n={},s=new URL(this.client.config.endpoint+e),r={"content-type":"application/json"};return this.client.call("delete",s,r,n)}createAnonymousSession(){const e="/account/sessions/anonymous",n={},s=new URL(this.client.config.endpoint+e),r={"content-type":"application/json"};return this.client.call("post",s,r,n)}createEmailPasswordSession(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={email:e,password:n[0]};const r=s.email,i=s.password;if(typeof r>"u")throw new m('Missing required parameter: "email"');if(typeof i>"u")throw new m('Missing required parameter: "password"');const a="/account/sessions/email",o={};typeof r<"u"&&(o.email=r),typeof i<"u"&&(o.password=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("post",c,d,o)}updateMagicURLSession(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={userId:e,secret:n[0]};const r=s.userId,i=s.secret;if(typeof r>"u")throw new m('Missing required parameter: "userId"');if(typeof i>"u")throw new m('Missing required parameter: "secret"');const a="/account/sessions/magic-url",o={};typeof r<"u"&&(o.userId=r),typeof i<"u"&&(o.secret=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("put",c,d,o)}createOAuth2Session(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)&&"provider"in e?s=e||{}:s={provider:e,success:n[0],failure:n[1],scopes:n[2]};const r=s.provider,i=s.success,a=s.failure,o=s.scopes;if(typeof r>"u")throw new m('Missing required parameter: "provider"');const c="/account/sessions/oauth2/{provider}".replace("{provider}",r),d={};typeof i<"u"&&(d.success=i),typeof a<"u"&&(d.failure=a),typeof o<"u"&&(d.scopes=o);const u=new URL(this.client.config.endpoint+c);d.project=this.client.config.project;for(const[f,h]of Object.entries(qn.flatten(d)))u.searchParams.append(f,h);if(typeof window<"u"&&window?.location){window.location.href=u.toString();return}else return u.toString()}updatePhoneSession(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={userId:e,secret:n[0]};const r=s.userId,i=s.secret;if(typeof r>"u")throw new m('Missing required parameter: "userId"');if(typeof i>"u")throw new m('Missing required parameter: "secret"');const a="/account/sessions/phone",o={};typeof r<"u"&&(o.userId=r),typeof i<"u"&&(o.secret=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("put",c,d,o)}createSession(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={userId:e,secret:n[0]};const r=s.userId,i=s.secret;if(typeof r>"u")throw new m('Missing required parameter: "userId"');if(typeof i>"u")throw new m('Missing required parameter: "secret"');const a="/account/sessions/token",o={};typeof r<"u"&&(o.userId=r),typeof i<"u"&&(o.secret=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("post",c,d,o)}getSession(e){let n;e&&typeof e=="object"&&!Array.isArray(e)?n=e||{}:n={sessionId:e};const s=n.sessionId;if(typeof s>"u")throw new m('Missing required parameter: "sessionId"');const r="/account/sessions/{sessionId}".replace("{sessionId}",s),i={},a=new URL(this.client.config.endpoint+r),o={};return this.client.call("get",a,o,i)}updateSession(e){let n;e&&typeof e=="object"&&!Array.isArray(e)?n=e||{}:n={sessionId:e};const s=n.sessionId;if(typeof s>"u")throw new m('Missing required parameter: "sessionId"');const r="/account/sessions/{sessionId}".replace("{sessionId}",s),i={},a=new URL(this.client.config.endpoint+r),o={"content-type":"application/json"};return this.client.call("patch",a,o,i)}deleteSession(e){let n;e&&typeof e=="object"&&!Array.isArray(e)?n=e||{}:n={sessionId:e};const s=n.sessionId;if(typeof s>"u")throw new m('Missing required parameter: "sessionId"');const r="/account/sessions/{sessionId}".replace("{sessionId}",s),i={},a=new URL(this.client.config.endpoint+r),o={"content-type":"application/json"};return this.client.call("delete",a,o,i)}updateStatus(){const e="/account/status",n={},s=new URL(this.client.config.endpoint+e),r={"content-type":"application/json"};return this.client.call("patch",s,r,n)}createPushTarget(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={targetId:e,identifier:n[0],providerId:n[1]};const r=s.targetId,i=s.identifier,a=s.providerId;if(typeof r>"u")throw new m('Missing required parameter: "targetId"');if(typeof i>"u")throw new m('Missing required parameter: "identifier"');const o="/account/targets/push",c={};typeof r<"u"&&(c.targetId=r),typeof i<"u"&&(c.identifier=i),typeof a<"u"&&(c.providerId=a);const d=new URL(this.client.config.endpoint+o),u={"content-type":"application/json"};return this.client.call("post",d,u,c)}updatePushTarget(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={targetId:e,identifier:n[0]};const r=s.targetId,i=s.identifier;if(typeof r>"u")throw new m('Missing required parameter: "targetId"');if(typeof i>"u")throw new m('Missing required parameter: "identifier"');const a="/account/targets/{targetId}/push".replace("{targetId}",r),o={};typeof i<"u"&&(o.identifier=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("put",c,d,o)}deletePushTarget(e){let n;e&&typeof e=="object"&&!Array.isArray(e)?n=e||{}:n={targetId:e};const s=n.targetId;if(typeof s>"u")throw new m('Missing required parameter: "targetId"');const r="/account/targets/{targetId}/push".replace("{targetId}",s),i={},a=new URL(this.client.config.endpoint+r),o={"content-type":"application/json"};return this.client.call("delete",a,o,i)}createEmailToken(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={userId:e,email:n[0],phrase:n[1]};const r=s.userId,i=s.email,a=s.phrase;if(typeof r>"u")throw new m('Missing required parameter: "userId"');if(typeof i>"u")throw new m('Missing required parameter: "email"');const o="/account/tokens/email",c={};typeof r<"u"&&(c.userId=r),typeof i<"u"&&(c.email=i),typeof a<"u"&&(c.phrase=a);const d=new URL(this.client.config.endpoint+o),u={"content-type":"application/json"};return this.client.call("post",d,u,c)}createMagicURLToken(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={userId:e,email:n[0],url:n[1],phrase:n[2]};const r=s.userId,i=s.email,a=s.url,o=s.phrase;if(typeof r>"u")throw new m('Missing required parameter: "userId"');if(typeof i>"u")throw new m('Missing required parameter: "email"');const c="/account/tokens/magic-url",d={};typeof r<"u"&&(d.userId=r),typeof i<"u"&&(d.email=i),typeof a<"u"&&(d.url=a),typeof o<"u"&&(d.phrase=o);const u=new URL(this.client.config.endpoint+c),f={"content-type":"application/json"};return this.client.call("post",u,f,d)}createOAuth2Token(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)&&"provider"in e?s=e||{}:s={provider:e,success:n[0],failure:n[1],scopes:n[2]};const r=s.provider,i=s.success,a=s.failure,o=s.scopes;if(typeof r>"u")throw new m('Missing required parameter: "provider"');const c="/account/tokens/oauth2/{provider}".replace("{provider}",r),d={};typeof i<"u"&&(d.success=i),typeof a<"u"&&(d.failure=a),typeof o<"u"&&(d.scopes=o);const u=new URL(this.client.config.endpoint+c);d.project=this.client.config.project;for(const[f,h]of Object.entries(qn.flatten(d)))u.searchParams.append(f,h);if(typeof window<"u"&&window?.location){window.location.href=u.toString();return}else return u.toString()}createPhoneToken(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={userId:e,phone:n[0]};const r=s.userId,i=s.phone;if(typeof r>"u")throw new m('Missing required parameter: "userId"');if(typeof i>"u")throw new m('Missing required parameter: "phone"');const a="/account/tokens/phone",o={};typeof r<"u"&&(o.userId=r),typeof i<"u"&&(o.phone=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("post",c,d,o)}createEmailVerification(e){let n;e&&typeof e=="object"&&!Array.isArray(e)?n=e||{}:n={url:e};const s=n.url;if(typeof s>"u")throw new m('Missing required parameter: "url"');const r="/account/verifications/email",i={};typeof s<"u"&&(i.url=s);const a=new URL(this.client.config.endpoint+r),o={"content-type":"application/json"};return this.client.call("post",a,o,i)}createVerification(e){let n;e&&typeof e=="object"&&!Array.isArray(e)?n=e||{}:n={url:e};const s=n.url;if(typeof s>"u")throw new m('Missing required parameter: "url"');const r="/account/verifications/email",i={};typeof s<"u"&&(i.url=s);const a=new URL(this.client.config.endpoint+r),o={"content-type":"application/json"};return this.client.call("post",a,o,i)}updateEmailVerification(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={userId:e,secret:n[0]};const r=s.userId,i=s.secret;if(typeof r>"u")throw new m('Missing required parameter: "userId"');if(typeof i>"u")throw new m('Missing required parameter: "secret"');const a="/account/verifications/email",o={};typeof r<"u"&&(o.userId=r),typeof i<"u"&&(o.secret=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("put",c,d,o)}updateVerification(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={userId:e,secret:n[0]};const r=s.userId,i=s.secret;if(typeof r>"u")throw new m('Missing required parameter: "userId"');if(typeof i>"u")throw new m('Missing required parameter: "secret"');const a="/account/verifications/email",o={};typeof r<"u"&&(o.userId=r),typeof i<"u"&&(o.secret=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("put",c,d,o)}createPhoneVerification(){const e="/account/verifications/phone",n={},s=new URL(this.client.config.endpoint+e),r={"content-type":"application/json"};return this.client.call("post",s,r,n)}updatePhoneVerification(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={userId:e,secret:n[0]};const r=s.userId,i=s.secret;if(typeof r>"u")throw new m('Missing required parameter: "userId"');if(typeof i>"u")throw new m('Missing required parameter: "secret"');const a="/account/verifications/phone",o={};typeof r<"u"&&(o.userId=r),typeof i<"u"&&(o.secret=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("put",c,d,o)}}class jc{constructor(e){this.client=e}listTransactions(e){let n;!e||e&&typeof e=="object"&&!Array.isArray(e)?n=e||{}:n={queries:e};const s=n.queries,r="/databases/transactions",i={};typeof s<"u"&&(i.queries=s);const a=new URL(this.client.config.endpoint+r),o={};return this.client.call("get",a,o,i)}createTransaction(e){let n;!e||e&&typeof e=="object"&&!Array.isArray(e)?n=e||{}:n={ttl:e};const s=n.ttl,r="/databases/transactions",i={};typeof s<"u"&&(i.ttl=s);const a=new URL(this.client.config.endpoint+r),o={"content-type":"application/json"};return this.client.call("post",a,o,i)}getTransaction(e){let n;e&&typeof e=="object"&&!Array.isArray(e)?n=e||{}:n={transactionId:e};const s=n.transactionId;if(typeof s>"u")throw new m('Missing required parameter: "transactionId"');const r="/databases/transactions/{transactionId}".replace("{transactionId}",s),i={},a=new URL(this.client.config.endpoint+r),o={};return this.client.call("get",a,o,i)}updateTransaction(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={transactionId:e,commit:n[0],rollback:n[1]};const r=s.transactionId,i=s.commit,a=s.rollback;if(typeof r>"u")throw new m('Missing required parameter: "transactionId"');const o="/databases/transactions/{transactionId}".replace("{transactionId}",r),c={};typeof i<"u"&&(c.commit=i),typeof a<"u"&&(c.rollback=a);const d=new URL(this.client.config.endpoint+o),u={"content-type":"application/json"};return this.client.call("patch",d,u,c)}deleteTransaction(e){let n;e&&typeof e=="object"&&!Array.isArray(e)?n=e||{}:n={transactionId:e};const s=n.transactionId;if(typeof s>"u")throw new m('Missing required parameter: "transactionId"');const r="/databases/transactions/{transactionId}".replace("{transactionId}",s),i={},a=new URL(this.client.config.endpoint+r),o={"content-type":"application/json"};return this.client.call("delete",a,o,i)}createOperations(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={transactionId:e,operations:n[0]};const r=s.transactionId,i=s.operations;if(typeof r>"u")throw new m('Missing required parameter: "transactionId"');const a="/databases/transactions/{transactionId}/operations".replace("{transactionId}",r),o={};typeof i<"u"&&(o.operations=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("post",c,d,o)}listDocuments(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={databaseId:e,collectionId:n[0],queries:n[1],transactionId:n[2],total:n[3]};const r=s.databaseId,i=s.collectionId,a=s.queries,o=s.transactionId,c=s.total;if(typeof r>"u")throw new m('Missing required parameter: "databaseId"');if(typeof i>"u")throw new m('Missing required parameter: "collectionId"');const d="/databases/{databaseId}/collections/{collectionId}/documents".replace("{databaseId}",r).replace("{collectionId}",i),u={};typeof a<"u"&&(u.queries=a),typeof o<"u"&&(u.transactionId=o),typeof c<"u"&&(u.total=c);const f=new URL(this.client.config.endpoint+d),h={};return this.client.call("get",f,h,u)}createDocument(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={databaseId:e,collectionId:n[0],documentId:n[1],data:n[2],permissions:n[3],transactionId:n[4]};const r=s.databaseId,i=s.collectionId,a=s.documentId,o=s.data,c=s.permissions,d=s.transactionId;if(typeof r>"u")throw new m('Missing required parameter: "databaseId"');if(typeof i>"u")throw new m('Missing required parameter: "collectionId"');if(typeof a>"u")throw new m('Missing required parameter: "documentId"');if(typeof o>"u")throw new m('Missing required parameter: "data"');const u="/databases/{databaseId}/collections/{collectionId}/documents".replace("{databaseId}",r).replace("{collectionId}",i),f={};typeof a<"u"&&(f.documentId=a),typeof o<"u"&&(f.data=o),typeof c<"u"&&(f.permissions=c),typeof d<"u"&&(f.transactionId=d);const h=new URL(this.client.config.endpoint+u),v={"content-type":"application/json"};return this.client.call("post",h,v,f)}getDocument(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={databaseId:e,collectionId:n[0],documentId:n[1],queries:n[2],transactionId:n[3]};const r=s.databaseId,i=s.collectionId,a=s.documentId,o=s.queries,c=s.transactionId;if(typeof r>"u")throw new m('Missing required parameter: "databaseId"');if(typeof i>"u")throw new m('Missing required parameter: "collectionId"');if(typeof a>"u")throw new m('Missing required parameter: "documentId"');const d="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",r).replace("{collectionId}",i).replace("{documentId}",a),u={};typeof o<"u"&&(u.queries=o),typeof c<"u"&&(u.transactionId=c);const f=new URL(this.client.config.endpoint+d),h={};return this.client.call("get",f,h,u)}upsertDocument(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={databaseId:e,collectionId:n[0],documentId:n[1],data:n[2],permissions:n[3],transactionId:n[4]};const r=s.databaseId,i=s.collectionId,a=s.documentId,o=s.data,c=s.permissions,d=s.transactionId;if(typeof r>"u")throw new m('Missing required parameter: "databaseId"');if(typeof i>"u")throw new m('Missing required parameter: "collectionId"');if(typeof a>"u")throw new m('Missing required parameter: "documentId"');if(typeof o>"u")throw new m('Missing required parameter: "data"');const u="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",r).replace("{collectionId}",i).replace("{documentId}",a),f={};typeof o<"u"&&(f.data=o),typeof c<"u"&&(f.permissions=c),typeof d<"u"&&(f.transactionId=d);const h=new URL(this.client.config.endpoint+u),v={"content-type":"application/json"};return this.client.call("put",h,v,f)}updateDocument(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={databaseId:e,collectionId:n[0],documentId:n[1],data:n[2],permissions:n[3],transactionId:n[4]};const r=s.databaseId,i=s.collectionId,a=s.documentId,o=s.data,c=s.permissions,d=s.transactionId;if(typeof r>"u")throw new m('Missing required parameter: "databaseId"');if(typeof i>"u")throw new m('Missing required parameter: "collectionId"');if(typeof a>"u")throw new m('Missing required parameter: "documentId"');const u="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",r).replace("{collectionId}",i).replace("{documentId}",a),f={};typeof o<"u"&&(f.data=o),typeof c<"u"&&(f.permissions=c),typeof d<"u"&&(f.transactionId=d);const h=new URL(this.client.config.endpoint+u),v={"content-type":"application/json"};return this.client.call("patch",h,v,f)}deleteDocument(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={databaseId:e,collectionId:n[0],documentId:n[1],transactionId:n[2]};const r=s.databaseId,i=s.collectionId,a=s.documentId,o=s.transactionId;if(typeof r>"u")throw new m('Missing required parameter: "databaseId"');if(typeof i>"u")throw new m('Missing required parameter: "collectionId"');if(typeof a>"u")throw new m('Missing required parameter: "documentId"');const c="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",r).replace("{collectionId}",i).replace("{documentId}",a),d={};typeof o<"u"&&(d.transactionId=o);const u=new URL(this.client.config.endpoint+c),f={"content-type":"application/json"};return this.client.call("delete",u,f,d)}decrementDocumentAttribute(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={databaseId:e,collectionId:n[0],documentId:n[1],attribute:n[2],value:n[3],min:n[4],transactionId:n[5]};const r=s.databaseId,i=s.collectionId,a=s.documentId,o=s.attribute,c=s.value,d=s.min,u=s.transactionId;if(typeof r>"u")throw new m('Missing required parameter: "databaseId"');if(typeof i>"u")throw new m('Missing required parameter: "collectionId"');if(typeof a>"u")throw new m('Missing required parameter: "documentId"');if(typeof o>"u")throw new m('Missing required parameter: "attribute"');const f="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}/{attribute}/decrement".replace("{databaseId}",r).replace("{collectionId}",i).replace("{documentId}",a).replace("{attribute}",o),h={};typeof c<"u"&&(h.value=c),typeof d<"u"&&(h.min=d),typeof u<"u"&&(h.transactionId=u);const v=new URL(this.client.config.endpoint+f),y={"content-type":"application/json"};return this.client.call("patch",v,y,h)}incrementDocumentAttribute(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={databaseId:e,collectionId:n[0],documentId:n[1],attribute:n[2],value:n[3],max:n[4],transactionId:n[5]};const r=s.databaseId,i=s.collectionId,a=s.documentId,o=s.attribute,c=s.value,d=s.max,u=s.transactionId;if(typeof r>"u")throw new m('Missing required parameter: "databaseId"');if(typeof i>"u")throw new m('Missing required parameter: "collectionId"');if(typeof a>"u")throw new m('Missing required parameter: "documentId"');if(typeof o>"u")throw new m('Missing required parameter: "attribute"');const f="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}/{attribute}/increment".replace("{databaseId}",r).replace("{collectionId}",i).replace("{documentId}",a).replace("{attribute}",o),h={};typeof c<"u"&&(h.value=c),typeof d<"u"&&(h.max=d),typeof u<"u"&&(h.transactionId=u);const v=new URL(this.client.config.endpoint+f),y={"content-type":"application/json"};return this.client.call("patch",v,y,h)}}class Cc{constructor(e){this.client=e}listExecutions(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={functionId:e,queries:n[0],total:n[1]};const r=s.functionId,i=s.queries,a=s.total;if(typeof r>"u")throw new m('Missing required parameter: "functionId"');const o="/functions/{functionId}/executions".replace("{functionId}",r),c={};typeof i<"u"&&(c.queries=i),typeof a<"u"&&(c.total=a);const d=new URL(this.client.config.endpoint+o),u={};return this.client.call("get",d,u,c)}createExecution(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={functionId:e,body:n[0],async:n[1],xpath:n[2],method:n[3],headers:n[4],scheduledAt:n[5]};const r=s.functionId,i=s.body,a=s.async,o=s.xpath,c=s.method,d=s.headers,u=s.scheduledAt;if(typeof r>"u")throw new m('Missing required parameter: "functionId"');const f="/functions/{functionId}/executions".replace("{functionId}",r),h={};typeof i<"u"&&(h.body=i),typeof a<"u"&&(h.async=a),typeof o<"u"&&(h.path=o),typeof c<"u"&&(h.method=c),typeof d<"u"&&(h.headers=d),typeof u<"u"&&(h.scheduledAt=u);const v=new URL(this.client.config.endpoint+f),y={"content-type":"application/json"};return this.client.call("post",v,y,h)}getExecution(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={functionId:e,executionId:n[0]};const r=s.functionId,i=s.executionId;if(typeof r>"u")throw new m('Missing required parameter: "functionId"');if(typeof i>"u")throw new m('Missing required parameter: "executionId"');const a="/functions/{functionId}/executions/{executionId}".replace("{functionId}",r).replace("{executionId}",i),o={},c=new URL(this.client.config.endpoint+a),d={};return this.client.call("get",c,d,o)}}class Nc{constructor(e){this.client=e}listTransactions(e){let n;!e||e&&typeof e=="object"&&!Array.isArray(e)?n=e||{}:n={queries:e};const s=n.queries,r="/tablesdb/transactions",i={};typeof s<"u"&&(i.queries=s);const a=new URL(this.client.config.endpoint+r),o={};return this.client.call("get",a,o,i)}createTransaction(e){let n;!e||e&&typeof e=="object"&&!Array.isArray(e)?n=e||{}:n={ttl:e};const s=n.ttl,r="/tablesdb/transactions",i={};typeof s<"u"&&(i.ttl=s);const a=new URL(this.client.config.endpoint+r),o={"content-type":"application/json"};return this.client.call("post",a,o,i)}getTransaction(e){let n;e&&typeof e=="object"&&!Array.isArray(e)?n=e||{}:n={transactionId:e};const s=n.transactionId;if(typeof s>"u")throw new m('Missing required parameter: "transactionId"');const r="/tablesdb/transactions/{transactionId}".replace("{transactionId}",s),i={},a=new URL(this.client.config.endpoint+r),o={};return this.client.call("get",a,o,i)}updateTransaction(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={transactionId:e,commit:n[0],rollback:n[1]};const r=s.transactionId,i=s.commit,a=s.rollback;if(typeof r>"u")throw new m('Missing required parameter: "transactionId"');const o="/tablesdb/transactions/{transactionId}".replace("{transactionId}",r),c={};typeof i<"u"&&(c.commit=i),typeof a<"u"&&(c.rollback=a);const d=new URL(this.client.config.endpoint+o),u={"content-type":"application/json"};return this.client.call("patch",d,u,c)}deleteTransaction(e){let n;e&&typeof e=="object"&&!Array.isArray(e)?n=e||{}:n={transactionId:e};const s=n.transactionId;if(typeof s>"u")throw new m('Missing required parameter: "transactionId"');const r="/tablesdb/transactions/{transactionId}".replace("{transactionId}",s),i={},a=new URL(this.client.config.endpoint+r),o={"content-type":"application/json"};return this.client.call("delete",a,o,i)}createOperations(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={transactionId:e,operations:n[0]};const r=s.transactionId,i=s.operations;if(typeof r>"u")throw new m('Missing required parameter: "transactionId"');const a="/tablesdb/transactions/{transactionId}/operations".replace("{transactionId}",r),o={};typeof i<"u"&&(o.operations=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("post",c,d,o)}listRows(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={databaseId:e,tableId:n[0],queries:n[1],transactionId:n[2],total:n[3]};const r=s.databaseId,i=s.tableId,a=s.queries,o=s.transactionId,c=s.total;if(typeof r>"u")throw new m('Missing required parameter: "databaseId"');if(typeof i>"u")throw new m('Missing required parameter: "tableId"');const d="/tablesdb/{databaseId}/tables/{tableId}/rows".replace("{databaseId}",r).replace("{tableId}",i),u={};typeof a<"u"&&(u.queries=a),typeof o<"u"&&(u.transactionId=o),typeof c<"u"&&(u.total=c);const f=new URL(this.client.config.endpoint+d),h={};return this.client.call("get",f,h,u)}createRow(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={databaseId:e,tableId:n[0],rowId:n[1],data:n[2],permissions:n[3],transactionId:n[4]};const r=s.databaseId,i=s.tableId,a=s.rowId,o=s.data,c=s.permissions,d=s.transactionId;if(typeof r>"u")throw new m('Missing required parameter: "databaseId"');if(typeof i>"u")throw new m('Missing required parameter: "tableId"');if(typeof a>"u")throw new m('Missing required parameter: "rowId"');if(typeof o>"u")throw new m('Missing required parameter: "data"');const u="/tablesdb/{databaseId}/tables/{tableId}/rows".replace("{databaseId}",r).replace("{tableId}",i),f={};typeof a<"u"&&(f.rowId=a),typeof o<"u"&&(f.data=o),typeof c<"u"&&(f.permissions=c),typeof d<"u"&&(f.transactionId=d);const h=new URL(this.client.config.endpoint+u),v={"content-type":"application/json"};return this.client.call("post",h,v,f)}getRow(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={databaseId:e,tableId:n[0],rowId:n[1],queries:n[2],transactionId:n[3]};const r=s.databaseId,i=s.tableId,a=s.rowId,o=s.queries,c=s.transactionId;if(typeof r>"u")throw new m('Missing required parameter: "databaseId"');if(typeof i>"u")throw new m('Missing required parameter: "tableId"');if(typeof a>"u")throw new m('Missing required parameter: "rowId"');const d="/tablesdb/{databaseId}/tables/{tableId}/rows/{rowId}".replace("{databaseId}",r).replace("{tableId}",i).replace("{rowId}",a),u={};typeof o<"u"&&(u.queries=o),typeof c<"u"&&(u.transactionId=c);const f=new URL(this.client.config.endpoint+d),h={};return this.client.call("get",f,h,u)}upsertRow(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={databaseId:e,tableId:n[0],rowId:n[1],data:n[2],permissions:n[3],transactionId:n[4]};const r=s.databaseId,i=s.tableId,a=s.rowId,o=s.data,c=s.permissions,d=s.transactionId;if(typeof r>"u")throw new m('Missing required parameter: "databaseId"');if(typeof i>"u")throw new m('Missing required parameter: "tableId"');if(typeof a>"u")throw new m('Missing required parameter: "rowId"');const u="/tablesdb/{databaseId}/tables/{tableId}/rows/{rowId}".replace("{databaseId}",r).replace("{tableId}",i).replace("{rowId}",a),f={};typeof o<"u"&&(f.data=o),typeof c<"u"&&(f.permissions=c),typeof d<"u"&&(f.transactionId=d);const h=new URL(this.client.config.endpoint+u),v={"content-type":"application/json"};return this.client.call("put",h,v,f)}updateRow(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={databaseId:e,tableId:n[0],rowId:n[1],data:n[2],permissions:n[3],transactionId:n[4]};const r=s.databaseId,i=s.tableId,a=s.rowId,o=s.data,c=s.permissions,d=s.transactionId;if(typeof r>"u")throw new m('Missing required parameter: "databaseId"');if(typeof i>"u")throw new m('Missing required parameter: "tableId"');if(typeof a>"u")throw new m('Missing required parameter: "rowId"');const u="/tablesdb/{databaseId}/tables/{tableId}/rows/{rowId}".replace("{databaseId}",r).replace("{tableId}",i).replace("{rowId}",a),f={};typeof o<"u"&&(f.data=o),typeof c<"u"&&(f.permissions=c),typeof d<"u"&&(f.transactionId=d);const h=new URL(this.client.config.endpoint+u),v={"content-type":"application/json"};return this.client.call("patch",h,v,f)}deleteRow(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={databaseId:e,tableId:n[0],rowId:n[1],transactionId:n[2]};const r=s.databaseId,i=s.tableId,a=s.rowId,o=s.transactionId;if(typeof r>"u")throw new m('Missing required parameter: "databaseId"');if(typeof i>"u")throw new m('Missing required parameter: "tableId"');if(typeof a>"u")throw new m('Missing required parameter: "rowId"');const c="/tablesdb/{databaseId}/tables/{tableId}/rows/{rowId}".replace("{databaseId}",r).replace("{tableId}",i).replace("{rowId}",a),d={};typeof o<"u"&&(d.transactionId=o);const u=new URL(this.client.config.endpoint+c),f={"content-type":"application/json"};return this.client.call("delete",u,f,d)}decrementRowColumn(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={databaseId:e,tableId:n[0],rowId:n[1],column:n[2],value:n[3],min:n[4],transactionId:n[5]};const r=s.databaseId,i=s.tableId,a=s.rowId,o=s.column,c=s.value,d=s.min,u=s.transactionId;if(typeof r>"u")throw new m('Missing required parameter: "databaseId"');if(typeof i>"u")throw new m('Missing required parameter: "tableId"');if(typeof a>"u")throw new m('Missing required parameter: "rowId"');if(typeof o>"u")throw new m('Missing required parameter: "column"');const f="/tablesdb/{databaseId}/tables/{tableId}/rows/{rowId}/{column}/decrement".replace("{databaseId}",r).replace("{tableId}",i).replace("{rowId}",a).replace("{column}",o),h={};typeof c<"u"&&(h.value=c),typeof d<"u"&&(h.min=d),typeof u<"u"&&(h.transactionId=u);const v=new URL(this.client.config.endpoint+f),y={"content-type":"application/json"};return this.client.call("patch",v,y,h)}incrementRowColumn(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={databaseId:e,tableId:n[0],rowId:n[1],column:n[2],value:n[3],max:n[4],transactionId:n[5]};const r=s.databaseId,i=s.tableId,a=s.rowId,o=s.column,c=s.value,d=s.max,u=s.transactionId;if(typeof r>"u")throw new m('Missing required parameter: "databaseId"');if(typeof i>"u")throw new m('Missing required parameter: "tableId"');if(typeof a>"u")throw new m('Missing required parameter: "rowId"');if(typeof o>"u")throw new m('Missing required parameter: "column"');const f="/tablesdb/{databaseId}/tables/{tableId}/rows/{rowId}/{column}/increment".replace("{databaseId}",r).replace("{tableId}",i).replace("{rowId}",a).replace("{column}",o),h={};typeof c<"u"&&(h.value=c),typeof d<"u"&&(h.max=d),typeof u<"u"&&(h.transactionId=u);const v=new URL(this.client.config.endpoint+f),y={"content-type":"application/json"};return this.client.call("patch",v,y,h)}}class Lc{constructor(e){this.client=e}list(e,...n){let s;!e||e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={queries:e,search:n[0],total:n[1]};const r=s.queries,i=s.search,a=s.total,o="/teams",c={};typeof r<"u"&&(c.queries=r),typeof i<"u"&&(c.search=i),typeof a<"u"&&(c.total=a);const d=new URL(this.client.config.endpoint+o),u={};return this.client.call("get",d,u,c)}create(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={teamId:e,name:n[0],roles:n[1]};const r=s.teamId,i=s.name,a=s.roles;if(typeof r>"u")throw new m('Missing required parameter: "teamId"');if(typeof i>"u")throw new m('Missing required parameter: "name"');const o="/teams",c={};typeof r<"u"&&(c.teamId=r),typeof i<"u"&&(c.name=i),typeof a<"u"&&(c.roles=a);const d=new URL(this.client.config.endpoint+o),u={"content-type":"application/json"};return this.client.call("post",d,u,c)}get(e){let n;e&&typeof e=="object"&&!Array.isArray(e)?n=e||{}:n={teamId:e};const s=n.teamId;if(typeof s>"u")throw new m('Missing required parameter: "teamId"');const r="/teams/{teamId}".replace("{teamId}",s),i={},a=new URL(this.client.config.endpoint+r),o={};return this.client.call("get",a,o,i)}updateName(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={teamId:e,name:n[0]};const r=s.teamId,i=s.name;if(typeof r>"u")throw new m('Missing required parameter: "teamId"');if(typeof i>"u")throw new m('Missing required parameter: "name"');const a="/teams/{teamId}".replace("{teamId}",r),o={};typeof i<"u"&&(o.name=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("put",c,d,o)}delete(e){let n;e&&typeof e=="object"&&!Array.isArray(e)?n=e||{}:n={teamId:e};const s=n.teamId;if(typeof s>"u")throw new m('Missing required parameter: "teamId"');const r="/teams/{teamId}".replace("{teamId}",s),i={},a=new URL(this.client.config.endpoint+r),o={"content-type":"application/json"};return this.client.call("delete",a,o,i)}listMemberships(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={teamId:e,queries:n[0],search:n[1],total:n[2]};const r=s.teamId,i=s.queries,a=s.search,o=s.total;if(typeof r>"u")throw new m('Missing required parameter: "teamId"');const c="/teams/{teamId}/memberships".replace("{teamId}",r),d={};typeof i<"u"&&(d.queries=i),typeof a<"u"&&(d.search=a),typeof o<"u"&&(d.total=o);const u=new URL(this.client.config.endpoint+c),f={};return this.client.call("get",u,f,d)}createMembership(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={teamId:e,roles:n[0],email:n[1],userId:n[2],phone:n[3],url:n[4],name:n[5]};const r=s.teamId,i=s.roles,a=s.email,o=s.userId,c=s.phone,d=s.url,u=s.name;if(typeof r>"u")throw new m('Missing required parameter: "teamId"');if(typeof i>"u")throw new m('Missing required parameter: "roles"');const f="/teams/{teamId}/memberships".replace("{teamId}",r),h={};typeof a<"u"&&(h.email=a),typeof o<"u"&&(h.userId=o),typeof c<"u"&&(h.phone=c),typeof i<"u"&&(h.roles=i),typeof d<"u"&&(h.url=d),typeof u<"u"&&(h.name=u);const v=new URL(this.client.config.endpoint+f),y={"content-type":"application/json"};return this.client.call("post",v,y,h)}getMembership(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={teamId:e,membershipId:n[0]};const r=s.teamId,i=s.membershipId;if(typeof r>"u")throw new m('Missing required parameter: "teamId"');if(typeof i>"u")throw new m('Missing required parameter: "membershipId"');const a="/teams/{teamId}/memberships/{membershipId}".replace("{teamId}",r).replace("{membershipId}",i),o={},c=new URL(this.client.config.endpoint+a),d={};return this.client.call("get",c,d,o)}updateMembership(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={teamId:e,membershipId:n[0],roles:n[1]};const r=s.teamId,i=s.membershipId,a=s.roles;if(typeof r>"u")throw new m('Missing required parameter: "teamId"');if(typeof i>"u")throw new m('Missing required parameter: "membershipId"');if(typeof a>"u")throw new m('Missing required parameter: "roles"');const o="/teams/{teamId}/memberships/{membershipId}".replace("{teamId}",r).replace("{membershipId}",i),c={};typeof a<"u"&&(c.roles=a);const d=new URL(this.client.config.endpoint+o),u={"content-type":"application/json"};return this.client.call("patch",d,u,c)}deleteMembership(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={teamId:e,membershipId:n[0]};const r=s.teamId,i=s.membershipId;if(typeof r>"u")throw new m('Missing required parameter: "teamId"');if(typeof i>"u")throw new m('Missing required parameter: "membershipId"');const a="/teams/{teamId}/memberships/{membershipId}".replace("{teamId}",r).replace("{membershipId}",i),o={},c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("delete",c,d,o)}updateMembershipStatus(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={teamId:e,membershipId:n[0],userId:n[1],secret:n[2]};const r=s.teamId,i=s.membershipId,a=s.userId,o=s.secret;if(typeof r>"u")throw new m('Missing required parameter: "teamId"');if(typeof i>"u")throw new m('Missing required parameter: "membershipId"');if(typeof a>"u")throw new m('Missing required parameter: "userId"');if(typeof o>"u")throw new m('Missing required parameter: "secret"');const c="/teams/{teamId}/memberships/{membershipId}/status".replace("{teamId}",r).replace("{membershipId}",i),d={};typeof a<"u"&&(d.userId=a),typeof o<"u"&&(d.secret=o);const u=new URL(this.client.config.endpoint+c),f={"content-type":"application/json"};return this.client.call("patch",u,f,d)}getPrefs(e){let n;e&&typeof e=="object"&&!Array.isArray(e)?n=e||{}:n={teamId:e};const s=n.teamId;if(typeof s>"u")throw new m('Missing required parameter: "teamId"');const r="/teams/{teamId}/prefs".replace("{teamId}",s),i={},a=new URL(this.client.config.endpoint+r),o={};return this.client.call("get",a,o,i)}updatePrefs(e,...n){let s;e&&typeof e=="object"&&!Array.isArray(e)?s=e||{}:s={teamId:e,prefs:n[0]};const r=s.teamId,i=s.prefs;if(typeof r>"u")throw new m('Missing required parameter: "teamId"');if(typeof i>"u")throw new m('Missing required parameter: "prefs"');const a="/teams/{teamId}/prefs".replace("{teamId}",r),o={};typeof i<"u"&&(o.prefs=i);const c=new URL(this.client.config.endpoint+a),d={"content-type":"application/json"};return this.client.call("put",c,d,o)}}var jr;(function(t){t[t.NORMAL_CLOSURE=1e3]="NORMAL_CLOSURE",t[t.POLICY_VIOLATION=1008]="POLICY_VIOLATION",t[t.UNKNOWN_ERROR=-1]="UNKNOWN_ERROR"})(jr||(jr={}));class Re{}Re.read=t=>`read("${t}")`;Re.write=t=>`write("${t}")`;Re.create=t=>`create("${t}")`;Re.update=t=>`update("${t}")`;Re.delete=t=>`delete("${t}")`;class ze{static any(){return"any"}static user(e,n=""){return n===""?`user:${e}`:`user:${e}/${n}`}static users(e=""){return e===""?"users":`users/${e}`}static guests(){return"guests"}static team(e,n=""){return n===""?`team:${e}`:`team:${e}/${n}`}static member(e){return`member:${e}`}static label(e){return`label:${e}`}}var sa,ra;class zt{static custom(e){return e}static unique(e=7){const n=xc(zt,sa,"m",ra).call(zt);let s="";for(let r=0;r<e;r++){const i=Math.floor(Math.random()*16).toString(16);s+=i}return n+s}}sa=zt,ra=function(){const e=new Date,n=Math.floor(e.getTime()/1e3),s=e.getMilliseconds();return n.toString(16)+s.toString(16).padStart(5,"0")};var Cr;(function(t){t.Equal="equal",t.NotEqual="notEqual",t.GreaterThan="greaterThan",t.GreaterThanEqual="greaterThanEqual",t.LessThan="lessThan",t.LessThanEqual="lessThanEqual",t.Contains="contains",t.IsNull="isNull",t.IsNotNull="isNotNull"})(Cr||(Cr={}));var Nr;(function(t){t.Totp="totp"})(Nr||(Nr={}));var Lr;(function(t){t.Email="email",t.Phone="phone",t.Totp="totp",t.Recoverycode="recoverycode"})(Lr||(Lr={}));var Ur;(function(t){t.Amazon="amazon",t.Apple="apple",t.Auth0="auth0",t.Authentik="authentik",t.Autodesk="autodesk",t.Bitbucket="bitbucket",t.Bitly="bitly",t.Box="box",t.Dailymotion="dailymotion",t.Discord="discord",t.Disqus="disqus",t.Dropbox="dropbox",t.Etsy="etsy",t.Facebook="facebook",t.Figma="figma",t.Github="github",t.Gitlab="gitlab",t.Google="google",t.Linkedin="linkedin",t.Microsoft="microsoft",t.Notion="notion",t.Oidc="oidc",t.Okta="okta",t.Paypal="paypal",t.PaypalSandbox="paypalSandbox",t.Podio="podio",t.Salesforce="salesforce",t.Slack="slack",t.Spotify="spotify",t.Stripe="stripe",t.Tradeshift="tradeshift",t.TradeshiftBox="tradeshiftBox",t.Twitch="twitch",t.Wordpress="wordpress",t.Yahoo="yahoo",t.Yammer="yammer",t.Yandex="yandex",t.Zoho="zoho",t.Zoom="zoom",t.Mock="mock"})(Ur||(Ur={}));var Hr;(function(t){t.AvantBrowser="aa",t.AndroidWebViewBeta="an",t.GoogleChrome="ch",t.GoogleChromeIOS="ci",t.GoogleChromeMobile="cm",t.Chromium="cr",t.MozillaFirefox="ff",t.Safari="sf",t.MobileSafari="mf",t.MicrosoftEdge="ps",t.MicrosoftEdgeIOS="oi",t.OperaMini="om",t.Opera="op",t.OperaNext="on"})(Hr||(Hr={}));var Br;(function(t){t.AmericanExpress="amex",t.Argencard="argencard",t.Cabal="cabal",t.Cencosud="cencosud",t.DinersClub="diners",t.Discover="discover",t.Elo="elo",t.Hipercard="hipercard",t.JCB="jcb",t.Mastercard="mastercard",t.Naranja="naranja",t.TarjetaShopping="targeta-shopping",t.UnionPay="unionpay",t.Visa="visa",t.MIR="mir",t.Maestro="maestro",t.Rupay="rupay"})(Br||(Br={}));var zr;(function(t){t.Afghanistan="af",t.Angola="ao",t.Albania="al",t.Andorra="ad",t.UnitedArabEmirates="ae",t.Argentina="ar",t.Armenia="am",t.AntiguaAndBarbuda="ag",t.Australia="au",t.Austria="at",t.Azerbaijan="az",t.Burundi="bi",t.Belgium="be",t.Benin="bj",t.BurkinaFaso="bf",t.Bangladesh="bd",t.Bulgaria="bg",t.Bahrain="bh",t.Bahamas="bs",t.BosniaAndHerzegovina="ba",t.Belarus="by",t.Belize="bz",t.Bolivia="bo",t.Brazil="br",t.Barbados="bb",t.BruneiDarussalam="bn",t.Bhutan="bt",t.Botswana="bw",t.CentralAfricanRepublic="cf",t.Canada="ca",t.Switzerland="ch",t.Chile="cl",t.China="cn",t.CoteDIvoire="ci",t.Cameroon="cm",t.DemocraticRepublicOfTheCongo="cd",t.RepublicOfTheCongo="cg",t.Colombia="co",t.Comoros="km",t.CapeVerde="cv",t.CostaRica="cr",t.Cuba="cu",t.Cyprus="cy",t.CzechRepublic="cz",t.Germany="de",t.Djibouti="dj",t.Dominica="dm",t.Denmark="dk",t.DominicanRepublic="do",t.Algeria="dz",t.Ecuador="ec",t.Egypt="eg",t.Eritrea="er",t.Spain="es",t.Estonia="ee",t.Ethiopia="et",t.Finland="fi",t.Fiji="fj",t.France="fr",t.MicronesiaFederatedStatesOf="fm",t.Gabon="ga",t.UnitedKingdom="gb",t.Georgia="ge",t.Ghana="gh",t.Guinea="gn",t.Gambia="gm",t.GuineaBissau="gw",t.EquatorialGuinea="gq",t.Greece="gr",t.Grenada="gd",t.Guatemala="gt",t.Guyana="gy",t.Honduras="hn",t.Croatia="hr",t.Haiti="ht",t.Hungary="hu",t.Indonesia="id",t.India="in",t.Ireland="ie",t.IranIslamicRepublicOf="ir",t.Iraq="iq",t.Iceland="is",t.Israel="il",t.Italy="it",t.Jamaica="jm",t.Jordan="jo",t.Japan="jp",t.Kazakhstan="kz",t.Kenya="ke",t.Kyrgyzstan="kg",t.Cambodia="kh",t.Kiribati="ki",t.SaintKittsAndNevis="kn",t.SouthKorea="kr",t.Kuwait="kw",t.LaoPeopleSDemocraticRepublic="la",t.Lebanon="lb",t.Liberia="lr",t.Libya="ly",t.SaintLucia="lc",t.Liechtenstein="li",t.SriLanka="lk",t.Lesotho="ls",t.Lithuania="lt",t.Luxembourg="lu",t.Latvia="lv",t.Morocco="ma",t.Monaco="mc",t.Moldova="md",t.Madagascar="mg",t.Maldives="mv",t.Mexico="mx",t.MarshallIslands="mh",t.NorthMacedonia="mk",t.Mali="ml",t.Malta="mt",t.Myanmar="mm",t.Montenegro="me",t.Mongolia="mn",t.Mozambique="mz",t.Mauritania="mr",t.Mauritius="mu",t.Malawi="mw",t.Malaysia="my",t.Namibia="na",t.Niger="ne",t.Nigeria="ng",t.Nicaragua="ni",t.Netherlands="nl",t.Norway="no",t.Nepal="np",t.Nauru="nr",t.NewZealand="nz",t.Oman="om",t.Pakistan="pk",t.Panama="pa",t.Peru="pe",t.Philippines="ph",t.Palau="pw",t.PapuaNewGuinea="pg",t.Poland="pl",t.FrenchPolynesia="pf",t.NorthKorea="kp",t.Portugal="pt",t.Paraguay="py",t.Qatar="qa",t.Romania="ro",t.Russia="ru",t.Rwanda="rw",t.SaudiArabia="sa",t.Sudan="sd",t.Senegal="sn",t.Singapore="sg",t.SolomonIslands="sb",t.SierraLeone="sl",t.ElSalvador="sv",t.SanMarino="sm",t.Somalia="so",t.Serbia="rs",t.SouthSudan="ss",t.SaoTomeAndPrincipe="st",t.Suriname="sr",t.Slovakia="sk",t.Slovenia="si",t.Sweden="se",t.Eswatini="sz",t.Seychelles="sc",t.Syria="sy",t.Chad="td",t.Togo="tg",t.Thailand="th",t.Tajikistan="tj",t.Turkmenistan="tm",t.TimorLeste="tl",t.Tonga="to",t.TrinidadAndTobago="tt",t.Tunisia="tn",t.Turkey="tr",t.Tuvalu="tv",t.Tanzania="tz",t.Uganda="ug",t.Ukraine="ua",t.Uruguay="uy",t.UnitedStates="us",t.Uzbekistan="uz",t.VaticanCity="va",t.SaintVincentAndTheGrenadines="vc",t.Venezuela="ve",t.Vietnam="vn",t.Vanuatu="vu",t.Samoa="ws",t.Yemen="ye",t.SouthAfrica="za",t.Zambia="zm",t.Zimbabwe="zw"})(zr||(zr={}));var Wr;(function(t){t.GET="GET",t.POST="POST",t.PUT="PUT",t.PATCH="PATCH",t.DELETE="DELETE",t.OPTIONS="OPTIONS",t.HEAD="HEAD"})(Wr||(Wr={}));var Qr;(function(t){t.Center="center",t.Topleft="top-left",t.Top="top",t.Topright="top-right",t.Left="left",t.Right="right",t.Bottomleft="bottom-left",t.Bottom="bottom",t.Bottomright="bottom-right"})(Qr||(Qr={}));var Vr;(function(t){t.Jpg="jpg",t.Jpeg="jpeg",t.Png="png",t.Webp="webp",t.Heic="heic",t.Avif="avif",t.Gif="gif"})(Vr||(Vr={}));var Gr;(function(t){t.Http="http",t.Schedule="schedule",t.Event="event"})(Gr||(Gr={}));var Kr;(function(t){t.Waiting="waiting",t.Processing="processing",t.Completed="completed",t.Failed="failed",t.Scheduled="scheduled"})(Kr||(Kr={}));const ct={endpoint:"https://cloud.appwrite.io/v1",projectId:"689725820024e81781b7",databaseId:"689d15b10003a5a13636",functions:{cmsAuth:"68976500002eb5c6ee4f",accessRequest:"689cdea5001a4d74549d",batchUpdate:"68f00487000c624533a3"},collections:{events:"events",ingredients:"ingredients",main:"main",purchases:"purchases",products:"products"}};let Lt=null;async function O(){if(Lt)return Lt;console.log("[appwrite] Initialisation des instances Appwrite...");const t=new st().setEndpoint(ct.endpoint).setProject(ct.projectId),e=new qc(t),n=new jc(t),s=new Nc(t),r=new Cc(t),i=new Lc(t);return Lt={client:t,account:e,databases:n,tables:s,functions:r,teams:i,config:ct},console.log("[appwrite] Instances initialisées avec succès"),Lt}function Uc(){console.log("[appwrite] Cache réinitialisé"),Lt=null}function Hc(){return{APPWRITE_ENDPOINT:ct.endpoint,APPWRITE_PROJECT_ID:ct.projectId,APPWRITE_FUNCTION_ID:ct.functions.batchUpdate,ACCESS_REQUEST_FUNCTION_ID:ct.functions.accessRequest,APPWRITE_CONFIG:ct}}function ia(t,e){return Lt?Lt.client.subscribe(t,e):(console.warn("[appwrite] Subscribe appelé avant initialisation, tentative d'init..."),new st().setEndpoint(ct.endpoint).setProject(ct.projectId).subscribe(t,e))}function Rn(){return localStorage.getItem("appwrite-user-name")||""}async function Bc(t,e,n=100){try{const{tables:s,config:r}=await O(),i=await s.listRows(r.databaseId,r.APPWRITE_CONFIG.collections.purchases,[_.greaterThan("$updatedAt",e),_.equal("mainId",t),_.limit(n),_.select(["*","products.$id"])]);return console.log(`[Appwrite Interactions] ${i.rows.length} purchases modifiés chargés`),i.rows}catch(s){return console.error("[Appwrite Interactions] Erreur chargement purchases modifiés:",s),[]}}async function aa(t,e){const{lastSync:n,limit:s=100}=e;try{const{tables:r,config:i}=await O();if(!n)return console.log("[Appwrite Interactions] Chargement complet des produits"),(await r.listRows(i.databaseId,i.APPWRITE_CONFIG.collections.products,[_.equal("mainId",t),_.select(["*","purchases.$id","purchases.unit","purchases.quantity","purchases.store","purchases.who","purchases.notes","purchases.price","purchases.status","purchases.deliveryDate","purchases.orderDate","purchases.createdBy","purchases.products.$id"]),_.limit(s)])).rows;const a=await r.listRows(i.databaseId,i.APPWRITE_CONFIG.collections.products,[_.greaterThan("$updatedAt",n),_.equal("mainId",t),_.limit(s),_.select(["*","purchases.$id","purchases.unit","purchases.quantity","purchases.store","purchases.who","purchases.notes","purchases.price","purchases.status","purchases.deliveryDate","purchases.orderDate","purchases.createdBy","purchases.products.$id"])]);return a.rows.length>0&&console.log(`[Appwrite Interactions] ${a.rows.length} produits synchronisés avec leurs purchases`),a.rows}catch(r){console.error(`[Appwrite Interactions] Erreur sync produits avec purchases pour mainId ${t}:`,r);const i=r instanceof Error?r.message:"Erreur lors de la synchronisation";throw new Error(`Échec de la synchronisation: ${i}`)}}async function oa(t,e,n=!0){const{tables:s,config:r}=await O();return n&&(e.updatedBy=Rn()),await s.updateRow(r.databaseId,r.APPWRITE_CONFIG.collections.products,t,e)}async function ca(t,e,n=!1){if(!t)throw new Error("ID du produit requis pour la mise à jour de l'override");const s=JSON.stringify(e),r=await oa(t,{totalNeededOverride:s},n);return console.log(`[Appwrite Interactions] Total override mis à jour pour le produit ${t}:`,e),r}async function la(t){if(!t?.length)return[];try{const{tables:e,config:n}=await O(),s=await e.listRows(n.databaseId,n.APPWRITE_CONFIG.collections.purchases,[_.equal("$id",t),_.select(["*","products.$id"])]);return console.log(`[Appwrite Interactions] ${s.rows.length} purchases chargés avec relations products`),s.rows}catch(e){console.error("[Appwrite Interactions] Erreur chargement purchases avec relations:",e);const n=e instanceof Error?e.message:"Erreur inconnue";throw new Error(`Échec du chargement des purchases: ${n}`)}}function da(t,e={}){let n=null;const s=i=>{const{events:a,payload:o}=i;if(!o)return;const c=a.some(v=>v.includes("products.")),d=a.some(v=>v.includes("purchases.")),u=a.some(v=>v.includes(".create")),f=a.some(v=>v.includes(".update")),h=a.some(v=>v.includes(".delete"));if(c){const v=o;v.updatedBy&&v.updatedBy!==Rn()&&(u||f?Je.info(`${v.updatedBy} a modifié le produit "${v.productName}"`,{source:"realtime-other"}):h&&Je.info(`${v.updatedBy} a supprimé un produit`,{source:"realtime-other"})),u&&e.onProductCreate?e.onProductCreate(v):f&&e.onProductUpdate?e.onProductUpdate(v):h&&e.onProductDelete&&e.onProductDelete(v.$id)}else if(d){const v=o;if(v.createdBy&&v.createdBy!==Rn()){const y=v.products?.[0]?.productName||"un produit";u&&v.who!==Rn()?Je.info(`${v.who} a ajouté un achat pour ${y}`,{source:"realtime-other"}):f&&v.who!==Rn()?Je.info(`${v.who} a modifié un achat pour ${y}`,{source:"realtime-other"}):h&&Je.info(`${v.who} a supprimé un achat pour ${y}`,{source:"realtime-other"})}u&&e.onPurchaseCreate?e.onPurchaseCreate(v):f&&e.onPurchaseUpdate?e.onPurchaseUpdate(v):h&&e.onPurchaseDelete&&e.onPurchaseDelete(v.$id)}};return(async()=>{try{typeof window<"u"&&window.AppwriteClient&&(await window.AppwriteClient.initializeAppwrite(),n=window.AppwriteClient.subscribeToCollections(["products","purchases"],t,s,{onConnect:()=>{console.log("[Appwrite Interactions] Realtime connecté"),e.onConnect?.()},onDisconnect:()=>{console.log("[Appwrite Interactions] Realtime déconnecté"),e.onDisconnect?.()},onError:i=>{console.error("[Appwrite Interactions] Erreur realtime:",i),e.onError?.(i)}}))}catch(i){console.error("[Appwrite Interactions] Impossible de configurer realtime:",i),e.onError?.(i)}})(),()=>{n&&(n(),n=null)}}async function ua(t){try{console.log(`[Appwrite Interactions] Chargement des données principales pour mainId: ${t}`);const{tables:e,config:n}=await O(),s=await e.getRow(n.databaseId,n.collections.main,t);return console.log(`[Appwrite Interactions] Données principales chargées pour: ${s.name}`),s}catch(e){return console.error(`[Appwrite Interactions] Erreur chargement données principales pour mainId ${t}:`,e),null}}async function fa(t,e,n,s){try{console.log(`[Appwrite Interactions] Création du Main document: ${t}`);const{tables:r,config:i,account:a}=await O(),o=await a.get();await r.createRow(i.databaseId,i.APPWRITE_CONFIG.collections.main,t,{name:s,createdBy:o.$id,isActive:!0,originalDataHash:e,allDates:n,status:"active",dateStart:n[0]||null,dateEnd:n[n.length-1]||null}),console.log(`[Appwrite Interactions] Main document créé: ${t}`)}catch(r){throw console.error("[Appwrite Interactions] Erreur création Main document:",r),r}}async function zc(t){try{const{tables:e,config:n}=await O(),s=await e.listRows(n.databaseId,n.APPWRITE_CONFIG.collections.purchases,[_.equal("mainId",t),_.equal("status","expense"),_.limit(1e3)]);return console.log(`[Appwrite Interactions] ${s.rows.length} dépenses globales chargées`),s.rows}catch(e){return console.error("[Appwrite Interactions] Erreur chargement dépenses globales:",e),[]}}const Yr=Object.freeze(Object.defineProperty({__proto__:null,createMainDocument:fa,loadMainEventData:ua,loadOrphanPurchases:zc,loadPurchasesListByIds:la,loadUpdatedPurchases:Bc,subscribeToRealtime:da,syncProductsWithPurchases:aa,updateProduct:oa,updateTotalOverride:ca},Symbol.toStringTag,{value:"Module"}));function Wc(t){const n=new Date(t).getHours();return n>=11&&n<=13?"sun":n>=19&&n<=21?"moon":n>=7&&n<=9?"cloud":null}function Qc(t){return{formattedDate:new Date(t).toLocaleDateString("fr-FR",{weekday:"short",day:"numeric"}),timeIcon:Wc(t)}}function ha(t){const e={};for(const n of t)e[n]=Qc(n);return e}function Vc(t,e){if(!t.byDate?.[e])return{requiredQuantities:[],requiredQuantitiesFormatted:"-",stockBalance:[],availableStockQuantities:[],missingStockQuantities:[],availableStockFormatted:"-",missingStockFormatted:"-",hasAvailableStock:!1,hasMissingStock:!1,totalRecipesInRange:0,totalPortionsInRange:0,datesInSelectedRange:[],recipesByDate:new Map};const n=t.byDate[e],s=[e],r=new Map;n.recipes?.length&&r.set(e,n.recipes);const i=n.totalConsolidated||[],a=i.length>0?Ue(i):"-",o=Gc(t,e,i),c=o.filter(h=>h.q>0),d=new Date().toISOString().split("T")[0],f=e<d?[]:o.filter(h=>h.q<0);return{requiredQuantities:i,requiredQuantitiesFormatted:a,stockBalance:o,availableStockQuantities:c,missingStockQuantities:f,availableStockFormatted:ur(o),missingStockFormatted:Ue(f.map(h=>({q:Math.abs(h.q),u:h.u}))),hasAvailableStock:c.length>0,hasMissingStock:f.length>0,totalRecipesInRange:n.recipes?.length||0,totalPortionsInRange:n.totalAssiettes||0,datesInSelectedRange:s,recipesByDate:r}}function Gc(t,e,n){let s=[],r="";t.stockParsed?.dateTime&&t.stockParsed.dateTime<=e&&(s=[{q:parseFloat(t.stockParsed.quantity),u:t.stockParsed.unit}],r=t.stockParsed.dateTime);const i=[];if(t.purchases)for(const c of t.purchases)Kc(c,e,r)&&i.push({q:c.quantity,u:c.unit});const a=[...s,...i],o=lr(a);return na(o,n)}function Kc(t,e,n=""){if(t.status==="cancelled")return!1;const s=t.deliveryDate||t.$createdAt;return!s||s>e||n&&t.$createdAt<n?!1:s<=e}function Yc(t,e){const n=t.totalNeededArray||[],s=n.length>0?Ue(n):"-",r=pa(t,e[0],e[e.length-1],n),i=r.filter(d=>d.q>0),a=r.filter(d=>d.q<0),o=[...e].sort(),c=new Map;if(t.byDate)for(const[d,u]of Object.entries(t.byDate))u.recipes?.length&&c.set(d,u.recipes);return{requiredQuantities:n,requiredQuantitiesFormatted:s,stockBalance:r,availableStockQuantities:i,missingStockQuantities:a,availableStockFormatted:ur(r),missingStockFormatted:Ue(a.map(d=>({q:Math.abs(d.q),u:d.u}))),hasAvailableStock:i.length>0,hasMissingStock:a.length>0,totalRecipesInRange:t.nbRecipes||0,totalPortionsInRange:t.totalAssiettes||0,datesInSelectedRange:o,recipesByDate:c}}function Jc(t,e,n){if(!t.byDate)return{requiredQuantities:[],requiredQuantitiesFormatted:"-",stockBalance:[],availableStockQuantities:[],missingStockQuantities:[],availableStockFormatted:"-",missingStockFormatted:"-",hasAvailableStock:!1,hasMissingStock:!1,totalRecipesInRange:0,totalPortionsInRange:0,datesInSelectedRange:[],recipesByDate:new Map};const s=new Date(e),r=new Date(n),i=[],a=new Map,o=new Map;let c=0,d=0;for(const[S,M]of Object.entries(t.byDate)){const $=new Date(S);$>=s&&$<=r&&(i.push(S),c+=M.totalAssiettes||0,M.recipes?.length&&(a.set(S,M.recipes),d+=M.recipes.length),M.totalConsolidated&&M.totalConsolidated.forEach(({q:P,u:T})=>{o.set(T,(o.get(T)||0)+P)}))}const u=Array.from(o.entries()).map(([S,M])=>({q:M,u:S})),f=u.length>0?Ue(u):"-",h=pa(t,e,n,u),v=h.filter(S=>S.q>0),y=new Date().toISOString().split("T")[0],b=n<y?[]:h.filter(S=>S.q<0);return{requiredQuantities:u,requiredQuantitiesFormatted:f,stockBalance:h,availableStockQuantities:v,missingStockQuantities:b,availableStockFormatted:ur(h),missingStockFormatted:Ue(b.map(S=>({q:Math.abs(S.q),u:S.u}))),hasAvailableStock:v.length>0,hasMissingStock:b.length>0,totalRecipesInRange:d,totalPortionsInRange:c,datesInSelectedRange:i,recipesByDate:a}}function pa(t,e,n,s){let r=[],i="";t.stockParsed?.dateTime&&t.stockParsed.dateTime<=e&&(r=[{q:parseFloat(t.stockParsed.quantity),u:t.stockParsed.unit}],i=t.stockParsed.dateTime);const a=[];if(t.purchases)for(const d of t.purchases)Xc(d,e,n,i)&&a.push({q:d.quantity,u:d.unit});const o=[...r,...a],c=lr(o);return na(c,s)}function Xc(t,e,n,s=""){if(t.status==="cancelled")return!1;const r=t.deliveryDate||t.$createdAt;return!r||r>n||s&&t.$createdAt<s?!1:r<=n}async function Zc(t){let e;if(e=await fetch(`/evenements/${t}/metadata.json`),!e.ok)throw new Error(`Impossible de charger les métadonnées Hugo: ${e.status}`);const n=await e.json();if(!n.mainGroup_id||!n.hugoContentHash)throw new Error("Format de métadonnées Hugo invalide");return n}async function Jr(t){const e=await fetch(`/evenements/${t}/ingredients_aw/index.json`);if(!e.ok)throw new Error(`Impossible de charger les données Hugo: ${e.status}`);const n=await e.json();if(!n.mainGroup_id||!n.ingredients)throw new Error("Format de données Hugo invalide");return n}async function Oc(t,e){if(!t)return!0;try{return(await Zc(e)).hugoContentHash!==t}catch(n){return console.warn("Impossible de vérifier le hash Hugo:",n),!1}}function va(t,e){const n=dr(t.byDate),s=ys(ms([])),{numeric:r,display:i}=ws(n,s),a=Object.keys(t.byDate||{}),o=ha(a);return{$id:`${t.productSemanticKey}`,$updatedAt:void 0,productHugoUuid:t.ingredientHugoUuid,productName:t.ingredientName,productType:t.ingType,pFrais:t.pFrais||!1,pSurgel:t.pSurgel||!1,nbRecipes:t.nbRecipes,totalNeededRaw:t.totalNeededRaw,totalAssiettes:t.totalAssiettes,isSynced:!1,status:"active",who:null,store:"",stockReel:null,previousNames:null,isMerged:!1,mergedFrom:null,mergeDate:null,mergeReason:null,mergedInto:null,totalNeededOverride:null,mainId:e,purchases:[],byDate:t.byDate,storeInfo:null,stockParsed:null,totalNeededArray:n,totalPurchasesArray:s,missingQuantityArray:r,stockOrTotalPurchases:"-",displayTotalNeeded:Ue(n),displayTotalPurchases:"-",displayMissingQuantity:i,totalNeededOverrideParsed:null,displayTotalOverride:"",dateDisplayInfo:o}}function Fc(t,e){return t.map(n=>va(n,e))}class el{dbName;db=null;version=1;PRODUCTS_STORE="products";METADATA_STORE="metadata";LAST_SYNC_KEY="lastSync";ALL_DATES_KEY="allDates";HUGO_HASH_KEY="hugoContentHash";constructor(e){this.dbName=`products-cache-${e}`}async open(){if(!this.db)return new Promise((e,n)=>{const s=indexedDB.open(this.dbName,this.version);s.onerror=()=>n(s.error),s.onsuccess=()=>{this.db=s.result,console.log(`[IDBCache] Base ouverte: ${this.dbName}`),e()},s.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains(this.PRODUCTS_STORE)||(i.createObjectStore(this.PRODUCTS_STORE,{keyPath:"$id"}),console.log("[IDBCache] Object store 'products' créé")),i.objectStoreNames.contains(this.METADATA_STORE)||(i.createObjectStore(this.METADATA_STORE,{keyPath:"key"}),console.log("[IDBCache] Object store 'metadata' créé avec keyPath"))}})}async loadProducts(){if(!this.db)throw new Error("DB non ouverte");return new Promise((e,n)=>{const i=this.db.transaction(this.PRODUCTS_STORE,"readonly").objectStore(this.PRODUCTS_STORE).getAll();i.onsuccess=()=>{const a=new Map;i.result.forEach(o=>{a.set(o.$id,o)}),console.log(`[IDBCache] ${a.size} produits chargés`),e(a)},i.onerror=()=>n(i.error)})}async loadMetadata(){if(!this.db)throw new Error("DB non ouverte");return new Promise((e,n)=>{const i=this.db.transaction(this.METADATA_STORE,"readonly").objectStore(this.METADATA_STORE).getAll();i.onsuccess=()=>{const a=i.result,o={lastSync:null,allDates:[],hugoContentHash:null};a.forEach(c=>{c.key===this.LAST_SYNC_KEY?o.lastSync=c.value:c.key===this.ALL_DATES_KEY?o.allDates=c.value||[]:c.key===this.HUGO_HASH_KEY&&(o.hugoContentHash=c.value)}),console.log(`[IDBCache] Metadata chargées: lastSync=${o.lastSync}, dates=${o.allDates?.length||0}, hash=${o.hugoContentHash}`),e(o)},i.onerror=()=>n(i.error)})}async saveProducts(e){if(!this.db)throw new Error("DB non ouverte");return new Promise((n,s)=>{const r=this.db.transaction(this.PRODUCTS_STORE,"readwrite"),i=r.objectStore(this.PRODUCTS_STORE);i.clear(),e.forEach(a=>{i.put(a)}),r.oncomplete=()=>{console.log(`[IDBCache] ${e.size} produits sauvegardés`),n()},r.onerror=()=>s(r.error)})}async saveMetadata(e){if(!this.db)throw new Error("DB non ouverte");return new Promise((n,s)=>{const r=this.db.transaction(this.METADATA_STORE,"readwrite"),i=r.objectStore(this.METADATA_STORE);i.put({key:this.LAST_SYNC_KEY,value:e.lastSync}),i.put({key:this.ALL_DATES_KEY,value:e.allDates}),e.hugoContentHash!==void 0&&i.put({key:this.HUGO_HASH_KEY,value:e.hugoContentHash}),r.oncomplete=()=>{console.log("[IDBCache] Metadata sauvegardées (objets {key, value})"),n()},r.onerror=()=>s(r.error)})}async updateLastSync(e){if(!this.db)throw new Error("DB non ouverte");return new Promise((n,s)=>{const a=this.db.transaction(this.METADATA_STORE,"readwrite").objectStore(this.METADATA_STORE).put({key:this.LAST_SYNC_KEY,value:e});a.onsuccess=()=>{console.log(`[IDBCache] lastSync mis à jour: ${e}`),n()},a.onerror=()=>s(a.error)})}async updateAllDates(e){if(!this.db)throw new Error("DB non ouverte");return new Promise((n,s)=>{const a=this.db.transaction(this.METADATA_STORE,"readwrite").objectStore(this.METADATA_STORE).put({key:this.ALL_DATES_KEY,value:e});a.onsuccess=()=>{console.log(`[IDBCache] allDates mis à jour: ${e.length} dates`),n()},a.onerror=()=>s(a.error)})}async updateHugoContentHash(e){if(!this.db)throw new Error("DB non ouverte");return new Promise((n,s)=>{const a=this.db.transaction(this.METADATA_STORE,"readwrite").objectStore(this.METADATA_STORE).put({key:this.HUGO_HASH_KEY,value:e});a.onsuccess=()=>{console.log(`[IDBCache] hugoContentHash mis à jour: ${e}`),n()},a.onerror=()=>s(a.error)})}async updateLastHugoMenuUpdate(e){if(!this.db)throw new Error("DB non ouverte");return new Promise((n,s)=>{const a=this.db.transaction(this.METADATA_STORE,"readwrite").objectStore(this.METADATA_STORE).put({key:"lastHugoMenuUpdate",value:e});a.onsuccess=()=>{console.log("[IDBCache] lastHugoMenuUpdate sauvegardé"),n()},a.onerror=()=>s(a.error)})}async upsertProduct(e){if(!this.db)throw new Error("DB non ouverte");return new Promise((n,s)=>{const a=this.db.transaction(this.PRODUCTS_STORE,"readwrite").objectStore(this.PRODUCTS_STORE).put(e);a.onsuccess=()=>n(),a.onerror=()=>s(a.error)})}async deleteProduct(e){if(!this.db)throw new Error("DB non ouverte");return new Promise((n,s)=>{const a=this.db.transaction(this.PRODUCTS_STORE,"readwrite").objectStore(this.PRODUCTS_STORE).delete(e);a.onsuccess=()=>n(),a.onerror=()=>s(a.error)})}async clear(){if(!this.db)throw new Error("DB non ouverte");return new Promise((e,n)=>{const s=this.db.transaction([this.PRODUCTS_STORE,this.METADATA_STORE],"readwrite");s.objectStore(this.PRODUCTS_STORE).clear(),s.objectStore(this.METADATA_STORE).clear(),s.oncomplete=()=>{console.log("[IDBCache] Cache vidé"),e()},s.onerror=()=>n(s.error)})}close(){this.db&&(this.db.close(),this.db=null,console.log("[IDBCache] Connexion fermée"))}}async function tl(t){const e=new el(t);return await e.open(),e}function nl(t){return!!(t.isMerged||t.totalNeededOverride)}function sl(t,e){if(!t||t.length!==e.length)return!0;for(let n=0;n<t.length;n++){const s=t[n],r=e[n];if(s.q!==r.q||s.u!==r.u)return!0}return!1}async function rl(t,e){const n={added:[],updated:[],removed:[],mergedProductsUpdated:[],overrideConflicts:[],summary:""},s=new Set;for(const r of e.ingredients){const i=r.productSemanticKey;if(!i){console.warn(`[syncHugoData] Ingrédient sans productSemanticKey ignoré : ${r.ingredientName}`);continue}s.add(i);const a=t.get(i);if(a){if(sl(a.totalNeededRaw,r.totalNeededRaw)){const c=il(a,r);if(c&&n.overrideConflicts.push(c),a.isMerged){const d=a.displayTotalNeeded;Xr(a,r),n.mergedProductsUpdated.push({product:a,oldDisplayTotal:d,newDisplayTotal:a.displayTotalNeeded,currentOverride:a.totalNeededOverrideParsed,semanticKey:i})}else Xr(a,r);n.updated.push(i)}t.set(i,a)}else{n.added.push(r);const o=va(r,e.mainGroup_id);t.set(o.$id,o)}}for(const[r,i]of t)s.has(r)||(n.removed.push(i),!nl(i)&&!i.purchases?.length&&!i.stockReel&&!i.who?.length&&t.delete(r));return n.overrideConflicts.length>0&&await al(n.overrideConflicts),n.summary=cl(n),n}function il(t,e){if(!t.totalNeededOverride||!t.totalNeededOverrideParsed)return null;const n=dr(e.byDate),s=Ue(n),r=t.displayTotalNeeded;return r!==s?{product:t,oldDisplayTotal:r,newDisplayTotal:s,currentOverride:t.totalNeededOverrideParsed,semanticKey:t.$id}:null}async function al(t){for(const e of t){const n={...e.currentOverride,hasUnresolvedChangedSinceOverride:!0,oldTotalDisplay:e.oldDisplayTotal,newTotalDisplay:e.newDisplayTotal};JSON.stringify(n);try{await ca(e.product.$id,n,!1)}catch(s){console.error(`Erreur lors de la mise à jour de l'override pour ${e.product.$id}:`,s)}}}function Xr(t,e){t.byDate=e.byDate,t.nbRecipes=e.nbRecipes,t.totalAssiettes=e.totalAssiettes,t.productType=e.ingType,t.pFrais=e.pFrais||!1,t.pSurgel=e.pSurgel||!1,ol(t)}function ol(t){t.totalNeededArray=dr(t.byDate),t.displayTotalNeeded=Ue(t.totalNeededArray);const e=ys(ms(t.purchases)),{numeric:n,display:s}=ws(t.totalNeededArray,e);t.totalPurchasesArray=e,t.missingQuantityArray=n,t.displayMissingQuantity=s;const r=Object.keys(t.byDate||{});t.dateDisplayInfo=ha(r),t.stockOrTotalPurchases=t.purchases.length>0?t.displayTotalPurchases:t.displayTotalNeeded}function cl(t){const e=[];if((t.added.length>0||t.updated.length>0||t.removed.length>0)&&e.push("Les recettes ou menus ont été modifiés depuis votre dernière consultation: "),t.added.length>0&&e.push(`${t.added.length} nouveau(x) ingrédient(s)`),t.updated.length>0&&e.push(` ${t.updated.length} ingrédient(s) mis à jour`),t.overrideConflicts.length>0&&e.push(`⚠️ ${t.overrideConflicts.length} quantité(s) personnalisée(s) à réviser`),t.mergedProductsUpdated.length>0&&e.push(`🔀 ${t.mergedProductsUpdated.length} produit(s) fusionné(s) modifié(s)`),t.removed.length>0){const n=t.removed.filter(s=>s.purchases?.length||s.stockReel||s.who?.length).length;n>0?e.push(`⚠️ ${n} suppression(s) avec données conservées`):e.push(`${t.removed.length} ingrédient(s) supprimé(s)`)}return e.length>0?e.join(", "):"Aucune modification détectée"}async function ga(){try{const{teams:t}=await O();return await t.list()}catch(t){throw console.error("[teams] Error listing teams:",t),t}}async function ll(t){try{const{teams:e}=await O();return await e.get(t)}catch(e){throw console.error(`[teams] Error getting team ${t}:`,e),e}}async function dl(t,e){try{const{teams:n}=await O(),s=zt.unique(),r=await n.create(s,t,e);return console.log(`[teams] Team created: ${s}`),r}catch(n){throw console.error("[teams] Error creating team:",n),n}}async function ul(t,e){try{const{teams:n}=await O(),s=await n.updateName(t,e);return console.log(`[teams] Team updated: ${t}`),s}catch(n){throw console.error(`[teams] Error updating team ${t}:`,n),n}}async function fl(t){try{const{teams:e}=await O();await e.delete(t),console.log(`[teams] Team deleted: ${t}`)}catch(e){throw console.error(`[teams] Error deleting team ${t}:`,e),e}}async function tn(t){try{const{teams:e}=await O();return await e.listMemberships(t)}catch(e){throw console.error(`[teams] Error listing members of team ${t}:`,e),e}}async function hl(t,e,n,s){try{const{teams:r}=await O(),i=await r.createMembership(t,n,e,void 0,void 0,s);return console.log(`[teams] Membership created for ${e} in team ${t}`),i}catch(r){throw console.error("[teams] Error creating membership:",r),r}}async function pl(t,e,n){try{const{teams:s}=await O(),r=await s.updateMembership(t,e,n);return console.log(`[teams] Membership ${e} roles updated`),r}catch(s){throw console.error("[teams] Error updating membership roles:",s),s}}async function vl(t,e){try{const{teams:n}=await O();await n.deleteMembership(t,e),console.log(`[teams] Membership ${e} deleted from team ${t}`)}catch(n){throw console.error("[teams] Error deleting membership:",n),n}}async function Ks(){try{return(await ga()).teams.map(e=>e.$id)}catch(t){return console.warn("[teams] Impossible de récupérer les équipes (Appwrite pas encore initialisé?):",t),[]}}async function gl(t){try{return(await Ks()).includes(t)}catch(e){return console.error("[teams] Error checking team membership:",e),!1}}class ml{isMobileQuery=new Ic("max-width: 1024px");#e=A(null);#t=A(he([]));#n=A(!1);#r=A(null);#o=A(!1);get user(){return l(this.#e)}get userId(){return l(this.#e)?.$id??null}get userTeams(){return l(this.#t)}get isAuthenticated(){return l(this.#e)!==null}get authLoading(){return l(this.#n)}get authError(){return l(this.#r)}get authInitialized(){return l(this.#o)}async initializeAuth(){if(l(this.#o)){console.log("[GlobalState] Authentification déjà initialisée");return}console.log("[GlobalState] Initialisation de l'authentification..."),p(this.#n,!0),p(this.#r,null);try{const{account:e}=await O();p(this.#e,await e.get(),!0),localStorage.setItem("appwrite-user-name",l(this.#e).name),localStorage.setItem("appwrite-user-email",l(this.#e).email),localStorage.setItem("appwrite-user-id",l(this.#e).$id),p(this.#t,await Ks(),!0),console.log(`[GlobalState] Authentifié: ${l(this.#e).name} (${l(this.#t).length} équipes)`)}catch(e){p(this.#e,null),p(this.#t,[],!0),p(this.#r,e instanceof Error?e.message:"Erreur d'authentification",!0),console.log("[GlobalState] Utilisateur non connecté")}finally{p(this.#n,!1),p(this.#o,!0)}}async logout(){try{const{account:e}=await O();await e.deleteSession({sessionId:"current"}),Uc(),localStorage.removeItem("appwrite-user-name"),localStorage.removeItem("appwrite-user-email"),localStorage.removeItem("appwrite-user-id"),p(this.#e,null),p(this.#t,[],!0),p(this.#o,!1),console.log("[GlobalState] Déconnexion réussie")}catch(e){throw console.error("[GlobalState] Erreur lors de la déconnexion:",e),e}}async refreshTeams(){if(!l(this.#e)){console.warn("[GlobalState] Impossible de rafraîchir les équipes: utilisateur non connecté");return}try{const e=await Ks();(e.length>0||l(this.#t).length===0)&&(p(this.#t,e,!0),console.log(`[GlobalState] Équipes rafraîchies: ${l(this.#t).length}`))}catch(e){console.error("[GlobalState] Erreur lors du rafraîchissement des équipes:",e)}}get isMobile(){return this.isMobileQuery.current}get isDesktop(){return!this.isMobile}userName(){return l(this.#e)?.name||localStorage.getItem("appwrite-user-name")||""}get toasts(){return Je.toasts}get toast(){return Je}#c=A(he({isOpen:!1,conflicts:[]}));get modalOverride(){return l(this.#c)}set modalOverride(e){p(this.#c,e,!0)}#s=A(he({isOpen:!1}));get modal(){return l(this.#s)}set modal(e){p(this.#s,e,!0)}#l=A(he({isRunning:!1,name:"",progress:0}));get backgroundOperation(){return l(this.#l)}set backgroundOperation(e){p(this.#l,e,!0)}#d=A(he({isOpen:!1}));get authModal(){return l(this.#d)}set authModal(e){p(this.#d,e,!0)}}const oe=new ml;class En{#e=A(he({}));get data(){return l(this.#e)}set data(e){p(this.#e,e,!0)}dateStore;constructor(e,n){this.data=e,this.dateStore=n}update(e){this.data=e}get $id(){return this.data.$id}get productName(){return this.data.productName}get productType(){return this.data.productType}get storeInfo(){return this.data.storeInfo}get who(){return this.data.who}get pFrais(){return this.data.pFrais}get pSurgel(){return this.data.pSurgel}get status(){return this.data.status}get previousNames(){return this.data.previousNames}get purchases(){return this.data.purchases}get totalNeededOverrideParsed(){return this.data.totalNeededOverrideParsed}get displayMissingQuantity(){return this.data.displayMissingQuantity}get missingQuantityArray(){return this.data.missingQuantityArray}get isSynced(){return this.data.isSynced}get byDate(){return this.data.byDate}#t=Q(()=>{const e=this.dateStore.current,n=this.dateStore.dates;let s;if(this.dateStore.isFullRange)s=Yc(this.data,n),s.datesInSelectedRange&&(s.datesInSelectedRange=s.datesInSelectedRange.filter(r=>this.data.byDate&&this.data.byDate[r]));else if(e.start&&e.end&&e.start===e.end)s=Vc(this.data,e.start);else if(e.start&&e.end)s=Jc(this.data,e.start,e.end);else return{quantities:[],formattedQuantities:"",nbRecipes:0,totalAssiettes:0,stockResult:[],availableQuantities:[],missingQuantities:[],formattedMissingQuantities:"",formattedAvailableQuantities:"En attente",hasAvailable:!1,hasMissing:!1,concernedDates:[],recipesByDate:new Map};return{quantities:s.requiredQuantities,formattedQuantities:s.requiredQuantitiesFormatted,nbRecipes:s.totalRecipesInRange,totalAssiettes:s.totalPortionsInRange,stockResult:s.stockBalance,availableQuantities:s.availableStockQuantities,missingQuantities:s.missingStockQuantities,formattedMissingQuantities:s.missingStockFormatted,formattedAvailableQuantities:s.availableStockFormatted,hasAvailable:s.hasAvailableStock,hasMissing:s.hasMissingStock,concernedDates:s.datesInSelectedRange,recipesByDate:s.recipesByDate}});get stats(){return l(this.#t)}set stats(e){p(this.#t,e)}}class yl{#e=A(he([]));#t=A(null);#n=A(null);constructor(e=[]){p(this.#e,e,!0),this.initializeSmartRange()}get start(){return l(this.#t)}get end(){return l(this.#n)}get dates(){return l(this.#e)}#r=Q(()=>[...l(this.#e)].sort()[0]);get firstAvailableDate(){return l(this.#r)}set firstAvailableDate(e){p(this.#r,e)}#o=Q(()=>[...l(this.#e)].sort()[l(this.#e).length-1]);get lastAvailableDate(){return l(this.#o)}set lastAvailableDate(e){p(this.#o,e)}get current(){return{start:l(this.#t),end:l(this.#n)}}#c=Q(()=>{if(l(this.#e).length===0)return!0;const e=this.lastAvailableDate?new Date(this.lastAvailableDate):new Date;return e.setHours(23,59,59,999),e<new Date});get isEventPassed(){return l(this.#c)}set isEventPassed(e){p(this.#c,e)}#s=Q(()=>{if(l(this.#e).length===0)return!1;const e=new Date;return e.setHours(0,0,0,0),l(this.#e).some(n=>new Date(n)>=e)});get hasUpcomingDates(){return l(this.#s)}set hasUpcomingDates(e){p(this.#s,e)}#l=Q(()=>l(this.#t)===this.firstAvailableDate&&l(this.#n)===this.lastAvailableDate);get isFullRange(){return l(this.#l)}set isFullRange(e){p(this.#l,e)}#d=Q(()=>{if(l(this.#e).length===0)return!1;const e=[...l(this.#e)].sort(),n=new Date;n.setHours(0,0,0,0);const s=e.find(a=>new Date(a)>=n)||null;let r,i;if(s)r=s,i=e[e.length-1];else{const a=e[e.length-1];r=a,i=a}return l(this.#t)===r&&l(this.#n)===i});get isUpcomingRange(){return l(this.#d)}set isUpcomingRange(e){p(this.#d,e)}#u=Q(()=>l(this.#e).length===1);get hasSingleDateEvent(){return l(this.#u)}set hasSingleDateEvent(e){p(this.#u,e)}#f=Q(()=>!!(l(this.#t)&&l(this.#t)===l(this.#n)));get hasSingleDateInRange(){return l(this.#f)}set hasSingleDateInRange(e){p(this.#f,e)}#i=Q(()=>{if(!l(this.#t)||!l(this.#n)||this.isEventPassed)return!1;const e=new Date;return e.setHours(0,0,0,0),new Date(l(this.#t))<e});get hasPastDatesInRange(){return l(this.#i)}set hasPastDatesInRange(e){p(this.#i,e)}setAvailableDates(e){p(this.#e,e,!0),this.initializeSmartRange()}setRange(e,n){if(!e&&!n){p(this.#t,null),p(this.#n,null);return}if(!e||!n){const i=e||n;p(this.#t,i,!0),p(this.#n,i,!0);return}const s=new Date(e)<=new Date(n)?e:n,r=new Date(e)>=new Date(n)?e:n;p(this.#t,s,!0),p(this.#n,r,!0)}selectAll(){l(this.#e).length!==0&&(p(this.#t,l(this.#e)[0],!0),p(this.#n,l(this.#e)[l(this.#e).length-1],!0))}selectUpcoming(){if(l(this.#e).length===0)return;const e=[...l(this.#e)].sort(),n=new Date;n.setHours(0,0,0,0);const s=e.find(r=>new Date(r)>=n)||null;if(s)p(this.#t,s,!0),p(this.#n,e[e.length-1],!0);else{const r=e[e.length-1];p(this.#t,r,!0),p(this.#n,r,!0)}}selectFutureDatesOnly(){const e=new Date;e.setDate(e.getDate()+1),e.setHours(0,0,0,0);const n=l(this.#e).filter(s=>new Date(s)>=e);n.length>0&&(p(this.#t,n[0],!0),p(this.#n,n[n.length-1],!0))}initializeSmartRange(){if(l(this.#e).length===0)return;const e=[...l(this.#e)].sort(),n=this.isEventPassed,s=new Date(e[0])<new Date,r=new Date;let i;n?i=e[0]:s?i=r.toISOString().slice(0,19)+"Z":i=e[0],p(this.#t,i,!0),p(this.#n,e[e.length-1],!0),console.log(`[DateRangeStore] Initialized: ${l(this.#t)} - ${l(this.#n)}`)}}const Zr=1e3;class wl{#e=new _t;#t=new _t;#n=A(null);#r=A(null);#o=A(!1);#c=A(!1);#s=A(null);#l=A(!1);#d=A(!1);#u=A(null);#f=A(null);get currentMainId(){return l(this.#n)}dateStore=new yl;get dateRange(){return this.dateStore.current}get availableDates(){return this.dateStore.dates}get isEventPassed(){return this.dateStore.isEventPassed}get hasSingleDateEvent(){return this.dateStore.hasSingleDateEvent}get hasSingleDateInRange(){return this.dateStore.hasSingleDateInRange}get hasPastDatesInRange(){return this.dateStore.hasPastDatesInRange}#i=null;#h=null;#p=A(!1);#v=null;#w=A(!1);#b=A();#g=A(he([]));get hasPendingConflicts(){return l(this.#g).length>0}get pendingConflicts(){return l(this.#g)}#a=A(he({searchQuery:"",selectedStores:[],selectedWho:[],selectedProductTypes:[],selectedTemperatures:[],groupBy:"productType",sortColumn:"",sortDirection:"asc"}));get filters(){return l(this.#a)}get hasFilters(){return this.filters.searchQuery!==""||this.filters.selectedStores.length>0||this.filters.selectedWho.length>0||this.filters.selectedProductTypes.length>0||this.filters.selectedTemperatures.length>0}get loading(){return l(this.#c)}get error(){return l(this.#s)}get lastSync(){return l(this.#u)}get syncing(){return l(this.#l)}setDateRange(e,n){this.dateStore.setRange(e,n)}isFullRange(){return this.dateStore.isFullRange}initializeDateRange(){this.dateStore.initializeSmartRange()}selectUpcomingDates(){this.dateStore.selectUpcoming()}isUpcomingRange(){return this.dateStore.isUpcomingRange}get firstAvailableDate(){return this.dateStore.firstAvailableDate}get lastAvailableDate(){return this.dateStore.lastAvailableDate}selectFutureDatesOnly(){this.dateStore.selectFutureDatesOnly()}get realtimeConnected(){return l(this.#d)}#m=Q(()=>{const e=Array.from(this.#e.values()).map(n=>n.data);return console.log(`[ProductsStore] enrichedProducts recalculated: ${e.length} products`),e});get enrichedProducts(){return l(this.#m)}set enrichedProducts(e){p(this.#m,e)}#y=Q(()=>{if(console.log("[Store] Filtering products by date range (Map)"),!this.dateRange.start||!this.dateRange.end)return new Map;const e=new Date(this.dateRange.start),n=new Date(this.dateRange.end),s=new Map;for(const[r,i]of this.#e){const a=i.data,o=!a.productHugoUuid;if(!a.byDate&&!o||!Dc(a,l(this.#a)))continue;let d=!1;a.byDate&&(d=Object.keys(a.byDate).some(u=>{const f=new Date(u);return f>=e&&f<=n})),(d||o)&&s.set(r,i)}return s});get filteredProductsMap(){return l(this.#y)}set filteredProductsMap(e){p(this.#y,e)}#E=Q(()=>({total:this.#e.size,frais:Array.from(this.#e.values()).filter(e=>e.pFrais).length,surgel:Array.from(this.#e.values()).filter(e=>e.pSurgel).length,merged:Array.from(this.#e.values()).filter(e=>e.data.isMerged).length}));get stats(){return l(this.#E)}set stats(e){p(this.#E,e)}#A=Q(()=>{const e=Array.from(this.#e.values()).map(n=>n.storeInfo?.storeName).filter(Boolean);return[...new Set(e)]});get uniqueStores(){return l(this.#A)}set uniqueStores(e){p(this.#A,e)}#R=Q(()=>{const e=Array.from(this.#e.values()).flatMap(n=>n.who||[]);return[...new Set(e)]});get uniqueWho(){return l(this.#R)}set uniqueWho(e){p(this.#R,e)}#P=Q(()=>{const e=Array.from(this.#e.values()).map(n=>n.productType).filter(Boolean);return[...new Set(e)]});get uniqueProductTypes(){return l(this.#P)}set uniqueProductTypes(e){p(this.#P,e)}#T=Q(()=>{const n=Array.from(this.filteredProductsMap.values()).sort((a,o)=>a.$id.localeCompare(o.$id));if(l(this.#a).groupBy==="none")return{"":n};const s=Object.groupBy(n,a=>l(this.#a).groupBy==="store"?a.storeInfo?.storeName||"Non défini":a.productType||"Non défini"),r=Object.keys(s).sort((a,o)=>a===""?1:o===""?-1:a.localeCompare(o)),i={};return r.forEach(a=>{i[a]=s[a]}),i});get groupedFilteredProducts(){return l(this.#T)}set groupedFilteredProducts(e){p(this.#T,e)}async initialize(e,n){if(!e?.trim())throw new Error("mainId invalide fourni");if(l(this.#o)&&l(this.#n)===e){console.log(`[ProductsStore] Déjà initialisé pour mainId: ${e}`);return}console.log(`[ProductsStore] Initialisation avec mainId: ${e}`),p(this.#n,e,!0),p(this.#r,n,!0);try{this.#i=await tl(e)}catch(s){throw console.error("[ProductsStore] Erreur ouverture IndexedDB:",s),new Error("Impossible d'initialiser le cache IndexedDB")}p(this.#s,null);try{if(await this.#x(),this.#e.size===0){console.log("[ProductsStore] Cache vide, chargement depuis Hugo...");let r;r=await Jr(n),console.log(`[ProductsStore] Hugo chargé: ${r.ingredients.length} ingrédients`),p(this.#f,r.hugoContentHash,!0),Fc(r.ingredients,e).forEach(o=>{this.#e.set(o.$id,new En(o,this.dateStore))}),this.dateStore.setAvailableDates([...r.allDates]),await ua(e)||await fa(r.mainGroup_id,r.hugoContentHash,r.allDates,r.name),await this.#M()}this.initializeDateRange(),await this.#q(),await this.#G(),p(this.#o,!0);const s=this.#V();this.#h=da(e,s),this.#L(),console.log("[ProductsStore] Vérification initiale des changements Hugo..."),await this.#D(),console.log(`[ProductsStore] Initialisation complétée: ${this.#e.size} produits`)}catch(s){const r=s instanceof Error?s.message:"Erreur lors de l'initialisation";throw p(this.#s,r,!0),console.error("[ProductsStore]",r,s),s}}async#x(){if(this.#i)try{const e=await this.#i.loadProducts();e.forEach((s,r)=>{s.status==="isSyncing"&&(s.status="active"),this.#e.set(r,new En(s,this.dateStore))});const n=await this.#i.loadMetadata();p(this.#u,n.lastSync,!0),this.dateStore.setAvailableDates([...n.allDates]),p(this.#f,n.hugoContentHash||null,!0),console.log(`[ProductsStore] ${e.size} produits chargés du cache IDB, lastSync: ${n.lastSync}`)}catch(e){console.warn("[ProductsStore] Erreur lecture cache IDB, ignoré:",e)}}async#q(){if(l(this.#n)){p(this.#l,!0),console.log(`[ProductsStore] Début syncFromAppwrite pour mainId: ${l(this.#n)}`);try{console.log(`[ProductsStore] Récupération des produits modifiés depuis lastSync: ${l(this.#u)}`);const e=await aa(l(this.#n),{lastSync:l(this.#u),limit:Zr});if(console.log(`[ProductsStore] ${e.length} produits récupérés depuis Appwrite`),e.forEach(n=>{const s=this.#e.get(n.$id);console.log(`[ProductsStore] Sync produit ${n.$id}: existing=${!!s}, who=${n.who}, store=${n.store}`);const r=this.#$(n,s?.data);r.isSynced=!0,s?s.update(r):this.#e.set(n.$id,new En(r,this.dateStore))}),l(this.#u)){console.log(`[ProductsStore] Récupération des purchases modifiés depuis lastSync: ${l(this.#u)}`);const{loadUpdatedPurchases:n}=await xr(async()=>{const{loadUpdatedPurchases:r}=await Promise.resolve().then(()=>Yr);return{loadUpdatedPurchases:r}},void 0),s=await n(l(this.#n),l(this.#u),Zr);console.log(`[ProductsStore] ${s.length} purchases modifiés récupérés`),s.forEach(r=>{if(r.status==="expense")this.#t.set(r.$id,r);else if(r.products?.length){const i=r.products.map(a=>typeof a=="string"?a:a.$id);this.#S(i,r)}})}this.#C(),await this.#j(),console.log("[ProductsStore] SyncFromAppwrite terminé avec succès")}catch(e){throw console.error("[ProductsStore] Erreur lors du sync:",e),e}finally{p(this.#l,!1)}}}async#j(){if(this.#i)try{const e=new Map;this.#e.forEach((n,s)=>{const r=Ft(n.data);r.status==="isSyncing"&&(r.status="active"),e.set(s,r)}),await this.#i.saveProducts(e),await this.#i.saveMetadata({lastSync:l(this.#u),allDates:[...this.dateStore.dates],hugoContentHash:l(this.#f)}),console.log("[ProductsStore] Cache IDB persisté")}catch(e){console.error("[ProductsStore] Erreur persist cache IDB:",e)}}async#K(){if(this.#i)try{const e=new Map;this.#e.forEach((n,s)=>{const r=Ft(n.data);r.status==="isSyncing"&&(r.status="active"),e.set(s,r)}),await this.#i.saveProducts(e),await this.#i.updateLastSync(l(this.#u)),console.log("[ProductsStore] Cache IDB persisté")}catch(e){console.error("[ProductsStore] Erreur persist cache IDB:",e)}}async#M(){if(this.#i)try{const e=new Map;this.#e.forEach((n,s)=>{const r=Ft(n.data);r.status==="isSyncing"&&(r.status="active"),e.set(s,r)}),await this.#i.saveProducts(e),await this.#i.updateLastSync(l(this.#u)),await this.#i.updateAllDates([...this.availableDates]),await this.#i.updateHugoContentHash(l(this.#f)),console.log("[ProductsStore] Cache IDB persisté avec métadonnées complètes")}catch(e){console.error("[ProductsStore] Erreur persistance cache complet:",e)}}async#I(e){if(!(!this.#i||e.length===0))try{const n=e.map(s=>this.#e.get(s)?.data).filter(s=>s!=null).map(s=>{const r=Ft(s);return r.status==="isSyncing"&&(r.status="active"),this.#i.upsertProduct(r)});n.length>0&&(await Promise.all(n),console.log(`[ProductsStore] ${n.length} produits affectés persistés`))}catch(n){console.error("[ProductsStore] Erreur persistence produits affectés:",n)}}#C(){p(this.#u,new Date().toISOString(),!0)}async#D(){if(!l(this.#r)||l(this.#c))return!1;try{const e=await Oc(l(this.#f),l(this.#r));return e&&!l(this.#p)&&(console.log(`[ProductsStore] Changement Hugo détecté pour ${l(this.#r)}, analyse approfondie en cours...`),p(this.#p,!0),await this.#N()),p(this.#b,new Date,!0),e}catch(e){return console.warn("[ProductsStore] Erreur lors de la vérification du contenu Hugo:",e),!1}}async#N(){if(!l(this.#r)){console.warn("[ProductsStore] Impossible d'analyser: #hugoMetadata non défini");return}try{console.log("[ProductsStore] Chargement nouveau JSON Hugo...");const e=await Jr(l(this.#r)),n=new Map;this.#e.forEach((i,a)=>n.set(a,i.data));const s=await rl(n,e);console.log(`[ProductsStore  - hugo change] ${s.summary}`);for(const[i,a]of n){const o=this.#e.get(i);if(o)o.update(a);else{const c=new En(a,this.dateStore);this.#e.set(i,c),console.log(`[ProductsStore] ✨ Nouveau ProductModel créé : ${i}`)}}const r=[];for(const[i]of this.#e)n.has(i)||r.push(i);for(const i of r)this.#e.delete(i),console.log(`[ProductsStore] 🗑️ ProductModel supprimé : ${i}`);if(console.log(`[ProductsStore] 🔄 Synchronisation terminée : ${n.size} produits synchronisés, ${this.#e.size} ProductModel actifs`),s.overrideConflicts.length>0&&(p(this.#g,s.overrideConflicts,!0),Je.error(`${s.overrideConflicts.length} quantité(s) personnalisée(s) nécessitent votre attention`,{action:{label:"Réviser",onClick:()=>oe.modalOverride.isOpen=!0}})),s.mergedProductsUpdated.length>0&&console.log(`[ProductsStore] ⚠️ ${s.mergedProductsUpdated.length} produits fusionnés modifiés`),s.removed.length>0){const i=s.removed.filter(a=>a.purchases?.length||a.stockReel||a.who?.length);i.length>0&&console.log(`[ProductsStore] ℹ️ ${i.length} ingrédients supprimés conservés (données utilisateur)`)}this.dateStore.setAvailableDates([...e.allDates]),p(this.#f,e.hugoContentHash,!0),this.initializeDateRange(),await this.#M(),(s.added.length||s.updated.length||s.removed.length)&&Je.success(s.summary),p(this.#p,!1)}catch(e){console.error("[ProductsStore] Erreur sync Hugo:",e),Je.error("Erreur lors de la mise à jour Hugo")}}#L(){this.#v&&clearInterval(this.#v),this.#v=setInterval(async()=>{await this.#D()},6e4)}#U(){this.#v&&(clearInterval(this.#v),this.#v=null)}#$(e,n){return n?es(e,n):$c(e)}#Y(e){e.length&&(e.forEach(n=>this.#_(n)),console.log(`[ProductsStore] ${e.length} produits upserted`))}#_(e){const n=this.#e.get(e.$id),s=this.#$(e,n?.data);n?n.update(s):(this.dateStore.dates,this.#e.set(e.$id,new En(s,this.dateStore)))}#H(e){this.#e.delete(e)}async#B(e){if(!e.products?.length)return console.warn("[ProductsStore] Purchase créé sans products:",e.$id),[];const n=e.products.map(s=>typeof s=="string"?s:s.$id).filter(Boolean);return this.#Q(n,e),n}async#z(e){if(e.products?.length){const n=e.products.map(s=>typeof s=="string"?s:s.$id).filter(Boolean);return this.#S(n,e),n}console.log("[ProductsStore] Purchase update sans products[], rechargement...");try{const[n]=await la([e.$id]);if(n?.products?.length){const s=n.products.map(r=>typeof r=="string"?r:r.$id).filter(Boolean);return this.#S(s,n),s}return[]}catch(n){return console.error("[ProductsStore] Erreur rechargement purchase:",n),[]}}async#W(e){const n=Array.from(this.#e.values()).map(s=>s.data).filter(s=>s.purchases?.some(r=>r.$id===e));return n.forEach(s=>{this.#_(s)}),n.map(s=>s.$id)}#Q(e,n){const s=qr(n),r=[];e.forEach(i=>{const a=this.#e.get(i);if(a){const o=a.data,c=o.purchases||[];if(!c.some(d=>d.$id===s.$id)){const d=es({...o,purchases:[...c,s],status:"active"},o);r.push(d)}}}),r.forEach(i=>{const a=this.#e.get(i.$id);a&&a.update(i)})}#S(e,n){const s=qr(n),r=[];e.forEach(i=>{const a=this.#e.get(i);if(a){const o=a.data,c=o.purchases||[],d=c.findIndex(u=>u.$id===s.$id);if(d>=0){const u=[...c];u[d]=s;const f=es({...o,purchases:u,status:"active"},o);r.push(f)}else{const u=es({...o,purchases:[...c,n],status:"active"},o);r.push(u)}}}),r.forEach(i=>{const a=this.#e.get(i.$id);a&&a.update(i)})}#V(){return{onProductCreate:e=>{if(this.#_(e),this.#i){const n=this.#e.get(e.$id);n&&this.#i.upsertProduct(Ft(n.data)).catch(s=>console.error("[ProductsStore] Erreur persistence produit:",s))}},onProductUpdate:e=>{if(this.#_(e),this.#i){const n=this.#e.get(e.$id);n&&this.#i.upsertProduct(Ft(n.data)).catch(s=>console.error("[ProductsStore] Erreur persistence produit:",s))}},onProductDelete:e=>{this.#H(e),this.#i&&this.#i.deleteProduct(e).catch(n=>console.error("[ProductsStore] Erreur suppression produit:",n))},onPurchaseCreate:async e=>{if(e.status==="expense"){this.#t.set(e.$id,e);return}const n=await this.#B(e);await this.#I(n)},onPurchaseUpdate:async e=>{if(e.status==="expense"){this.#t.set(e.$id,e);return}this.#t.has(e.$id)&&this.#t.delete(e.$id);const n=await this.#z(e);await this.#I(n)},onPurchaseDelete:async e=>{if(this.#t.has(e)){this.#t.delete(e);return}const n=await this.#W(e);await this.#I(n)},onConnect:()=>{p(this.#d,!0)},onDisconnect:()=>{p(this.#d,!1)},onError:e=>{console.error("[ProductsStore] Erreur realtime:",e)}}}setSearchQuery=Tc(e=>{l(this.#a).searchQuery=e},()=>500);toggleProductType(e){const n=l(this.#a).selectedProductTypes.indexOf(e);n>-1?l(this.#a).selectedProductTypes.splice(n,1):l(this.#a).selectedProductTypes.push(e)}toggleTemperature(e){const n=l(this.#a).selectedTemperatures.indexOf(e);n>-1?l(this.#a).selectedTemperatures.splice(n,1):l(this.#a).selectedTemperatures.push(e)}clearTypeAndTemperatureFilters(){l(this.#a).selectedProductTypes=[],l(this.#a).selectedTemperatures=[]}setGroupBy(e){l(this.#a).groupBy=e}toggleStore(e){const n=l(this.#a).selectedStores.indexOf(e);n>-1?l(this.#a).selectedStores.splice(n,1):l(this.#a).selectedStores.push(e)}toggleWho(e){const n=l(this.#a).selectedWho.indexOf(e);n>-1?l(this.#a).selectedWho.splice(n,1):l(this.#a).selectedWho.push(e)}clearStoreFilters(){l(this.#a).selectedStores=[]}clearWhoFilters(){l(this.#a).selectedWho=[]}handleSort(e){l(this.#a).sortColumn===e?l(this.#a).sortDirection=l(this.#a).sortDirection==="asc"?"desc":"asc":(l(this.#a).sortColumn=e,l(this.#a).sortDirection="asc")}clearFilters(){p(this.#a,{searchQuery:"",selectedStores:[],selectedWho:[],selectedProductTypes:[],selectedTemperatures:[],groupBy:"productType",sortColumn:"",sortDirection:"asc"},!0)}sortProducts(e){return l(this.#a).sortColumn?[...e].sort((n,s)=>{let r=n[l(this.#a).sortColumn],i=s[l(this.#a).sortColumn];return l(this.#a).sortColumn==="totalNeededConsolidated"?(r=parseFloat(r)||0,i=parseFloat(i)||0):l(this.#a).sortColumn==="purchases"&&(r=n.purchases?.length||0,i=s.purchases?.length||0),r<i?l(this.#a).sortDirection==="asc"?-1:1:r>i?l(this.#a).sortDirection==="asc"?1:-1:0}):e}getEnrichedProductById(e){return this.#e.get(e)?.data??null}getProductModelById(e){return this.#e.get(e)??null}hasConversions(e){const n=this.#e.get(e)?.data;return n?.byDate?Mc(n.byDate):!1}async forceReload(e,n){await this.clearCache(),await this.initialize(e,n)}async clearCache(){this.#e.clear(),p(this.#u,null),this.#i&&await this.#i.clear(),console.log("[ProductsStore] Cache vidé")}setSyncStatus(e,n){const s=n?"isSyncing":"active";e.forEach(r=>{const i=this.#e.get(r);if(i){const a={...i.data,status:s};i.update(a)}}),console.log(`[ProductsStore] Statut de synchronisation mis à jour: ${e.length} produits → ${s}`)}clearSyncStatus(){const e=[];for(const[n,s]of this.#e)s.status==="isSyncing"&&e.push(n);e.length>0&&(this.setSyncStatus(e,!1),console.log(`[ProductsStore] Nettoyage de ${e.length} produits en statut "isSyncing"`))}destroy(){this.#h?.(),this.#h=null,this.#U(),this.#i&&(this.#i.close(),this.#i=null),console.log("[ProductsStore] Ressources nettoyées")}async#G(){if(l(this.#n))try{const{loadOrphanPurchases:e}=await xr(async()=>{const{loadOrphanPurchases:s}=await Promise.resolve().then(()=>Yr);return{loadOrphanPurchases:s}},void 0),n=await e(l(this.#n));n.forEach(s=>{this.#t.set(s.$id,s)}),console.log(`[ProductsStore] ${n.length} dépenses globales chargées`)}catch(e){console.error("[ProductsStore] Erreur chargement dépenses globales:",e)}}#k=Q(()=>{let e=0;const n={},s={},r=[];for(const i of this.#t.values()){const a=i.invoiceTotal||i.price||0;e+=a;const o=i.store||"Non défini";n[o]=(n[o]||0)+a;const c=i.who||"Non défini";s[c]=(s[c]||0)+a,r.push(i)}for(const i of this.#e.values()){const a=i.data;if(a.purchases&&a.purchases.length>0){for(const o of a.purchases)if(o.price){e+=o.price;const c=o.store||"Non défini";n[c]=(n[c]||0)+o.price;const d=o.who||"Non défini";s[d]=(s[d]||0)+o.price;const u={...o,_productName:a.productName};r.push(u)}}}return r.sort((i,a)=>{const o=new Date(i.orderDate||i.$createdAt).getTime();return new Date(a.orderDate||a.$createdAt).getTime()-o}),{totalGlobal:e,byStore:n,byWho:s,allPurchases:r}});get financialStats(){return l(this.#k)}set financialStats(e){p(this.#k,e)}}const bl=new wl;let Ys=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const fn="main";async function _l(t,e){try{const{tables:n,config:s}=await O();return(await n.listRows({databaseId:s.databaseId,tableId:fn})).rows.filter(i=>i.createdBy===t||i.contributors?.includes(t)||i.teams?.some(a=>e.includes(a)))}catch(n){throw console.error("[appwrite-events] Error listing events:",n),n}}async function zn(t){try{const{tables:e,config:n}=await O();return await e.getRow(n.databaseId,fn,t)}catch(e){if(e.code===404)return null;throw console.error(`[appwrite-events] Error getting event ${t}:`,e),e}}async function Il(t,e){try{const{tables:n,config:s}=await O(),r=zt.unique(),i=[Re.read(ze.user(e)),Re.update(ze.user(e)),Re.delete(ze.user(e))];t.contributors&&t.contributors.forEach(o=>{i.push(Re.read(ze.user(o))),i.push(Re.update(ze.user(o)))}),t.teams&&t.teams.forEach(o=>{i.push(Re.read(ze.team(o))),i.push(Re.update(ze.team(o)))});const a=await n.createRow(s.databaseId,fn,r,{name:t.name,dateStart:t.dateStart,dateEnd:t.dateEnd,allDates:t.allDates,meals:t.meals?JSON.stringify(t.meals):void 0,createdBy:e,teams:t.teams??[],contributors:t.contributors??[]},i);return console.log(`[appwrite-events] Event created: ${r}`),a}catch(n){throw console.error("[appwrite-events] Error creating event:",n),n}}async function bs(t,e){try{const{tables:n,config:s}=await O(),r={...e};e.meals&&(r.meals=JSON.stringify(e.meals)),e.allDates&&(r.allDates=e.allDates);const i=await n.updateRow(s.databaseId,fn,t,r);return console.log(`[appwrite-events] Event updated: ${t}`),i}catch(n){throw console.error(`[appwrite-events] Error updating event ${t}:`,n),n}}async function Sl(t){try{const{tables:e,config:n}=await O();await e.deleteRow(n.databaseId,fn,t),console.log(`[appwrite-events] Event deleted: ${t}`)}catch(e){throw console.error(`[appwrite-events] Error deleting event ${t}:`,e),e}}function Wn(t){if(!t.meals)return[];try{return JSON.parse(t.meals).map(n=>n.id?n:{...n,id:Ys(6)})}catch(e){return console.error("[appwrite-events] Error parsing meals:",e),[]}}async function El(t,e){const n=await zn(t);if(!n)throw new Error(`Event ${t} not found`);const s=Wn(n);return s.push(e),await bs(t,{meals:s})}async function Al(t,e,n){const s=await zn(t);if(!s)throw new Error(`Event ${t} not found`);const r=Wn(s);if(e<0||e>=r.length)throw new Error(`Meal index ${e} out of bounds`);return r[e]=n,await bs(t,{meals:r})}async function Rl(t,e){const n=await zn(t);if(!n)throw new Error(`Event ${t} not found`);const s=Wn(n);if(e<0||e>=s.length)throw new Error(`Meal index ${e} out of bounds`);return s.splice(e,1),await bs(t,{meals:s})}async function Pl(t,e,n){const{config:s}=await O(),r=`databases.${s.databaseId}.collections.${fn}.documents`;return ia([r],async i=>{const a=i.payload;if(!(a.createdBy===t||a.contributors?.includes(t)||a.teams?.some(d=>e.includes(d))))return;let c="update";i.events.some(d=>d.includes(".create"))?c="create":i.events.some(d=>d.includes(".delete"))&&(c="delete"),n(a,c)})}class Tl{#e=new _t;#t=A(!1);#n=A(null);#r=A(!1);#o=null;#c=[];#s=null;get loading(){return l(this.#t)}get error(){return l(this.#n)}get isInitialized(){return l(this.#r)}get events(){return Array.from(this.#e.values())}get count(){return this.#e.size}async initialize(){if(l(this.#r)){console.log("[EventsStore] Déjà initialisé");return}console.log("[EventsStore] Initialisation..."),p(this.#t,!0),p(this.#n,null);try{if(!oe.isAuthenticated)throw new Error("Utilisateur non connecté");this.#o=oe.userId,this.#c=oe.userTeams,await this.#l(),this.#d(),p(this.#r,!0),console.log(`[EventsStore] Initialisation complétée: ${this.#e.size} événements`)}catch(e){const n=e instanceof Error?e.message:"Erreur lors de l'initialisation";throw p(this.#n,n,!0),console.error("[EventsStore]",n,e),e}finally{p(this.#t,!1)}}async#l(){try{console.log("[EventsStore] Chargement des événements...");const e=await _l(this.#o,this.#c);e.forEach(n=>{this.#e.set(n.$id,n)}),console.log(`[EventsStore] ${e.length} événements chargés`)}catch(e){throw console.error("[EventsStore] Erreur lors du chargement:",e),e}}#d(){try{this.#s=async()=>{await Pl(this.#o,this.#c,(e,n)=>{console.log(`[EventsStore] Realtime: ${n} pour ${e.$id}`),n==="create"||n==="update"?this.#e.set(e.$id,e):n==="delete"&&this.#e.delete(e.$id)}),console.log("[EventsStore] Realtime activé")}}catch(e){console.error("[EventsStore] Erreur lors de la configuration du realtime:",e)}}getEventById(e){return this.#e.get(e)||null}async fetchEvent(e){try{const n=await zn(e);return n&&this.#e.set(e,n),n}catch(n){return console.error(`[EventsStore] Erreur lors du fetch de ${e}:`,n),null}}getEventsByDateRange(e,n){return this.events.filter(s=>s.dateStart&&s.dateEnd&&s.dateStart>=e&&s.dateEnd<=n)}canEditEvent(e){if(!this.#o)return!1;const n=this.#e.get(e);return n?n.createdBy===this.#o||!!n.teams?.some(s=>this.#c.includes(s)):!1}async createEvent(e){if(!this.#o)throw new Error("Utilisateur non connecté");try{const n=await Il(e,this.#o);return this.#e.set(n.$id,n),console.log(`[EventsStore] Événement créé: ${n.$id}`),n}catch(n){throw console.error("[EventsStore] Erreur lors de la création:",n),n}}async updateEvent(e,n){try{const s=await bs(e,n);return this.#e.set(e,s),console.log(`[EventsStore] Événement mis à jour: ${e}`),s}catch(s){throw console.error(`[EventsStore] Erreur lors de la mise à jour de ${e}:`,s),s}}async deleteEvent(e){try{await Sl(e),this.#e.delete(e),console.log(`[EventsStore] Événement supprimé: ${e}`)}catch(n){throw console.error(`[EventsStore] Erreur lors de la suppression de ${e}:`,n),n}}getMeals(e){const n=this.#e.get(e);return n?Wn(n):[]}async addMeal(e,n){try{const s=await El(e,n);return this.#e.set(e,s),console.log(`[EventsStore] Meal ajouté à ${e}`),s}catch(s){throw console.error("[EventsStore] Erreur lors de l'ajout du meal:",s),s}}async updateMeal(e,n,s){try{const r=await Al(e,n,s);return this.#e.set(e,r),console.log(`[EventsStore] Meal ${n} mis à jour dans ${e}`),r}catch(r){throw console.error("[EventsStore] Erreur lors de la mise à jour du meal:",r),r}}async deleteMeal(e,n){try{const s=await Rl(e,n);return this.#e.set(e,s),console.log(`[EventsStore] Meal ${n} supprimé de ${e}`),s}catch(s){throw console.error("[EventsStore] Erreur lors de la suppression du meal:",s),s}}calculateScaleFactor(e,n){return e/n}async reload(){console.log("[EventsStore] Rechargement..."),p(this.#t,!0),p(this.#n,null);try{this.#e.clear(),await this.#l(),console.log("[EventsStore] Rechargement complété")}catch(e){const n=e instanceof Error?e.message:"Erreur lors du rechargement";throw p(this.#n,n,!0),console.error("[EventsStore]",n,e),e}finally{p(this.#t,!1)}}destroy(){this.#s&&(this.#s(),this.#s=null),this.#e.clear(),p(this.#r,!1),console.log("[EventsStore] Ressources nettoyées")}}const ht=new Tl;class Ml{#e=new _t;#t=A(!1);#n=A(null);#r=A(!1);get loading(){return l(this.#t)}get error(){return l(this.#n)}get isInitialized(){return l(this.#r)}get teams(){return Array.from(this.#e.values())}get teamIds(){return Array.from(this.#e.keys())}get count(){return this.#e.size}async initialize(){if(l(this.#r)){console.log("[TeamsStore] Déjà initialisé");return}console.log("[TeamsStore] Initialisation..."),p(this.#t,!0),p(this.#n,null);try{if(!oe.userId){console.log("[TeamsStore] Utilisateur non connecté"),p(this.#r,!0);return}await this.#o(),p(this.#r,!0),console.log(`[TeamsStore] Initialisation complétée: ${this.#e.size} équipes`)}catch(e){const n=e instanceof Error?e.message:"Erreur lors de l'initialisation";throw p(this.#n,n,!0),console.error("[TeamsStore]",n,e),e}finally{p(this.#t,!1)}}async#o(){try{console.log("[TeamsStore] Chargement des équipes...");const e=await ga();for(const n of e.teams)try{const s=await tn(n.$id);this.#e.set(n.$id,{...n,members:s})}catch(s){console.error(`[TeamsStore] Erreur lors du chargement des membres de ${n.$id}:`,s),this.#e.set(n.$id,n)}console.log(`[TeamsStore] ${this.#e.size} équipes chargées`)}catch(e){throw console.error("[TeamsStore] Erreur lors du chargement:",e),e}}getTeamById(e){return this.#e.get(e)||null}async fetchTeam(e){try{const n=await ll(e);if(n){const s=await tn(e),r={...n,members:s};return this.#e.set(e,r),r}return null}catch(n){return console.error(`[TeamsStore] Erreur lors du fetch de ${e}:`,n),null}}async isMemberOf(e){return await gl(e)}getTeamMembers(e){return this.#e.get(e)?.members}async createTeam(e,n){if(!oe.userId)throw new Error("Utilisateur non connecté");try{const s=await dl(e,n),r=await tn(s.$id),i={...s,members:r};return this.#e.set(s.$id,i),console.log(`[TeamsStore] Équipe créée: ${s.$id}`),i}catch(s){throw console.error("[TeamsStore] Erreur lors de la création:",s),s}}async updateTeam(e,n){try{const s=await ul(e,n),r=this.#e.get(e),i={...s,members:r?.members};return this.#e.set(e,i),console.log(`[TeamsStore] Équipe mise à jour: ${e}`),i}catch(s){throw console.error(`[TeamsStore] Erreur lors de la mise à jour de ${e}:`,s),s}}async deleteTeam(e){try{await fl(e),this.#e.delete(e),console.log(`[TeamsStore] Équipe supprimée: ${e}`)}catch(n){throw console.error(`[TeamsStore] Erreur lors de la suppression de ${e}:`,n),n}}async inviteMember(e,n,s,r){try{await hl(e,n,s,r);const i=await tn(e),a=this.#e.get(e);a&&this.#e.set(e,{...a,members:i}),console.log(`[TeamsStore] Membre invité dans ${e}`)}catch(i){throw console.error("[TeamsStore] Erreur lors de l'invitation:",i),i}}async updateMemberRoles(e,n,s){try{await pl(e,n,s);const r=await tn(e),i=this.#e.get(e);i&&this.#e.set(e,{...i,members:r}),console.log(`[TeamsStore] Rôles mis à jour pour ${n}`)}catch(r){throw console.error("[TeamsStore] Erreur lors de la mise à jour des rôles:",r),r}}async removeMember(e,n){try{await vl(e,n);const s=await tn(e),r=this.#e.get(e);r&&this.#e.set(e,{...r,members:s}),console.log(`[TeamsStore] Membre ${n} supprimé de ${e}`)}catch(s){throw console.error("[TeamsStore] Erreur lors de la suppression du membre:",s),s}}async reload(){console.log("[TeamsStore] Rechargement..."),p(this.#t,!0),p(this.#n,null);try{this.#e.clear(),await this.#o(),console.log("[TeamsStore] Rechargement complété")}catch(e){const n=e instanceof Error?e.message:"Erreur lors du rechargement";throw p(this.#n,n,!0),console.error("[TeamsStore]",n,e),e}finally{p(this.#t,!1)}}destroy(){this.#e.clear(),p(this.#r,!1),console.log("[TeamsStore] Ressources nettoyées")}}const Js=new Ml;class Dl{dbName="recipes-cache";db=null;version=1;RECIPES_INDEX_STORE="recipes-index";RECIPES_DETAILS_STORE="recipes-details";METADATA_STORE="metadata";LAST_SYNC_KEY="lastSync";INDEX_HASH_KEY="indexHash";RECIPES_COUNT_KEY="recipesCount";async open(){if(!this.db)return new Promise((e,n)=>{const s=indexedDB.open(this.dbName,this.version);s.onerror=()=>n(s.error),s.onsuccess=()=>{this.db=s.result,console.log(`[RecipesIDBCache] Base ouverte: ${this.dbName}`),e()},s.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains(this.RECIPES_INDEX_STORE)||(i.createObjectStore(this.RECIPES_INDEX_STORE,{keyPath:"u"}),console.log("[RecipesIDBCache] Object store 'recipes-index' créé")),i.objectStoreNames.contains(this.RECIPES_DETAILS_STORE)||(i.createObjectStore(this.RECIPES_DETAILS_STORE,{keyPath:"uuid"}),console.log("[RecipesIDBCache] Object store 'recipes-details' créé")),i.objectStoreNames.contains(this.METADATA_STORE)||(i.createObjectStore(this.METADATA_STORE,{keyPath:"key"}),console.log("[RecipesIDBCache] Object store 'metadata' créé"))}})}async loadRecipesIndex(){if(!this.db)throw new Error("DB non ouverte");return new Promise((e,n)=>{const i=this.db.transaction(this.RECIPES_INDEX_STORE,"readonly").objectStore(this.RECIPES_INDEX_STORE).getAll();i.onsuccess=()=>{const a=new Map;i.result.forEach(o=>{a.set(o.u,o)}),console.log(`[RecipesIDBCache] ${a.size} recettes (index) chargées`),e(a)},i.onerror=()=>n(i.error)})}async saveRecipesIndex(e){if(!this.db)throw new Error("DB non ouverte");return new Promise((n,s)=>{const r=this.db.transaction(this.RECIPES_INDEX_STORE,"readwrite"),i=r.objectStore(this.RECIPES_INDEX_STORE);i.clear(),e.forEach(a=>{i.put(a)}),r.oncomplete=()=>{console.log(`[RecipesIDBCache] ${e.size} recettes (index) sauvegardées`),n()},r.onerror=()=>s(r.error)})}async loadRecipeDetail(e){if(!this.db)throw new Error("DB non ouverte");return new Promise((n,s)=>{const a=this.db.transaction(this.RECIPES_DETAILS_STORE,"readonly").objectStore(this.RECIPES_DETAILS_STORE).get(e);a.onsuccess=()=>{const o=a.result;o&&console.log(`[RecipesIDBCache] Détails de ${e} chargés depuis le cache`),n(o||null)},a.onerror=()=>s(a.error)})}async saveRecipeDetail(e){if(!this.db)throw new Error("DB non ouverte");return new Promise((n,s)=>{const a=this.db.transaction(this.RECIPES_DETAILS_STORE,"readwrite").objectStore(this.RECIPES_DETAILS_STORE).put(e);a.onsuccess=()=>{console.log(`[RecipesIDBCache] Détails de ${e.uuid} sauvegardés`),n()},a.onerror=()=>s(a.error)})}async loadAllRecipeDetails(){if(!this.db)throw new Error("DB non ouverte");return new Promise((e,n)=>{const i=this.db.transaction(this.RECIPES_DETAILS_STORE,"readonly").objectStore(this.RECIPES_DETAILS_STORE).getAll();i.onsuccess=()=>{const a=new Map;i.result.forEach(o=>{a.set(o.uuid,o)}),console.log(`[RecipesIDBCache] ${a.size} détails de recettes chargés`),e(a)},i.onerror=()=>n(i.error)})}async deleteRecipeDetail(e){if(!this.db)throw new Error("DB non ouverte");return new Promise((n,s)=>{const a=this.db.transaction(this.RECIPES_DETAILS_STORE,"readwrite").objectStore(this.RECIPES_DETAILS_STORE).delete(e);a.onsuccess=()=>n(),a.onerror=()=>s(a.error)})}async loadMetadata(){if(!this.db)throw new Error("DB non ouverte");return new Promise((e,n)=>{const i=this.db.transaction(this.METADATA_STORE,"readonly").objectStore(this.METADATA_STORE).getAll();i.onsuccess=()=>{const a=i.result,o={lastSync:null,indexHash:null,recipesCount:0};a.forEach(c=>{c.key===this.LAST_SYNC_KEY?o.lastSync=c.value:c.key===this.INDEX_HASH_KEY?o.indexHash=c.value:c.key===this.RECIPES_COUNT_KEY&&(o.recipesCount=c.value)}),console.log(`[RecipesIDBCache] Metadata chargées: count=${o.recipesCount}, hash=${o.indexHash}`),e(o)},i.onerror=()=>n(i.error)})}async saveMetadata(e){if(!this.db)throw new Error("DB non ouverte");return new Promise((n,s)=>{const r=this.db.transaction(this.METADATA_STORE,"readwrite"),i=r.objectStore(this.METADATA_STORE);i.put({key:this.LAST_SYNC_KEY,value:e.lastSync}),i.put({key:this.INDEX_HASH_KEY,value:e.indexHash}),i.put({key:this.RECIPES_COUNT_KEY,value:e.recipesCount}),r.oncomplete=()=>{console.log("[RecipesIDBCache] Metadata sauvegardées"),n()},r.onerror=()=>s(r.error)})}async updateIndexHash(e){if(!this.db)throw new Error("DB non ouverte");return new Promise((n,s)=>{const a=this.db.transaction(this.METADATA_STORE,"readwrite").objectStore(this.METADATA_STORE).put({key:this.INDEX_HASH_KEY,value:e});a.onsuccess=()=>{console.log(`[RecipesIDBCache] indexHash mis à jour: ${e}`),n()},a.onerror=()=>s(a.error)})}async clear(){if(!this.db)throw new Error("DB non ouverte");return new Promise((e,n)=>{const s=this.db.transaction([this.RECIPES_INDEX_STORE,this.RECIPES_DETAILS_STORE,this.METADATA_STORE],"readwrite");s.objectStore(this.RECIPES_INDEX_STORE).clear(),s.objectStore(this.RECIPES_DETAILS_STORE).clear(),s.objectStore(this.METADATA_STORE).clear(),s.oncomplete=()=>{console.log("[RecipesIDBCache] Cache vidé"),e()},s.onerror=()=>n(s.error)})}close(){this.db&&(this.db.close(),this.db=null,console.log("[RecipesIDBCache] Connexion fermée"))}}async function $l(){const t=new Dl;return await t.open(),t}function kl(t){if(!Array.isArray(t)||t.length<8)throw new Error(`Format d'ingrédient invalide: ${JSON.stringify(t)}`);return{uuid:t[0],originalQuantity:t[1],originalUnit:t[2],normalizedQuantity:t[3],normalizedUnit:t[4],comment:t[5]||"",allergens:Array.isArray(t[6])?t[6]:[],type:t[7]||""}}function xl(t){if(!t||typeof t!="object")throw new Error("Données de recette invalides");const e=[];return Array.isArray(t.ingredients)&&t.ingredients.forEach(n=>{try{e.push(kl(n))}catch(s){console.warn("[parseRecipeData] Ingrédient invalide ignoré:",s)}}),{uuid:t.uuid||"",title:t.title||"",plate:t.plate||1,ingredients:e,preparation:t.preparation||""}}const hn="recettes";async function Or(){try{const{tables:t,config:e}=await O(),n=[_.equal("isPublished",!1)];return(await t.listRows(e.databaseId,hn,n)).rows}catch(t){throw console.error("[appwrite-recipes] Error listing all recipes:",t),t}}async function Fr(t){try{const{tables:e,config:n}=await O();return await e.getRow(n.databaseId,hn,t)}catch(e){if(e.code===404)return null;throw console.error(`[appwrite-recipes] Error getting recipe ${t}:`,e),e}}async function ql(t,e){try{const{tables:n,config:s}=await O(),r=zt.unique(),i=[Re.read(ze.user(e)),Re.update(ze.user(e)),Re.delete(ze.user(e))];t.contributors&&t.contributors.forEach(o=>{i.push(Re.read(ze.user(o))),i.push(Re.update(ze.user(o)))}),t.teams&&t.teams.forEach(o=>{i.push(Re.read(ze.team(o))),i.push(Re.update(ze.team(o)))});const a=await n.createRow(s.databaseId,hn,r,{title:t.title,plate:t.plate,ingredients:t.ingredients,preparation:t.preparation,draft:t.draft??!0,typeR:t.typeR,categories:t.categories??[],regime:t.regime??[],isPublished:!1,createdBy:e,teams:t.teams??[],contributors:t.contributors??[]},i);return console.log(`[appwrite-recipes] Recipe created: ${r}`),a}catch(n){throw console.error("[appwrite-recipes] Error creating recipe:",n),n}}async function ma(t,e){try{const{tables:n,config:s}=await O(),r=await n.updateRow(s.databaseId,hn,t,e);return console.log(`[appwrite-recipes] Recipe updated: ${t}`),r}catch(n){throw console.error(`[appwrite-recipes] Error updating recipe ${t}:`,n),n}}async function jl(t){try{const{tables:e,config:n}=await O();await e.deleteRow(n.databaseId,hn,t),console.log(`[appwrite-recipes] Recipe deleted: ${t}`)}catch(e){throw console.error(`[appwrite-recipes] Error deleting recipe ${t}:`,e),e}}async function Cl(t,e){return await ma(t,{isPublished:!0,publishedAt:new Date().toISOString()})}function Nl(t,e,n){const r=`databases.${Hc().APPWRITE_CONFIG.databaseId}.collections.${hn}.documents`;return ia([r],i=>{const a=i.payload;if(!(a.createdBy===t||a.contributors?.includes(t)||a.teams?.some(d=>e.includes(d))))return;let c="update";i.events.some(d=>d.includes(".create"))?c="create":i.events.some(d=>d.includes(".delete"))&&(c="delete"),n(a,c)})}const Ll="/api/data.json";class Ul{#e=new _t;#t=new _t;#n=A(!1);#r=A(null);#o=A(null);#c=A(!1);#s=null;#l=new Set;#d=null;get loading(){return l(this.#n)}get error(){return l(this.#r)}get lastSync(){return l(this.#o)}get isInitialized(){return l(this.#c)}get recipesIndex(){return Array.from(this.#e.values())}get count(){return this.#e.size}get detailsLoadedCount(){return this.#t.size}async initialize(){if(l(this.#c)){console.log("[RecipesStore] Déjà initialisé");return}console.log("[RecipesStore] Initialisation..."),p(this.#n,!0),p(this.#r,null);try{this.#s=await $l();const e=await this.#s.loadRecipesIndex(),n=await this.#s.loadMetadata();e.size>0&&(console.log(`[RecipesStore] ${e.size} recettes (index) chargées depuis le cache`),this.#e=new _t(e),p(this.#o,n.lastSync,!0)),await this.#u(),oe.userId&&await this.#i(),oe.userId&&await this.#h(),oe.userId&&this.#p(),p(this.#c,!0),console.log(`[RecipesStore] Initialisation complétée: ${this.#e.size} recettes (${this.#b()} published, ${this.#g()} non-published)`)}catch(e){const n=e instanceof Error?e.message:"Erreur lors de l'initialisation";throw p(this.#r,n,!0),console.error("[RecipesStore]",n,e),e}finally{p(this.#n,!1)}}async#u(){try{console.log("[RecipesStore] Chargement de l'index depuis data.json...");const e=await fetch(Ll);if(!e.ok)throw new Error(`Erreur HTTP: ${e.status}`);const s=(await e.json()).recipes;if(!Array.isArray(s))throw new Error("Format de données invalide: recipes n'est pas un tableau");const r=await this.#f(JSON.stringify(s));if((await this.#s.loadMetadata()).indexHash===r){console.log("[RecipesStore] Index inchangé, utilisation du cache");return}const a=new Map;s.forEach(o=>{a.set(o.u,o)}),this.#e=new _t(a),p(this.#o,new Date().toISOString(),!0),this.#s&&(await this.#s.saveRecipesIndex(a),await this.#s.saveMetadata({lastSync:l(this.#o),indexHash:r,recipesCount:a.size})),console.log(`[RecipesStore] ${a.size} recettes (index) chargées depuis data.json`)}catch(e){throw console.error("[RecipesStore] Erreur lors du chargement de l'index:",e),e}}async#f(e){const s=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",s);return Array.from(new Uint8Array(r)).map(a=>a.toString(16).padStart(2,"0")).join("")}async#i(){try{console.log("[RecipesStore] Cleanup des recettes publiées...");const e=await Or();let n=0;for(const s of e)this.#e.has(s.$id)&&(await Cl(s.$id),n++);n>0&&console.log(`[RecipesStore] ${n} recettes marquées comme published`)}catch(e){console.error("[RecipesStore] Erreur lors du cleanup:",e)}}async#h(){try{console.log("[RecipesStore] Chargement des recettes Appwrite...");const e=await Or();e.forEach(n=>{this.#e.set(n.$id,{u:n.$id,n:n.title,t:n.typeR,p:null,plates:n.plate,isPublished:!1})}),console.log(`[RecipesStore] ${e.length} recettes Appwrite chargées`)}catch(e){console.error("[RecipesStore] Erreur lors du chargement Appwrite:",e)}}#p(){try{this.#d=Nl(oe.userId,oe.userTeams,(e,n)=>{console.log(`[RecipesStore] Realtime: ${n} pour ${e.$id}`),n==="create"||n==="update"?(this.#e.set(e.$id,{u:e.$id,n:e.title,t:e.typeR,p:null,plates:e.plate,isPublished:e.isPublished}),this.#t.has(e.$id)&&this.#t.delete(e.$id)):n==="delete"&&(this.#e.delete(e.$id),this.#t.delete(e.$id))}),console.log("[RecipesStore] Realtime activé")}catch(e){console.error("[RecipesStore] Erreur lors de la configuration du realtime:",e)}}#v(e){switch(e){case"entree":return 0;case"plat":return 1;case"dessert":return 2;default:return 0}}#w(e){switch(e){case 0:return"entree";case 1:return"plat";case 2:return"dessert";default:return"plat"}}#b(){return this.recipesIndex.filter(e=>e.isPublished!==!1).length}#g(){return this.recipesIndex.filter(e=>e.isPublished===!1).length}#a(e){return{uuid:e.$id,title:e.title,plate:e.plate,ingredients:JSON.parse(e.ingredients),preparation:e.preparation}}getRecipeIndexByUuid(e){return this.#e.get(e)||null}searchRecipes(e){if(!e.trim())return this.recipesIndex;const n=e.toLowerCase();return this.recipesIndex.filter(s=>s.n.toLowerCase().includes(n))}getRecipesByType(e){return this.recipesIndex.filter(n=>n.t===e)}get availableTypes(){const e=new Set;return this.recipesIndex.forEach(n=>e.add(n.t)),Array.from(e).sort()}async canEditRecipe(e){if(!oe.userId)return!1;const n=this.#e.get(e);if(!n||n.isPublished!==!1)return!1;try{const s=await Fr(e);return s?s.createdBy===oe.userId||!!s.contributors?.includes(oe.userId)||!!s.teams?.some(r=>oe.userTeams.includes(r)):!1}catch(s){return console.error(`[RecipesStore] Erreur lors de la vérification des permissions pour ${e}:`,s),!1}}async getRecipeByUuid(e){const n=this.#t.get(e);if(n)return console.log(`[RecipesStore] Détails de ${e} déjà en mémoire`),n;if(this.#l.has(e)){for(console.log(`[RecipesStore] Chargement de ${e} déjà en cours, attente...`);this.#l.has(e);)await new Promise(s=>setTimeout(s,50));return this.#t.get(e)||null}this.#l.add(e);try{if(this.#s){const i=await this.#s.loadRecipeDetail(e);if(i)return this.#t.set(e,i),i}const s=this.#e.get(e);if(!s)return console.warn(`[RecipesStore] Recette ${e} non trouvée dans l'index`),null;let r;if(s.p){console.log(`[RecipesStore] Chargement des détails de ${e} depuis ${s.p}...`);const i=await fetch(s.p);if(!i.ok)throw new Error(`Erreur HTTP: ${i.status}`);const a=await i.json();r=xl(a)}else{console.log(`[RecipesStore] Chargement des détails de ${e} depuis Appwrite...`);const i=await Fr(e);if(!i)return console.warn(`[RecipesStore] Recette ${e} non trouvée dans Appwrite`),null;r=this.#a(i)}return this.#t.set(e,r),this.#s&&await this.#s.saveRecipeDetail(r),console.log(`[RecipesStore] Détails de ${e} chargés et mis en cache`),r}catch(s){return console.error(`[RecipesStore] Erreur lors du chargement de ${e}:`,s),null}finally{this.#l.delete(e)}}async preloadRecipes(e){console.log(`[RecipesStore] Préchargement de ${e.length} recettes...`);const n=e.map(s=>this.getRecipeByUuid(s));await Promise.all(n),console.log("[RecipesStore] Préchargement terminé")}async createRecipe(e){if(!oe.userId)throw new Error("Utilisateur non connecté");try{const n={title:e.title,plate:e.plate,ingredients:JSON.stringify(e.ingredients),preparation:e.preparation,draft:!0,typeR:this.#w(0),categories:[],regime:[],teams:[],contributors:[]},s=await ql(n,oe.userId);return this.#e.set(s.$id,{u:s.$id,n:s.title,t:s.typeR,p:null,plates:s.plate,isPublished:!1}),this.#a(s)}catch(n){throw console.error("[RecipesStore] Erreur lors de la création:",n),n}}async updateRecipe(e,n){try{const s={};n.title&&(s.title=n.title),n.plate&&(s.plate=n.plate),n.ingredients&&(s.ingredients=JSON.stringify(n.ingredients)),n.preparation&&(s.preparation=n.preparation);const r=await ma(e,s);return this.#e.set(r.$id,{u:r.$id,n:r.title,t:r.typeR,p:null,plates:r.plate,isPublished:r.isPublished}),this.#t.delete(e),this.#a(r)}catch(s){throw console.error(`[RecipesStore] Erreur lors de la mise à jour de ${e}:`,s),s}}async deleteRecipe(e){try{await jl(e),this.#e.delete(e),this.#t.delete(e),console.log(`[RecipesStore] Recette ${e} supprimée`)}catch(n){throw console.error(`[RecipesStore] Erreur lors de la suppression de ${e}:`,n),n}}async forceReloadIndex(){console.log("[RecipesStore] Rechargement forcé de l'index..."),p(this.#n,!0),p(this.#r,null);try{await this.#u(),console.log("[RecipesStore] Rechargement de l'index complété")}catch(e){const n=e instanceof Error?e.message:"Erreur lors du rechargement";throw p(this.#r,n,!0),console.error("[RecipesStore]",n,e),e}finally{p(this.#n,!1)}}async clearCache(){this.#s&&(await this.#s.clear(),console.log("[RecipesStore] Cache vidé")),this.#e.clear(),this.#t.clear(),p(this.#o,null),p(this.#c,!1)}destroy(){this.#d&&(this.#d(),this.#d=null),this.#s&&(this.#s.close(),this.#s=null),this.#e.clear(),this.#t.clear(),this.#l.clear(),p(this.#c,!1),console.log("[RecipesStore] Ressources nettoyées")}}const fr=new Ul;var Hl=j('<div class="alert alert-error shadow-lg"><svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l-2-2m0 0l-2-2m2 2l2-2m-2 2l-2 2m8-8l2 2m0 0l2 2m-2-2l-2-2m2 2l2 2"></path></svg> <div><h3 class="font-bold">Erreur</h3> <div class="text-sm"> </div></div></div>');function Bl(t,e){var n=Hl(),s=w(g(n),2),r=w(g(s),2),i=g(r);le(()=>re(i,e.message)),E(t,n)}class zl{routes=[];#e=A("");get currentPath(){return l(this.#e)}set currentPath(e){p(this.#e,e,!0)}#t=A(he({}));get currentParams(){return l(this.#t)}set currentParams(e){p(this.#t,e,!0)}#n=A(he({}));get currentQuery(){return l(this.#n)}set currentQuery(e){p(this.#n,e,!0)}constructor(){this.currentPath=this.getHashPath(),this.updateQueryParams(),window.addEventListener("hashchange",()=>{this.currentPath=this.getHashPath(),this.updateQueryParams()})}addRoute(e,n,s){this.routes.push({path:e,component:n,guard:s})}navigate(e,n){const s=n?"?"+new URLSearchParams(n).toString():"",r="#"+(e.startsWith("/")?e:"/"+e)+s;window.location.hash=r}async match(){for(const e of this.routes){const n=this.matchRoute(e.path,this.currentPath);if(n)return e.guard&&!await e.guard()?null:(this.currentParams=n.params,{component:e.component,params:n.params,query:this.currentQuery})}return null}matchRoute(e,n){if(e instanceof RegExp){const o=n.match(e);return o?{params:o.groups||{}}:null}const s=[],r=e.replace(/:([^/]+)/g,(o,c)=>(s.push(c),"([^/]+)")),i=new RegExp(`^${r}$`),a=n.match(i);if(a){const o={};return s.forEach((c,d)=>{o[c]=a[d+1]}),{params:o}}return null}getHashPath(){return window.location.hash.slice(1).split("?")[0]||"/"}updateQueryParams(){const n=window.location.hash.slice(1).split("?")[1],s={};n&&new URLSearchParams(n).forEach((i,a)=>{s[a]=i}),this.currentQuery=s}get path(){return this.currentPath}get params(){return this.currentParams}get query(){return this.currentQuery}}const qt=new zl;function pn(t,e){qt.navigate(t,e)}/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 * ---
 * 
 * The MIT License (MIT) (for portions derived from Feather)
 * 
 * Copyright (c) 2013-2023 Cole Bemis
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const Wl={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Ql=Vo("<svg><!><!></svg>");function we(t,e){J(e,!0);const n=Ne(e,"color",3,"currentColor"),s=Ne(e,"size",3,24),r=Ne(e,"strokeWidth",3,2),i=Ne(e,"absoluteStrokeWidth",3,!1),a=Ne(e,"iconNode",19,()=>[]),o=ve(e,["$$slots","$$events","$$legacy","name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","children"]);var c=Ql();Tr(c,f=>({...Wl,...o,width:s(),height:s(),stroke:n(),"stroke-width":f,class:["lucide-icon lucide",e.name&&`lucide-${e.name}`,e.class]}),[()=>i()?Number(r())*24/Number(s()):r()]);var d=g(c);lt(d,17,a,xn,(f,h)=>{var v=Q(()=>Ta(l(h),2));let y=()=>l(v)[0],I=()=>l(v)[1];var b=ne(),S=z(b);Zo(S,y,!0,(M,$)=>{Tr(M,()=>({...I()}))}),E(f,b)});var u=w(d);pe(u,()=>e.children??ee),E(t,c),X()}function Vl(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];we(t,ye({name:"arrow-left"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function Gl(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M12 7v14"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"}]];we(t,ye({name:"book-open"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function Dn(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M8 2v4"}],["path",{d:"M16 2v4"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}],["path",{d:"M3 10h18"}]];we(t,ye({name:"calendar"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function as(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z"}],["path",{d:"M6 17h12"}]];we(t,ye({name:"chef-hat"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function Kl(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"m6 9 6 6 6-6"}]];we(t,ye({name:"chevron-down"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function Yl(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"m9 18 6-6-6-6"}]];we(t,ye({name:"chevron-right"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function Jl(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"}]];we(t,ye({name:"cloud"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function Xl(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]];we(t,ye({name:"copy"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function Zl(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1"}]];we(t,ye({name:"layout-dashboard"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function ya(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]];we(t,ye({name:"loader-circle"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function Ol(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"m10 17 5-5-5-5"}],["path",{d:"M15 12H3"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}]];we(t,ye({name:"log-in"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function Fl(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"m16 17 5-5-5-5"}],["path",{d:"M21 12H9"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}]];we(t,ye({name:"log-out"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function ei(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"}]];we(t,ye({name:"moon"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function ed(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M13 21h8"}],["path",{d:"m15 5 4 4"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}]];we(t,ye({name:"pencil-line"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function os(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]];we(t,ye({name:"plus"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function td(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]];we(t,ye({name:"save"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function nd(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"m21 21-4.34-4.34"}],["circle",{cx:"11",cy:"11",r:"8"}]];we(t,ye({name:"search"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function sd(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]];we(t,ye({name:"sun"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function rd(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M10 11v6"}],["path",{d:"M14 11v6"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];we(t,ye({name:"trash-2"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function id(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["circle",{cx:"9",cy:"7",r:"4"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11"}]];we(t,ye({name:"user-plus"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function jn(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}],["circle",{cx:"9",cy:"7",r:"4"}]];we(t,ye({name:"users"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function ad(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"}],["path",{d:"M7 2v20"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"}]];we(t,ye({name:"utensils"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function hr(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.545.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=ve(e,["$$slots","$$events","$$legacy"]);const s=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];we(t,ye({name:"x"},()=>n,{get iconNode(){return s},children:(r,i)=>{var a=ne(),o=z(a);pe(o,()=>e.children??ee),E(r,a)},$$slots:{default:!0}})),X()}function od(t,e,n){l(e)||n(!1)}var cd=j('<div class="auth-message auth-message-error svelte-o861tn"><span class="svelte-o861tn"> </span></div>'),ld=j('<div class="auth-message auth-message-success svelte-o861tn"><span class="svelte-o861tn"> </span></div>'),dd=j('<span class="auth-spinner svelte-o861tn"></span>'),ud=(t,e)=>p(e,!1),fd=j('<form class="auth-form svelte-o861tn"><div class="auth-field svelte-o861tn"><label class="auth-label svelte-o861tn" for="forgot-email"><span class="auth-label-text svelte-o861tn">Email</span></label> <input id="forgot-email" type="email" class="auth-input svelte-o861tn" placeholder="votre@email.com"/></div> <button type="submit" class="auth-btn auth-btn-primary auth-btn-full svelte-o861tn"><!></button></form> <div class="auth-back-link svelte-o861tn"><button class="auth-link-btn svelte-o861tn">← Retour à la connexion</button></div>',1),hd=j('<span class="auth-spinner svelte-o861tn"></span>'),pd=(t,e)=>p(e,!0),vd=(t,e)=>p(e,!1),gd=j(`<form class="auth-form svelte-o861tn"><div class="auth-field svelte-o861tn"><label class="auth-label svelte-o861tn" for="login-email"><span class="auth-label-text svelte-o861tn">Email</span></label> <input id="login-email" type="email" class="auth-input svelte-o861tn" placeholder="votre@email.com" required/></div> <div class="auth-field svelte-o861tn"><label class="auth-label svelte-o861tn" for="login-password"><span class="auth-label-text svelte-o861tn">Mot de passe</span></label> <input id="login-password" type="password" class="auth-input svelte-o861tn" placeholder="•••••••" required/></div> <button type="submit" class="auth-btn auth-btn-primary auth-btn-full svelte-o861tn"><!></button></form> <div class="auth-actions svelte-o861tn"><button class="auth-link-btn svelte-o861tn">Mot de passe oublié ?</button> <div class="auth-switch svelte-o861tn">Pas encore de compte ? <button class="auth-link-btn auth-link-inline svelte-o861tn">S'inscrire</button></div></div>`,1),md=j('<span class="auth-spinner svelte-o861tn"></span>'),yd=(t,e)=>p(e,!0),wd=j('<form class="auth-form svelte-o861tn"><div class="auth-field svelte-o861tn"><label class="auth-label svelte-o861tn" for="register-name"><span class="auth-label-text svelte-o861tn">Nom</span></label> <input id="register-name" type="text" class="auth-input svelte-o861tn" placeholder="Votre nom" required/></div> <div class="auth-field svelte-o861tn"><label class="auth-label svelte-o861tn" for="register-email"><span class="auth-label-text svelte-o861tn">Email</span></label> <input id="register-email" type="email" class="auth-input svelte-o861tn" placeholder="votre@email.com" required/></div> <div class="auth-field svelte-o861tn"><label class="auth-label svelte-o861tn" for="register-password"><span class="auth-label-text svelte-o861tn">Mot de passe</span></label> <input id="register-password" type="password" class="auth-input svelte-o861tn" placeholder="•••••••" required/></div> <button type="submit" class="auth-btn auth-btn-success auth-btn-full svelte-o861tn"><!></button></form> <div class="auth-switch svelte-o861tn">Déjà un compte ? <button class="auth-link-btn auth-link-inline svelte-o861tn">Se connecter</button></div>',1),bd=j('<div role="dialog"><div class="auth-modal-content svelte-o861tn"><div class="auth-header svelte-o861tn"><div class="auth-title svelte-o861tn"> </div> <button class="auth-close-btn svelte-o861tn">✕</button></div> <div class="auth-body svelte-o861tn"><!> <!> <!></div></div></div>');function _d(t,e){J(e,!0);let n=Ne(e,"isOpen",15),s=Ne(e,"onAuthSuccess",3,()=>{}),r=A(!0),i=A(!1),a=A(""),o=A(""),c=A(""),d=A(""),u=A(""),f=A(""),h=A(""),v=A(""),y=A(!1);async function I(C){if(C.preventDefault(),!l(c)||!l(d)){p(a,"Veuillez remplir tous les champs");return}p(i,!0),p(a,"");try{const{account:N}=await O();await N.createEmailPasswordSession({email:l(c),password:l(d)}),p(o,"Connexion réussie !"),setTimeout(()=>{s()()},1e3)}catch(N){console.error("Erreur de connexion:",N),p(a,N.message||"Erreur lors de la connexion",!0)}finally{p(i,!1)}}async function b(C){if(C.preventDefault(),!l(u)||!l(f)||!l(h)){p(a,"Veuillez remplir tous les champs");return}p(i,!0),p(a,"");try{const{account:N}=await O();await N.create({userId:"unique()",email:l(f),password:l(h),name:l(u)}),await N.createEmailPasswordSession({email:l(f),password:l(h)}),p(o,"Compte créé et connecté !"),setTimeout(()=>{s()()},1e3)}catch(N){console.error("Erreur d'inscription:",N),p(a,N.message||"Erreur lors de la création du compte",!0)}finally{p(i,!1)}}async function S(C){if(C.preventDefault(),!l(v)){p(a,"Veuillez entrer votre email");return}p(i,!0),p(a,"");try{const{account:N}=await O();await N.createRecovery({email:l(v),url:`${window.location.origin}/reset-password`}),p(o,"Email de réinitialisation envoyé !"),setTimeout(()=>{p(y,!1),p(v,"")},2e3)}catch(N){console.error("Erreur mot de passe oublié:",N),p(a,N.message||"Erreur lors de l'envoi de l'email",!0)}finally{p(i,!1)}}tt(()=>{(l(r)||l(y))&&(p(a,""),p(o,""))});var M=bd(),$=g(M),P=g($),T=g(P),R=g(T),k=w(T,2);k.__click=[od,i,n];var x=w(P,2),Z=g(x);{var ie=C=>{var N=cd(),ae=g(N),ue=g(ae);le(()=>re(ue,l(a))),E(C,N)};Y(Z,C=>{l(a)&&C(ie)})}var H=w(Z,2);{var B=C=>{var N=ld(),ae=g(N),ue=g(ae);le(()=>re(ue,l(o))),E(C,N)};Y(H,C=>{l(o)&&C(B)})}var be=w(H,2);{var Ee=C=>{var N=fd(),ae=z(N),ue=g(ae),Ie=w(g(ue),2),fe=w(ue,2),ge=g(fe);{var me=D=>{var L=dd();E(D,L)},q=D=>{var L=$s("Envoyer l'email de réinitialisation");E(D,L)};Y(ge,D=>{l(i)?D(me):D(q,!1)})}var U=w(ae,2),G=g(U);G.__click=[ud,y],le(()=>{Ie.disabled=l(i),fe.disabled=l(i),G.disabled=l(i)}),Ds("submit",ae,S),Ge(Ie,()=>l(v),D=>p(v,D)),E(C,N)},de=C=>{var N=ne(),ae=z(N);{var ue=fe=>{var ge=gd(),me=z(ge),q=g(me),U=w(g(q),2),G=w(q,2),D=w(g(G),2),L=w(G,2),K=g(L);{var te=F=>{var He=hd();E(F,He)},se=F=>{var He=$s("Se connecter");E(F,He)};Y(K,F=>{l(i)?F(te):F(se,!1)})}var _e=w(me,2),Ae=g(_e);Ae.__click=[pd,y];var Pe=w(Ae,2),$e=w(g(Pe));$e.__click=[vd,r],le(()=>{U.disabled=l(i),D.disabled=l(i),L.disabled=l(i),Ae.disabled=l(i),$e.disabled=l(i)}),Ds("submit",me,I),Ge(U,()=>l(c),F=>p(c,F)),Ge(D,()=>l(d),F=>p(d,F)),E(fe,ge)},Ie=fe=>{var ge=wd(),me=z(ge),q=g(me),U=w(g(q),2),G=w(q,2),D=w(g(G),2),L=w(G,2),K=w(g(L),2),te=w(L,2),se=g(te);{var _e=F=>{var He=md();E(F,He)},Ae=F=>{var He=$s("Créer un compte");E(F,He)};Y(se,F=>{l(i)?F(_e):F(Ae,!1)})}var Pe=w(me,2),$e=w(g(Pe));$e.__click=[yd,r],le(()=>{U.disabled=l(i),D.disabled=l(i),K.disabled=l(i),te.disabled=l(i),$e.disabled=l(i)}),Ds("submit",me,b),Ge(U,()=>l(u),F=>p(u,F)),Ge(D,()=>l(f),F=>p(f,F)),Ge(K,()=>l(h),F=>p(h,F)),E(fe,ge)};Y(ae,fe=>{l(r)?fe(ue):fe(Ie,!1)},!0)}E(C,N)};Y(be,C=>{l(y)?C(Ee):C(de,!1)})}le(()=>{at(M,1,`auth-modal ${(n()&&"auth-modal-open")??""}`,"svelte-o861tn"),re(R,l(y)?"Mot de passe oublié":l(r)?"Connexion":"Inscription")}),E(t,M),X()}Dt(["click"]);function Id(t,e){p(e,!l(e))}async function Sd(){try{await oe.logout(),window.location.href="/"}catch(t){console.error("Erreur lors de la déconnexion:",t)}}function Ed(t,e){p(e,!0),console.log("showAuthModal",l(e))}var Ad=()=>pn("/"),Rd=()=>pn("/teams"),Pd=()=>pn("/eventEdit"),Td=()=>pn("/recipes"),Md=j('<ul class="svelte-dropdown-menu svelte-18a4s1a"><li><div class="svelte-dropdown-header svelte-18a4s1a"> </div></li> <li><button class="svelte-dropdown-item svelte-18a4s1a"><!> <span>Dashboard</span></button></li> <li><button class="svelte-dropdown-item svelte-18a4s1a"><!> <span>Équipes</span></button></li> <li><button class="svelte-dropdown-item svelte-18a4s1a"><!> <span>Créer un événement</span></button></li> <li><button class="svelte-dropdown-item svelte-18a4s1a"><!> <span>Recettes</span></button></li> <li><hr class="svelte-dropdown-divider svelte-18a4s1a"/></li> <li><button class="svelte-dropdown-item svelte-18a4s1a"><!> <span>Se déconnecter</span></button></li></ul>'),Dd=j('<li class="svelte-user-dropdown svelte-18a4s1a"><button class="svelte-btn-user svelte-18a4s1a" aria-label="Menu utilisateur"><div class="svelte-user-avatar svelte-18a4s1a"> </div> <svg class="svelte-dropdown-arrow svelte-18a4s1a" width="12" height="12" viewBox="0 0 12 12" fill="currentColor"><path d="M2 4l4 4 4-4" stroke="currentColor" stroke-width="2" fill="none"></path></svg></button> <!></li>'),$d=j('<li><button class="svelte-btn-login svelte-18a4s1a"><!> <span>Connexion</span></button></li>'),kd=j('<!> <nav class="svelte-header-nav svelte-18a4s1a"><div class="svelte-nav-container svelte-18a4s1a"><a class="svelte-nav-brand svelte-18a4s1a" href="/"><img src="/favicon-96x96.png" alt="logo" class="svelte-brand-logo svelte-18a4s1a"/></a> <ul class="svelte-nav-menu svelte-18a4s1a"><li><a class="svelte-nav-link svelte-18a4s1a" href="/recettes">Recettes</a></li> <li><a class="svelte-nav-link svelte-18a4s1a" href="/evenements">Événements</a></li></ul> <ul class="svelte-nav-actions svelte-18a4s1a"><!></ul></div></nav>',1);function xd(t,e){J(e,!0);let n=A(!1),s=A(!1);function r(){p(n,!1)}function i(I){I.target.closest(".svelte-user-dropdown")||r()}function a(){p(s,!1)}tt(()=>{if(l(n))return document.addEventListener("click",i),()=>document.removeEventListener("click",i)});var o=kd(),c=z(o);_d(c,{onAuthSuccess:a,get isOpen(){return l(s)},set isOpen(I){p(s,I,!0)}});var d=w(c,2),u=g(d),f=w(g(u),4),h=g(f);{var v=I=>{var b=Dd(),S=g(b);S.__click=[Id,n];var M=g(S),$=g(M),P=w(S,2);{var T=R=>{var k=Md(),x=g(k),Z=g(x),ie=g(Z),H=w(x,2),B=g(H);B.__click=[Ad];var be=g(B);Zl(be,{class:"svelte-dropdown-icon",size:16});var Ee=w(H,2),de=g(Ee);de.__click=[Rd];var C=g(de);jn(C,{class:"svelte-dropdown-icon",size:16});var N=w(Ee,2),ae=g(N);ae.__click=[Pd];var ue=g(ae);jn(ue,{class:"svelte-dropdown-icon",size:16});var Ie=w(N,2),fe=g(Ie);fe.__click=[Td];var ge=g(fe);Gl(ge,{class:"svelte-dropdown-icon",size:16});var me=w(Ie,4),q=g(me);q.__click=[Sd];var U=g(q);Fl(U,{class:"svelte-dropdown-icon",size:16}),le(()=>re(ie,oe.user?.email||"Utilisateur")),E(R,k)};Y(P,R=>{l(n)&&R(T)})}le(R=>{bt(S,"aria-expanded",l(n)),re($,R)},[()=>oe.user?.name?.charAt(0).toUpperCase()||"U"]),E(I,b)},y=I=>{var b=$d(),S=g(b);S.__click=[Ed,s];var M=g(S);Ol(M,{size:16}),E(I,b)};Y(h,I=>{oe.isAuthenticated?I(v):I(y,!1)})}E(t,o),X()}Dt(["click"]);var qd=(t,e,n,s)=>e(l(n),l(s)),jd=j('<button class="btn btn-sm btn-primary"> </button>'),Cd=(t,e,n)=>e(l(n)),Nd=j('<button class="btn btn-ghost btn-xs btn-square" title="Voir les détails" aria-label="Voir les détails"><!></button>'),Ld=(t,e,n)=>e(l(n)),Ud=j('<button class="btn btn-ghost btn-sm btn-circle absolute top-1 right-1" title="Fermer" aria-label="Fermer la notification"><!></button>'),Hd=j('<div><div class="flex items-center justify-between gap-2"><div class="flex items-center gap-2"><!> <span class="text-xs"> </span></div> <div class="flex items-center gap-1"><!> <!> <!></div></div></div>'),Bd=j("<div></div>");function zd(t,e){J(e,!0);let n=Ne(e,"position",3,"toast-right toast-bottom"),s=Ne(e,"padding",3,"md");const r=Q(()=>s()==="sm"?"px-2 py-0.5":""),i=Q(()=>Je.toasts);function a(f){return f==="success"||f==="info"}function o(f){Je.dismiss(f.id)}function c(f){e.onShowDetails?.({id:f.id,message:f.message,details:f.details})}function d(f,h){h.onClick()}var u=Bd();lt(u,21,()=>l(i),f=>f.id,(f,h)=>{var v=Hd(),y=g(v),I=g(y),b=g(I);{var S=H=>{ya(H,{class:"h-5 w-5 animate-spin"})};Y(b,H=>{l(h).state==="loading"&&H(S)})}var M=w(b,2),$=g(M),P=w(I,2),T=g(P);{var R=H=>{var B=ne(),be=z(B);lt(be,17,()=>l(h).actions,xn,(Ee,de)=>{var C=jd();C.__click=[qd,d,h,de];var N=g(C);le(()=>re(N,l(de).label)),E(Ee,C)}),E(H,B)};Y(T,H=>{l(h).actions&&l(h).actions.length>0&&H(R)})}var k=w(T,2);{var x=H=>{var B=Nd();B.__click=[Cd,c,h];var be=g(B);Kl(be,{class:"h-3 w-3"}),E(H,B)};Y(k,H=>{l(h).details&&H(x)})}var Z=w(k,2);{var ie=H=>{var B=Ud();B.__click=[Ld,o,h];var be=g(B);hr(be,{class:"h-4 w-4"}),E(H,B)};Y(Z,H=>{(l(h).state==="error"||l(h).state==="warning"||!a(l(h).state))&&H(ie)})}le(()=>{at(v,1,`alert alert-${l(h).state??""} max-w-sm ${l(r)??""} shadow-lg`),re($,l(h).message)}),E(f,v)}),le(()=>at(u,1,`toast ${n()??""} z-50`)),E(t,u),X()}Dt(["click"]);function Wd(t,e){J(e,!0),X()}io();function ti(){pn("/eventEdit")}var Qd=j('<div class="flex items-center justify-center py-20"><!></div>'),Vd=j('<div class="alert alert-error shadow-lg"><span> </span></div>'),Gd=j(`<div class="bg-base-200/50 rounded-box border-base-200 border-2 border-dashed py-20 text-center"><div class="bg-base-200 mb-4 inline-block rounded-full p-4"><!></div> <h3 class="mb-2 text-lg font-bold">Aucun événement</h3> <p class="text-base-content/60 mb-6">Vous n'avez pas encore créé d'événement.</p> <button class="btn btn-primary btn-sm">Créer mon premier événement</button></div>`),Kd=(t,e,n)=>e(l(n).$id),Yd=j('<div class="badge badge-ghost text-xs"> </div>'),Jd=j('<button class="card bg-base-100 border-base-200 hover:border-primary/50 group border text-left shadow-xl transition-all hover:shadow-2xl"><div class="card-body"><div class="mb-2 flex items-start justify-between"><h3 class="card-title group-hover:text-primary text-lg transition-colors"> </h3> <!></div> <div class="text-base-content/70 mt-2 flex items-center gap-4 text-sm"><div class="flex items-center gap-1"><!> <span>-</span></div> <div class="flex items-center gap-1"><!> <span> </span></div></div> <div class="text-base-content/70 mt-auto flex flex-wrap justify-between text-sm"><div> </div> <div> </div></div> <div class="card-actions mt-4 justify-end"><span class="text-primary flex items-center gap-1 text-xs font-semibold opacity-0 transition-opacity group-hover:opacity-100">Ouvrir <!></span></div></div></button>'),Xd=j('<div class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3"></div>'),Zd=j('<div class="mx-auto max-w-5xl px-4 py-8"><div class="mb-8 flex items-center justify-between"><div><h1 class="mb-2 text-3xl font-bold">Mes Événements</h1> <p class="text-base-content/60">Gérez vos menus et listes de courses</p></div> <button class="btn btn-primary"><!> Nouvel Événement</button></div> <!></div>');function ni(t,e){J(e,!1);function n(f){return f?new Date(f).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"}):"Date inconnue"}function s(f){pn(`/eventEdit/${f}`)}dc();var r=Zd(),i=g(r),a=w(g(i),2);a.__click=[ti];var o=g(a);os(o,{class:"mr-2 h-5 w-5"});var c=w(i,2);{var d=f=>{var h=Qd(),v=g(h);ya(v,{class:"text-primary h-8 w-8 animate-spin"}),E(f,h)},u=f=>{var h=ne(),v=z(h);{var y=b=>{var S=Vd(),M=g(S),$=g(M);le(()=>re($,ht.error)),E(b,S)},I=b=>{var S=ne(),M=z(S);{var $=T=>{var R=Gd(),k=g(R),x=g(k);Dn(x,{class:"h-8 w-8 opacity-50"});var Z=w(k,6);Z.__click=[ti],E(T,R)},P=T=>{var R=Xd();lt(R,5,()=>ht.events,xn,(k,x)=>{var Z=Jd();Z.__click=[Kd,s,x];var ie=g(Z),H=g(ie),B=g(H),be=g(B),Ee=w(B,2);{var de=se=>{var _e=Yd(),Ae=g(_e);le(Pe=>re(Ae,Pe),[()=>n(l(x).dateStart)]),E(se,_e)};Y(Ee,se=>{l(x).dateStart&&se(de)})}var C=w(H,2),N=g(C),ae=g(N);jn(ae,{class:"h-4 w-4"});var ue=w(N,2),Ie=g(ue);Dn(Ie,{class:"h-4 w-4"});var fe=w(Ie,2),ge=g(fe),me=w(C,2),q=g(me),U=g(q),G=w(q,2),D=g(G),L=w(me,2),K=g(L),te=w(g(K));Yl(te,{class:"h-4 w-4"}),le(()=>{re(be,l(x).name),re(ge,`${(l(x).allDates?.length||0)??""} jours`),re(U,`crée le ${l(x).$createdAt??""}`),re(D,`modifié le ${l(x).$updatedAt??""}`)}),E(k,Z)}),E(T,R)};Y(M,T=>{ht.count===0?T($):T(P,!1)},!0)}E(b,S)};Y(v,b=>{ht.error?b(y):b(I,!1)},!0)}E(f,h)};Y(c,f=>{ht.loading&&ht.count===0?f(d):f(u,!1)})}E(t,r),X()}Dt(["click"]);function Od(t){return e=>{t.shouldFocus&&requestAnimationFrame(()=>{e.focus()});const n=s=>{(s.key==="Enter"||s.key==="Tab")&&e instanceof HTMLInputElement&&e.value.trim()===""&&(s.preventDefault(),t.onEmptySubmit?.())};return e.addEventListener("keydown",n),()=>{e.removeEventListener("keydown",n)}}}function Fd(t,e,n,s){l(e).length&&(t.key==="ArrowDown"?(t.preventDefault(),p(n,(l(n)+1)%l(e).length)):t.key==="ArrowUp"?(t.preventDefault(),p(n,l(n)<=0?l(e).length-1:l(n)-1,!0)):(t.key==="Enter"||t.key==="Tab")&&l(n)>=0&&(t.preventDefault(),s(l(e)[l(n)])))}var eu=j('<div class="text-base-content/60 mt-2 py-2 text-center text-xs">Aucune recette trouvée</div>'),tu=(t,e,n)=>e(l(n)),nu=j('<li><button><div class="bg-base-100 rounded p-1"><!></div> <span class="truncate text-sm"> </span></button></li>'),su=j('<ul class="menu bg-base-200/50 rounded-box mt-2 gap-1 p-1"></ul>'),ru=j('<div class="mt-2"><label class="input input-accent w-full"><!> <input type="text" placeholder="Rechercher une recette..."/> <!></label> <!> <!></div>'),iu=(t,e)=>p(e,null),au=j('<div class="bg-base-200/50 space-y-3 rounded-lg p-3"><div class="flex items-start gap-3"><div class="bg-primary/10 text-primary rounded-lg p-2"><!></div> <div class="min-w-0 flex-1"><div class="truncate font-medium"> </div> <button class="text-primary mt-0.5 text-xs hover:underline">Changer de recette</button></div></div> <div class="grid grid-cols-2 gap-2"><div><label class="label py-1 text-xs">Type</label> <select class="select select-bordered select-xs w-full"><option disabled selected>Sélectionner un type</option><option>Entrée</option><option>Plat</option><option>Dessert</option></select></div> <div><label class="label py-1 text-xs">Couverts</label> <input type="number" class="input w-full" min="1"/></div></div></div>'),ou=j('<div class="card bg-base-100 border-base-300 border shadow-sm"><div class="card-body gap-3 p-3"><div class="flex items-center justify-between"><h4 class="flex items-center gap-2 font-bold"><!> Ajouter une recette</h4></div> <!></div></div>');function cu(t,e){J(e,!0);let n=Ne(e,"defaultPlates",3,4),s=Ne(e,"autoFocus",3,!1),r=A(""),i=A(""),a=A(he(n())),o=A(null),c=!1,d=A(-1),u=Q(()=>l(r).length>1?fr.searchRecipes(l(r)).slice(0,5):[]);tt(()=>{l(u).length>0&&l(d)===-1?p(d,0):l(u).length===0&&p(d,-1)});function f(){p(o,null),p(r,""),p(i,""),p(a,n()),p(d,-1)}function h(R){p(o,R,!0);const k=R.t||"plat";p(i,l(i)?l(i):k,!0),e.onSelect(R,l(i),l(a)),f()}const v=Math.random().toString(36).slice(2);var y=ou(),I=g(y),b=g(I),S=g(b),M=g(S);os(M,{class:"text-primary h-4 w-4"});var $=w(b,2);{var P=R=>{var k=ru(),x=g(k),Z=g(x);nd(Z,{class:"h-4 w-4 opacity-50"});var ie=w(Z,2);ie.__keydown=[Fd,u,d,h],Ki(ie,()=>Od({shouldFocus:s(),onEmptySubmit:e.onEmptySubmit}));var H=w(ie,2);Y(H,C=>{});var B=w(x,2);{var be=C=>{var N=eu();E(C,N)};Y(B,C=>{l(r).length>1&&l(u).length===0&&C(be)})}var Ee=w(B,2);{var de=C=>{var N=su();lt(N,23,()=>l(u),ae=>ae.u,(ae,ue,Ie)=>{var fe=nu(),ge=g(fe);ge.__click=[tu,h,ue],ge.disabled=c;var me=g(ge),q=g(me);as(q,{class:"h-3 w-3 opacity-70"});var U=w(me,2),G=g(U);le(()=>{at(ge,1,`flex items-center gap-2 py-2 text-left ${l(Ie)===l(d)&&"ring-accent/40 ring-2"} `),re(G,l(ue).n)}),E(ae,fe)}),E(C,N)};Y(Ee,C=>{l(u).length>0&&C(de)})}Ge(ie,()=>l(r),C=>p(r,C)),E(R,k)},T=R=>{var k=au(),x=g(k),Z=g(x),ie=g(Z);as(ie,{class:"h-5 w-5"});var H=w(Z,2),B=g(H),be=g(B),Ee=w(B,2);Ee.__click=[iu,o];var de=w(x,2),C=g(de),N=g(C),ae=w(N,2),ue=g(ae);ue.value=ue.__value="";var Ie=w(ue);Ie.value=Ie.__value="entree";var fe=w(Ie);fe.value=fe.__value="plat";var ge=w(fe);ge.value=ge.__value="dessert";var me=w(C,2),q=g(me),U=w(q,2);le(()=>{re(be,l(o).n),bt(N,"for",`type-${v}`),bt(ae,"id",`type-${v}`),bt(q,"for",`plates-${v}`),bt(U,"id",`plates-${v}`)}),Gs(ae,()=>l(i),G=>p(i,G)),Ge(U,()=>l(a),G=>p(a,G)),E(R,k)};Y($,R=>{l(o)?R(T,!1):R(P)})}E(t,y),X()}Dt(["keydown","click"]);function lu(t){if(!t)return"";try{return new Date(t).toLocaleDateString("fr-FR",{weekday:"short",day:"numeric",month:"short"})}catch{return t}}function du(t,e){return`${t}T${{matin:"08:00:00",midi:"12:00:00",soir:"20:00:00"}[e]}`}function uu(t){return t.split("T")[0]}function si(t){const e=parseInt(t.split("T")[1]?.split(":")[0]||"12");return e<10?"matin":e<17?"midi":"soir"}function fu(t){const e=t-1;return e*e*e+1}function wa(t,{from:e,to:n},s={}){var{delay:r=0,duration:i=R=>Math.sqrt(R)*120,easing:a=fu}=s,o=getComputedStyle(t),c=o.transform==="none"?"":o.transform,[d,u]=o.transformOrigin.split(" ").map(parseFloat);d/=t.clientWidth,u/=t.clientHeight;var f=hu(t),h=t.clientWidth/n.width/f,v=t.clientHeight/n.height/f,y=e.left+e.width*d,I=e.top+e.height*u,b=n.left+n.width*d,S=n.top+n.height*u,M=(y-b)*h,$=(I-S)*v,P=e.width/n.width,T=e.height/n.height;return{delay:r,duration:typeof i=="function"?i(Math.sqrt(M*M+$*$)):i,easing:a,css:(R,k)=>{var x=k*M,Z=k*$,ie=R+k*P,H=R+k*T;return`transform: ${c} translate(${x}px, ${Z}px) scale(${ie}, ${H});`}}}function hu(t){if("currentCSSZoom"in t)return t.currentCSSZoom;for(var e=t,n=1;e!==null;)n*=+getComputedStyle(e).zoom,e=e.parentElement;return n}var pu=(t,e,n)=>{(t.key==="Enter"||t.key===" ")&&!e()&&n()},vu=(t,e)=>{e(!1)},gu=j(`<button class="btn btn-ghost text-primary" title="Terminer l'édition">valider</button> <button class="btn btn-ghost btn-square" title="Dupliquer"><!></button> <button class="btn btn-ghost btn-square text-error" title="Supprimer"><!></button>`,1),mu=(t,e,n)=>{e(!0),n.onEditToggle&&n.onEditToggle()},yu=j('<button class="btn btn-ghost" title="Éditer"><!></button>'),wu=j('<div class="text-error mt-1 text-xs">Cette date/heure est déjà utilisée</div>'),bu=(t,e,n)=>e(l(n).recipeUuid),_u=j('<div class="group bg-base-200/40 flex flex-wrap items-center gap-3 rounded-lg p-3"><div class="flex flex-1 items-center gap-2"><div><!></div> <div class="min-w-0 flex-1"><div class="font-medium"> </div></div></div> <div class="flex items-center gap-2"><select class="select w-24"><option>Entrée</option><option>Plat</option><option>Dessert</option></select> <div class="join"><input type="number" class="input join-item w-20 text-center" min="1"/> <div class="bg-base-300 join-item flex items-center px-2 text-xs">pers.</div></div> <button class="btn btn-ghost btn-sm btn-square text-error" title="Retirer la recette"><!></button></div></div>'),Iu=j('<div class="mb-4 space-y-2"></div>'),Su=j('<div class="mt-2 space-y-4"><div class="grid grid-cols-1 gap-4 md:grid-cols-3"><label class="w-full"><div class="label"><span class="label-text">Date</span></div> <input type="date"/> <!></label> <label class="w-full"><div class="label"><span class="label-text">Moment</span></div> <select><option disabled selected>Choisir un moment</option><option>Matin</option><option>Midi</option><option>Soir</option></select></label> <label class="w-full"><div class="label"><span class="label-text">Couverts</span></div> <input type="number" class="input input-bordered w-full" min="1"/></label></div> <div class="space-y-2"><div class="flex items-center justify-between"><h4 class="flex items-center gap-2 font-semibold"><!> Recettes</h4></div> <!> <!></div></div>'),Eu=j('<div><!> <span> </span> <span class="badge badge-sm badge-outline font-base"> </span></div>'),Au=j('<div class="flex flex-wrap gap-2"></div>'),Ru=j('<p class="text-base-content/60 text-sm italic">Aucune recette</p>'),Pu=j('<div class="space-y-2"><!></div>'),Tu=j('<div role="button"><div class="card-body p-4"><div class="mb-2 flex items-start justify-between"><div class="flex items-center gap-2"><span class="text-lg font-medium"> </span> <div class="font-base flex items-center gap-1"><!> <div> </div></div> <span class="text-base-content/60 flex items-center gap-1 text-sm"><!> </span></div> <div class="flex gap-1"><!></div></div> <!></div></div>');function Mu(t,e){J(e,!0);let n=Ne(e,"meal",15),s=Ne(e,"defaultGuests",3,100),r=Ne(e,"isEditing",15,!1),i=Ne(e,"allDates",19,()=>[]),a=A(!1);n().guests||n(n().guests=s(),!0),n().recipes||n(n().recipes=[],!0);let o=Q(()=>si(n().date||"")),c=A(!1),d=A(he(uu(n().date||""))),u=A(he(si(n().date||""))),f=Q(()=>du(l(d),l(u)));tt(()=>{const q=!h(l(f)),U=n().date;q?(n(n().date=l(f),!0),p(c,!1),e.onDateChanged&&n().id&&U!==l(f)&&e.onDateChanged(n().id,l(f)),p(c,!1)):p(c,!0)});function h(q){const U=n().date||"";return i().some(G=>G!==U&&G===q)}const v=Q(()=>{const q=l(o)||"";return q==="matin"?Jl:q==="midi"?sd:ei}),y=Q(()=>{const q={entree:1,plat:2,dessert:3};return[...n().recipes].sort((U,G)=>{const D=q[U.type]||999,L=q[G.type]||999;return D-L})});function I(q,U,G){if(n().recipes.some(te=>te.recipeUuid===q.u))return;const L=G||n().guests,K={recipeUuid:q.u,plates:L,type:U};n(n().recipes=[...n().recipes,{...K}],!0)}function b(q){n(n().recipes=n().recipes.filter(U=>U.recipeUuid!==q),!0)}function S(q){return fr.getRecipeIndexByUuid(q)}function M(){!r()&&e.onEditToggle&&(e.onEditToggle(),p(a,!0))}tt(()=>{r()&&(p(a,!0),setTimeout(()=>{p(a,!1)},100))});function $(q){return q==="entree"?"bg-lime-100 border-lime-200":q==="plat"?"bg-orange-100 border-orange-200":q==="dessert"?"bg-pink-100 border-pink-200":"bg-base-200/50"}var P=Tu();P.__click=M,P.__keydown=[pu,r,M];var T=g(P),R=g(T),k=g(R),x=g(k),Z=g(x),ie=w(x,2),H=g(ie);Gi(H,()=>l(v),(q,U)=>{U(q,{size:16})});var B=w(H,2),be=g(B),Ee=w(ie,2),de=g(Ee);jn(de,{class:"h-3 w-3"});var C=w(de),N=w(k,2),ae=g(N);{var ue=q=>{var U=gu(),G=z(U);G.__click=[vu,r];var D=w(G,2);D.__click=function(...se){e.onDuplicate?.apply(this,se)};var L=g(D);Xl(L,{class:"h-4 w-4"});var K=w(D,2);K.__click=function(...se){e.onDelete?.apply(this,se)};var te=g(K);rd(te,{class:"h-4 w-4"}),E(q,U)},Ie=q=>{var U=yu();U.__click=[mu,r,e];var G=g(U);ed(G,{class:"h-4 w-4"}),E(q,U)};Y(ae,q=>{r()?q(ue):q(Ie,!1)})}var fe=w(R,2);{var ge=q=>{var U=Su(),G=g(U),D=g(G),L=w(g(D),2),K=w(L,2);{var te=xe=>{var Jt=wu();E(xe,Jt)};Y(K,xe=>{l(c)&&xe(te)})}var se=w(D,2),_e=w(g(se),2),Ae=g(_e);Ae.value=Ae.__value="";var Pe=w(Ae);Pe.value=Pe.__value="matin";var $e=w(Pe);$e.value=$e.__value="midi";var F=w($e);F.value=F.__value="soir";var He=w(se,2),vn=w(g(He),2),gn=w(G,2),Yt=g(gn),_s=g(Yt),Qn=g(_s);ad(Qn,{class:"h-4 w-4"});var Vn=w(Yt,2);{var Is=xe=>{var Jt=Iu();lt(Jt,31,()=>l(y),Xt=>Xt.recipeUuid,(Xt,ft,Es)=>{const As=Q(()=>S(l(ft).recipeUuid));var mn=_u(),Gn=g(mn),Zt=g(Gn),yn=g(Zt);as(yn,{class:"h-5 w-5"});var Kn=w(Zt,2),Rs=g(Kn),Ps=g(Rs),Ts=w(Gn,2),wn=g(Ts),bn=g(wn);bn.value=bn.__value="entree";var Ot=w(bn);Ot.value=Ot.__value="plat";var _n=w(Ot);_n.value=_n.__value="dessert";var Yn=w(wn,2),Jn=g(Yn),Xn=w(Yn,2);Xn.__click=[bu,b,ft];var Zn=g(Xn);hr(Zn,{class:"h-4 w-4"}),le($t=>{at(Zt,1,`${$t??""} rounded-md border-2 p-2`),re(Ps,l(As)?.n||"Recette inconnue")},[()=>$(l(ft).type)]),Gs(wn,()=>l(ft).type,$t=>l(ft).type=$t),Ge(Jn,()=>l(ft).plates,$t=>l(ft).plates=$t),ea(mn,()=>wa,()=>({duration:200})),E(Xt,mn)}),E(xe,Jt)};Y(Vn,xe=>{n().recipes.length>=1&&xe(Is)})}var Ss=w(Vn,2);cu(Ss,{onSelect:I,get defaultPlates(){return n().guests},get autoFocus(){return l(a)},get onEmptySubmit(){return e.onEmptySearchSubmit}}),le(()=>{at(L,1,`input input-bordered w-full ${l(c)?"input-error":""}`),at(_e,1,`select select-bordered w-full ${l(c)?"select-error":""}`)}),Ge(L,()=>l(d),xe=>p(d,xe)),Gs(_e,()=>l(u),xe=>p(u,xe)),Ge(vn,()=>n().guests,xe=>n(n().guests=xe,!0)),E(q,U)},me=q=>{var U=Pu(),G=g(U);{var D=K=>{var te=Au();lt(te,21,()=>l(y),se=>se.recipeUuid,(se,_e)=>{const Ae=Q(()=>S(l(_e).recipeUuid));var Pe=Eu(),$e=g(Pe);as($e,{class:"h-4 w-4"});var F=w($e,2),He=g(F),vn=w(F,2),gn=g(vn);le(Yt=>{at(Pe,1,`badge badge-lg ${Yt??""} h-auto gap-2 py-1 font-medium`),re(He,l(Ae)?.n||"..."),re(gn,`${(l(_e).plates||n().guests)??""}p`)},[()=>$(l(_e).type)]),E(se,Pe)}),E(K,te)},L=K=>{var te=Ru();E(K,te)};Y(G,K=>{l(y).length>0?K(D):K(L,!1)})}E(q,U)};Y(fe,q=>{r()?q(ge):q(me,!1)})}le((q,U)=>{at(P,1,`card bg-base-100 border-base-200 border shadow-sm transition-all hover:shadow-md ${r()?"ring-accent/40 ring-2":""} ${r()?"":"hover:ring-accent/60 cursor-pointer hover:ring-2"}`),bt(P,"tabindex",r()?-1:0),re(Z,q),re(be,U),re(C,` ${n().guests??""} pers.`)},[()=>n().date?lu(n().date):"Date non définie",()=>l(o)?l(o).toUpperCase():"REPAS"]),E(t,P),X()}Dt(["click","keydown"]);async function Du(t,e,n,s,r,i,a,o,c,d,u,f){if(!l(e)){p(n,"Veuillez renseigner le nom de l'événement");return}if(l(s).length===0){p(n,"Veuillez ajouter au moins un repas");return}p(r,!0),p(n,null);try{const h={name:l(e),dateStart:l(i),dateEnd:l(a),allDates:l(o),teams:l(c),contributors:l(d),meals:l(s)};l(u)?await ht.updateEvent(l(u),h):await ht.createEvent(h),f()}catch(h){console.error("Erreur lors de la sauvegarde de l'événement:",h),p(n,"Erreur lors de la sauvegarde de l'événement. Vérifiez votre connexion.")}finally{p(r,!1)}}var $u=j('<span class="loading loading-spinner loading-sm"></span>'),ku=j(`<div class="flex items-center justify-center py-20"><div class="flex flex-col items-center gap-4"><span class="loading loading-spinner loading-lg text-primary"></span> <p class="text-base-content/60">Chargement de l'événement...</p></div></div>`),xu=j('<div class="alert alert-error shadow-lg"><span> </span></div>'),qu=(t,e,n)=>e(l(n).$id),ju=j('<label class="label border-base-200 hover:bg-base-200/50 cursor-pointer justify-start gap-3 rounded-lg border p-2 transition-colors"><input type="checkbox" class="checkbox checkbox-primary checkbox-sm"/> <span> </span></label>'),Cu=j('<p class="text-base-content/60 text-xs italic">Aucune équipe disponible</p>'),Nu=(t,e)=>t.key==="Enter"&&e(),Lu=(t,e,n)=>e(l(n)),Uu=j('<div class="badge badge-outline gap-2 pr-1"> <button class="btn btn-ghost btn-xs btn-circle h-4 min-h-0 w-4"><!></button></div>'),Hu=j('<div class="text-base-content/60 bg-base-200/30 rounded-box border-base-200 flex flex-col items-center justify-center border-2 border-dashed py-12"><div class="bg-base-200 mb-4 rounded-full p-4"><!></div> <p class="font-medium">Aucun repas planifié</p> <p class="mt-1 text-sm">Commencez par ajouter un repas à votre événement</p></div>'),Bu=j("<div><!></div>"),zu=j('<div class="space-y-4"></div>'),Wu=j(`<div class="grid grid-cols-1 gap-6 lg:grid-cols-4"><div class="space-y-6 lg:col-span-1"><div class="card bg-base-100 shadow-xl"><div class="card-body"><h3 class="card-title mb-4 flex items-center gap-2 text-lg"><!> Informations</h3> <div class="space-y-4"><div class="w-full"><label class="input flex items-center gap-2"><!> <input id="event-name" type="text" class="grow" placeholder="Nom d l'événement"/></label></div></div></div></div> <div class="card bg-base-100 shadow-xl"><div class="card-body"><h3 class="card-title mb-4 flex items-center gap-2 text-lg"><!> Permissions</h3> <fieldset class="fieldset"><legend class="fieldset-legend">Équipes</legend> <div class="flex flex-col gap-2"><!> <!></div></fieldset> <div class="divider my-2"></div> <fieldset class="fieldset"><legend class="fieldset-legend">Contributeurs ></legend> <div class="mb-2 flex gap-2"><input type="email" placeholder="email@exemple.com" class="input input-sm w-full"/> <button class="btn btn-sm btn-square"><!></button></div> <div class="flex flex-wrap gap-2"></div></fieldset></div></div></div> <div class="space-y-6 lg:col-span-3"><div class="card bg-base-100 min-h-[500px] shadow-xl"><div class="card-body"><div class="mb-6 flex items-center justify-between"><h3 class="card-title text-lg"> </h3> <button class="btn btn-primary btn-sm"><!> Ajouter un repas</button></div> <!> <div class="flex"><button class="btn btn-soft btn-primary btn-block mt-4"><!> Ajouter un repas</button></div></div></div></div></div>`),Qu=j('<div class="mx-auto max-w-11/12 space-y-6 px-4 py-8 pb-20"><div class="bg-base-100/95 border-base-200 flex items-center justify-between border-b py-4 backdrop-blur"><div class="flex items-center gap-4"><button class="btn btn-ghost btn-circle"><!></button> <div><h2 class="text-2xl font-bold"> </h2> <p class="text-base-content/60 text-sm"> </p></div></div> <button class="btn btn-primary"><!> </button></div> <!></div>');function ri(t,e){J(e,!0);const n=Q(()=>e.params?.id);let s=A(""),r=A(he([])),i=A(he([])),a=A(""),o=A(he([])),c=A(!1),d=A(!1),u=A(null),f=A(null);const h=Q(()=>{const D=l(o).map(L=>L.date).filter(Boolean);return[...new Set(D)].sort()}),v=Q(()=>l(h).length>0?l(h)[0]:""),y=Q(()=>l(h).length>0?l(h)[l(h).length-1]:"");tt(()=>{l(n)?(p(d,!0),p(u,null),zn(l(n)).then(D=>{D?(p(s,D.name||"",!0),p(r,D.teams||[],!0),p(i,D.contributors||[],!0),p(o,Wn(D).sort((L,K)=>L.date.localeCompare(K.date)),!0)):p(u,"Événement introuvable")}).catch(D=>{console.error("Erreur lors du chargement de l'événement:",D),p(u,"Erreur lors du chargement de l'événement")}).finally(()=>{p(d,!1)})):(p(s,""),p(r,[],!0),p(i,[],!0),p(o,[],!0))});function I(){history.back()}function b(){const D=Ys(6);let L;if(l(h).length===0){const te=new Date;te.setHours(12,0,0,0),L=te.toISOString()}else{const te=l(h)[l(h).length-1],se=new Date(te);se.getHours()<14?se.setHours(20,0,0,0):(se.setDate(se.getDate()+1),se.setHours(12,0,0,0)),L=se.toISOString()}if(l(o).some(te=>te.date===L)){p(u,"Un repas existe déjà à cette date et heure");return}const K={id:D,date:L,guests:100,recipes:[]};p(o,[...l(o),K].sort((te,se)=>te.date.localeCompare(se.date)),!0),p(f,D,!0)}function S(D){p(o,l(o).filter(L=>L.id!==D),!0)}function M(D){}function $(){l(a)&&!l(i).includes(l(a))&&(p(i,[...l(i),l(a)],!0),p(a,""))}function P(D){p(i,l(i).filter(L=>L!==D),!0)}function T(D){l(r).includes(D)?p(r,l(r).filter(L=>L!==D),!0):p(r,[...l(r),D],!0)}function R(D){p(f,l(f)===D?null:D,!0)}function k(D){const L=l(o).findIndex(K=>K.id===D);if(L<l(o).length-1){const K=l(o)[L+1];K.id||(K.id=Ys(6)),p(f,K.id,!0)}else b()}function x(D,L){p(o,l(o).sort((K,te)=>K.date.localeCompare(te.date)),!0)}var Z=Qu(),ie=g(Z),H=g(ie),B=g(H);B.__click=I;var be=g(B);Vl(be,{class:"h-6 w-6"});var Ee=w(B,2),de=g(Ee),C=g(de),N=w(de,2),ae=g(N),ue=w(H,2);ue.__click=[Du,s,u,o,c,v,y,h,r,i,n,I];var Ie=g(ue);{var fe=D=>{var L=$u();E(D,L)},ge=D=>{td(D,{class:"mr-2 h-4 w-4"})};Y(Ie,D=>{l(c)?D(fe):D(ge,!1)})}var me=w(Ie),q=w(ie,2);{var U=D=>{var L=ku();E(D,L)},G=D=>{var L=ne(),K=z(L);{var te=_e=>{var Ae=xu(),Pe=g(Ae),$e=g(Pe);le(()=>re($e,l(u))),E(_e,Ae)},se=_e=>{var Ae=Wu(),Pe=g(Ae),$e=g(Pe),F=g($e),He=g(F),vn=g(He);Dn(vn,{class:"text-primary h-5 w-5"});var gn=w(He,2),Yt=g(gn),_s=g(Yt),Qn=g(_s);Dn(Qn,{class:"h-4 w-4 opacity-50"});var Vn=w(Qn,2),Is=w($e,2),Ss=g(Is),xe=g(Ss),Jt=g(xe);jn(Jt,{class:"text-secondary h-5 w-5"});var Xt=w(xe,2),ft=w(g(Xt),2),Es=g(ft);lt(Es,17,()=>Js.teams,xn,(Te,Be)=>{var Oe=ju(),Me=g(Oe);Me.__change=[qu,T,Be];var kt=w(Me,2),xt=g(kt);le(Ms=>{sc(Me,Ms),re(xt,l(Be).name)},[()=>l(r).includes(l(Be).$id)]),E(Te,Oe)});var As=w(Es,2);{var mn=Te=>{var Be=Cu();E(Te,Be)};Y(As,Te=>{Js.teams.length===0&&Te(mn)})}var Gn=w(Xt,4),Zt=w(g(Gn),2),yn=g(Zt);yn.__keydown=[Nu,$];var Kn=w(yn,2);Kn.__click=$;var Rs=g(Kn);id(Rs,{class:"h-4 w-4"});var Ps=w(Zt,2);lt(Ps,21,()=>l(i),xn,(Te,Be)=>{var Oe=Uu(),Me=g(Oe),kt=w(Me);kt.__click=[Lu,P,Be];var xt=g(kt);hr(xt,{class:"h-3 w-3"}),le(()=>re(Me,`${l(Be)??""} `)),E(Te,Oe)});var Ts=w(Pe,2),wn=g(Ts),bn=g(wn),Ot=g(bn),_n=g(Ot),Yn=g(_n),Jn=w(_n,2);Jn.__click=b;var Xn=g(Jn);os(Xn,{class:"mr-1 h-4 w-4"});var Zn=w(Ot,2);{var $t=Te=>{var Be=Hu(),Oe=g(Be),Me=g(Oe);Dn(Me,{class:"h-8 w-8 opacity-50"}),E(Te,Be)},ba=Te=>{var Be=zu();lt(Be,31,()=>l(o),Oe=>Oe.id,(Oe,Me,kt)=>{var xt=Bu(),Ms=g(xt);{let Sa=Q(()=>l(f)===l(Me).id);Mu(Ms,{get isEditing(){return l(Sa)},onEditToggle:()=>l(Me).id&&R(l(Me).id),onDelete:()=>l(Me).id&&S(l(Me).id),onDuplicate:()=>l(Me).id&&(l(Me).id,void 0),get allDates(){return l(h)},onEmptySearchSubmit:()=>l(Me).id&&k(l(Me).id),onDateChanged:x,get meal(){return l(o)[l(kt)]},set meal(Ea){l(o)[l(kt)]=Ea}})}ea(xt,()=>wa,()=>({delay:100,duration:400})),E(Oe,xt)}),E(Te,Be)};Y(Zn,Te=>{l(o).length===0?Te($t):Te(ba,!1)})}var _a=w(Zn,2),pr=g(_a);pr.__click=b;var Ia=g(pr);os(Ia,{class:"mr-1 h-4 w-4"}),le(()=>re(Yn,`Repas & Menus (${l(o).length??""})`)),Ge(Vn,()=>l(s),Te=>p(s,Te)),Ge(yn,()=>l(a),Te=>p(a,Te)),E(_e,Ae)};Y(K,_e=>{l(u)?_e(te):_e(se,!1)},!0)}E(D,L)};Y(q,D=>{l(d)?D(U):D(G,!1)})}le(()=>{re(C,`${l(n)?"Éditer":"Nouvel"} Événement`),re(ae,l(n)?"Modifier le menu et les repas":"Créer un menu et planifier les repas"),ue.disabled=l(c)||l(d),re(me,` ${l(n)?"Enregistrer":"Créer l'événement"}`)}),E(t,Z),X()}Dt(["click","change","keydown"]);var Vu=j('<div class="flex items-center justify-center py-20"><p class="text-slate-400">Chargement...</p></div>'),Gu=j("<!> <!>",1),Ku=j("<!> <!> <!> <!>",1);function Yu(t,e){J(e,!0);let n=A(null);qt.addRoute("/",ni),qt.addRoute("/dashboard",ni),qt.addRoute("/eventEdit",ri),qt.addRoute("/eventEdit/:id",ri);let s=A(null);tt(()=>{!oe.isAuthenticated&&qt.path!=="/"&&(window.location.hash="/",window.location.pathname="/")}),tt(()=>{qt.match().then(I=>{p(s,I,!0)})});async function r(){try{await oe.initializeAuth()}catch(I){console.error("Erreur d'initialisation auth:",I)}}async function i(){try{await Promise.all([Js.initialize(),fr.initialize(),ht.initialize()])}catch(I){console.error("Erreur d'initialisation dashboard:",I),p(n,I.message||"Erreur inconnue lors de l'initialisation",!0)}}pc(()=>{(async()=>(await r(),oe.isAuthenticated&&(window.location.pathname=="/"&&(window.location.pathname="/a"),await i())))()});let a=Q(()=>l(n)||bl.error);var o=Ku(),c=z(o);xd(c,{});var d=w(c,2);{var u=I=>{const b=Q(()=>l(s).component);var S=ne(),M=z(S);Gi(M,()=>l(b),($,P)=>{P($,{get params(){return l(s).params},get query(){return l(s).query}})}),E(I,S)},f=I=>{var b=Vu();E(I,b)};Y(d,I=>{l(s)?I(u):I(f,!1)})}var h=w(d,2);zd(h,{});var v=w(h,2);{var y=I=>{var b=Gu(),S=z(b);{var M=P=>{Bl(P,{get message(){return l(a)}})};Y(S,P=>{l(a)&&P(M)})}var $=w(S,2);Wd($,{get isOpen(){return oe.isConflictModalOpen},get conflictData(){return oe.conflictData}}),E(I,b)};Y(v,I=>{oe.isAuthenticated&&I(y)})}E(t,o),X()}let Cn=null;window.location.pathname.startsWith("/a")?Cn=document.getElementById("app"):Cn=document.getElementById("svelte-header");if(!Cn)throw console.error("[Svelte] Aucun conteneur de montage trouvé"),new Error("Élément target non trouvé");console.log(`[Svelte] Montage dans: #${Cn.id}`);Go(Yu,{target:Cn});
