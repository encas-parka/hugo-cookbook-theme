import{x as ea,j as r,W as h,B as _,A as c,u as Q,s as B,at as ta,$ as S,X as C,a0 as O,a1 as la,v as f,w as sa,g as e,a as u,Z as ra,_ as j,a3 as K,o as oa,Y as ia}from"./vendor.js";import{k as ua}from"./keyboardNavigation.svelte.js";import{S as na}from"./icons.js";function ca(s,a,l,w,d){e(a).length&&(s.key==="ArrowDown"?(s.preventDefault(),u(l,(e(l)+1)%e(a).length)):s.key==="ArrowUp"?(s.preventDefault(),u(l,e(l)<=0?e(a).length-1:e(l)-1,!0)):(s.key==="Enter"||s.key==="Tab")&&e(l)>=0&&e(l)<e(a).length?(s.preventDefault(),w(e(a)[e(l)])):s.key==="Escape"&&(u(l,-1),d?.blur()))}var da=h('<div class="loading loading-spinner loading-xs"></div>'),va=(s,a,l)=>a(e(l)),ba=h('<li><button><span class="block truncate"> </span></button></li>'),fa=h('<div class="absolute z-10 mt-1 w-full"><ul class="rounded-box bg-base-100 border-base-300 max-h-60 overflow-y-auto border shadow-lg"></ul></div>'),ha=h('<div class="rounded-box bg-base-100 border-base-300 text-base-content/60 absolute z-10 mt-1 w-full border p-4 text-center text-sm shadow-lg">Aucun résultat trouvé</div>'),ga=h('<div class="relative"><label><!> <input type="text" class="grow"/> <!></label> <!> <!></div>');function ya(s,a){ea(a,!0);let l=r(a,"value",15,""),w=r(a,"placeholder",3,"Rechercher..."),d=r(a,"itemToString",3,t=>String(t)),A=r(a,"disabled",3,!1),N=r(a,"autoFocus",3,!1),p=r(a,"loading",3,!1),F=r(a,"minQueryLength",3,1),g=r(a,"maxResults",3,void 0),U=r(a,"showAllOnFocus",3,!0),W=r(a,"inputSize",3,""),n=B(-1),v=B(!1),X,b=Q(()=>{if(e(v)&&l().trim().length===0&&U())return g()?a.items.slice(0,g()):a.items;const t=l().toLowerCase().trim();if(t.length<F())return[];const i=a.items.filter(k=>d()(k).toLowerCase().includes(t));return g()?i.slice(0,g()):i}),Y=Q(()=>e(v)&&e(b).length>0);function z(t){a.onSelect?.(t),l(""),u(n,-1)}function Z(){u(v,!0),e(b).length>0&&e(n)===-1&&u(n,0)}function q(){setTimeout(()=>{u(v,!1),u(n,-1)},150)}var D=ga(),y=c(D),L=c(y);na(L,{class:"h-4 w-4 opacity-50"});var o=_(L,2);o.__keydown=[ca,b,n,z,X],ta(o,()=>ua({shouldFocus:N()}));var G=_(o,2);{var H=t=>{var i=da();f(t,i)};S(G,t=>{p()&&t(H)})}var R=_(y,2);{var J=t=>{var i=fa(),k=c(i);oa(k,23,()=>e(b),x=>d()(x),(x,T,V)=>{var E=ba(),m=c(E);m.__click=[va,z,T];var I=c(m),$=c(I);C(aa=>{j(m,1,`hover:bg-base-200 focus:bg-base-200 w-full px-3 py-2 text-left text-sm ${e(V)===e(n)&&"bg-base-200"}`),m.disabled=A(),ia($,aa)},[()=>d()(e(T))]),f(x,E)}),f(t,i)};S(R,t=>{e(Y)&&t(J)})}var M=_(R,2);{var P=t=>{var i=ha();f(t,i)};S(M,t=>{e(v)&&l().length>=F()&&e(b).length===0&&!p()&&t(P)})}C(()=>{j(y,1,`input w-full ${W()??""}`),K(o,"id",a.id),K(o,"placeholder",w()),o.disabled=A()}),O("focus",o,Z),O("blur",o,q),la(o,l),f(s,D),sa()}ra(["keydown","click"]);export{ya as A};
