import{S as ea}from"./icons.js";import{d as ta,p as r,V as h,h as _,g as c,u as Q,q as C,aP as la,a2 as x,W as O,a3 as q,a4 as sa,b as f,c as ra,m as e,v as u,Z as oa,_ as B,a7 as K,e as ia,X as ua}from"./appwrite.js";import{k as na}from"./keyboardNavigation.svelte.js";function ca(s,a,l,w,d){e(a).length&&(s.key==="ArrowDown"?(s.preventDefault(),u(l,(e(l)+1)%e(a).length)):s.key==="ArrowUp"?(s.preventDefault(),u(l,e(l)<=0?e(a).length-1:e(l)-1,!0)):(s.key==="Enter"||s.key==="Tab")&&e(l)>=0&&e(l)<e(a).length?(s.preventDefault(),w(e(a)[e(l)])):s.key==="Escape"&&(u(l,-1),d?.blur()))}var da=h('<div class="loading loading-spinner loading-xs"></div>'),va=(s,a,l)=>a(e(l)),ba=h('<li><button><span class="block truncate"> </span></button></li>'),fa=h('<div class="absolute z-10 mt-1 w-full"><ul class="rounded-box bg-base-100 border-base-300 max-h-60 overflow-y-auto border shadow-lg"></ul></div>'),ha=h('<div class="rounded-box bg-base-100 border-base-300 text-base-content/60 absolute z-10 mt-1 w-full border p-4 text-center text-sm shadow-lg">Aucun résultat trouvé</div>'),ga=h('<div class="relative"><label><!> <input type="text" class="grow"/> <!></label> <!> <!></div>');function ya(s,a){ta(a,!0);let l=r(a,"value",15,""),w=r(a,"placeholder",3,"Rechercher..."),d=r(a,"itemToString",3,t=>String(t)),p=r(a,"disabled",3,!1),N=r(a,"autoFocus",3,!1),A=r(a,"loading",3,!1),F=r(a,"minQueryLength",3,1),g=r(a,"maxResults",3,void 0),P=r(a,"showAllOnFocus",3,!0),U=r(a,"inputSize",3,""),n=C(-1),v=C(!1),V,b=Q(()=>{if(e(v)&&l().trim().length===0&&P())return g()?a.items.slice(0,g()):a.items;const t=l().toLowerCase().trim();if(t.length<F())return[];const i=a.items.filter(k=>d()(k).toLowerCase().includes(t));return g()?i.slice(0,g()):i}),W=Q(()=>e(v)&&e(b).length>0);function z(t){a.onSelect?.(t),l(""),u(n,-1)}function X(){u(v,!0),e(b).length>0&&e(n)===-1&&u(n,0)}function Z(){setTimeout(()=>{u(v,!1),u(n,-1)},150)}var D=ga(),y=c(D),L=c(y);ea(L,{class:"h-4 w-4 opacity-50"});var o=_(L,2);o.__keydown=[ca,b,n,z,V],la(o,()=>na({shouldFocus:N()}));var j=_(o,2);{var G=t=>{var i=da();f(t,i)};x(j,t=>{A()&&t(G)})}var R=_(y,2);{var H=t=>{var i=fa(),k=c(i);ia(k,23,()=>e(b),S=>d()(S),(S,T,Y)=>{var E=ba(),m=c(E);m.__click=[va,z,T];var I=c(m),$=c(I);O(aa=>{B(m,1,`hover:bg-base-200 focus:bg-base-200 w-full px-3 py-2 text-left text-sm ${e(Y)===e(n)&&"bg-base-200"}`),m.disabled=p(),ua($,aa)},[()=>d()(e(T))]),f(S,E)}),f(t,i)};x(R,t=>{e(W)&&t(H)})}var J=_(R,2);{var M=t=>{var i=ha();f(t,i)};x(J,t=>{e(v)&&l().length>=F()&&e(b).length===0&&!A()&&t(M)})}O(()=>{B(y,1,`input w-full ${U()??""}`),K(o,"id",a.id),K(o,"placeholder",w()),o.disabled=p()}),q("focus",o,X),q("blur",o,Z),sa(o,l),f(s,D),ra()}oa(["keydown","click"]);export{ya as A};
