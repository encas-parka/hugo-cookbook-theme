import{x as L,W as c,B as s,A as t,$ as _,X as u,Y as l,v as d,w as T,Z as J,s as S,p as K,a9 as N,D as C,E,g as r,a as R,u as P,o as Q,z as U}from"./vendor.B7h_mkEd.js";import{z as $,y as aa}from"./appwrite.5W8SCupm.js";var ea=c('<div><span class="font-semibold">Modifié le :</span> </div>'),ta=c('<div class="bg-base-200 rounded-box mt-12 p-6 text-sm opacity-60 print:hidden"><div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"><div><span class="font-semibold">Auteur :</span> </div> <div><span class="font-semibold">ID :</span> <span class="font-mono"> </span></div> <div><span class="font-semibold">Créé le :</span> </div> <!></div></div>');function ca(b,a){L(a,!0);var m=ta(),h=t(m),g=t(h),D=s(t(g)),n=s(g,2),x=s(t(n),2),I=t(x),w=s(n,2),V=s(t(w)),e=s(w,2);{var o=i=>{var y=ea(),f=s(t(y));u(k=>l(f,` ${k??""}`),[()=>new Intl.DateTimeFormat("fr-FR",{dateStyle:"long",timeStyle:"short"}).format(new Date(a.updatedAt))]),d(i,y)};_(e,i=>{a.updatedAt&&a.updatedAt!==a.createdAt&&i(o)})}u(i=>{l(D,` ${(a.auteur||a.createdBy||"Inconnu")??""}`),l(I,a.id),l(V,` ${i??""}`)},[()=>new Intl.DateTimeFormat("fr-FR",{dateStyle:"long",timeStyle:"short"}).format(new Date(a.createdAt))]),d(b,m),T()}var ra=c('<div class="card bg-base-100 mt-4 shadow-sm"><div class="card-body p-4"><div class="loading loading-spinner loading-sm"></div></div></div>'),sa=(b,a)=>aa(`/recipe/${r(a).$id}`),ia=c('<span class="badge badge-ghost badge-xs"> </span>'),da=c('<span class="badge badge-primary badge-xs badge-soft">Originale</span>'),oa=c('<button class="btn btn-ghost"><div class="flex items-center gap-2 text-sm"> <!> <!></div></button>'),na=c('<div class="card bg-base-100 mt-4 shadow-sm"><div class="card-body p-4"><h4 class="card-title flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg> </h4> <div class="flex flex-wrap gap-4"></div></div></div>');function ga(b,a){L(a,!0);let m=S(K([])),h=S(null),g=S(!0);async function D(){R(g,!0);try{const e=await $.getVariantGroup(a.recipeId,2);R(h,e.root,!0),R(m,e.variants.sort((o,i)=>o.title.localeCompare(i.title,"fr-FR")),!0)}catch(e){console.error("[RecipeVariants] Erreur chargement:",e)}finally{R(g,!1)}}N(()=>{D()});let n=P(()=>r(m).filter(e=>e.$id!==a.recipeId));var x=C(),I=E(x);{var w=e=>{var o=ra();d(e,o)},V=e=>{var o=C(),i=E(o);{var y=f=>{var k=na(),j=t(k),M=t(j),G=s(t(M)),H=s(M,2);Q(H,21,()=>r(n),U,(O,p)=>{var F=oa();F.__click=[sa,p];var W=t(F),z=t(W),B=s(z);{var X=v=>{var A=ia(),q=t(A);u(()=>l(q,r(p).versionLabel)),d(v,A)};_(B,v=>{r(p).versionLabel&&v(X)})}var Y=s(B,2);{var Z=v=>{var A=da();d(v,A)};_(Y,v=>{r(p).$id===r(h)?.$id&&v(Z)})}u(()=>l(z,`${r(p).title??""} `)),d(O,F)}),u(()=>l(G,` ${r(n).length??""} variante${r(n).length>1?"s":""}
        de cette recette`)),d(f,k)};_(i,f=>{r(n).length>0&&f(y)},!0)}d(e,o)};_(I,e=>{r(g)?e(w):e(V,!1)})}d(b,x),T()}J(["click"]);export{ca as R,ga as a};
