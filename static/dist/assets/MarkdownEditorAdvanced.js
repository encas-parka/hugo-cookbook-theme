import{j as ct,a9 as Ct,aa as Jt,W as R,$ as h,ag as Kt,X as M,v as f,w as Nt,x as Ot,g as t,s as m,a as g,an as Wt,af as ut,B as i,A as n,_,a3 as _t,Z as Xt,Y as dt,u as Yt,D as bt,E as vt}from"./vendor.js";import{c as Zt,i as Qt,f as Vt,h as $t,j as te}from"./editor.js";import{b3 as ht,b4 as ft,b5 as gt,b6 as mt,G as ee,I as ae,b7 as ne,b8 as se,H as ie,J as le,ak as re,K as oe,N as ce}from"./icons.js";function ue(l,e){t(e).chain().focus().setHorizontalRule().run()}var _e=R('<label class="label"><span class="label-text font-medium"> </span></label>'),de=(l,e)=>g(e,!t(e)),be=(l,e)=>e(0),ve=(l,e)=>e(1),he=(l,e)=>e(2),fe=(l,e)=>e(3),ge=(l,e)=>t(e).chain().focus().toggleBold().run(),me=(l,e)=>t(e).chain().focus().toggleItalic().run(),ke=(l,e)=>t(e).chain().focus().toggleStrike().run(),we=(l,e)=>t(e).chain().focus().toggleHighlight().run(),pe=(l,e)=>t(e).chain().focus().toggleBulletList().run(),xe=(l,e)=>t(e).chain().focus().toggleOrderedList().run(),ye=(l,e)=>t(e).chain().focus().undo().run(),Ae=(l,e)=>t(e).chain().focus().redo().run(),qe=R('<div class="border-base-200 bg-base-100 flex flex-wrap items-center gap-1 border-b p-1"><div><button type="button" tabindex="0" class="btn btn-ghost btn-sm gap-1" title="Titre"><!></button> <ul tabindex="-1" class="menu dropdown-content bg-base-100 rounded-box z-50 w-52 shadow-xl"><li><button type="button"><!> Paragraphe</button></li> <li><button type="button"><!> Titre 1</button></li> <li><button type="button"><!> Titre 2</button></li> <li><button type="button"><!> Titre 3</button></li></ul></div> <div class="divider divider-horizontal mx-0 h-6"></div> <button type="button" title="Gras"><!></button> <button type="button" title="Italique"><!></button> <button type="button" title="Barré"><!></button> <button type="button" title="Surlignage"><!></button> <div class="divider divider-horizontal mx-0 h-6"></div> <button type="button" title="Liste à puces"><!></button> <button type="button" title="Liste ordonnée"><!></button> <div class="divider divider-horizontal mx-0 h-6"></div> <button type="button" class="btn btn-ghost btn-square btn-sm" title="Ligne horizontale"><!></button> <div class="divider divider-horizontal mx-0 h-6"></div> <button type="button" class="btn btn-ghost btn-square btn-sm" title="Annuler"><!></button> <button type="button" class="btn btn-ghost btn-square btn-sm" title="Rétablir"><!></button></div>'),He=R('<div class="label"><span class="text-error"> </span></div>'),Le=R('<div class="form-control w-full"><!> <div><!> <div></div></div> <!></div>');function Me(l,e){Ot(e,!0);let I=ct(e,"value",15);ct(e,"placeholder",3,"Commencez à rédiger...");let k=m(null),a=m(null),o=m(0),w=m(!1),S=m(!1);const E=Yt(()=>t(a)?(t(o),t(a).isActive("heading",{level:1})?1:t(a).isActive("heading",{level:2})?2:t(a).isActive("heading",{level:3})?3:t(a).isActive("heading",{level:4})?4:t(a).isActive("heading",{level:5})?5:t(a).isActive("heading",{level:6})?6:0):0);Ct(()=>{t(k)&&g(a,new Zt({element:t(k),extensions:[Qt.configure({codeBlock:!1,blockquote:!1,heading:!1}),Vt.configure({levels:[1,2,3,4,5,6]}),$t.configure({multicolor:!1}),te,Wt.configure({html:!1,tightLists:!0})],content:I(),editorProps:{attributes:{class:"prose prose-sm max-w-none focus:outline-none h-[80dvh] p-4 prose-li:marker:text-base-content/50 overflow-auto"}},onUpdate:({editor:s})=>{const r=s.storage.markdown.getMarkdown();I()!==r&&I(r)},onSelectionUpdate:()=>{ut(o)},onTransaction:()=>{ut(o)},onFocus:()=>g(w,!0),onBlur:()=>g(w,!1)}),!0)}),Jt(()=>{t(a)&&t(a).destroy()});function p(s){s===0?t(a).chain().focus().setParagraph().run():t(a).chain().focus().setHeading({level:s}).run(),g(S,!1)}var N=Le(),O=n(N);{var kt=s=>{var r=_e(),d=n(r),b=n(d);M(()=>{_t(r,"for",e.id),dt(b,e.label)}),f(s,r)};h(O,s=>{e.label&&s(kt)})}var P=i(O,2);let W;var X=n(P);{var wt=s=>{var r=qe(),d=n(r);let b;var j=n(d);j.__click=[de,S];var yt=n(j);{var At=c=>{ft(c,{class:"h-4 w-4"})},qt=c=>{var B=bt(),G=vt(B);{var U=u=>{gt(u,{class:"h-4 w-4"})},C=u=>{var T=bt(),J=vt(T);{var K=v=>{mt(v,{class:"h-4 w-4"})},Ut=v=>{ht(v,{class:"h-4 w-4"})};h(J,v=>{t(E)===3?v(K):v(Ut,!1)},!0)}f(u,T)};h(G,u=>{t(E)===2?u(U):u(C,!1)},!0)}f(c,B)};h(yt,c=>{t(E)===1?c(At):c(qt,!1)})}var Ht=i(j,2),Z=n(Ht),Q=n(Z);Q.__click=[be,p];var Lt=n(Q);ht(Lt,{class:"h-4 w-4"});var V=i(Z,2),$=n(V);$.__click=[ve,p];var zt=n($);ft(zt,{class:"h-4 w-4"});var tt=i(V,2),et=n(tt);et.__click=[he,p];var Bt=n(et);gt(Bt,{class:"h-4 w-4"});var Tt=i(tt,2),at=n(Tt);at.__click=[fe,p];var Mt=n(at);mt(Mt,{class:"h-4 w-4"});var x=i(d,4);let nt;x.__click=[ge,a];var Rt=n(x);ee(Rt,{class:"h-4 w-4"});var y=i(x,2);let st;y.__click=[me,a];var It=n(y);ae(It,{class:"h-4 w-4"});var A=i(y,2);let it;A.__click=[ke,a];var St=n(A);ne(St,{class:"h-4 w-4"});var q=i(A,2);let lt;q.__click=[we,a];var Et=n(q);se(Et,{class:"h-4 w-4"});var H=i(q,4);let rt;H.__click=[pe,a];var Pt=n(H);ie(Pt,{class:"h-4 w-4"});var L=i(H,2);let ot;L.__click=[xe,a];var jt=n(L);le(jt,{class:"h-4 w-4"});var D=i(L,4);D.__click=[ue,a];var Dt=n(D);re(Dt,{class:"h-4 w-4"});var z=i(D,4);z.__click=[ye,a];var Ft=n(z);oe(Ft,{class:"h-4 w-4"});var F=i(z,2);F.__click=[Ae,a];var Gt=n(F);ce(Gt,{class:"h-4 w-4"}),M((c,B,G,U,C,u,T,J,K)=>{b=_(d,1,"dropdown",null,b,c),nt=_(x,1,"btn btn-ghost btn-square btn-sm",null,nt,B),st=_(y,1,"btn btn-ghost btn-square btn-sm",null,st,G),it=_(A,1,"btn btn-ghost btn-square btn-sm",null,it,U),lt=_(q,1,"btn btn-ghost btn-square btn-sm",null,lt,C),rt=_(H,1,"btn btn-ghost btn-square btn-sm",null,rt,u),ot=_(L,1,"btn btn-ghost btn-square btn-sm",null,ot,T),z.disabled=J,F.disabled=K},[()=>({"dropdown-open":t(S)}),()=>({"btn-active":t(o)>=0&&t(a).isActive("bold")}),()=>({"btn-active":t(o)>=0&&t(a).isActive("italic")}),()=>({"btn-active":t(o)>=0&&t(a).isActive("strike")}),()=>({"btn-active":t(o)>=0&&t(a).isActive("highlight")}),()=>({"btn-active":t(o)>=0&&t(a).isActive("bulletList")}),()=>({"btn-active":t(o)>=0&&t(a).isActive("orderedList")}),()=>!(t(o)>=0&&t(a).can().undo()),()=>!(t(o)>=0&&t(a).can().redo())]),f(s,r)};h(X,s=>{t(a)&&s(wt)})}var Y=i(X,2);Kt(Y,s=>g(k,s),()=>t(k));var pt=i(P,2);{var xt=s=>{var r=He(),d=n(r),b=n(d);M(()=>dt(b,e.error)),f(s,r)};h(pt,s=>{e.error&&s(xt)})}M(s=>{W=_(P,1,"bg-base-100 overflow-hidden rounded-lg border-2 transition-all",null,W,s),_t(Y,"id",e.id)},[()=>({"border-primary":t(w),"border-error":e.error,"border-base-300":!t(w)&&!e.error})]),f(l,N),Nt()}Xt(["click"]);export{Me as M};
