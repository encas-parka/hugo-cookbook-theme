import{B as Ha,a3 as at,H as tt,i as Oa,j as qa,U as Ca,p as La,a4 as it,a5 as dt,x as et,a6 as ot,a7 as vt,a8 as ct,P as Aa,a9 as lt,aa as rt,ab as _t,ac as mt,M as bt}from"./icons.js";import{Z as Ra,d as za,V as o,k as T,g as a,h as e,a2 as _,a3 as Ia,b as n,c as Ma,j as ma,m as t,u as W,a0 as M,y as ja,e as Sa,W as F,a4 as Ga,X as g,am as ut,p as Va,_ as Xa,z as Ea,q as Qa,v as xa,A as Na,a1 as Za,ah as ft,aI as gt,aq as pt}from"./appwrite.js";import{t as Ba,n as Ja}from"./index.js";import{f as xt}from"./date-helpers.js";import{T as ht,C as wt}from"./CreateTeamModal.js";import{f as Fa}from"./products-display.js";import{g as yt,a as kt,b as $t}from"./event-stats-helpers.js";import{D as Dt}from"./DocCard.js";import"./ConfirmModal.js";import"./InfoCollapse.js";function Ct(){M("/recipe")}function Ka(){M("/recipe/new")}var At=()=>window.location.reload(),Tt=o('<div class="py-6 text-center"><div class="text-error mb-2"><!></div> <p class="text-base-content/60 text-sm">Erreur de chargement des recettes</p> <button class="btn btn-ghost btn-xs mt-2">Réessayer</button></div>'),It=o('<div class="py-6 text-center"><!> <p class="text-base-content/60 mb-4 text-sm">Aucune recette publiée</p> <button class="btn btn-primary btn-sm"><!> Créer une recette</button></div>'),Et=(d,r,v)=>r(t(v).$id),jt=(d,r,v)=>{(d.key==="Enter"||d.key===" ")&&r(t(v).$id)},St=o('<span class="tfont-medium"> </span>'),Rt=o('<div class="flex items-center gap-1"><!> <span> </span></div>'),zt=o('<div class="badge badge-accent badge-outline badge-xs">brouillon</div>'),Mt=o('<div class="border-accent/60 bg-base-200 hover:bg-base-300 flex cursor-pointer items-start gap-3 rounded-lg border-l-2 p-3 transition-colors" role="button" tabindex="0"><div class="min-w-0 flex-1"><div class="flex flex-wrap items-center gap-x-10 gap-y-2"><div class="text-primary flex items-center gap-2"><svg class="text-primary h-4 w-4 flex-shrink-0"><use></use></svg> <div class="truncate text-sm font-medium"> </div> <!></div> <div class="text-base-content/50 flex items-center gap-3 text-xs"><!> <div class="flex items-center gap-1"><span> </span></div></div> <!></div></div> <!></div>'),Pt=o('<div class="mb-4"><h3 class="text-base-content/80 mb-2 text-xs font-semibold tracking-wider uppercase">Mes dernières recettes</h3> <div class="space-y-2"></div></div>'),Bt=o('<h3 class="text-base-content/80 mb-2 text-xs font-semibold tracking-wider uppercase">Dernières recettes ajoutées</h3>'),Lt=(d,r,v)=>r(t(v).$id),Vt=(d,r,v)=>{(d.key==="Enter"||d.key===" ")&&r(t(v).$id)},Nt=o('<span class="font-medium"> </span>'),qt=o('<div class="flex items-center gap-1"><!> <span> </span></div>'),Ut=o('<div class="badge badge-accent badge-outline badge-xs">brouillon</div>'),Ht=o('<div class="bg-base-200 hover:bg-base-300 flex cursor-pointer items-start gap-3 rounded-lg p-3 transition-colors" role="button" tabindex="0"><div class="min-w-0 flex-1"><div class="flex flex-wrap items-center gap-x-10 gap-y-2"><div class="text-primary flex items-center gap-2"><svg class="text-primary h-4 w-4 flex-shrink-0"><use></use></svg> <h4 class="truncate text-sm font-medium"> </h4> <!></div> <div class="text-base-content/50 flex items-center gap-3 text-xs"><!> <div class="flex items-center gap-1"><span> </span></div></div> <!></div></div> <!></div>'),Ft=o('<!> <!> <div class="space-y-3"></div> <div class="card-actions border-base-200 mt-4 justify-end border-t pt-4"><button class="btn btn-primary btn-sm btn-soft"><!> Créer une recette</button></div>',1),Ot=o('<div class="flex items-center justify-between"><h2 class="card-title flex items-center gap-2"><!> Dernières Recettes</h2> <button class="btn" title="Voir toutes les recettes">Voir tout <!></button></div> <!>',1);function Gt(d,r){za(r,!0);const v=W(()=>Ia.isInitialized?Ia.recipesIndex.filter(s=>s.auteur===ja.userName).sort((s,l)=>{const u=s.$createdAt?new Date(s.$createdAt).getTime():0;return(l.$createdAt?new Date(l.$createdAt).getTime():0)-u}).slice(0,5):[]),I=W(()=>Ia.isInitialized?Ia.recipesIndex.filter(s=>s.auteur!==ja.userName).sort((s,l)=>{const u=s.$createdAt?new Date(s.$createdAt).getTime():0;return(l.$createdAt?new Date(l.$createdAt).getTime():0)-u}).slice(0,5):[]);function E(s){return s.$createdAt?xt(s.$createdAt):"Date inconnue"}function P(s){return ut(s.typeR,s.categories)}function B(s){M(`/recipe/${s}`)}var O=Ot(),aa=T(O),ta=a(aa),C=a(ta);Ha(C,{class:"text-primary h-5 w-5 stroke-3"});var x=e(ta,2);x.__click=[Ct];var V=e(a(x));at(V,{size:16});var G=e(aa,2);{var X=s=>{var l=Tt(),u=a(l),D=a(u);tt(D,{class:"mx-auto h-8 w-8"});var Z=e(u,4);Z.__click=[At],n(s,l)},L=s=>{var l=ma(),u=T(l);{var D=k=>{var h=It(),i=a(h);Oa(i,{class:"mx-auto mb-3 h-12 w-12 opacity-20"});var p=e(i,4);p.__click=[Ka];var N=a(p);Ha(N,{class:"mr-2 h-4 w-4"}),n(k,h)},Z=k=>{var h=Ft(),i=T(h);{var p=A=>{var f=Pt(),Q=e(a(f),2);Sa(Q,21,()=>t(v),U=>U.$id,(U,w)=>{const ea=W(()=>P(t(w)));var K=Mt();K.__click=[Et,B,w],K.__keydown=[jt,B,w];var ra=a(K),ha=a(ra),sa=a(ha),na=a(sa),ba=a(na),ia=e(na,2),ua=a(ia),fa=e(ia,2);{var oa=$=>{var R=St(),pa=a(R);F(()=>g(pa,`- ${t(w).versionLabel??""}`)),n($,R)};_(fa,$=>{t(w).versionLabel&&$(oa)})}var va=e(sa,2),ca=a(va);{var ga=$=>{var R=Rt(),pa=a(R);Ca(pa,{class:"h-3 w-3"});var ka=e(pa,2),Ta=a(ka);F(()=>g(Ta,`${t(w).plate??""} pers`)),n($,R)};_(ca,$=>{t(w).plate&&$(ga)})}var wa=e(ca,2),la=a(wa),ya=a(la),y=e(va,2);{var H=$=>{var R=zt();n($,R)};_(y,$=>{t(w).draft&&$(H)})}var Y=e(ra,2);qa(Y,{class:"mt-1 h-4 w-4 flex-shrink-0 opacity-40"}),F($=>{Ga(ba,"href",`/icons/sprite.svg#${t(ea).iconId}`),g(ua,t(w).title),g(ya,`Ajouté ${$??""}`)},[()=>E(t(w))]),n(U,K)}),n(A,f)};_(i,A=>{t(v).length>0&&A(p)})}var N=e(i,2);{var j=A=>{var f=Bt();n(A,f)};_(N,A=>{t(v).length>0&&A(j)})}var S=e(N,2);Sa(S,21,()=>t(I),A=>A.$id,(A,f)=>{const Q=W(()=>P(t(f)));var U=Ht();U.__click=[Lt,B,f],U.__keydown=[Vt,B,f];var w=a(U),ea=a(w),K=a(ea),ra=a(K),ha=a(ra),sa=e(ra,2),na=a(sa),ba=e(sa,2);{var ia=y=>{var H=Nt(),Y=a(H);F(()=>g(Y,`- ${t(f).versionLabel??""}`)),n(y,H)};_(ba,y=>{t(f).versionLabel&&y(ia)})}var ua=e(K,2),fa=a(ua);{var oa=y=>{var H=qt(),Y=a(H);Ca(Y,{class:"h-3 w-3"});var $=e(Y,2),R=a($);F(()=>g(R,`${t(f).plate??""} pers`)),n(y,H)};_(fa,y=>{t(f).plate&&y(oa)})}var va=e(fa,2),ca=a(va),ga=a(ca),wa=e(ua,2);{var la=y=>{var H=Ut();n(y,H)};_(wa,y=>{t(f).draft&&y(la)})}var ya=e(w,2);qa(ya,{class:"mt-1 h-4 w-4 flex-shrink-0 opacity-40"}),F(y=>{Ga(ha,"href",`/icons/sprite.svg#${t(Q).iconId}`),g(na,t(f).title),g(ga,`Ajouté ${y??""}`)},[()=>E(t(f))]),n(A,U)});var q=e(S,2),J=a(q);J.__click=[Ka];var da=a(J);Ha(da,{class:"mr-2 h-4 w-4"}),n(k,h)};_(u,k=>{t(I).length===0?k(D):k(Z,!1)},!0)}n(s,l)};_(G,s=>{Ia.error?s(X):s(L,!1)})}n(d,O),Ma()}Ra(["click","keydown"]);var Qt=o('<div class="flex items-center justify-center py-8"><span class="loading loading-spinner loading-md"></span></div>'),Wt=o('<div class="py-6 text-center"><!> <p class="text-base-content/60 mb-4 text-sm">Aucun événement prévu</p></div>'),Xt=(d,r)=>M(`/dashboard/eventEdit/${t(r).$id}`),Zt=(d,r)=>{d.key==="Enter"||d.key},Jt=o("<!> ",1),Kt=o("<!> ",1),Yt=o('<div class="badge badge-info badge-lg ms-auto"><!> Vous êtes invité à participer</div>'),ae=o('<div class="text-primary flex items-center gap-1 font-semibold"><!> <span> </span></div>'),te=o('<div class="flex items-center gap-1"><!> <span> </span></div>'),ee=(d,r)=>{d.stopPropagation(),M(`/dashboard/eventEdit/${t(r).$id}`)},re=(d,r)=>{d.stopPropagation(),M(`/dashboard/eventEdit/recipes/${t(r).$id}`)},se=(d,r)=>{d.stopPropagation(),M(`/dashboard/eventEdit/products/${t(r).$id}`)},ne=(d,r)=>{d.stopPropagation(),M(`/dashboard/eventPosters/${t(r).$id}`)},ie=o('<div role="button" tabindex="0"><div class="min-w-0 flex-1"><div class="flex flex-wrap items-center gap-4"><div class="text-primary truncate text-lg font-semibold"> </div> <div class="badge badge-soft badge-secondary font-medium"><!></div> <div> </div> <!></div> <div class="text-base-content/60 mt-2 flex flex-wrap items-center gap-3 text-xs"><!> <!> <div class="flex items-center gap-1"><!> <span> </span></div> <div class="flex items-center gap-1"><!> <span> </span></div> <div class="flex items-center gap-1"><!> <span> </span></div></div> <div class="mt-3 flex flex-wrap justify-around gap-2"><button class="btn btn-outline btn-secondary btn-xs"><!> Éditer</button> <button class="btn btn-outline btn-secondary btn-xs"><!> Recettes</button> <button class="btn btn-outline btn-secondary btn-xs"><!> Produits</button> <button class="btn btn-outline btn-secondary btn-xs"><!> Affiches</button></div></div> <!></div>'),de=o('<div class="my-4"><div class="space-y-3"></div></div>');function Ya(d,r){za(r,!0);let v=Va(r,"events",19,()=>[]),I=Va(r,"loading",3,!1),E=Va(r,"cardClass",3,"");function P(C){return Ea.getContributorStatus(C)==="invited"}var B=ma(),O=T(B);{var aa=C=>{var x=Qt();n(C,x)},ta=C=>{var x=ma(),V=T(x);{var G=L=>{var s=Wt(),l=a(s);La(l,{size:32,class:"text-base-content/20 mx-auto mb-3"}),n(L,s)},X=L=>{var s=ma(),l=T(s);{var u=D=>{var Z=de(),k=a(Z);Sa(k,21,v,h=>h.$id,(h,i)=>{var p=ie();p.__click=[Xt,i],p.__keydown=[Zt,i];var N=a(p),j=a(N),S=a(j),q=a(S),J=e(S,2),da=a(J);{var A=c=>{var b=Jt(),z=T(b);La(z,{class:"h-4 w-4"});var $a=e(z);F((_a,Da)=>g($a,` ${_a??""} au ${Da??""}`),[()=>Fa(t(i).dateStart),()=>Fa(t(i).dateEnd)]),n(c,b)},f=c=>{var b=ma(),z=T(b);{var $a=_a=>{var Da=Kt(),Wa=T(Da);La(Wa,{class:"h-4 w-4"});var st=e(Wa);F(nt=>g(st,` ${nt??""}`),[()=>Fa(t(i).dateStart)]),n(_a,Da)};_(z,_a=>{t(i).dateStart&&_a($a)},!0)}n(c,b)};_(da,c=>{t(i).allDates&&t(i).allDates.length>1&&t(i).dateStart&&t(i).dateEnd?c(A):c(f,!1)})}var Q=e(J,2),U=a(Q),w=e(Q,2);{var ea=c=>{var b=Yt(),z=a(b);ct(z,{class:"size-4"}),n(c,b)};_(w,c=>{P(t(i).$id)&&c(ea)})}var K=e(j,2),ra=a(K);{var ha=c=>{var b=ae(),z=a(b);Ca(z,{class:"h-3 w-3"});var $a=e(z,2),_a=a($a);F(Da=>g(_a,Da),[()=>t(i).teams.join(", ")]),n(c,b)};_(ra,c=>{t(i).teams&&t(i).teams.length>0&&c(ha)})}var sa=e(ra,2);{var na=c=>{var b=te(),z=a(b);Ca(z,{class:"h-3 w-3"});var $a=e(z,2),_a=a($a);F(()=>g(_a,`${t(i).contributors.length??""} participant${t(i).contributors.length>1?"s":""}`)),n(c,b)};_(sa,c=>{t(i).contributors&&t(i).contributors.length>0&&c(na)})}var ba=e(sa,2),ia=a(ba);Oa(ia,{class:"h-3 w-3"});var ua=e(ia,2),fa=a(ua),oa=e(ba,2),va=a(oa);Oa(va,{class:"h-3 w-3"});var ca=e(va,2),ga=a(ca),wa=e(oa,2),la=a(wa);it(la,{class:"h-3 w-3"});var ya=e(la,2),y=a(ya),H=e(K,2),Y=a(H);Y.__click=[ee,i];var $=a(Y);dt($,{class:"h-3 w-3"});var R=e(Y,2);R.__click=[re,i];var pa=a(R);et(pa,{class:"h-3 w-3"});var ka=e(R,2);ka.__click=[se,i];var Ta=a(ka);ot(Ta,{class:"h-3 w-3"});var Pa=e(ka,2);Pa.__click=[ne,i];var Ua=a(Pa);vt(Ua,{class:"h-3 w-3"});var m=e(N,2);qa(m,{class:"mt-1 h-4 w-4 flex-shrink-0 opacity-40"}),F((c,b,z)=>{Xa(p,1,`bg-base-200/60 hover:bg-base-200 flex cursor-pointer items-start gap-3 rounded-lg p-3 transition-colors ${E()??""}`),Ga(p,"title",`Voir les détails de ${t(i).name??""}`),g(q,t(i).name),Xa(Q,1,`badge badge-outline badge-sm font-medium ${t(i).status==="proposition"?"badge-accent":"badge-success"}`),g(U,t(i).status==="proposition"?"proposition":"confirmé"),g(fa,`${c??""} repas`),g(ga,`${b??""} recettes`),g(y,`${z??""} tâches`)},[()=>yt(t(i)),()=>kt(t(i)),()=>$t(t(i))]),n(h,p)}),n(D,Z)};_(l,D=>{v().length>0&&D(u)})}n(L,s)};_(V,L=>{v().length===0?L(G):L(X,!1)},!0)}n(C,x)};_(O,C=>{I()?C(aa):C(ta,!1)})}n(d,B),Ma()}Ra(["click","keydown"]);function oe(d,r){M(`/documents/${r.teamId}`)}function ve(d,r){M(`/createdocument/${r.teamId}/new`)}var ce=o('<div class="py-6 text-center"><span class="loading loading-spinner loading-md text-primary"></span> <p class="text-base-content/60 mt-2 text-sm">Chargement...</p></div>'),le=o('<div class="py-6 text-center"><div class="text-error mb-2"><!></div> <p class="text-base-content/60 text-sm">Erreur de chargement des documents</p></div>'),_e=o('<div class="py-6 text-center"><!> <p class="text-base-content/60 mb-4 text-sm">Aucun document</p></div>'),me=o('<div class="space-y-2"></div>'),be=o('<div class="card bg-base-100 card-sm border-neutral/20 border shadow-sm"><div class="card-body"><div class="flex flex-wrap items-center justify-between"><h2 class="card-title flex items-center gap-2"><!> Documents récents</h2> <button class="btn btn-sm" title="Voir tous les documents">Voir tout <!></button></div> <!> <div class="card-actions mt-4 justify-end pt-4"><button class="btn btn-primary btn-soft btn-sm"><!> Créer un document</button></div></div></div>');function ue(d,r){za(r,!0);const v=W(()=>Ba.isInitialized?Ba.getTeamDocuments(r.teamId).sort((s,l)=>{const u=s.$updatedAt?new Date(s.$updatedAt).getTime():0;return(l.$updatedAt?new Date(l.$updatedAt).getTime():0)-u}).slice(0,5):[]);var I=be(),E=a(I),P=a(E),B=a(P),O=a(B);et(O,{class:"text-primary h-5 w-5"});var aa=e(B,2);aa.__click=[oe,r];var ta=e(a(aa));at(ta,{size:16});var C=e(P,2);{var x=s=>{var l=ce();n(s,l)},V=s=>{var l=ma(),u=T(l);{var D=k=>{var h=le(),i=a(h),p=a(i);tt(p,{class:"mx-auto h-8 w-8"}),n(k,h)},Z=k=>{var h=ma(),i=T(h);{var p=j=>{var S=_e(),q=a(S);lt(q,{size:32,class:"text-base-content/20 mx-auto mb-3"}),n(j,S)},N=j=>{var S=me();Sa(S,21,()=>t(v),q=>q.$id,(q,J)=>{Dt(q,{get doc(){return t(J)},get teamId(){return r.teamId}})}),n(j,S)};_(i,j=>{t(v).length===0?j(p):j(N,!1)},!0)}n(k,h)};_(u,k=>{Ba.error?k(D):k(Z,!1)},!0)}n(s,l)};_(C,s=>{Ba.loading?s(x):s(V,!1)})}var G=e(C,2),X=a(G);X.__click=[ve,r];var L=a(X);Aa(L,{class:"h-4 w-4"}),n(d,I),Ma()}Ra(["click"]);function fe(d,r,v){xa(r,"members"),xa(v,!0)}function ge(d,r,v){xa(r,"invitations"),xa(v,!0)}function pe(d,r){M(`/dashboard/eventCreate?teamId=${r.team.$id}`)}function xe(d,r){M(`/dashboard/materiel/${r.team.$id}`)}function he(d,r){M(`/dashboard/loans/${r.team.$id}`)}function we(){M("/eventList")}var ye=o('<div class="badge badge-soft badge-secondary gap-1"><!> </div>'),ke=o('<div class="fieldset-legend">Récents</div> <!>',1),$e=o(`<div class="card bg-base-100 border-base-200 border shadow-xl"><div class="card-body gap-4"><div class="flex items-start justify-between gap-2"><div class="flex items-center gap-2"><!> <h2> </h2> <!></div> <button class="btn btn-circle btn-ghost" title="Paramètres de l'équipe"><!></button></div> <div class="grid grid-cols-1 gap-4 md:grid-cols-2"><div class="card card-sm border-neutral/20 shoadow-sm self-start border"><div class="card-body"><div class="flex flex-wrap items-center justify-between gap-2 text-sm"><div class=" flex items-center gap-2"><!> <span class="text-base-content/70"> </span></div> <div class="ms-auto flex items-center gap-4"><div class="badge badge-primary badge-lg badge-outline ml-auto"> </div> <button class="btn btn-sm btn-accent"><!> Inviter</button></div></div></div></div> <div class="card border-neutral/20 card-sm flex w-full justify-center border shadow-sm"><div class="card-body"><div class="card card-sm bg-base-300"><div class="card-body text-center"><p class="font-semibold">Gérez le matériel collectif de cantine :</p> <p>inventaire, gestion des emprunt, partage, etc.</p></div></div> <fieldset class="fieldset w-48"><div class="flex justify-around gap-2"><button class="btn btn-primary btn-soft btn-wide"><!> Inventaire</button> <button class="btn btn-primary btn-soft btn-wide"><!> Réservations</button></div></fieldset></div></div></div> <div class="card grid grid-cols-1 gap-6 text-sm md:grid-cols-2"><div class="card card-sm border-neutral/20 border shadow-sm"><div class="card-body"><div class="flex flex-wrap justify-between gap-2"><h3 class="card-title items-center"><!> Événements</h3> <button class="btn btn-sm">Voir les événements passés <!></button></div> <!> <!> <div class="card-actions mt-auto items-center justify-end"><button class="btn btn-primary btn-soft btn-sm ml-auto"><!> Créer un événement</button></div></div></div> <div><!></div></div> <div class="flex justify-center"></div></div></div> <!>`,1);function De(d,r){za(r,!0);let v=Va(r,"loading",3,!1),I=Qa(!1),E=Qa("");const P=W(()=>{const m=r.team.prefs||{};return m.city||m.location||m.region||null}),B=W(()=>r.team.members||[]),O=W(()=>Na.getTeamMemberNames(r.team.$id)),aa=W(()=>t(O).length<=20?t(O).join(", "):`${t(O).slice(0,20).join(", ")} +${t(O).length-20}`),ta=W(()=>r.allEvents.filter(m=>m.teamsId?.includes(r.team.$id)||m.teams?.includes(r.team.name))),C=W(()=>{const m=new Date;return m.setHours(0,0,0,0),t(ta).filter(c=>(c.dateEnd?new Date(c.dateEnd):new Date(c.dateStart))>=m)}),x=W(()=>{const m=new Date;return m.setHours(0,0,0,0),t(ta).filter(c=>(c.dateEnd?new Date(c.dateEnd):new Date(c.dateStart))<m).slice(0,3)});var V=$e(),G=T(V),X=a(G),L=a(X),s=a(L),l=a(s);Ca(l,{class:"text-primary size-6 flex-shrink-0 stroke-3"});var u=e(l,2),D=a(u),Z=e(u,2);{var k=m=>{var c=ye(),b=a(c);bt(b,{class:"h-3 w-3"});var z=e(b);F(()=>g(z,` ${t(P)??""}`)),n(m,c)};_(Z,m=>{t(P)&&m(k)})}var h=e(s,2);h.__click=[fe,E,I];var i=a(h);rt(i,{});var p=e(L,2),N=a(p),j=a(N),S=a(j),q=a(S),J=a(q);Ca(J,{class:"inline size-5 shrink-0 opacity-70"});var da=e(J,2),A=a(da),f=e(q,2),Q=a(f),U=a(Q),w=e(Q,2);w.__click=[ge,E,I];var ea=a(w);Aa(ea,{class:"h-4 w-4"});var K=e(N,2),ra=a(K),ha=e(a(ra),2),sa=a(ha),na=a(sa);na.__click=[xe,r];var ba=a(na);_t(ba,{class:"size-4"});var ia=e(na,2);ia.__click=[he,r];var ua=a(ia);mt(ua,{class:"size-4"});var fa=e(p,2),oa=a(fa),va=a(oa),ca=a(va),ga=a(ca),wa=a(ga);La(wa,{class:"text-primary inline size-5"});var la=e(ga,2);la.__click=[we];var ya=e(a(la));qa(ya,{class:"ml-2 h-4 w-4"});var y=e(ca,2);Ya(y,{get events(){return t(C)},get loading(){return v()},cardClass:"border-l-4 border-accent"});var H=e(y,2);{var Y=m=>{var c=ke(),b=e(T(c),2);Ya(b,{get events(){return t(x)},get loading(){return v()}}),n(m,c)};_(H,m=>{t(x).length>0&&m(Y)})}var $=e(H,2),R=a($);R.__click=[pe,r];var pa=a(R);Aa(pa,{class:"h-4 w-4"});var ka=e(oa,2),Ta=a(ka);ue(Ta,{get teamId(){return r.team.$id}});var Pa=e(G,2);{var Ua=m=>{ht(m,{get teamId(){return r.team.$id},onClose:()=>xa(I,!1),get initialTab(){return t(E)}})};_(Pa,m=>{t(I)&&m(Ua)})}F(()=>{g(D,r.team.name),g(A,t(aa)),g(U,`${t(B).length??""} membre${t(B).length>1?"s":""}`)}),n(d,V),Ma()}Ra(["click"]);const Ce=d=>{var r=Ie(),v=a(r);v.__click=[Ae];var I=a(v);Aa(I,{class:"h-4 w-4"});var E=e(v,2);E.__click=[Te];var P=a(E);Aa(P,{class:"h-4 w-4"}),n(d,r)};var Ae=()=>M("/dashboard/eventCreate"),Te=()=>M("/recipe/new"),Ie=o('<div class="flex gap-2"><button class="btn btn-primary"><!> Créer un Événement</button> <button class="btn btn-primary"><!> Créer une Recette</button></div>'),Ee=()=>{},je=o('<div class="bg-base-100 border-base-200 rounded-xl border p-8 text-center shadow-sm"><!> <h2 class="mb-2 text-xl font-semibold">Connectez-vous pour accéder à votre tableau de bord</h2> <p class="text-base-content/60 mb-6">Connectez-vous pour voir vos équipes, événements et recettes.</p> <button class="btn btn-primary">Se connecter</button></div>'),Se=o('<div class="alert alert-error shadow-lg"><span> </span></div>'),Re=(d,r)=>xa(r,!0),ze=o('<section class="bg-base-200 py-8"><div class="container mx-auto px-4"><div class="mb-4 flex items-center justify-between gap-4"><button class="btn btn-primary btn-sm ms-auto"><!> Créer une équipe</button></div> <div class="grid grid-cols-1 gap-6"></div></div></section>'),Me=o('<!> <div class="card bg-base-100 border-base-200 border shadow-xl"><div class="card-body"><!></div></div>',1),Pe=o('<div class="bg-base-200 min-h-screen"><div class="mx-auto max-w-7xl px-4 py-8"><!></div></div> <!>',1);function Qe(d,r){za(r,!0);let v=Qa(!1);Za(()=>{gt(),pt()});function I(x){xa(v,!1)}Za(()=>{Ja.setConfig({title:"Dashboard",actions:Ce})}),ft(()=>{Ja.reset()});var E=Pe(),P=T(E),B=a(P),O=a(B);{var aa=x=>{var V=je(),G=a(V);rt(G,{class:"mx-auto mb-4 h-16 w-16 opacity-20"});var X=e(G,6);X.__click=[Ee],n(x,V)},ta=x=>{var V=ma(),G=T(V);{var X=s=>{var l=Se(),u=a(l),D=a(u);F(()=>g(D,Ea.error||Na.error||"Une erreur est survenue")),n(s,l)},L=s=>{var l=Me(),u=T(l);{var D=i=>{var p=ze(),N=a(p),j=a(N),S=a(j);S.__click=[Re,v];var q=a(S);Aa(q,{class:"size-4"});var J=e(j,2);Sa(J,20,()=>ja.userTeams,da=>da,(da,A)=>{const f=W(()=>Na.getTeamById(A));var Q=ma(),U=T(Q);{var w=ea=>{De(ea,{get team(){return t(f)},get allEvents(){return Ea.events},get loading(){return Ea.loading}})};_(U,ea=>{t(f)&&ea(w)})}n(da,Q)}),n(i,p)};_(u,i=>{ja.userTeams.length>0&&i(D)})}var Z=e(u,2),k=a(Z),h=a(k);Gt(h,{}),n(s,l)};_(G,s=>{Ea.error||Na.error?s(X):s(L,!1)},!0)}n(x,V)};_(O,x=>{ja.isAuthenticated?x(ta,!1):x(aa)})}var C=e(P,2);wt(C,{get isOpen(){return t(v)},onClose:()=>xa(v,!1),onSuccess:I}),n(d,E),Ma()}Ra(["click"]);export{Qe as default};
