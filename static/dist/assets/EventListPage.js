import{a0 as qa,n as A,M as Ra,g as N,a2 as Ta,a3 as Ua,v as za,a4 as Ba,a5 as Fa,U as O}from"./icons.js";import{af as Ia,V as f,g as t,a2 as m,b as v,c as Va,d as Wa,v as D,z as Q,q as Y,h as r,a0 as b,Z as Xa,m as a,j as aa,k as E,u as Za,e as Ga,W as w,X as p}from"./appwrite.js";import{g as Ha,a as Ja,b as Ka}from"./event-stats-helpers.js";import{f as L}from"./products-display.js";function Na(){b("/dashboard")}var Oa=f('<div class="flex items-center justify-center py-8"><span class="loading loading-spinner loading-md"></span></div>'),Qa=f('<div class="py-6 text-center"><!> <p class="text-base-content/60">Aucun événement passé</p></div>'),Ya=(o,n)=>b(`/dashboard/eventEdit/${a(n).$id}`),at=(o,n)=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),b(`/dashboard/eventEdit/${a(n).$id}`))},tt=f("<!> ",1),st=f("<!> ",1),rt=f('<div class="flex items-center gap-1"><!> <span> </span></div>'),et=f('<div class="flex items-center gap-1"><!> <span> </span></div>'),ot=(o,n)=>{o.stopPropagation(),b(`/dashboard/eventEdit/${a(n).$id}`)},nt=(o,n)=>{o.stopPropagation(),b(`/dashboard/eventEdit/recipes/${a(n).$id}`)},it=(o,n)=>{o.stopPropagation(),b(`/dashboard/eventEdit/products/${a(n).$id}`)},dt=(o,n)=>{o.stopPropagation(),b(`/dashboard/eventPosters/${a(n).$id}`)},vt=f('<div class="bg-base-200 hover:bg-base-300 flex cursor-pointer items-start gap-3 rounded-lg p-3 transition-colors" role="button" tabindex="0"><div class="min-w-0 flex-1"><div class="flex flex-wrap items-center gap-4"><div class="text-primary truncate text-lg font-semibold"> </div> <div class="badge badge-soft badge-secondary font-medium"><!></div></div> <div class="text-base-content/60 mt-2 flex flex-wrap items-center gap-3 text-xs"><div class="flex items-center gap-1"><!> <span> </span></div> <!> <div class="flex items-center gap-1"><!> <span> </span></div> <div class="flex items-center gap-1"><!> <span> </span></div> <div class="flex items-center gap-1"><!> <span> </span></div> <!></div> <div class="mt-3 flex flex-wrap gap-2"><button class="btn btn-outline btn-xs"><!> Éditer</button> <button class="btn btn-outline btn-xs"><!> Recettes</button> <button class="btn btn-outline btn-xs"><!> Produits</button> <button class="btn btn-outline btn-xs"><!> Affiches</button></div></div></div>'),lt=f('<div class="space-y-3"></div>'),ct=f('<div class="container mx-auto p-4"><div class="mb-4 flex items-center gap-2"><button class="btn btn-ghost btn-sm"><!></button> <h1 class="text-2xl font-bold">Événements passés</h1></div> <!></div>');function ut(o,n){Wa(n,!0);let M=Za(()=>Q.pastEvents),$=Y(!1),ta=Y(!1);Ia(async()=>{D($,!0);try{await Q.loadAllPastEvents(),D(ta,!0)}catch(l){console.error("[EventListPage] Erreur lors du chargement:",l)}finally{D($,!1)}});function sa(l){return"Lieu à définir"}var j=ct(),q=t(j),R=t(q);R.__click=[Na];var ra=t(R);qa(ra,{class:"h-4 w-4"});var ea=r(q,2);{var oa=l=>{var k=Oa();v(l,k)},na=l=>{var k=aa(),ia=E(k);{var da=u=>{var h=Qa(),x=t(h);A(x,{class:"mx-auto mb-3 h-12 w-12 opacity-20"}),v(u,h)},va=u=>{var h=lt();Ga(h,21,()=>a(M),x=>x.$id,(x,s)=>{var y=vt();y.__click=[Ya,s],y.__keydown=[at,s];var la=t(y),T=t(la),U=t(T),ca=t(U),_a=r(U,2),pa=t(_a);{var fa=e=>{var i=tt(),d=E(i);A(d,{class:"h-4 w-4"});var c=r(d);w((_,g)=>p(c,` ${_??""} au ${g??""}`),[()=>L(a(s).dateStart),()=>L(a(s).dateEnd)]),v(e,i)},ba=e=>{var i=aa(),d=E(i);{var c=_=>{var g=st(),K=E(g);A(K,{class:"h-4 w-4"});var Ma=r(K);w(ja=>p(Ma,` ${ja??""}`),[()=>L(a(s).dateStart)]),v(_,g)};m(d,_=>{a(s).dateStart&&_(c)},!0)}v(e,i)};m(pa,e=>{a(s).allDates&&a(s).allDates.length>1&&a(s).dateStart&&a(s).dateEnd?e(fa):e(ba,!1)})}var z=r(T,2),B=t(z),F=t(B);Ra(F,{class:"h-3 w-3"});var ua=r(F,2),ga=t(ua),I=r(B,2);{var ma=e=>{var i=rt(),d=t(i);O(d,{class:"h-3 w-3"});var c=r(d,2),_=t(c);w(()=>p(_,`${a(s).contributors.length??""} participant${a(s).contributors.length>1?"s":""}`)),v(e,i)};m(I,e=>{a(s).contributors&&a(s).contributors.length>0&&e(ma)})}var V=r(I,2),W=t(V);N(W,{class:"h-3 w-3"});var ha=r(W,2),xa=t(ha),X=r(V,2),Z=t(X);N(Z,{class:"h-3 w-3"});var wa=r(Z,2),ka=t(wa),G=r(X,2),H=t(G);Ta(H,{class:"h-3 w-3"});var ya=r(H,2),Ea=t(ya),$a=r(G,2);{var Pa=e=>{var i=et(),d=t(i);O(d,{class:"h-3 w-3"});var c=r(d,2),_=t(c);w(g=>p(_,g),[()=>a(s).teams.join(", ")]),v(e,i)};m($a,e=>{a(s).teams&&a(s).teams.length>0&&e(Pa)})}var Sa=r(z,2),P=t(Sa);P.__click=[ot,s];var Ca=t(P);Ua(Ca,{class:"h-3 w-3"});var S=r(P,2);S.__click=[nt,s];var Aa=t(S);za(Aa,{class:"h-3 w-3"});var C=r(S,2);C.__click=[it,s];var Da=t(C);Ba(Da,{class:"h-3 w-3"});var J=r(C,2);J.__click=[dt,s];var La=t(J);Fa(La,{class:"h-3 w-3"}),w((e,i,d,c)=>{p(ca,a(s).name),p(ga,e),p(xa,`${i??""} repas`),p(ka,`${d??""} recettes`),p(Ea,`${c??""} tâches`)},[()=>sa(a(s)),()=>Ha(a(s)),()=>Ja(a(s)),()=>Ka(a(s))]),v(x,y)}),v(u,h)};m(ia,u=>{a(M).length===0?u(da):u(va,!1)},!0)}v(l,k)};m(ea,l=>{a($)?l(oa):l(na,!1)})}v(o,j),Va()}Xa(["click","keydown"]);export{ut as default};
