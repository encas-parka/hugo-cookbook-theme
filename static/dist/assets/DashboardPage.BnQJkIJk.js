import{Z as za,x as Ra,W as o,E as T,A as a,B as e,$ as _,v as n,w as Ma,D as ma,g as t,u as X,o as Sa,X as N,a3 as Oa,Y as f,j as Pa,_ as Xa,s as Ga,a as ha,b as Ya,aa as nt}from"./vendor.B7h_mkEd.js";import{z as Ea,y as R,a as Ca,B as it,e as ja,n as Va,L as dt,C as ot}from"./appwrite.5W8SCupm.js";import{t as La,n as Za}from"./index.BUL8Pmq2.js";import{f as vt}from"./date-helpers.B6zph3v7.js";import{B as Fa,a1 as at,g as Qa,h as Ua,U as Aa,n as Na,a2 as ct,a3 as lt,v as tt,a4 as _t,a5 as mt,a6 as ut,P as Ta,a7 as bt,a8 as et,a9 as ft,aa as gt,M as pt}from"./icons.DKN5kzXq.js";import{T as xt,C as ht}from"./CreateTeamModal.Df7lWUPu.js";import{f as Ha}from"./products-display.CZc2PMhO.js";import{g as wt,a as yt,b as kt}from"./event-stats-helpers.D4lUGopr.js";import{D as $t}from"./DocCard.D6EC_dgn.js";import"./editor.L4rklAfR.js";import"./markdown.BkFahWn2.js";import"./ConfirmModal.DRp-kO_g.js";import"./InfoCollapse.CWSikkxb.js";function Dt(){R("/recipe")}function Ja(){R("/recipe/new")}var Ct=()=>window.location.reload(),At=o('<div class="py-6 text-center"><div class="text-error mb-2"><svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div> <p class="text-base-content/60 text-sm">Erreur de chargement des recettes</p> <button class="btn btn-ghost btn-xs mt-2">Réessayer</button></div>'),Tt=o('<div class="py-6 text-center"><!> <p class="text-base-content/60 mb-4 text-sm">Aucune recette publiée</p> <button class="btn btn-primary btn-sm"><!> Créer une recette</button></div>'),It=(d,r,v)=>r(t(v).$id),Et=(d,r,v)=>{(d.key==="Enter"||d.key===" ")&&r(t(v).$id)},jt=o('<span class="tfont-medium"> </span>'),St=o('<div class="flex items-center gap-1"><!> <span> </span></div>'),zt=o('<div class="badge badge-accent badge-outline badge-xs">brouillon</div>'),Rt=o('<div class="border-accent/60 bg-base-200 hover:bg-base-300 flex cursor-pointer items-start gap-3 rounded-lg border-l-2 p-3 transition-colors" role="button" tabindex="0"><div class="min-w-0 flex-1"><div class="flex flex-wrap items-center gap-x-10 gap-y-2"><div class="text-primary flex items-center gap-2"><svg class="text-primary h-4 w-4 flex-shrink-0"><use></use></svg> <div class="truncate text-sm font-medium"> </div> <!></div> <div class="text-base-content/50 flex items-center gap-3 text-xs"><!> <div class="flex items-center gap-1"><span> </span></div></div> <!></div></div> <!></div>'),Mt=o('<div class="mb-4"><h3 class="text-base-content/80 mb-2 text-xs font-semibold tracking-wider uppercase">Mes dernières recettes</h3> <div class="space-y-2"></div></div>'),Bt=o('<h3 class="text-base-content/80 mb-2 text-xs font-semibold tracking-wider uppercase">Dernières recettes ajoutées</h3>'),Lt=(d,r,v)=>r(t(v).$id),Pt=(d,r,v)=>{(d.key==="Enter"||d.key===" ")&&r(t(v).$id)},Vt=o('<span class="font-medium"> </span>'),Nt=o('<div class="flex items-center gap-1"><!> <span> </span></div>'),Ut=o('<div class="badge badge-accent badge-outline badge-xs">brouillon</div>'),qt=o('<div class="bg-base-200 hover:bg-base-300 flex cursor-pointer items-start gap-3 rounded-lg p-3 transition-colors" role="button" tabindex="0"><div class="min-w-0 flex-1"><div class="flex flex-wrap items-center gap-x-10 gap-y-2"><div class="text-primary flex items-center gap-2"><svg class="text-primary h-4 w-4 flex-shrink-0"><use></use></svg> <div class="truncate text-sm font-medium"> </div> <!></div> <div class="text-base-content/50 flex items-center gap-3 text-xs"><!> <div class="flex items-center gap-1"><span> </span></div></div> <!></div></div> <!></div>'),Ft=o('<!> <!> <div class="space-y-3"></div> <div class="card-actions border-base-200 mt-4 justify-end border-t pt-4"><button class="btn btn-primary btn-sm btn-soft"><!> Créer une recette</button></div>',1),Ht=o('<div class="flex items-center justify-between"><h2 class="card-title flex items-center gap-2"><!> Dernières Recettes</h2> <button class="btn" title="Voir toutes les recettes">Voir tout <!></button></div> <!>',1);function Ot(d,r){Ra(r,!0);const v=X(()=>Ea.isInitialized?Ea.recipesIndex.filter(s=>s.auteur===Ca.userName).sort((s,l)=>{const w=s.$createdAt?new Date(s.$createdAt).getTime():0;return(l.$createdAt?new Date(l.$createdAt).getTime():0)-w}).slice(0,5):[]),I=X(()=>Ea.isInitialized?Ea.recipesIndex.filter(s=>s.auteur!==Ca.userName).sort((s,l)=>{const w=s.$createdAt?new Date(s.$createdAt).getTime():0;return(l.$createdAt?new Date(l.$createdAt).getTime():0)-w}).slice(0,5):[]);function E(s){return s.$createdAt?vt(s.$createdAt):"Date inconnue"}function M(s){return it(s.typeR,s.categories)}function j(s){R(`/recipe/${s}`)}var Q=Ht(),aa=T(Q),ta=a(aa),D=a(ta);Fa(D,{class:"text-primary h-5 w-5"});var U=e(ta,2);U.__click=[Dt];var ea=e(a(U));at(ea,{size:16});var ra=e(aa,2);{var sa=s=>{var l=At(),w=e(a(l),4);w.__click=[Ct],n(s,l)},h=s=>{var l=ma(),w=T(l);{var q=u=>{var g=Tt(),i=a(g);Qa(i,{class:"mx-auto mb-3 h-12 w-12 opacity-20"});var $=e(i,4);$.__click=[Ja];var F=a($);Fa(F,{class:"mr-2 h-4 w-4"}),n(u,g)},B=u=>{var g=Ft(),i=T(g);{var $=A=>{var p=Mt(),Z=e(a(p),2);Sa(Z,21,()=>t(v),H=>H.$id,(H,x)=>{const ia=X(()=>M(t(x)));var V=Rt();V.__click=[It,j,x],V.__keydown=[Et,j,x];var W=a(V),da=a(W),J=a(da),O=a(J),ba=a(O),na=e(O,2),fa=a(na),ga=e(na,2);{var oa=k=>{var S=jt(),xa=a(S);N(()=>f(xa,`- ${t(x).versionLabel??""}`)),n(k,S)};_(ga,k=>{t(x).versionLabel&&k(oa)})}var va=e(J,2),ca=a(va);{var pa=k=>{var S=St(),xa=a(S);Aa(xa,{class:"h-3 w-3"});var ka=e(xa,2),Ia=a(ka);N(()=>f(Ia,`${t(x).plate??""} pers`)),n(k,S)};_(ca,k=>{t(x).plate&&k(pa)})}var wa=e(ca,2),la=a(wa),ya=a(la),y=e(va,2);{var G=k=>{var S=zt();n(k,S)};_(y,k=>{t(x).draft&&k(G)})}var K=e(W,2);Ua(K,{class:"mt-1 h-4 w-4 flex-shrink-0 opacity-40"}),N(k=>{Oa(ba,"href",`/icons/sprite.svg#${t(ia).iconId}`),f(fa,t(x).title),f(ya,`Ajouté ${k??""}`)},[()=>E(t(x))]),n(H,V)}),n(A,p)};_(i,A=>{t(v).length>0&&A($)})}var F=e(i,2);{var L=A=>{var p=Bt();n(A,p)};_(F,A=>{t(v).length>0&&A(L)})}var C=e(F,2);Sa(C,21,()=>t(I),A=>A.$id,(A,p)=>{const Z=X(()=>M(t(p)));var H=qt();H.__click=[Lt,j,p],H.__keydown=[Pt,j,p];var x=a(H),ia=a(x),V=a(ia),W=a(V),da=a(W),J=e(W,2),O=a(J),ba=e(J,2);{var na=y=>{var G=Vt(),K=a(G);N(()=>f(K,`- ${t(p).versionLabel??""}`)),n(y,G)};_(ba,y=>{t(p).versionLabel&&y(na)})}var fa=e(V,2),ga=a(fa);{var oa=y=>{var G=Nt(),K=a(G);Aa(K,{class:"h-3 w-3"});var k=e(K,2),S=a(k);N(()=>f(S,`${t(p).plate??""} pers`)),n(y,G)};_(ga,y=>{t(p).plate&&y(oa)})}var va=e(ga,2),ca=a(va),pa=a(ca),wa=e(fa,2);{var la=y=>{var G=Ut();n(y,G)};_(wa,y=>{t(p).draft&&y(la)})}var ya=e(x,2);Ua(ya,{class:"mt-1 h-4 w-4 flex-shrink-0 opacity-40"}),N(y=>{Oa(da,"href",`/icons/sprite.svg#${t(Z).iconId}`),f(O,t(p).title),f(pa,`Ajouté ${y??""}`)},[()=>E(t(p))]),n(A,H)});var P=e(C,2),Y=a(P);Y.__click=[Ja];var ua=a(Y);Fa(ua,{class:"mr-2 h-4 w-4"}),n(u,g)};_(w,u=>{t(I).length===0?u(q):u(B,!1)},!0)}n(s,l)};_(ra,s=>{Ea.error?s(sa):s(h,!1)})}n(d,Q),Ma()}za(["click","keydown"]);var Gt=o('<div class="flex items-center justify-center py-8"><span class="loading loading-spinner loading-md"></span></div>'),Qt=o('<div class="py-6 text-center"><!> <p class="text-base-content/60 mb-4 text-sm">Aucun événement prévu</p></div>'),Wt=(d,r)=>R(`/dashboard/eventEdit/${t(r).$id}`),Xt=(d,r)=>{d.key==="Enter"||d.key},Yt=o("<!> ",1),Zt=o("<!> ",1),Jt=o('<div class="badge badge-info badge-lg ms-auto"><!> Vous êtes invité à participer</div>'),Kt=o('<div class="text-primary flex items-center gap-1 font-semibold"><!> <span> </span></div>'),ae=o('<div class="flex items-center gap-1"><!> <span> </span></div>'),te=(d,r)=>{d.stopPropagation(),R(`/dashboard/eventEdit/${t(r).$id}`)},ee=(d,r)=>{d.stopPropagation(),R(`/dashboard/eventEdit/recipes/${t(r).$id}`)},re=(d,r)=>{d.stopPropagation(),R(`/dashboard/eventEdit/products/${t(r).$id}`)},se=(d,r)=>{d.stopPropagation(),R(`/dashboard/eventPosters/${t(r).$id}`)},ne=o('<div role="button" tabindex="0"><div class="min-w-0 flex-1"><div class="flex flex-wrap items-center gap-4"><div class="text-primary truncate text-lg font-semibold"> </div> <div class="badge badge-soft badge-secondary font-medium"><!></div> <div> </div> <!></div> <div class="text-base-content/60 mt-2 flex flex-wrap items-center gap-3 text-xs"><!> <!> <div class="flex items-center gap-1"><!> <span> </span></div> <div class="flex items-center gap-1"><!> <span> </span></div> <div class="flex items-center gap-1"><!> <span> </span></div></div> <div class="mt-3 flex flex-wrap justify-around gap-2"><button class="btn btn-outline btn-secondary btn-xs"><!> Éditer</button> <button class="btn btn-outline btn-secondary btn-xs"><!> Recettes</button> <button class="btn btn-outline btn-secondary btn-xs"><!> Produits</button> <button class="btn btn-outline btn-secondary btn-xs"><!> Affiches</button></div></div> <!></div>'),ie=o('<div class="my-4"><div class="space-y-3"></div></div>');function Ka(d,r){Ra(r,!0);let v=Pa(r,"events",19,()=>[]),I=Pa(r,"loading",3,!1),E=Pa(r,"cardClass",3,"");function M(D){return ja.getContributorStatus(D)==="invited"}var j=ma(),Q=T(j);{var aa=D=>{var U=Gt();n(D,U)},ta=D=>{var U=ma(),ea=T(U);{var ra=h=>{var s=Qt(),l=a(s);Na(l,{size:32,class:"text-base-content/20 mx-auto mb-3"}),n(h,s)},sa=h=>{var s=ma(),l=T(s);{var w=q=>{var B=ie(),u=a(B);Sa(u,21,v,g=>g.$id,(g,i)=>{var $=ne();$.__click=[Wt,i],$.__keydown=[Xt,i];var F=a($),L=a(F),C=a(L),P=a(C),Y=e(C,2),ua=a(Y);{var A=c=>{var b=Yt(),z=T(b);Na(z,{class:"h-4 w-4"});var $a=e(z);N((_a,Da)=>f($a,` ${_a??""} au ${Da??""}`),[()=>Ha(t(i).dateStart),()=>Ha(t(i).dateEnd)]),n(c,b)},p=c=>{var b=ma(),z=T(b);{var $a=_a=>{var Da=Zt(),Wa=T(Da);Na(Wa,{class:"h-4 w-4"});var rt=e(Wa);N(st=>f(rt,` ${st??""}`),[()=>Ha(t(i).dateStart)]),n(_a,Da)};_(z,_a=>{t(i).dateStart&&_a($a)},!0)}n(c,b)};_(ua,c=>{t(i).allDates&&t(i).allDates.length>1&&t(i).dateStart&&t(i).dateEnd?c(A):c(p,!1)})}var Z=e(Y,2),H=a(Z),x=e(Z,2);{var ia=c=>{var b=Jt(),z=a(b);ut(z,{class:"size-4"}),n(c,b)};_(x,c=>{M(t(i).$id)&&c(ia)})}var V=e(L,2),W=a(V);{var da=c=>{var b=Kt(),z=a(b);Aa(z,{class:"h-3 w-3"});var $a=e(z,2),_a=a($a);N(Da=>f(_a,Da),[()=>t(i).teams.join(", ")]),n(c,b)};_(W,c=>{t(i).teams&&t(i).teams.length>0&&c(da)})}var J=e(W,2);{var O=c=>{var b=ae(),z=a(b);Aa(z,{class:"h-3 w-3"});var $a=e(z,2),_a=a($a);N(()=>f(_a,`${t(i).contributors.length??""} participant${t(i).contributors.length>1?"s":""}`)),n(c,b)};_(J,c=>{t(i).contributors&&t(i).contributors.length>0&&c(O)})}var ba=e(J,2),na=a(ba);Qa(na,{class:"h-3 w-3"});var fa=e(na,2),ga=a(fa),oa=e(ba,2),va=a(oa);Qa(va,{class:"h-3 w-3"});var ca=e(va,2),pa=a(ca),wa=e(oa,2),la=a(wa);ct(la,{class:"h-3 w-3"});var ya=e(la,2),y=a(ya),G=e(V,2),K=a(G);K.__click=[te,i];var k=a(K);lt(k,{class:"h-3 w-3"});var S=e(K,2);S.__click=[ee,i];var xa=a(S);tt(xa,{class:"h-3 w-3"});var ka=e(S,2);ka.__click=[re,i];var Ia=a(ka);_t(Ia,{class:"h-3 w-3"});var Ba=e(ka,2);Ba.__click=[se,i];var qa=a(Ba);mt(qa,{class:"h-3 w-3"});var m=e(F,2);Ua(m,{class:"mt-1 h-4 w-4 flex-shrink-0 opacity-40"}),N((c,b,z)=>{Xa($,1,`bg-base-200/60 hover:bg-base-200 flex cursor-pointer items-start gap-3 rounded-lg p-3 transition-colors ${E()??""}`),Oa($,"title",`Voir les détails de ${t(i).name??""}`),f(P,t(i).name),Xa(Z,1,`badge badge-outline badge-sm font-medium ${t(i).status==="proposition"?"badge-accent":"badge-success"}`),f(H,t(i).status==="proposition"?"proposition":"confirmé"),f(ga,`${c??""} repas`),f(pa,`${b??""} recettes`),f(y,`${z??""} tâches`)},[()=>wt(t(i)),()=>yt(t(i)),()=>kt(t(i))]),n(g,$)}),n(q,B)};_(l,q=>{v().length>0&&q(w)})}n(h,s)};_(ea,h=>{v().length===0?h(ra):h(sa,!1)},!0)}n(D,U)};_(Q,D=>{I()?D(aa):D(ta,!1)})}n(d,j),Ma()}za(["click","keydown"]);function de(d,r){R(`/documents/${r.teamId}`)}function oe(d,r){R(`/createdocument/${r.teamId}/new`)}var ve=o('<div class="py-6 text-center"><span class="loading loading-spinner loading-md text-primary"></span> <p class="text-base-content/60 mt-2 text-sm">Chargement...</p></div>'),ce=o('<div class="py-6 text-center"><div class="text-error mb-2"><svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div> <p class="text-base-content/60 text-sm">Erreur de chargement des documents</p></div>'),le=o('<div class="py-6 text-center"><!> <p class="text-base-content/60 mb-4 text-sm">Aucun document</p></div>'),_e=o('<div class="space-y-2"></div>'),me=o('<div class="card bg-base-100 card-sm border-neutral/20 border shadow-sm"><div class="card-body"><div class="flex flex-wrap items-center justify-between"><h2 class="card-title flex items-center gap-2"><!> Documents récents</h2> <button class="btn btn-sm" title="Voir tous les documents">Voir tout <!></button></div> <!> <div class="card-actions mt-4 justify-end pt-4"><button class="btn btn-primary btn-soft btn-sm"><!> Créer un document</button></div></div></div>');function ue(d,r){Ra(r,!0);const v=X(()=>La.isInitialized?La.getTeamDocuments(r.teamId).sort((s,l)=>{const w=s.$updatedAt?new Date(s.$updatedAt).getTime():0;return(l.$updatedAt?new Date(l.$updatedAt).getTime():0)-w}).slice(0,5):[]);var I=me(),E=a(I),M=a(E),j=a(M),Q=a(j);tt(Q,{class:"text-primary h-5 w-5"});var aa=e(j,2);aa.__click=[de,r];var ta=e(a(aa));at(ta,{size:16});var D=e(M,2);{var U=s=>{var l=ve();n(s,l)},ea=s=>{var l=ma(),w=T(l);{var q=u=>{var g=ce();n(u,g)},B=u=>{var g=ma(),i=T(g);{var $=L=>{var C=le(),P=a(C);bt(P,{size:32,class:"text-base-content/20 mx-auto mb-3"}),n(L,C)},F=L=>{var C=_e();Sa(C,21,()=>t(v),P=>P.$id,(P,Y)=>{$t(P,{get doc(){return t(Y)},get teamId(){return r.teamId}})}),n(L,C)};_(i,L=>{t(v).length===0?L($):L(F,!1)},!0)}n(u,g)};_(w,u=>{La.error?u(q):u(B,!1)},!0)}n(s,l)};_(D,s=>{La.loading?s(U):s(ea,!1)})}var ra=e(D,2),sa=a(ra);sa.__click=[oe,r];var h=a(sa);Ta(h,{class:"h-4 w-4"}),n(d,I),Ma()}za(["click"]);function be(d,r,v){ha(r,"members"),ha(v,!0)}function fe(d,r,v){ha(r,"invitations"),ha(v,!0)}function ge(d,r){R(`/dashboard/eventCreate?teamId=${r.team.$id}`)}function pe(d,r){R(`/dashboard/materiel/${r.team.$id}`)}function xe(d,r){R(`/dashboard/loans/${r.team.$id}`)}function he(){R("/eventList")}var we=o('<div class="badge badge-soft badge-secondary gap-1"><!> </div>'),ye=o('<div class="fieldset-legend">Récents</div> <!>',1),ke=o(`<div class="card bg-base-100 border-base-200 border shadow-xl"><div class="card-body gap-4"><div class="flex items-start justify-between gap-2"><div class="flex items-center gap-2"><!> <h2 class="text-xl font-bold"> </h2> <!></div> <button class="btn btn-circle btn-ghost" title="Paramètres de l'équipe"><!></button></div> <div class="grid grid-cols-1 gap-4 md:grid-cols-2"><div class="card card-sm border-neutral/20 shoadow-sm self-start border"><div class="card-body"><div class="flex flex-wrap items-center justify-between gap-2 text-sm"><div class=" flex items-center gap-2"><!> <span class="text-base-content/70"> </span></div> <div class="ms-auto flex items-center gap-4"><div class="badge badge-primary badge-lg badge-outline ml-auto"> </div> <button class="btn btn-sm btn-accent"><!> Inviter</button></div></div></div></div> <div class="card border-neutral/20 card-sm flex w-full justify-center border shadow-sm"><div class="card-body"><div class="card card-sm bg-base-300"><div class="card-body text-center"><p class="font-semibold">Gérez le matériel collectif de cantine :</p> <p>inventaire, gestion des emprunt, partage, etc.</p></div></div> <fieldset class="fieldset w-48"><div class="flex justify-around gap-2"><button class="btn btn-primary btn-soft btn-wide"><!> Inventaire</button> <button class="btn btn-primary btn-soft btn-wide"><!> Réservations</button></div></fieldset></div></div></div> <div class="card grid grid-cols-1 gap-6 text-sm md:grid-cols-2"><div class="card card-sm border-neutral/20 border shadow-sm"><div class="card-body"><div class="flex flex-wrap justify-between gap-2"><div class="card-title items-center"><!> Événements</div> <button class="btn btn-sm">Voir les événements passés <!></button></div> <!> <!> <div class="card-actions mt-auto items-center justify-end"><button class="btn btn-primary btn-soft btn-sm ml-auto"><!> Créer un événement</button></div></div></div> <div><!></div></div> <div class="flex justify-center"></div></div></div> <!>`,1);function $e(d,r){Ra(r,!0);let v=Pa(r,"loading",3,!1),I=Ga(!1),E=Ga("");const M=X(()=>{const m=r.team.prefs||{};return m.city||m.location||m.region||null}),j=X(()=>r.team.members||[]),Q=X(()=>Va.getTeamMemberNames(r.team.$id)),aa=X(()=>t(Q).length<=20?t(Q).join(", "):`${t(Q).slice(0,20).join(", ")} +${t(Q).length-20}`),ta=X(()=>r.allEvents.filter(m=>m.teamsId?.includes(r.team.$id)||m.teams?.includes(r.team.name))),D=X(()=>{const m=new Date;return m.setHours(0,0,0,0),t(ta).filter(c=>(c.dateEnd?new Date(c.dateEnd):new Date(c.dateStart))>=m)}),U=X(()=>{const m=new Date;return m.setHours(0,0,0,0),t(ta).filter(c=>(c.dateEnd?new Date(c.dateEnd):new Date(c.dateStart))<m).slice(0,3)});var ea=ke(),ra=T(ea),sa=a(ra),h=a(sa),s=a(h),l=a(s);Aa(l,{class:"text-primary h-5 w-5 flex-shrink-0"});var w=e(l,2),q=a(w),B=e(w,2);{var u=m=>{var c=we(),b=a(c);pt(b,{class:"h-3 w-3"});var z=e(b);N(()=>f(z,` ${t(M)??""}`)),n(m,c)};_(B,m=>{t(M)&&m(u)})}var g=e(s,2);g.__click=[be,E,I];var i=a(g);et(i,{});var $=e(h,2),F=a($),L=a(F),C=a(L),P=a(C),Y=a(P);Aa(Y,{class:"inline size-5 shrink-0 opacity-70"});var ua=e(Y,2),A=a(ua),p=e(P,2),Z=a(p),H=a(Z),x=e(Z,2);x.__click=[fe,E,I];var ia=a(x);Ta(ia,{class:"h-4 w-4"});var V=e(F,2),W=a(V),da=e(a(W),2),J=a(da),O=a(J);O.__click=[pe,r];var ba=a(O);ft(ba,{class:"size-4"});var na=e(O,2);na.__click=[xe,r];var fa=a(na);gt(fa,{class:"size-4"});var ga=e($,2),oa=a(ga),va=a(oa),ca=a(va),pa=a(ca),wa=a(pa);Na(wa,{class:"text-primary inline size-5"});var la=e(pa,2);la.__click=[he];var ya=e(a(la));Ua(ya,{class:"ml-2 h-4 w-4"});var y=e(ca,2);Ka(y,{get events(){return t(D)},get loading(){return v()},cardClass:"border-l-4 border-accent"});var G=e(y,2);{var K=m=>{var c=ye(),b=e(T(c),2);Ka(b,{get events(){return t(U)},get loading(){return v()}}),n(m,c)};_(G,m=>{t(U).length>0&&m(K)})}var k=e(G,2),S=a(k);S.__click=[ge,r];var xa=a(S);Ta(xa,{class:"h-4 w-4"});var ka=e(oa,2),Ia=a(ka);ue(Ia,{get teamId(){return r.team.$id}});var Ba=e(ra,2);{var qa=m=>{xt(m,{get teamId(){return r.team.$id},onClose:()=>ha(I,!1),get initialTab(){return t(E)}})};_(Ba,m=>{t(I)&&m(qa)})}N(()=>{f(q,r.team.name),f(A,t(aa)),f(H,`${t(j).length??""} membre${t(j).length>1?"s":""}`)}),n(d,ea),Ma()}za(["click"]);const De=d=>{var r=Te(),v=a(r);v.__click=[Ce];var I=a(v);Ta(I,{class:"h-4 w-4"});var E=e(v,2);E.__click=[Ae];var M=a(E);Ta(M,{class:"h-4 w-4"}),n(d,r)};var Ce=()=>R("/dashboard/eventCreate"),Ae=()=>R("/recipe/new"),Te=o('<div class="flex gap-2"><button class="btn btn-primary"><!> Créer un Événement</button> <button class="btn btn-primary"><!> Créer une Recette</button></div>'),Ie=()=>{},Ee=o('<div class="bg-base-100 border-base-200 rounded-xl border p-8 text-center shadow-sm"><!> <h2 class="mb-2 text-xl font-semibold">Connectez-vous pour accéder à votre tableau de bord</h2> <p class="text-base-content/60 mb-6">Connectez-vous pour voir vos équipes, événements et recettes.</p> <button class="btn btn-primary">Se connecter</button></div>'),je=o('<div class="alert alert-error shadow-lg"><span> </span></div>'),Se=(d,r)=>ha(r,!0),ze=o('<section class="bg-base-200 py-8"><div class="container mx-auto px-4"><div class="tiems-center mb-4 flex justify-between gap-4"><div class="mb-6 text-2xl font-bold">Vos Équipes</div> <div class="card-actions mt-4"><button class="btn btn-primary btn-sm ms-auto"><!> Créer une équipe</button></div></div> <div class="grid grid-cols-1 gap-6"></div></div></section>'),Re=o('<!> <div class="card bg-base-100 border-base-200 border shadow-xl"><div class="card-body"><!></div></div>',1),Me=o('<div class="bg-base-200 min-h-screen"><div class="mx-auto max-w-7xl px-4 pt-8 sm:px-6 lg:px-8"><div class="flex flex-col"><h2 class="text-base-content text-xl font-bold"> </h2></div></div> <div class="mx-auto max-w-7xl px-4 py-8"><!></div></div> <!>',1);function Xe(d,r){Ra(r,!0);let v=Ga(!1);Ya(()=>{dt(),ot()});function I(h){ha(v,!1)}Ya(()=>{Za.setConfig({title:"Dashboard",actions:De})}),nt(()=>{Za.reset()});var E=Me(),M=T(E),j=a(M),Q=a(j),aa=a(Q),ta=a(aa),D=e(j,2),U=a(D);{var ea=h=>{var s=Ee(),l=a(s);et(l,{class:"mx-auto mb-4 h-16 w-16 opacity-20"});var w=e(l,6);w.__click=[Ie],n(h,s)},ra=h=>{var s=ma(),l=T(s);{var w=B=>{var u=je(),g=a(u),i=a(g);N(()=>f(i,ja.error||Va.error||"Une erreur est survenue")),n(B,u)},q=B=>{var u=Re(),g=T(u);{var i=C=>{var P=ze(),Y=a(P),ua=a(Y),A=e(a(ua),2),p=a(A);p.__click=[Se,v];var Z=a(p);Ta(Z,{class:"size-4"});var H=e(ua,2);Sa(H,20,()=>Ca.userTeams,x=>x,(x,ia)=>{const V=X(()=>Va.getTeamById(ia));var W=ma(),da=T(W);{var J=O=>{$e(O,{get team(){return t(V)},get allEvents(){return ja.events},get loading(){return ja.loading}})};_(da,O=>{t(V)&&O(J)})}n(x,W)}),n(C,P)};_(g,C=>{Ca.userTeams.length>0&&C(i)})}var $=e(g,2),F=a($),L=a(F);Ot(L,{}),n(B,u)};_(l,B=>{ja.error||Va.error?B(w):B(q,!1)},!0)}n(h,s)};_(U,h=>{Ca.isAuthenticated?h(ra,!1):h(ea)})}var sa=e(M,2);ht(sa,{get isOpen(){return t(v)},onClose:()=>ha(v,!1),onSuccess:I}),N(()=>f(ta,`Bienvenue, ${(Ca.user?.name||"")??""}`)),n(d,E),Ma()}za(["click"]);export{Xe as default};
