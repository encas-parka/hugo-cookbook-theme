import{Z as ke,x as _e,W as c,g as a,u as M,ac as je,A as t,B as i,$ as C,X as A,_ as ge,Y as q,ae as Be,v as n,w as xe,a2 as We,j as K,o as ye,s as W,p as ve,E as se,a as E,a1 as Ce,D as Me,b as Pe,aa as Re,a5 as Ue,am as Qe}from"./vendor.js";import{g as He,d as Ge,e as Je,f as Ze,h as Ke,M as Xe,a as Ye,b as $e,m as fe,n as Te}from"./index.js";import{a as De,y as Fe,n as ea}from"./appwrite.js";import{g as Ve}from"./date-helpers.js";import{aQ as aa,aR as ta,l as la,u as ra,g as ia,aS as sa,aT as na,M as ze,U as Ee,a3 as oa,t as Le,aw as qe,aU as da,X as va,q as ca,F as ua,Z as ma,P as ba}from"./icons.js";import{C as Se}from"./CheckboxBadge.js";import"./BadgeList.js";import{F as Ie}from"./Fieldset.js";import{L as fa}from"./LeftPanel.js";import"./editor.js";import"./markdown.js";var ga=(p,e,o)=>a(e)&&o.onEdit?.(o.materiel.$id),_a=(p,e,o)=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),a(e)&&o.onEdit?.(o.materiel.$id))},xa=c('<div class="flex items-center gap-1"><!> <span class="max-w-[100px] truncate"> </span></div>'),ha=c('<div class="flex items-center gap-1"><!> <span> </span></div>'),ya=c('<div class="text-base-content/70 text-xs"> </div>'),pa=c('<div class="text-base-content/60 line-clamp-1 text-xs"> </div>'),wa=c("<div> </div>"),Ma=c('<div><div class="text-xs"><span class="text-info font-semibold"> </span> <span class="text-base-content/80 ml-2 font-medium"> <!></span></div></div>'),ka=(p,e)=>{p.stopPropagation(),e.onEdit?.(e.materiel.$id)},Ca=c('<button class="btn btn-ghost btn-xs text-primary" aria-label="Éditer"><!></button>'),Sa=c('<div class="card card-side bg-base-100 border-base-200 hover:border-primary/50 group cursor-pointer border text-left shadow-sm transition-all hover:shadow-md" role="button" tabindex="0"><div class="hidden pl-4 sm:flex sm:items-center"><div><!></div></div> <div class="card-body py-3"><div class="flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between"><div class="flex min-w-0 flex-col gap-1"><div class="flex flex-wrap items-center gap-x-4 gap-y-0"><div class="flex items-center gap-2"><div class="text-primary group-hover:text-primary/80 text-base font-semibold transition-colors"> </div> <span> </span></div> <div class="text-base-content/80 flex flex-wrap items-center gap-x-2 gap-y-1 text-sm"><!> <!></div></div> <div class="flex flex-wrap items-baseline gap-x-4 gap-y-2"><div class="text-sm font-medium"><span> </span> <span class="text-base-content/60 ml-1 text-xs">disp.</span></div> <!> <!> <!></div></div> <div class="flex flex-col items-start gap-1 sm:items-center"><!></div> <div class="flex items-center justify-end"><!></div></div></div></div>');function Ia(p,e){_e(e,!0);const o=M(()=>{switch(e.materiel.type){case"electronic":return na;case"manual":return sa;case"cooking":return ia;case"dish":return ra;case"gaz":return la;case"hygiene":return ta;case"other":default:return aa}}),m=M(()=>{if(!e.materiel||!e.materiel.status)return{label:"Chargement...",badgeClass:"badge-neutral",priority:99};const l=Ke(e.materiel.status);return{ok:{label:l,badgeClass:"badge-success",priority:0},lost:{label:l,badgeClass:"badge-error",priority:4},torepair:{label:l,badgeClass:"badge-warning",priority:1}}[e.materiel.status]||{label:l,badgeClass:"badge-neutral",priority:99}}),s=M(()=>De.userId?!!(e.materiel.ownerData?.userId===De.userId||e.materiel.ownerData?.teamId):!1),S=M(()=>e.materiel.description?e.materiel.description.length>80?e.materiel.description.substring(0,80)+"...":e.materiel.description:null);var v=Sa();v.__click=[ga,s,e],v.__keydown=[_a,s,e];var h=t(v),g=t(h),w=t(g);{let l=M(()=>Ze(e.materiel.type));je(w,()=>a(o),(d,x)=>{x(d,{get class(){return`${a(l)??""} h-6 w-6`}})})}var L=i(h,2),I=t(L),j=t(I),H=t(j),P=t(H),D=t(P),X=t(D),_=i(D,2),F=t(_),y=i(P,2),k=t(y);{var z=l=>{var d=xa(),x=t(d);ze(x,{class:"h-3 w-3"});var Q=i(x,2),B=t(Q);A(()=>q(B,e.materiel.location)),n(l,d)};C(k,l=>{e.materiel.location&&l(z)})}var R=i(k,2);{var U=l=>{var d=ha(),x=t(d);Ee(x,{class:"h-3 w-3"});var Q=i(x,2),B=t(Q);A(()=>q(B,e.materiel.ownerData.teamName)),n(l,d)};C(R,l=>{e.materiel.ownerData?.teamName&&l(U)})}var ne=i(H,2),ee=t(ne),ae=t(ee),te=t(ae),le=i(ee,2);{var oe=l=>{var d=ya(),x=t(d);A(()=>q(x,`${e.materiel.totalLoanedQuantity??""}/${e.materiel.quantity??""} en prêt(s)`)),n(l,d)};C(le,l=>{e.materiel.totalLoanedQuantity>0&&l(oe)})}var V=i(le,2);{var G=l=>{var d=pa(),x=t(d);A(()=>q(x,a(S))),n(l,d)};C(V,l=>{a(S)&&l(G)})}var Y=i(V,2);{var ce=l=>{var d=wa(),x=t(d);A(()=>{ge(d,1,`badge ${a(m).badgeClass??""} badge-xs gap-1 py-0`),q(x,a(m).label)}),n(l,d)};C(Y,l=>{e.materiel.status!=="ok"&&l(ce)})}var he=i(j,2),r=t(he);{var b=l=>{var d=Ma(),x=t(d),Q=t(x),B=t(Q),$=i(Q,2),re=t($),pe=i(re);{var we=Z=>{var u=We();A((N,O)=>q(u,`du ${N??""}
                  jusqu'au ${O??""}`),[()=>Ve(e.materiel.loanDetails[0].startDate),()=>Ve(e.materiel.loanDetails[0].endDate)]),n(Z,u)};C(pe,Z=>{e.materiel.loanDetails.length>0&&Z(we)})}A(Z=>{q(B,`${e.materiel.loanDetails.length??""} réservation :`),q(re,`${Z??""} `)},[()=>e.materiel.loanDetails.map(Z=>`${Z.responsibleName} (${Z.quantity})`).join(", ")]),n(l,d)};C(r,l=>{e.materiel.loanDetails.length>0&&l(b)})}var f=i(he,2),T=t(f);{var J=l=>{var d=Ca();d.__click=[ka,e];var x=t(d);oa(x,{class:"h-4 w-4"}),n(l,d)};C(T,l=>{a(s)&&l(J)})}A((l,d,x)=>{ge(g,1,`${l??""} rounded-lg p-3`),q(X,e.materiel.name),ge(_,1,`badge ${d??""} badge-soft badge-sm gap-1 py-0`),q(F,x),ge(ae,1,Be(e.materiel.availableQuantity>0?"text-success":"text-error")),q(te,`${e.materiel.availableQuantity??""}/${e.materiel.quantity??""}`)},[()=>He(e.materiel.type),()=>Ge(e.materiel.type),()=>Je(e.materiel.type).label]),n(p,v),xe()}ke(["click","keydown"]);function Da(p,e,o,m){e()||o(m.value)}var za=c('<button type="button"><span> </span> <!></button>');function Ea(p,e){_e(e,!0);let o=K(e,"selectedValue",15),m=K(e,"color",3,"primary"),s=K(e,"size",3,"sm"),S=K(e,"disabled",3,!1);function v(D){return{xs:"btn-xs",sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[D]||"btn-sm"}const h=M(()=>e.value===o()),g=M(()=>v(s()));var w=za();let L;w.__click=[Da,S,o,e];var I=t(w),j=t(I),H=i(I,2);{var P=D=>{Le(D,{class:"h-3 w-3"})};C(H,D=>{a(h)&&D(P)})}A(D=>{L=ge(w,1,`btn ${a(g)??""} flex items-center gap-2 transition-all ${`btn-${m()}`} duration-200 ${a(h)?"":"btn-dash"}`,null,L,D),w.disabled=S(),q(j,e.label)},[()=>({"opacity-50":S(),"cursor-not-allowed":S()})]),n(p,w),xe()}ke(["click"]);var qa=c('<div class="flex flex-wrap gap-2"></div>');function Ae(p,e){_e(e,!0);let o=K(e,"selected",15),m=K(e,"size",3,"sm"),s=K(e,"disabled",3,!1),S=K(e,"color",3,"primary");var v=qa();ye(v,21,()=>e.items,h=>h.id,(h,g)=>{Ea(h,{get value(){return a(g).id},get label(){return a(g).label},get color(){return S()},get size(){return m()},get disabled(){return s()},get selectedValue(){return o()},set selectedValue(w){o(w)}})}),n(p,v),xe()}function Pa(p,e,o,m,s,S,v,h,g,w,L){if(!a(e))return;const I={name:a(o).trim(),description:a(m).trim()||null,type:a(s)||"other",status:a(S),quantity:a(v),location:a(h).trim()||null,shareableWith:a(g).length>0?a(g):null,owner:a(w)};L.onSubmit?.(I)}function Ta(p,e){e.onCancel?.()}var Fa=c('<div class="flex min-w-[200px] flex-1 flex-col gap-1"><span class="label-text-alt text-base-content/70">Status</span> <!></div>'),Va=c('<div class="alert alert-error alert-sm"><span class="text-sm"> </span></div>'),Aa=c('<div class="ms-auto mt-8 flex justify-end gap-2"><button class="btn btn-ghost"><!> Annuler</button> <button class="btn btn-primary"><!> Enregistrer</button></div>'),La=c(`<div class="space-y-6"><div class="text-lg font-medium">Ajouter du matériel a l'inventaire de <span class="font-bold italic"> </span></div> <div class="space-y-3"><div class="flex flex-wrap gap-x-6 gap-y-4"><label class="input min-w-1/2"><span class="label"><!> Nom *</span> <input type="text" class="grow" placeholder="Ex: Mixeur professionnel" maxlength="100"/></label></div> <fieldset class="fieldset bg-base-100"><legend class="fieldset-legend">Description</legend> <textarea class="textarea textarea-bordered w-full" rows="2" placeholder="Décrivez le matériel..." maxlength="500"></textarea></fieldset></div> <div class="flex flex-wrap items-center gap-x-4 gap-y-3"><div class="flex min-w-[200px] flex-1 flex-col gap-1"><span class="label-text-alt text-base-content/70">Type</span> <!></div> <!></div> <div class="flex flex-1 flex-wrap gap-x-6 gap-y-4"><label class="input w-58"><span class="label"><!>Quantité *</span> <input type="number" min="1"/></label> <label class="input flex-1"><span class="label"><!>Localisation</span> <input type="text" class="grow" placeholder="où c'est stocker" maxlength="50"/></label></div>  <!></div> <div><!></div>`,1);function Ne(p,e){_e(e,!0);let o=K(e,"showStatus",3,!1),m=K(e,"buttonAction",3,!0),s=W(ve(e.initialValues?.name||"")),S=W(ve(e.initialValues?.description||"")),v=W(ve(e.initialValues?.type||"")),h=W(ve(e.initialValues?.status||"ok")),g=W(ve(e.initialValues?.quantity||1)),w=W(ve(e.initialValues?.location||"")),L=W(ve(e.initialValues?.shareableWith||[])),I=!1,j=W(null);const H=M(()=>e.ownerId),P=M(()=>[{id:"electronic",label:"Électronique"},{id:"manual",label:"Ustensile"},{id:"tools",label:"Outils"},{id:"dish",label:"Vaisselle"},{id:"cooking",label:"Matériel de Cuisine"},{id:"gaz",label:"Gaz"},{id:"hygiene",label:"Hygiène"},{id:"other",label:"Autre"}]),D=M(()=>[{id:"ok",label:"OK"},{id:"lost",label:"Perdu"},{id:"torepair",label:"À réparer"}]),X=M(()=>a(H)&&e.ownerId?JSON.stringify({teamName:e.ownerName||"",teamId:e.ownerId}):JSON.stringify({teamName:"",teamId:""})),_=M(()=>a(s).trim().length>0&&a(g)>=1&&!I);var F=La(),y=se(F),k=t(y),z=i(t(k)),R=t(z),U=i(k,2),ne=t(U),ee=t(ne),ae=t(ee),te=t(ae);qe(te,{class:"h-4 w-4 "});var le=i(ae,2);le.disabled=I;var oe=i(ne,2),V=i(t(oe),2);V.disabled=I;var G=i(U,2),Y=t(G),ce=i(t(Y),2);Ae(ce,{get items(){return a(P)},size:"sm",disabled:I,get selected(){return a(v)},set selected(u){E(v,u,!0)}});var he=i(Y,2);{var r=u=>{var N=Fa(),O=i(t(N),2);Ae(O,{get items(){return a(D)},size:"sm",disabled:I,get selected(){return a(h)},set selected(ie){E(h,ie,!0)}}),n(u,N)};C(he,u=>{o()&&u(r)})}var b=i(G,2),f=t(b),T=t(f),J=t(T);da(J,{class:"size-4"});var l=i(T,2);l.disabled=I;var d=i(f,2),x=t(d),Q=t(x);ze(Q,{class:"size-4"});var B=i(x,2);B.disabled=I;var $=i(b,2);{var re=u=>{var N=Va(),O=t(N),ie=t(O);A(()=>q(ie,a(j))),n(u,N)};C($,u=>{a(j)&&u(re)})}var pe=i(y,2),we=t(pe);{var Z=u=>{var N=Aa(),O=t(N);O.__click=[Ta,e],O.disabled=I;var ie=t(O);va(ie,{class:"h-5 w-5"});var ue=i(O,2);ue.__click=[Pa,_,s,S,v,h,g,w,L,X,e];var de=t(ue);{var me=be=>{Le(be,{class:"h-5 w-5"})};C(de,be=>{be(me,!1)})}A(()=>ue.disabled=!a(_)),n(u,N)};C(we,u=>{m()&&u(Z)})}A(()=>q(R,e.ownerName)),Ce(le,()=>a(s),u=>E(s,u)),Ce(V,()=>a(S),u=>E(S,u)),Ce(l,()=>a(g),u=>E(g,u)),Ce(B,()=>a(w),u=>E(w,u)),n(p,F),xe()}ke(["click"]);var Na=c('<div><span class="font-semibold">Équipe propriétaire :</span> </div>'),Oa=c('<div class="alert alert-error"><span class="text-sm"> </span></div>'),ja=c('<div class="alert alert-soft mb-4"><div class="flex items-center gap-2 text-sm"><!> <div><!></div></div></div> <!> <!>',1),Ba=c('<div class="alert alert-warning"><span>Matériel introuvable</span></div>'),Wa=c("<!> <!>",1);function Ra(p,e){_e(e,!0);let o=W(!1),m=W(null);const s=M(()=>e.materielId?fe.getMaterielById(e.materielId):null);function S(){E(m,null)}async function v(g){if(!e.materielId){E(m,"ID du matériel manquant");return}E(o,!0),E(m,null);try{await fe.updateMateriel(e.materielId,{name:g.name,description:g.description||void 0,type:g.type||"other",status:g.status,quantity:g.quantity,location:g.location||void 0}),console.log("[EditMaterielModal] Matériel mis à jour:",e.materielId),e.onSuccess?.(),S(),e.onClose()}catch(w){E(m,w.message||"Erreur lors de la mise à jour du matériel",!0),console.error("[EditMaterielModal] Erreur:",w)}finally{E(o,!1)}}function h(){S(),e.onClose()}Xe(p,{get isOpen(){return e.isOpen},onClose:h,children:(g,w)=>{var L=Wa(),I=se(L);Ye(I,{title:"Modifier le matériel",onClose:h});var j=i(I,2);$e(j,{children:(H,P)=>{var D=Me(),X=se(D);{var _=y=>{var k=ja(),z=se(k),R=t(z),U=t(R);Ee(U,{class:"h-4 w-4"});var ne=i(U,2),ee=t(ne);{var ae=V=>{var G=Na(),Y=i(t(G));A(()=>q(Y,` ${a(s).ownerData.teamName??""}`)),n(V,G)};C(ee,V=>{a(s).ownerData?.teamId&&V(ae)})}var te=i(z,2);{let V=M(()=>({name:a(s).name,description:a(s).description,type:a(s).type,status:a(s).status,quantity:a(s).quantity,location:a(s).location,shareableWith:a(s).shareableWith}));Ne(te,{showStatus:!0,get initialValues(){return a(V)},onSubmit:v,onCancel:h})}var le=i(te,2);{var oe=V=>{var G=Oa(),Y=t(G),ce=t(Y);A(()=>q(ce,a(m))),n(V,G)};C(le,V=>{a(m)&&V(oe)})}n(y,k)},F=y=>{var k=Ba();n(y,k)};C(X,y=>{a(s)?y(_):y(F,!1)})}n(H,D)}}),n(g,L)},$$slots:{default:!0}}),xe()}var Ua=c('<div class="flex flex-wrap gap-3"></div>'),Qa=c('<div class="flex flex-wrap gap-3"></div>'),Ha=c('<div class="flex flex-wrap gap-3"></div>'),Ga=c('<div><div class="mb-4 flex items-center justify-between"><h4 class="text-lg font-bold"><!> Filtres</h4> <button class="btn btn-warning btn-sm"><!> Effacer</button></div> <!> <!> <!></div>');function Ja(p,e){_e(e,!0);let o=K(e,"filters",15),m=K(e,"disabled",3,!1);function s(_,F){const y=_.indexOf(F);y===-1?_.push(F):_.splice(y,1),o({...o()})}function S(_){return{electronic:"Électronique",manual:"Manuel",other:"Autre",tools:"Outils",dish:"Vaisselle",cooking:"Cuisine",gaz:"Gaz",hygiene:"Hygiène"}[_]||_}function v(_){return{ok:"OK",lost:"Perdu",loan:"Utilisé",reserved:"Réservé",torepair:"À réparer"}[_]||_}var h=Ga();let g;var w=t(h),L=t(w),I=t(L);ca(I,{class:"inline size-4 align-baseline"});var j=i(L,2);j.__click=function(..._){e.onReset?.apply(this,_)};var H=t(j);ua(H,{class:"h-4 w-4"});var P=i(w,2);Ie(P,{legend:"Type",get iconComponent(){return qe},children:(_,F)=>{var y=Ua();ye(y,20,()=>e.availableTypes,k=>k,(k,z)=>{{let R=M(()=>o().types.includes(z)),U=M(()=>S(z));Se(k,{get checked(){return a(R)},get label(){return a(U)},onchange:()=>s(o().types,z),get disabled(){return m()},color:"secondary",size:"md"})}}),n(_,y)},$$slots:{default:!0}});var D=i(P,2);Ie(D,{legend:"Lieu",get iconComponent(){return ze},children:(_,F)=>{var y=Qa();ye(y,20,()=>e.availableLocations,k=>k,(k,z)=>{{let R=M(()=>o().locations.includes(z));Se(k,{get checked(){return a(R)},get label(){return z},onchange:()=>s(o().locations,z),get disabled(){return m()},color:"secondary",size:"md"})}}),n(_,y)},$$slots:{default:!0}});var X=i(D,2);Ie(X,{legend:"Statut",get iconComponent(){return ma},children:(_,F)=>{var y=Ha();ye(y,20,()=>e.availableStatuses,k=>k,(k,z)=>{{let R=M(()=>o().statuses.includes(z)),U=M(()=>v(z));Se(k,{get checked(){return a(R)},get label(){return a(U)},onchange:()=>s(o().statuses,z),get disabled(){return m()},color:"secondary",size:"md"})}}),n(_,y)},$$slots:{default:!0}}),A(_=>{g=ge(h,1,"mt-16 space-y-4",null,g,_),j.disabled=m()},[()=>({"opacity-30":m()})]),n(p,h),xe()}ke(["click"]);function Za(p,e){E(e,!a(e))}var Ka=(p,e,o)=>e(a(o).$id),Xa=c('<button><!> <span class="badge badge-sm badge-neutral ml-2"> </span></button>'),Ya=c('<div class="tabs tabs-border bg-base-200 tabs-lg mb-6"></div>'),$a=c('<div class="mb-6 text-end"><button class="btn btn-wide btn-primary"><!> Ajouter du matériel</button></div>'),et=c('<div class="card bg-base-100 mb-6 shadow-lg"><div class="card-body"><!></div></div>'),at=c('<div class="alert alert-warning"><span>Vous devez être connecté pour voir le matériel.</span></div>'),tt=c('<div class="alert alert-error shadow-lg"><span> </span></div>'),lt=c('<div class="alert alert-info"><span>Sélectionnez une équipe pour voir son matériel.</span></div>'),rt=c('<div class="py-12 text-center"><p class="text-base-content/60 mb-4 text-lg">Aucun matériel ne correspond aux critères de filtrage...</p> <button class="btn btn-warning btn-sm">Effacer les filtres</button></div>'),it=c(`<div class="bg-base-200 rounded-box border-base-200 border-2 border-dashed py-20 text-center"><div class="bg-base-200 mb-4 inline-block rounded-full p-4"><!></div> <h3 class="mb-2 text-lg font-bold">Aucun matériel</h3> <p class="text-base-content/60 mb-6">Cette équipe n'a pas encore de matériel.</p></div>`),st=c('<div class="grid grid-cols-1"></div>'),nt=c('<!> <div class="p-4 lg:ml-100"><div class="mx-auto max-w-7xl px-4 py-8"><!> <!> <!> <!></div></div> <!>',1);function ht(p,e){_e(e,!0);let o=W(!1),m=W(null),s=W(null),S=W(!1),v=W(ve({types:[],locations:[],statuses:[]}));function h(){E(o,!1)}function g(r){E(m,r,!0)}function w(){E(m,null)}async function L(r){try{await fe.createMateriel(r),h(),console.log("[MaterielPage] Matériel créé avec succès")}catch(b){console.error("[MaterielPage] Erreur création:",b)}}function I(){console.log("[MaterielPage] Matériel mis à jour"),w()}const j=["electronic","manual","other","tools","dish","cooking","gaz","hygiene"],H=["ok","lost","loan","reserved","torepair"],P=M(()=>ea.myTeams),D=M(()=>a(s)?a(P).find(r=>r.$id===a(s)):null),X=M(()=>a(s)?fe.materiels.filter(r=>r.ownerData.teamId===a(s)||r.shareableWith?.includes(a(s))):[]),_=M(()=>{const r=a(X),b=new Set;return r.forEach(f=>{f.location&&b.add(f.location)}),Array.from(b).sort()}),F=M(()=>{const r=a(X);return a(v).types.length>0||a(v).locations.length>0||a(v).statuses.length>0?r.filter(f=>{const T=a(v).types.length===0||f.type&&a(v).types.includes(f.type),J=a(v).locations.length===0||f.location&&a(v).locations.includes(f.location),l=a(v).statuses.length===0||a(v).statuses.includes(f.status);return T&&J&&l}):r});function y(){E(v,{types:[],locations:[],statuses:[]},!0)}function k(r){Fe(`/dashboard/materiel/${r}`)}Pe(()=>{const r=e.params?.teamId;r&&r!==a(s)?a(P).find(f=>f.$id===r)&&E(s,r,!0):!r&&!a(s)&&!a(S)&&a(P).length>0&&(E(S,!0),Fe(`/dashboard/materiel/${a(P)[0].$id}`))}),Pe(()=>{const b=(a(s)?a(P).find(f=>f.$id===a(s)):null)?.name||"Matériel";Te.setConfig({title:b,materielContext:"materiel",teamId:a(s)||void 0})}),Re(()=>{Te.reset()});var z=nt(),R=se(z);fa(R,{width:"100",children:(r,b)=>{Ja(r,{disabled:!1,get availableTypes(){return j},get availableLocations(){return a(_)},get availableStatuses(){return H},onReset:y,get filters(){return a(v)},set filters(f){E(v,f,!0)}})},$$slots:{default:!0}});var U=i(R,2),ne=t(U),ee=t(ne);{var ae=r=>{var b=Ya();ye(b,21,()=>a(P),f=>f.$id,(f,T)=>{var J=Xa();J.__click=[Ka,k,T];var l=t(J);Ee(l,{class:"mr-2 h-4 w-4"});var d=i(l),x=i(d),Q=t(x);A(B=>{ge(J,1,`tab ${a(s)===a(T).$id?"tab-active":""}`),q(d,` ${a(T).name??""} `),q(Q,B)},[()=>fe.materiels.filter(B=>B.ownerData.teamId===a(T).$id||B.shareableWith?.includes(a(T).$id)).length]),n(f,J)}),n(r,b)};C(ee,r=>{a(P).length>1&&r(ae)})}var te=i(ee,2);{var le=r=>{var b=$a(),f=t(b);f.__click=[Za,o];var T=t(f);ba(T,{class:"h-4 w-4"}),n(r,b)};C(te,r=>{a(o)||r(le)})}var oe=i(te,2);{var V=r=>{var b=et(),f=t(b),T=t(f);Ne(T,{showStatus:!1,onSubmit:L,onCancel:h,get ownerId(){return a(D).$id},get ownerName(){return a(D).name}}),Ue(3,b,()=>Qe),n(r,b)};C(oe,r=>{a(o)&&a(D)&&r(V)})}var G=i(oe,2);{var Y=r=>{var b=at();n(r,b)},ce=r=>{var b=Me(),f=se(b);{var T=l=>{var d=tt(),x=t(d),Q=t(x);A(()=>q(Q,fe.error)),n(l,d)},J=l=>{var d=Me(),x=se(d);{var Q=$=>{var re=lt();n($,re)},B=$=>{var re=Me(),pe=se(re);{var we=u=>{var N=Me(),O=se(N);{var ie=de=>{var me=rt(),be=i(t(me),2);be.__click=y,n(de,me)},ue=de=>{var me=it(),be=t(me),Oe=t(be);qe(Oe,{class:"h-8 w-8 opacity-50"}),n(de,me)};C(O,de=>{a(v).types.length>0||a(v).locations.length>0||a(v).statuses.length>0?de(ie):de(ue,!1)})}n(u,N)},Z=u=>{var N=st();ye(N,21,()=>a(F),O=>O.$id,(O,ie)=>{Ia(O,{get materiel(){return a(ie)},onEdit:ue=>g(ue)})}),n(u,N)};C(pe,u=>{a(F).length===0?u(we):u(Z,!1)})}n($,re)};C(x,$=>{a(s)?$(B,!1):$(Q)},!0)}n(l,d)};C(f,l=>{fe.error?l(T):l(J,!1)},!0)}n(r,b)};C(G,r=>{De.isAuthenticated?r(ce,!1):r(Y)})}var he=i(U,2);{let r=M(()=>a(m)!==null);Ra(he,{get materielId(){return a(m)},get isOpen(){return a(r)},onClose:w,onSuccess:I})}n(p,z),xe()}ke(["click"]);export{ht as default};
