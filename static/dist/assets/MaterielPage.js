import{aQ as je,aR as Be,n as We,w as Re,i as Ue,aS as Qe,aT as He,M as De,U as qe,a5 as Ge,v as Le,aw as Ee,aU as Je,X as Ke,s as Xe,F as Ze,$ as Ye,P as $e}from"./icons.js";import{Z as ke,d as _e,V as c,m as a,u as M,ak as ea,g as t,h as s,a2 as C,W as A,_ as ge,X as E,an as aa,b as n,c as xe,y as ze,aa as ta,p as X,e as ye,q as W,Y as ve,k as ie,v as q,a9 as Ce,j as Me,a1 as Pe,ah as la,a0 as Te,A as ra,a7 as sa}from"./appwrite.js";import{g as ia,d as na,e as oa,h as da,i as va,M as ca,a as ua,b as ma,m as fe,n as Ve,s as ba}from"./index.js";import{g as Fe}from"./date-helpers.js";import{C as Se}from"./CheckboxBadge.js";import"./BadgeList.js";import{F as Ie}from"./Fieldset.js";import{L as fa}from"./LeftPanel.js";var ga=(p,e,o)=>a(e)&&o.onEdit?.(o.materiel.$id),_a=(p,e,o)=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),a(e)&&o.onEdit?.(o.materiel.$id))},xa=c('<div class="flex items-center gap-1"><!> <span class="max-w-[100px] truncate"> </span></div>'),ha=c('<div class="flex items-center gap-1"><!> <span> </span></div>'),ya=c('<div class="text-base-content/70 text-xs"> </div>'),pa=c('<div class="text-base-content/60 line-clamp-1 text-xs"> </div>'),wa=c("<div> </div>"),Ma=c('<div><div class="text-xs"><span class="text-info font-semibold"> </span> <span class="text-base-content/80 ml-2 font-medium"> <!></span></div></div>'),ka=(p,e)=>{p.stopPropagation(),e.onEdit?.(e.materiel.$id)},Ca=c('<button class="btn btn-ghost btn-xs text-primary" aria-label="Éditer"><!></button>'),Sa=c('<div class="card card-side bg-base-100 border-base-200 hover:border-primary/50 group cursor-pointer border text-left shadow-sm transition-all hover:shadow-md" role="button" tabindex="0"><div class="hidden pl-4 sm:flex sm:items-center"><div><!></div></div> <div class="card-body py-3"><div class="flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between"><div class="flex min-w-0 flex-col gap-1"><div class="flex flex-wrap items-center gap-x-4 gap-y-0"><div class="flex items-center gap-2"><h3 class="text-primary group-hover:text-primary/80 text-base font-semibold transition-colors"> </h3> <span> </span></div> <div class="text-base-content/80 flex flex-wrap items-center gap-x-2 gap-y-1 text-sm"><!> <!></div></div> <div class="flex flex-wrap items-baseline gap-x-4 gap-y-2"><div class="text-sm font-medium"><span> </span> <span class="text-base-content/60 ml-1 text-xs">disp.</span></div> <!> <!> <!></div></div> <div class="flex flex-col items-start gap-1 sm:items-center"><!></div> <div class="flex items-center justify-end"><!></div></div></div></div>');function Ia(p,e){_e(e,!0);const o=M(()=>{switch(e.materiel.type){case"electronic":return He;case"manual":return Qe;case"cooking":return Ue;case"dish":return Re;case"gaz":return We;case"hygiene":return Be;case"other":default:return je}}),m=M(()=>{if(!e.materiel||!e.materiel.status)return{label:"Chargement...",badgeClass:"badge-neutral",priority:99};const l=va(e.materiel.status);return{ok:{label:l,badgeClass:"badge-success",priority:0},lost:{label:l,badgeClass:"badge-error",priority:4},torepair:{label:l,badgeClass:"badge-warning",priority:1}}[e.materiel.status]||{label:l,badgeClass:"badge-neutral",priority:99}}),i=M(()=>ze.userId?!!(e.materiel.ownerData?.userId===ze.userId||e.materiel.ownerData?.teamId):!1),S=M(()=>e.materiel.description?e.materiel.description.length>80?e.materiel.description.substring(0,80)+"...":e.materiel.description:null);var v=Sa();v.__click=[ga,i,e],v.__keydown=[_a,i,e];var h=t(v),g=t(h),w=t(g);{let l=M(()=>da(e.materiel.type));ea(w,()=>a(o),(d,x)=>{x(d,{get class(){return`${a(l)??""} h-6 w-6`}})})}var L=s(h,2),I=t(L),j=t(I),H=t(j),P=t(H),z=t(P),Z=t(z),_=s(z,2),V=t(_),y=s(P,2),k=t(y);{var D=l=>{var d=xa(),x=t(d);De(x,{class:"h-3 w-3"});var Q=s(x,2),B=t(Q);A(()=>E(B,e.materiel.location)),n(l,d)};C(k,l=>{e.materiel.location&&l(D)})}var R=s(k,2);{var U=l=>{var d=ha(),x=t(d);qe(x,{class:"h-3 w-3"});var Q=s(x,2),B=t(Q);A(()=>E(B,e.materiel.ownerData.teamName)),n(l,d)};C(R,l=>{e.materiel.ownerData?.teamName&&l(U)})}var ne=s(H,2),ee=t(ne),ae=t(ee),te=t(ae),le=s(ee,2);{var oe=l=>{var d=ya(),x=t(d);A(()=>E(x,`${e.materiel.totalLoanedQuantity??""}/${e.materiel.quantity??""} en prêt(s)`)),n(l,d)};C(le,l=>{e.materiel.totalLoanedQuantity>0&&l(oe)})}var F=s(le,2);{var G=l=>{var d=pa(),x=t(d);A(()=>E(x,a(S))),n(l,d)};C(F,l=>{a(S)&&l(G)})}var Y=s(F,2);{var ce=l=>{var d=wa(),x=t(d);A(()=>{ge(d,1,`badge ${a(m).badgeClass??""} badge-xs gap-1 py-0`),E(x,a(m).label)}),n(l,d)};C(Y,l=>{e.materiel.status!=="ok"&&l(ce)})}var he=s(j,2),r=t(he);{var b=l=>{var d=Ma(),x=t(d),Q=t(x),B=t(Q),$=s(Q,2),re=t($),pe=s(re);{var we=K=>{var u=ta();A((N,O)=>E(u,`du ${N??""}
                  jusqu'au ${O??""}`),[()=>Fe(e.materiel.loanDetails[0].startDate),()=>Fe(e.materiel.loanDetails[0].endDate)]),n(K,u)};C(pe,K=>{e.materiel.loanDetails.length>0&&K(we)})}A(K=>{E(B,`${e.materiel.loanDetails.length??""} réservation :`),E(re,`${K??""} `)},[()=>e.materiel.loanDetails.map(K=>`${K.responsibleName} (${K.quantity})`).join(", ")]),n(l,d)};C(r,l=>{e.materiel.loanDetails.length>0&&l(b)})}var f=s(he,2),T=t(f);{var J=l=>{var d=Ca();d.__click=[ka,e];var x=t(d);Ge(x,{class:"h-4 w-4"}),n(l,d)};C(T,l=>{a(i)&&l(J)})}A((l,d,x)=>{ge(g,1,`${l??""} rounded-lg p-3`),E(Z,e.materiel.name),ge(_,1,`badge ${d??""} badge-soft badge-sm gap-1 py-0`),E(V,x),ge(ae,1,aa(e.materiel.availableQuantity>0?"text-success":"text-error")),E(te,`${e.materiel.availableQuantity??""}/${e.materiel.quantity??""}`)},[()=>ia(e.materiel.type),()=>na(e.materiel.type),()=>oa(e.materiel.type).label]),n(p,v),xe()}ke(["click","keydown"]);function za(p,e,o,m){e()||o(m.value)}var Da=c('<button type="button"><span> </span> <!></button>');function qa(p,e){_e(e,!0);let o=X(e,"selectedValue",15),m=X(e,"color",3,"primary"),i=X(e,"size",3,"sm"),S=X(e,"disabled",3,!1);function v(z){return{xs:"btn-xs",sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[z]||"btn-sm"}const h=M(()=>e.value===o()),g=M(()=>v(i()));var w=Da();let L;w.__click=[za,S,o,e];var I=t(w),j=t(I),H=s(I,2);{var P=z=>{Le(z,{class:"h-3 w-3"})};C(H,z=>{a(h)&&z(P)})}A(z=>{L=ge(w,1,`btn ${a(g)??""} flex items-center gap-2 transition-all ${`btn-${m()}`} duration-200 ${a(h)?"":"btn-dash"}`,null,L,z),w.disabled=S(),E(j,e.label)},[()=>({"opacity-50":S(),"cursor-not-allowed":S()})]),n(p,w),xe()}ke(["click"]);var Ea=c('<div class="flex flex-wrap gap-2"></div>');function Ae(p,e){_e(e,!0);let o=X(e,"selected",15),m=X(e,"size",3,"sm"),i=X(e,"disabled",3,!1),S=X(e,"color",3,"primary");var v=Ea();ye(v,21,()=>e.items,h=>h.id,(h,g)=>{qa(h,{get value(){return a(g).id},get label(){return a(g).label},get color(){return S()},get size(){return m()},get disabled(){return i()},get selectedValue(){return o()},set selectedValue(w){o(w)}})}),n(p,v),xe()}function Pa(p,e,o,m,i,S,v,h,g,w,L){if(!a(e))return;const I={name:a(o).trim(),description:a(m).trim()||null,type:a(i)||"other",status:a(S),quantity:a(v),location:a(h).trim()||null,shareableWith:a(g).length>0?a(g):null,owner:a(w)};L.onSubmit?.(I)}function Ta(p,e){e.onCancel?.()}var Va=c('<div class="flex min-w-[200px] flex-1 flex-col gap-1"><span class="label-text-alt text-base-content/70">Status</span> <!></div>'),Fa=c('<div class="alert alert-error alert-sm"><span class="text-sm"> </span></div>'),Aa=c('<div class="ms-auto mt-8 flex justify-end gap-2"><button class="btn btn-ghost"><!> Annuler</button> <button class="btn btn-primary"><!> Enregistrer</button></div>'),La=c(`<div class="space-y-6"><div class="text-lg font-medium">Ajouter du matériel a l'inventaire de <span class="font-bold italic"> </span></div> <div class="space-y-3"><div class="flex flex-wrap gap-x-6 gap-y-4"><label class="input min-w-1/2"><span class="label"><!> Nom *</span> <input type="text" class="grow" placeholder="Ex: Mixeur professionnel" maxlength="100"/></label></div> <fieldset class="fieldset bg-base-100"><legend class="fieldset-legend">Description</legend> <textarea class="textarea textarea-bordered w-full" rows="2" placeholder="Décrivez le matériel..." maxlength="500"></textarea></fieldset></div> <div class="flex flex-wrap items-center gap-x-4 gap-y-3"><div class="flex min-w-[200px] flex-1 flex-col gap-1"><span class="label-text-alt text-base-content/70">Type</span> <!></div> <!></div> <div class="flex flex-1 flex-wrap gap-x-6 gap-y-4"><label class="input w-58"><span class="label"><!>Quantité *</span> <input type="number" min="1"/></label> <label class="input flex-1"><span class="label"><!>Localisation</span> <input type="text" class="grow" placeholder="où c'est stocker" maxlength="50"/></label></div>  <!></div> <div><!></div>`,1);function Ne(p,e){_e(e,!0);let o=X(e,"showStatus",3,!1),m=X(e,"buttonAction",3,!0),i=W(ve(e.initialValues?.name||"")),S=W(ve(e.initialValues?.description||"")),v=W(ve(e.initialValues?.type||"")),h=W(ve(e.initialValues?.status||"ok")),g=W(ve(e.initialValues?.quantity||1)),w=W(ve(e.initialValues?.location||"")),L=W(ve(e.initialValues?.shareableWith||[])),I=!1,j=W(null);const H=M(()=>e.ownerId),P=M(()=>[{id:"electronic",label:"Électronique"},{id:"manual",label:"Ustensile"},{id:"tools",label:"Outils"},{id:"dish",label:"Vaisselle"},{id:"cooking",label:"Matériel de Cuisine"},{id:"gaz",label:"Gaz"},{id:"hygiene",label:"Hygiène"},{id:"other",label:"Autre"}]),z=M(()=>[{id:"ok",label:"OK"},{id:"lost",label:"Perdu"},{id:"torepair",label:"À réparer"}]),Z=M(()=>a(H)&&e.ownerId?JSON.stringify({teamName:e.ownerName||"",teamId:e.ownerId}):JSON.stringify({teamName:"",teamId:""})),_=M(()=>a(i).trim().length>0&&a(g)>=1&&!I);var V=La(),y=ie(V),k=t(y),D=s(t(k)),R=t(D),U=s(k,2),ne=t(U),ee=t(ne),ae=t(ee),te=t(ae);Ee(te,{class:"h-4 w-4 "});var le=s(ae,2);le.disabled=I;var oe=s(ne,2),F=s(t(oe),2);F.disabled=I;var G=s(U,2),Y=t(G),ce=s(t(Y),2);Ae(ce,{get items(){return a(P)},size:"sm",disabled:I,get selected(){return a(v)},set selected(u){q(v,u,!0)}});var he=s(Y,2);{var r=u=>{var N=Va(),O=s(t(N),2);Ae(O,{get items(){return a(z)},size:"sm",disabled:I,get selected(){return a(h)},set selected(se){q(h,se,!0)}}),n(u,N)};C(he,u=>{o()&&u(r)})}var b=s(G,2),f=t(b),T=t(f),J=t(T);Je(J,{class:"size-4"});var l=s(T,2);l.disabled=I;var d=s(f,2),x=t(d),Q=t(x);De(Q,{class:"size-4"});var B=s(x,2);B.disabled=I;var $=s(b,2);{var re=u=>{var N=Fa(),O=t(N),se=t(O);A(()=>E(se,a(j))),n(u,N)};C($,u=>{a(j)&&u(re)})}var pe=s(y,2),we=t(pe);{var K=u=>{var N=Aa(),O=t(N);O.__click=[Ta,e],O.disabled=I;var se=t(O);Ke(se,{class:"h-5 w-5"});var ue=s(O,2);ue.__click=[Pa,_,i,S,v,h,g,w,L,Z,e];var de=t(ue);{var me=be=>{Le(be,{class:"h-5 w-5"})};C(de,be=>{be(me,!1)})}A(()=>ue.disabled=!a(_)),n(u,N)};C(we,u=>{m()&&u(K)})}A(()=>E(R,e.ownerName)),Ce(le,()=>a(i),u=>q(i,u)),Ce(F,()=>a(S),u=>q(S,u)),Ce(l,()=>a(g),u=>q(g,u)),Ce(B,()=>a(w),u=>q(w,u)),n(p,V),xe()}ke(["click"]);var Na=c('<div><span class="font-semibold">Équipe propriétaire :</span> </div>'),Oa=c('<div class="alert alert-error"><span class="text-sm"> </span></div>'),ja=c('<div class="alert alert-soft mb-4"><div class="flex items-center gap-2 text-sm"><!> <div><!></div></div></div> <!> <!>',1),Ba=c('<div class="alert alert-warning"><span>Matériel introuvable</span></div>'),Wa=c("<!> <!>",1);function Ra(p,e){_e(e,!0);let o=W(!1),m=W(null);const i=M(()=>e.materielId?fe.getMaterielById(e.materielId):null);function S(){q(m,null)}async function v(g){if(!e.materielId){q(m,"ID du matériel manquant");return}q(o,!0),q(m,null);try{await fe.updateMateriel(e.materielId,{name:g.name,description:g.description||void 0,type:g.type||"other",status:g.status,quantity:g.quantity,location:g.location||void 0}),console.log("[EditMaterielModal] Matériel mis à jour:",e.materielId),e.onSuccess?.(),S(),e.onClose()}catch(w){q(m,w.message||"Erreur lors de la mise à jour du matériel",!0),console.error("[EditMaterielModal] Erreur:",w)}finally{q(o,!1)}}function h(){S(),e.onClose()}ca(p,{get isOpen(){return e.isOpen},onClose:h,children:(g,w)=>{var L=Wa(),I=ie(L);ua(I,{title:"Modifier le matériel",onClose:h});var j=s(I,2);ma(j,{children:(H,P)=>{var z=Me(),Z=ie(z);{var _=y=>{var k=ja(),D=ie(k),R=t(D),U=t(R);qe(U,{class:"h-4 w-4"});var ne=s(U,2),ee=t(ne);{var ae=F=>{var G=Na(),Y=s(t(G));A(()=>E(Y,` ${a(i).ownerData.teamName??""}`)),n(F,G)};C(ee,F=>{a(i).ownerData?.teamId&&F(ae)})}var te=s(D,2);{let F=M(()=>({name:a(i).name,description:a(i).description,type:a(i).type,status:a(i).status,quantity:a(i).quantity,location:a(i).location,shareableWith:a(i).shareableWith}));Ne(te,{showStatus:!0,get initialValues(){return a(F)},onSubmit:v,onCancel:h})}var le=s(te,2);{var oe=F=>{var G=Oa(),Y=t(G),ce=t(Y);A(()=>E(ce,a(m))),n(F,G)};C(le,F=>{a(m)&&F(oe)})}n(y,k)},V=y=>{var k=Ba();n(y,k)};C(Z,y=>{a(i)?y(_):y(V,!1)})}n(H,z)}}),n(g,L)},$$slots:{default:!0}}),xe()}var Ua=c('<div class="flex flex-wrap gap-3"></div>'),Qa=c('<div class="flex flex-wrap gap-3"></div>'),Ha=c('<div class="flex flex-wrap gap-3"></div>'),Ga=c('<div><div class="mb-4 flex items-center justify-between"><h4 class="text-lg font-bold"><!> Filtres</h4> <button class="btn btn-warning btn-sm"><!> Effacer</button></div> <!> <!> <!></div>');function Ja(p,e){_e(e,!0);let o=X(e,"filters",15),m=X(e,"disabled",3,!1);function i(_,V){const y=_.indexOf(V);y===-1?_.push(V):_.splice(y,1),o({...o()})}function S(_){return{electronic:"Électronique",manual:"Manuel",other:"Autre",tools:"Outils",dish:"Vaisselle",cooking:"Cuisine",gaz:"Gaz",hygiene:"Hygiène"}[_]||_}function v(_){return{ok:"OK",lost:"Perdu",loan:"Utilisé",reserved:"Réservé",torepair:"À réparer"}[_]||_}var h=Ga();let g;var w=t(h),L=t(w),I=t(L);Xe(I,{class:"inline size-4 align-baseline"});var j=s(L,2);j.__click=function(..._){e.onReset?.apply(this,_)};var H=t(j);Ze(H,{class:"h-4 w-4"});var P=s(w,2);Ie(P,{legend:"Type",get iconComponent(){return Ee},children:(_,V)=>{var y=Ua();ye(y,20,()=>e.availableTypes,k=>k,(k,D)=>{{let R=M(()=>o().types.includes(D)),U=M(()=>S(D));Se(k,{get checked(){return a(R)},get label(){return a(U)},onchange:()=>i(o().types,D),get disabled(){return m()},color:"secondary",size:"md"})}}),n(_,y)},$$slots:{default:!0}});var z=s(P,2);Ie(z,{legend:"Lieu",get iconComponent(){return De},children:(_,V)=>{var y=Qa();ye(y,20,()=>e.availableLocations,k=>k,(k,D)=>{{let R=M(()=>o().locations.includes(D));Se(k,{get checked(){return a(R)},get label(){return D},onchange:()=>i(o().locations,D),get disabled(){return m()},color:"secondary",size:"md"})}}),n(_,y)},$$slots:{default:!0}});var Z=s(z,2);Ie(Z,{legend:"Statut",get iconComponent(){return Ye},children:(_,V)=>{var y=Ha();ye(y,20,()=>e.availableStatuses,k=>k,(k,D)=>{{let R=M(()=>o().statuses.includes(D)),U=M(()=>v(D));Se(k,{get checked(){return a(R)},get label(){return a(U)},onchange:()=>i(o().statuses,D),get disabled(){return m()},color:"secondary",size:"md"})}}),n(_,y)},$$slots:{default:!0}}),A(_=>{g=ge(h,1,"mt-16 space-y-4",null,g,_),j.disabled=m()},[()=>({"opacity-30":m()})]),n(p,h),xe()}ke(["click"]);function Ka(p,e){q(e,!a(e))}var Xa=(p,e,o)=>e(a(o).$id),Za=c('<button><!> <span class="badge badge-sm badge-neutral ml-2"> </span></button>'),Ya=c('<div class="tabs tabs-border bg-base-200 tabs-lg mb-6 font-semibold"></div>'),$a=c('<div class="mb-6 text-end"><button class="btn btn-wide btn-primary"><!> Ajouter du matériel</button></div>'),et=c('<div class="card bg-base-100 mb-6 shadow-lg"><div class="card-body"><!></div></div>'),at=c('<div class="alert alert-warning"><span>Vous devez être connecté pour voir le matériel.</span></div>'),tt=c('<div class="alert alert-error shadow-lg"><span> </span></div>'),lt=c('<div class="alert alert-info"><span>Sélectionnez une équipe pour voir son matériel.</span></div>'),rt=c('<div class="py-12 text-center"><p class="text-base-content/60 mb-4 text-lg">Aucun matériel ne correspond aux critères de filtrage...</p> <button class="btn btn-warning btn-sm">Effacer les filtres</button></div>'),st=c(`<div class="bg-base-200 rounded-box border-base-200 border-2 border-dashed py-20 text-center"><div class="bg-base-200 mb-4 inline-block rounded-full p-4"><!></div> <h3 class="mb-2 text-lg font-bold">Aucun matériel</h3> <p class="text-base-content/60 mb-6">Cette équipe n'a pas encore de matériel.</p></div>`),it=c('<div class="grid grid-cols-1"></div>'),nt=c('<!> <div class="p-4 lg:ml-100"><div class="mx-auto max-w-7xl px-4 py-8"><!> <!> <!> <!></div></div> <!>',1);function gt(p,e){_e(e,!0);let o=W(!1),m=W(null),i=W(null),S=W(!1),v=W(ve({types:[],locations:[],statuses:[]}));function h(){q(o,!1)}function g(r){q(m,r,!0)}function w(){q(m,null)}async function L(r){try{await fe.createMateriel(r),h(),console.log("[MaterielPage] Matériel créé avec succès")}catch(b){console.error("[MaterielPage] Erreur création:",b)}}function I(){console.log("[MaterielPage] Matériel mis à jour"),w()}const j=["electronic","manual","other","tools","dish","cooking","gaz","hygiene"],H=["ok","lost","loan","reserved","torepair"],P=M(()=>ra.myTeams),z=M(()=>a(i)?a(P).find(r=>r.$id===a(i)):null),Z=M(()=>a(i)?fe.materiels.filter(r=>r.ownerData.teamId===a(i)||r.shareableWith?.includes(a(i))):[]),_=M(()=>{const r=a(Z),b=new Set;return r.forEach(f=>{f.location&&b.add(f.location)}),Array.from(b).sort()}),V=M(()=>{const r=a(Z);return a(v).types.length>0||a(v).locations.length>0||a(v).statuses.length>0?r.filter(f=>{const T=a(v).types.length===0||f.type&&a(v).types.includes(f.type),J=a(v).locations.length===0||f.location&&a(v).locations.includes(f.location),l=a(v).statuses.length===0||a(v).statuses.includes(f.status);return T&&J&&l}):r});function y(){q(v,{types:[],locations:[],statuses:[]},!0)}function k(r){Te(`/dashboard/materiel/${r}`)}Pe(()=>{const r=e.params?.teamId;r&&r!==a(i)?a(P).find(f=>f.$id===r)&&q(i,r,!0):!r&&!a(i)&&!a(S)&&a(P).length>0&&(q(S,!0),Te(`/dashboard/materiel/${a(P)[0].$id}`))}),Pe(()=>{const b=(a(i)?a(P).find(f=>f.$id===a(i)):null)?.name||"Matériel";Ve.setConfig({title:b,materielContext:"materiel",teamId:a(i)||void 0})}),la(()=>{Ve.reset()});var D=nt(),R=ie(D);fa(R,{width:"100",children:(r,b)=>{Ja(r,{disabled:!1,get availableTypes(){return j},get availableLocations(){return a(_)},get availableStatuses(){return H},onReset:y,get filters(){return a(v)},set filters(f){q(v,f,!0)}})},$$slots:{default:!0}});var U=s(R,2),ne=t(U),ee=t(ne);{var ae=r=>{var b=Ya();ye(b,21,()=>a(P),f=>f.$id,(f,T)=>{var J=Za();J.__click=[Xa,k,T];var l=t(J);qe(l,{class:"mr-2 h-4 w-4"});var d=s(l),x=s(d),Q=t(x);A(B=>{ge(J,1,`tab ${a(i)===a(T).$id?"tab-active":""}`),E(d,` ${a(T).name??""} `),E(Q,B)},[()=>fe.materiels.filter(B=>B.ownerData.teamId===a(T).$id||B.shareableWith?.includes(a(T).$id)).length]),n(f,J)}),n(r,b)};C(ee,r=>{a(P).length>1&&r(ae)})}var te=s(ee,2);{var le=r=>{var b=$a(),f=t(b);f.__click=[Ka,o];var T=t(f);$e(T,{class:"h-4 w-4"}),n(r,b)};C(te,r=>{a(o)||r(le)})}var oe=s(te,2);{var F=r=>{var b=et(),f=t(b),T=t(f);Ne(T,{showStatus:!1,onSubmit:L,onCancel:h,get ownerId(){return a(z).$id},get ownerName(){return a(z).name}}),sa(3,b,()=>ba),n(r,b)};C(oe,r=>{a(o)&&a(z)&&r(F)})}var G=s(oe,2);{var Y=r=>{var b=at();n(r,b)},ce=r=>{var b=Me(),f=ie(b);{var T=l=>{var d=tt(),x=t(d),Q=t(x);A(()=>E(Q,fe.error)),n(l,d)},J=l=>{var d=Me(),x=ie(d);{var Q=$=>{var re=lt();n($,re)},B=$=>{var re=Me(),pe=ie(re);{var we=u=>{var N=Me(),O=ie(N);{var se=de=>{var me=rt(),be=s(t(me),2);be.__click=y,n(de,me)},ue=de=>{var me=st(),be=t(me),Oe=t(be);Ee(Oe,{class:"h-8 w-8 opacity-50"}),n(de,me)};C(O,de=>{a(v).types.length>0||a(v).locations.length>0||a(v).statuses.length>0?de(se):de(ue,!1)})}n(u,N)},K=u=>{var N=it();ye(N,21,()=>a(V),O=>O.$id,(O,se)=>{Ia(O,{get materiel(){return a(se)},onEdit:ue=>g(ue)})}),n(u,N)};C(pe,u=>{a(V).length===0?u(we):u(K,!1)})}n($,re)};C(x,$=>{a(i)?$(B,!1):$(Q)},!0)}n(l,d)};C(f,l=>{fe.error?l(T):l(J,!1)},!0)}n(r,b)};C(G,r=>{ze.isAuthenticated?r(ce,!1):r(Y)})}var he=s(U,2);{let r=M(()=>a(m)!==null);Ra(he,{get materielId(){return a(m)},get isOpen(){return a(r)},onClose:w,onSuccess:I})}n(p,D),xe()}ke(["click"]);export{gt as default};
