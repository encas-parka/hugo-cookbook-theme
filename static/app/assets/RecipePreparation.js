import{Q as O,a as sa,n as na,a0 as ia}from"./icons.js";import{d as B,v as d,e as E,m as t,i as J,h as _,g as s,I as y,u as P,w as N,L as oa,x as h,b as v,c as V,aF as $,t as la,o as e,K as va,p as da,aG as j}from"./appwrite.js";import{g as pa}from"./products-display.js";import{F as U}from"./Fieldset.js";import{S as q}from"./SvelteMarkdown.js";var ca=d('<span class="ml-1 inline-flex align-middle print:hidden"><!></span>'),ma=d('<span class="text-base-content/70 print-xs ml-1"> </span>'),ua=d('<span class="text-base-content/70 display:text-sm print-xxs before:mx-1"> </span>'),_a=d('<li class="mb-0.5 grid grid-cols-[auto_1fr] items-baseline gap-x-2 gap-y-0 text-sm"><span class=" print-xs truncate font-medium"> <!></span> <div class="flex flex-wrap items-baseline gap-x-1"><span><span class="print-xs tabular-nums"> </span> <span class="ml-1"> </span> <!></span> <!></div></li>'),fa=d('<ul class="print-xs space-y-2 print:space-y-1"></ul>'),ga=d('<div class="print-xs space-y-6 print:space-y-2"><!> <div class="text-base-content/60 print-xs flex items-center gap-1 text-sm"><!> <span>→ Allergènes</span></div></div>');function Fa(A,i){B(i,!0);const b=P(()=>i.servings/i.defaultServings),z=P(()=>{const a=new Map;return i.ingredients.forEach(n=>{const r=n.type||"Autres";a.has(r)||a.set(r,[]),a.get(r).push(n)}),a});function I(a){const n=$(a.originalQuantity,a.originalUnit,t(b)),r=$(a.normalizedQuantity,a.normalizedUnit,t(b));return{...a,originalDisplayQuantity:n.formattedNumber,originalDisplayUnit:n.unit,normalizedDisplayQuantity:r.formattedNumber,normalizedDisplayUnit:r.unit,hasDifferentQuantities:n.formattedNumber!==r.formattedNumber||n.unit!==r.unit}}var D=ga(),Q=s(D);E(Q,17,()=>[...t(z)],([a,n])=>a,(a,n)=>{var r=P(()=>la(t(n),2));let u=()=>t(r)[0],f=()=>t(r)[1];const g=P(()=>pa(u()));U(a,{get legend(){return t(g).displayName},get iconComponent(){return t(g).icon},legendFont:"font-light",legendSize:"text-sm",children:(o,l)=>{var p=fa();E(p,21,f,J,(k,x)=>{const S=P(()=>I(t(x)));var L=_a(),F=s(L),G=s(F),W=_(G);{var X=c=>{var m=ca(),w=s(m);O(w,{class:"print-xs h-4 w-4 opacity-70 "}),e(m),v(c,m)};y(W,c=>{t(x).allergens&&t(x).allergens.length>0&&c(X)})}e(F);var K=_(F,2),R=s(K),M=s(R),Y=s(M,!0);e(M);var T=_(M,2),Z=s(T,!0);e(T);var aa=_(T,2);{var ta=c=>{var m=ma(),w=s(m);e(m),N(()=>h(w,`(${t(S).normalizedDisplayQuantity??""}
                    ${t(S).normalizedDisplayUnit??""})`)),v(c,m)};y(aa,c=>{t(S).hasDifferentQuantities&&c(ta)})}e(R);var ea=_(R,2);{var ra=c=>{var m=ua(),w=s(m);e(m),N(()=>h(w,`(${t(x).comment??""})`)),v(c,m)};y(ea,c=>{t(x).comment&&c(ra)})}e(K),e(L),N(()=>{oa(F,"title",t(x).name),h(G,`${t(x).name??""} : `),h(Y,t(S).originalDisplayQuantity),h(Z,t(S).originalDisplayUnit)}),v(k,L)}),e(p),v(o,p)},$$slots:{default:!0}})});var C=_(Q,2),H=s(C);O(H,{class:"h-4 w-4"}),va(2),e(C),e(D),v(A,D),V()}var xa=d("<div><!></div>"),ya=d('<div class="prose max-w-none"><!></div>'),ha=d("<div><!></div>"),ba=d('<div class="prose max-w-none"><!></div>'),za=d('<div class="flex items-start gap-2"><div class="text-sm"> </div></div>'),Da=d('<div class="space-y-2 print:space-y-1"></div>'),Qa=d('<div class="space-y-4"><!> <!> <!></div>');function Na(A,i){B(i,!0);let b=da(i,"astuces",19,()=>[]);var z=Qa(),I=s(z);{var D=a=>{U(a,{legend:"Préparation à l'avance",get iconComponent(){return na},legendSize:"text-lg",iconSize:18,children:(n,r)=>{var u=ya(),f=s(u);{var g=l=>{var p=xa(),k=s(p);j(k,()=>i.preparation24hHtml),e(p),v(l,p)},o=l=>{q(l,{get source(){return i.preparation24h}})};y(f,l=>{i.preparation24hHtml?l(g):l(o,!1)})}e(u),v(n,u)},$$slots:{default:!0}})};y(I,a=>{i.preparation24h&&a(D)})}var Q=_(I,2);U(Q,{legend:"Préparation",get iconComponent(){return sa},legendSize:"text-lg",children:(a,n)=>{var r=ba(),u=s(r);{var f=o=>{var l=ha(),p=s(l);j(p,()=>i.preparationHtml),e(l),v(o,l)},g=o=>{q(o,{get source(){return i.preparation}})};y(u,o=>{i.preparationHtml?o(f):o(g,!1)})}e(r),v(a,r)},$$slots:{default:!0}});var C=_(Q,2);{var H=a=>{var n=Da();E(n,21,b,J,(r,u)=>{U(r,{legend:"Astuces",get iconComponent(){return ia},legendSize:"text-sm",children:(f,g)=>{var o=za(),l=s(o),p=s(l,!0);e(l),e(o),N(()=>h(p,t(u).astuce)),v(f,o)},$$slots:{default:!0}})}),e(n),v(a,n)};y(C,a=>{b().length>0&&a(H)})}e(z),v(A,z),V()}export{Fa as R,Na as a};
