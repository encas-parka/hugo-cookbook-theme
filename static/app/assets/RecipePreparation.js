import{d as B,v as d,e as E,m as t,i as J,g as _,h as s,K as y,u as Q,w as U,M as sa,x as h,b as v,c as V,aL as O,t as na,o as e,G as ia,p as oa,aM as $}from"./appwrite.js";import{g as la}from"./products-display.js";import{F}from"./Fieldset.js";import{T as j,a as va,x as da,au as pa}from"./icons.js";import{S as q}from"./SvelteMarkdown.js";var ca=d('<span class="ml-1 inline-flex align-middle print:hidden"><!></span>'),ma=d('<span class="text-base-content/70 print-xs ml-1"> </span>'),ua=d('<span class="text-base-content/70 display:text-sm print-xxs before:mx-1"> </span>'),_a=d('<li class="mb-0.5 grid grid-cols-[auto_1fr] items-baseline gap-x-2 gap-y-0 text-sm"><span class=" print-xs truncate font-medium"> <!></span> <div class="flex flex-wrap items-baseline gap-x-1"><span><span class="print-xs tabular-nums"> </span> <span class="ml-1"> </span> <!></span> <!></div></li>'),fa=d('<ul class="print-xs space-y-2 print:space-y-1"></ul>'),ga=d('<div class="print-xs space-y-6 print:space-y-2"><!> <div class="text-base-content/60 print-xs flex items-center gap-1 text-sm"><!> <span>→ Allergènes</span></div></div>');function Na(A,i){B(i,!0);const b=Q(()=>i.servings/i.defaultServings),z=Q(()=>{const a=new Map;return i.ingredients.forEach(n=>{const r=n.type||"Autres";a.has(r)||a.set(r,[]),a.get(r).push(n)}),a});function C(a){const n=O(a.originalQuantity,a.originalUnit,t(b)),r=O(a.normalizedQuantity,a.normalizedUnit,t(b));return{...a,originalDisplayQuantity:n.formattedNumber,originalDisplayUnit:n.unit,normalizedDisplayQuantity:r.formattedNumber,normalizedDisplayUnit:r.unit,hasDifferentQuantities:n.formattedNumber!==r.formattedNumber||n.unit!==r.unit}}var D=ga(),S=s(D);E(S,17,()=>[...t(z)],([a,n])=>a,(a,n)=>{var r=Q(()=>na(t(n),2));let u=()=>t(r)[0],f=()=>t(r)[1];const g=Q(()=>la(u()));F(a,{get legend(){return t(g).displayName},get iconComponent(){return t(g).icon},legendFont:"font-light",legendSize:"text-sm",children:(o,l)=>{var p=fa();E(p,21,f,J,(M,x)=>{const w=Q(()=>C(t(x)));var k=_a(),N=s(k),G=s(N),W=_(G);{var X=c=>{var m=ca(),P=s(m);j(P,{class:"print-xs h-4 w-4 opacity-70 "}),e(m),v(c,m)};y(W,c=>{t(x).allergens&&t(x).allergens.length>0&&c(X)})}e(N);var K=_(N,2),L=s(K),R=s(L),Y=s(R,!0);e(R);var T=_(R,2),Z=s(T,!0);e(T);var aa=_(T,2);{var ta=c=>{var m=ma(),P=s(m);e(m),U(()=>h(P,`(${t(w).normalizedDisplayQuantity??""}
                    ${t(w).normalizedDisplayUnit??""})`)),v(c,m)};y(aa,c=>{t(w).hasDifferentQuantities&&c(ta)})}e(L);var ea=_(L,2);{var ra=c=>{var m=ua(),P=s(m);e(m),U(()=>h(P,`(${t(x).comment??""})`)),v(c,m)};y(ea,c=>{t(x).comment&&c(ra)})}e(K),e(k),U(()=>{sa(N,"title",t(x).name),h(G,`${t(x).name??""} : `),h(Y,t(w).originalDisplayQuantity),h(Z,t(w).originalDisplayUnit)}),v(M,k)}),e(p),v(o,p)},$$slots:{default:!0}})});var I=_(S,2),H=s(I);j(H,{class:"h-4 w-4"}),ia(2),e(I),e(D),v(A,D),V()}var xa=d("<div><!></div>"),ya=d('<div class="prose max-w-none"><!></div>'),ha=d("<div><!></div>"),ba=d('<div class="prose max-w-none"><!></div>'),za=d('<div class="flex items-start gap-2"><div class="text-sm"> </div></div>'),Da=d('<div class="space-y-2 print:space-y-1"></div>'),Sa=d('<div class="space-y-4"><!> <!> <!></div>');function Ua(A,i){B(i,!0);let b=oa(i,"astuces",19,()=>[]);var z=Sa(),C=s(z);{var D=a=>{F(a,{legend:"Préparation à l'avance",get iconComponent(){return da},legendSize:"text-lg",iconSize:18,children:(n,r)=>{var u=ya(),f=s(u);{var g=l=>{var p=xa(),M=s(p);$(M,()=>i.preparation24hHtml),e(p),v(l,p)},o=l=>{q(l,{get source(){return i.preparation24h}})};y(f,l=>{i.preparation24hHtml?l(g):l(o,!1)})}e(u),v(n,u)},$$slots:{default:!0}})};y(C,a=>{i.preparation24h&&a(D)})}var S=_(C,2);F(S,{legend:"Préparation",get iconComponent(){return va},legendSize:"text-lg",children:(a,n)=>{var r=ba(),u=s(r);{var f=o=>{var l=ha(),p=s(l);$(p,()=>i.preparationHtml),e(l),v(o,l)},g=o=>{q(o,{get source(){return i.preparation}})};y(u,o=>{i.preparationHtml?o(f):o(g,!1)})}e(r),v(a,r)},$$slots:{default:!0}});var I=_(S,2);{var H=a=>{var n=Da();E(n,21,b,J,(r,u)=>{F(r,{legend:"Astuces",get iconComponent(){return pa},legendSize:"text-sm",children:(f,g)=>{var o=za(),l=s(o),p=s(l,!0);e(l),e(o),U(()=>h(p,t(u).astuce)),v(f,o)},$$slots:{default:!0}})}),e(n),v(a,n)};y(I,a=>{b().length>0&&a(H)})}e(z),v(A,z),V()}export{Na as R,Ua as a};
