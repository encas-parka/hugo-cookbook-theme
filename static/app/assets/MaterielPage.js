import{B as ze,d as he,v as u,m as e,u as M,h as r,ab as Ge,o as t,g as n,K as C,G as ne,w as j,ao as Qe,ap as He,aq as Je,C as xe,x as A,a9 as Ke,b as d,c as ye,I as Fe,ar as Xe,as as Ye,U as Ze,p as te,e as Me,y as U,z as fe,k as me,A as E,T as De,W as qe,af as $e,j as Ie,$ as _e,J as Le,D as ea,E as Ne,Y as aa,P as Oe,F as ta}from"./appwrite.js";import{M as ra,b as la,c as sa,n as je,f as ia}from"./index.js";import{a as We}from"./date-helpers.js";import{a5 as na,a6 as oa,r as da,a7 as va,k as ca,a8 as ua,a9 as ma,W as Pe,U as Ve,aa as ba,G as Ue,ab as Ae,ac as fa,X as ga,w as _a,F as xa,x as ha,c as ya}from"./icons.js";import{C as Ee}from"./CheckboxBadge.js";import"./BadgeList.js";import{F as Te}from"./Fieldset.js";import{L as pa}from"./LeftPanel.js";var wa=u('<div class="flex items-center gap-1"><!> <span class="max-w-60 truncate"> </span></div>'),Ma=u('<div class="flex items-center gap-1"><!> <span> </span></div>'),Ca=u('<div class="text-base-content/70 text-xs"> </div>'),ka=u('<div class="text-base-content/60 line-clamp-1 text-xs"> </div>'),Sa=u("<div> </div>"),Ia=u('<div><div class="text-xs"><span class="text-info font-semibold"> </span> <span class="text-base-content/80 ml-2 font-medium"> <!></span></div></div>'),za=u('<button class="btn btn-ghost btn-xs text-primary" aria-label="Éditer"><!></button>'),Da=u('<div class="card card-side bg-base-100 border-base-200 hover:border-primary/50 group cursor-pointer border text-left shadow-sm transition-all hover:shadow-md" role="button" tabindex="0"><div class="hidden pl-4 sm:flex sm:items-center"><div><!></div></div> <div class="card-body py-3"><div class="flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between"><div class="flex min-w-0 flex-col gap-1"><div class="flex flex-wrap items-center gap-x-4 gap-y-0"><div class="flex items-center gap-2"><h3 class="text-primary group-hover:text-primary/80 text-base font-semibold transition-colors"> </h3> <span> </span></div> <div class="text-base-content/80 flex flex-wrap items-center gap-x-2 gap-y-1 text-sm"><!> <!></div></div> <div class="flex flex-wrap items-baseline gap-x-4 gap-y-2"><div class="text-sm font-medium"><span> </span> <span class="text-base-content/60 ml-1 text-xs">disp.</span></div> <!> <!> <!></div></div> <div class="flex flex-col items-start gap-1 sm:items-center"><!></div> <div class="flex items-center justify-end"><!></div></div></div></div>');function qa(H,a){he(a,!0);const h=M(()=>{switch(a.materiel.type){case"electronic":return ma;case"manual":return ua;case"cooking":return ca;case"dish":return va;case"gaz":return da;case"hygiene":return oa;default:return na}}),y=M(()=>{if(!a.materiel||!a.materiel.status)return{label:"Chargement...",badgeClass:"badge-neutral",priority:99};const l=Ye(a.materiel.status);return{ok:{label:l,badgeClass:"badge-success",priority:0},lost:{label:l,badgeClass:"badge-error",priority:4},torepair:{label:l,badgeClass:"badge-warning",priority:1}}[a.materiel.status]||{label:l,badgeClass:"badge-neutral",priority:99}}),o=M(()=>Fe.userId?!!(a.materiel.ownerData?.userId===Fe.userId||a.materiel.ownerData?.teamId):!1),z=M(()=>a.materiel.description?a.materiel.description.length>80?a.materiel.description.substring(0,80)+"...":a.materiel.description:null);var v=Da();v.__click=()=>e(o)&&a.onEdit?.(a.materiel.$id),v.__keydown=l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),e(o)&&a.onEdit?.(a.materiel.$id))};var p=r(v),x=r(p),T=r(x);{let l=M(()=>Xe(a.materiel.type));Ge(T,()=>e(h),(i,c)=>{c(i,{get class(){return`${e(l)??""} h-6 w-6`}})})}t(x),t(p);var S=n(p,2),D=r(S),F=r(D),J=r(F),K=r(J),q=r(K),L=r(q,!0);t(q);var g=n(q,2),W=r(g,!0);t(g),t(K);var _=n(K,2),w=r(_);{var k=l=>{var i=wa(),c=r(i);Pe(c,{class:"h-3 w-3"});var I=n(c,2),B=r(I,!0);t(I),t(i),j(()=>A(B,a.materiel.location)),d(l,i)};C(w,l=>{a.materiel.location&&l(k)})}var N=n(w,2);{var R=l=>{var i=Ma(),c=r(i);Ve(c,{class:"h-3 w-3"});var I=n(c,2),B=r(I,!0);t(I),t(i),j(()=>A(B,a.materiel.ownerData.teamName)),d(l,i)};C(N,l=>{a.materiel.ownerData?.teamName&&l(R)})}t(_),t(J);var Z=n(J,2),$=r(Z),ee=r($),oe=r(ee);t(ee),ne(2),t($);var re=n($,2);{var ge=l=>{var i=Ca(),c=r(i);t(i),j(()=>A(c,`${a.materiel.totalLoanedQuantity??""}/${a.materiel.quantity??""} en prêt(s)`)),d(l,i)};C(re,l=>{a.materiel.totalLoanedQuantity>0&&l(ge)})}var P=n(re,2);{var G=l=>{var i=ka(),c=r(i,!0);t(i),j(()=>A(c,e(z))),d(l,i)};C(P,l=>{e(z)&&l(G)})}var ae=n(P,2);{var de=l=>{var i=Sa(),c=r(i,!0);t(i),j(()=>{xe(i,1,`badge ${e(y).badgeClass??""} badge-xs gap-1 py-0`),A(c,e(y).label)}),d(l,i)};C(ae,l=>{a.materiel.status!=="ok"&&l(de)})}t(Z),t(F);var ve=n(F,2),Ce=r(ve);{var s=l=>{var i=Ia(),c=r(i),I=r(c),B=r(I);t(I);var le=n(I,2),X=r(le),be=n(X);{var ke=Y=>{var pe=Ze();j((ie,f)=>A(pe,`du ${ie??""}
                  jusqu'au ${f??""}`),[()=>We(a.materiel.loanDetails[0].startDate),()=>We(a.materiel.loanDetails[0].endDate)]),d(Y,pe)};C(be,Y=>{a.materiel.loanDetails.length>0&&Y(ke)})}t(le),t(c),t(i),j(Y=>{A(B,`${a.materiel.loanDetails.length??""} réservation :`),A(X,`${Y??""} `)},[()=>a.materiel.loanDetails.map(Y=>`${Y.responsibleName} (${Y.quantity})`).join(", ")]),d(l,i)};C(Ce,l=>{a.materiel.loanDetails.length>0&&l(s)})}t(ve);var m=n(ve,2),b=r(m);{var V=l=>{var i=za();i.__click=I=>{I.stopPropagation(),a.onEdit?.(a.materiel.$id)};var c=r(i);ba(c,{class:"h-4 w-4"}),t(i),d(l,i)};C(b,l=>{e(o)&&l(V)})}t(m),t(D),t(S),t(v),j((l,i,c)=>{xe(x,1,`${l??""} rounded-lg p-3`),A(L,a.materiel.name),xe(g,1,`badge ${i??""} badge-soft badge-sm gap-1 py-0`),A(W,c),xe(ee,1,Ke(a.materiel.availableQuantity>0?"text-success":"text-error")),A(oe,`${a.materiel.availableQuantity??""}/${a.materiel.quantity??""}`)},[()=>Qe(a.materiel.type),()=>He(a.materiel.type),()=>Je(a.materiel.type).label]),d(H,v),ye()}ze(["click","keydown"]);var Ea=u('<button type="button"><span> </span> <!></button>');function Ta(H,a){he(a,!0);let h=te(a,"selectedValue",15),y=te(a,"color",3,"primary"),o=te(a,"size",3,"sm"),z=te(a,"disabled",3,!1);function v(L){return{xs:"btn-xs",sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[L]||"btn-sm"}const p=M(()=>a.value===h()),x=M(()=>v(o()));function T(){z()||h(a.value)}var S=Ea();let D;S.__click=T;var F=r(S),J=r(F,!0);t(F);var K=n(F,2);{var q=L=>{Ue(L,{class:"h-3 w-3"})};C(K,L=>{e(p)&&L(q)})}t(S),j(()=>{D=xe(S,1,`btn ${e(x)??""} flex items-center gap-2 transition-all ${`btn-${y()}`} duration-200 ${e(p)?"":"btn-dash"}`,null,D,{"opacity-50":z(),"cursor-not-allowed":z()}),S.disabled=z(),A(J,a.label)}),d(H,S),ye()}ze(["click"]);var Fa=u('<div class="flex flex-wrap gap-2"></div>');function Be(H,a){he(a,!0);let h=te(a,"selected",15),y=te(a,"size",3,"sm"),o=te(a,"disabled",3,!1),z=te(a,"color",3,"primary");var v=Fa();Me(v,21,()=>a.items,p=>p.id,(p,x)=>{Ta(p,{get value(){return e(x).id},get label(){return e(x).label},get color(){return z()},get size(){return y()},get disabled(){return o()},get selectedValue(){return h()},set selectedValue(T){h(T)}})}),t(v),d(H,v),ye()}var Pa=u('<div class="flex min-w-[200px] flex-1 flex-col gap-1"><span class="label-text-alt text-base-content/70">Status</span> <!></div>'),Va=u('<div class="alert alert-error alert-sm"><span class="text-sm"> </span></div>'),Aa=u('<div class="ms-auto mt-8 flex justify-end gap-2"><button class="btn btn-ghost"><!> Annuler</button> <button class="btn btn-primary"><!> Enregistrer</button></div>'),La=u(`<div class="space-y-6"><div class="text-lg font-medium">Ajouter du matériel a l'inventaire de <span class="font-bold italic"> </span></div> <div class="space-y-3"><div class="flex flex-wrap gap-x-6 gap-y-4"><label class="input min-w-1/2"><span class="label required"><!> Nom</span> <input type="text" class="grow" placeholder="Ex: Mixeur professionnel" maxlength="100" required aria-required="true"/></label></div> <fieldset class="fieldset bg-base-100"><legend class="fieldset-legend">Description</legend> <textarea class="textarea textarea-bordered w-full" rows="2" placeholder="Décrivez le matériel..." maxlength="500"></textarea></fieldset></div> <div class="flex flex-wrap items-center gap-x-4 gap-y-3"><div class="flex min-w-[200px] flex-1 flex-col gap-1"><span class="label-text-alt text-base-content/70">Type</span> <!></div> <!></div> <div class="flex flex-1 flex-wrap gap-x-6 gap-y-4"><label class="input w-58"><span class="label required"><!>Quantité</span> <input type="number" min="1" required aria-required="true"/></label> <label class="input flex-1"><span class="label"><!>Localisation</span> <input type="text" class="grow" placeholder="où c'est stocker" maxlength="50"/></label></div>  <!></div> <div><!></div>`,1);function Re(H,a){he(a,!0);let h=te(a,"showStatus",3,!1),y=te(a,"buttonAction",3,!0),o=U(fe(a.initialValues?.name||"")),z=U(fe(a.initialValues?.description||"")),v=U(fe(a.initialValues?.type||"")),p=U(fe(a.initialValues?.status||"ok")),x=U(fe(a.initialValues?.quantity||1)),T=U(fe(a.initialValues?.location||"")),S=U(fe(a.initialValues?.shareableWith||[])),D=!1,F=U(null);const J=M(()=>a.ownerId),K=M(()=>[{id:"electronic",label:"Électronique"},{id:"manual",label:"Ustensile"},{id:"tools",label:"Outils"},{id:"dish",label:"Vaisselle"},{id:"cooking",label:"Matériel de Cuisine"},{id:"gaz",label:"Gaz"},{id:"hygiene",label:"Hygiène"},{id:"other",label:"Autre"}]),q=M(()=>[{id:"ok",label:"OK"},{id:"lost",label:"Perdu"},{id:"torepair",label:"À réparer"}]),L=M(()=>e(J)&&a.ownerId?JSON.stringify({teamName:a.ownerName||"",teamId:a.ownerId}):JSON.stringify({teamName:"",teamId:""})),g=M(()=>e(o).trim().length>0&&e(x)>=1&&!D);function W(){if(!e(g))return;const f={name:e(o).trim(),description:e(z).trim()||null,type:e(v)||"other",status:e(p),quantity:e(x),location:e(T).trim()||null,shareableWith:e(S).length>0?e(S):null,owner:e(L)};a.onSubmit?.(f)}function _(){a.onCancel?.()}var w=La(),k=me(w),N=r(k),R=n(r(N)),Z=r(R,!0);t(R),t(N);var $=n(N,2),ee=r($),oe=r(ee),re=r(oe),ge=r(re);Ae(ge,{class:"h-4 w-4 "}),ne(),t(re);var P=n(re,2);qe(P),P.disabled=D,t(oe),t(ee);var G=n(ee,2),ae=n(r(G),2);$e(ae),ae.disabled=D,t(G),t($);var de=n($,2),ve=r(de),Ce=n(r(ve),2);Be(Ce,{get items(){return e(K)},size:"sm",disabled:D,get selected(){return e(v)},set selected(f){E(v,f,!0)}}),t(ve);var s=n(ve,2);{var m=f=>{var O=Pa(),Q=n(r(O),2);Be(Q,{get items(){return e(q)},size:"sm",disabled:D,get selected(){return e(p)},set selected(ce){E(p,ce,!0)}}),t(O),d(f,O)};C(s,f=>{h()&&f(m)})}t(de);var b=n(de,2),V=r(b),l=r(V),i=r(l);fa(i,{class:"size-4"}),ne(),t(l);var c=n(l,2);qe(c),c.disabled=D,t(V);var I=n(V,2),B=r(I),le=r(B);Pe(le,{class:"size-4"}),ne(),t(B);var X=n(B,2);qe(X),X.disabled=D,t(I),t(b);var be=n(b,2);{var ke=f=>{var O=Va(),Q=r(O),ce=r(Q,!0);t(Q),t(O),j(()=>A(ce,e(F))),d(f,O)};C(be,f=>{e(F)&&f(ke)})}t(k);var Y=n(k,2),pe=r(Y);{var ie=f=>{var O=Aa(),Q=r(O);Q.__click=_,Q.disabled=D;var ce=r(Q);ga(ce,{class:"h-5 w-5"}),ne(),t(Q);var se=n(Q,2);se.__click=W;var ue=r(se);{var we=Se=>{Ue(Se,{class:"h-5 w-5"})};C(ue,Se=>{Se(we,!1)})}ne(),t(se),t(O),j(()=>se.disabled=!e(g)),d(f,O)};C(pe,f=>{y()&&f(ie)})}t(Y),j(()=>A(Z,a.ownerName)),De(P,()=>e(o),f=>E(o,f)),De(ae,()=>e(z),f=>E(z,f)),De(c,()=>e(x),f=>E(x,f)),De(X,()=>e(T),f=>E(T,f)),d(H,w),ye()}ze(["click"]);var Na=u('<div><span class="font-semibold">Équipe propriétaire :</span> </div>'),Oa=u('<div class="alert alert-error"><span class="text-sm"> </span></div>'),ja=u('<div class="alert alert-soft mb-4"><div class="flex items-center gap-2 text-sm"><!> <div><!></div></div></div> <!> <!>',1),Wa=u('<div class="alert alert-warning"><span>Matériel introuvable</span></div>'),Ba=u("<!> <!>",1);function Ua(H,a){he(a,!0);let h=U(!1),y=U(null);const o=M(()=>a.materielId?_e.getMaterielById(a.materielId):null);function z(){E(y,null)}async function v(x){if(!a.materielId){E(y,"ID du matériel manquant");return}E(h,!0),E(y,null);try{await _e.updateMateriel(a.materielId,{name:x.name,description:x.description||void 0,type:x.type||"other",status:x.status,quantity:x.quantity,location:x.location||void 0}),console.log("[EditMaterielModal] Matériel mis à jour:",a.materielId),a.onSuccess?.(),z(),a.onClose()}catch(T){E(y,T.message||"Erreur lors de la mise à jour du matériel",!0),console.error("[EditMaterielModal] Erreur:",T)}finally{E(h,!1)}}function p(){z(),a.onClose()}ra(H,{get isOpen(){return a.isOpen},onClose:p,children:(x,T)=>{var S=Ba(),D=me(S);la(D,{title:"Modifier le matériel",onClose:p});var F=n(D,2);sa(F,{children:(J,K)=>{var q=Ie(),L=me(q);{var g=_=>{var w=ja(),k=me(w),N=r(k),R=r(N);Ve(R,{class:"h-4 w-4"});var Z=n(R,2),$=r(Z);{var ee=P=>{var G=Na(),ae=n(r(G));t(G),j(()=>A(ae,` ${e(o).ownerData.teamName??""}`)),d(P,G)};C($,P=>{e(o).ownerData?.teamId&&P(ee)})}t(Z),t(N),t(k);var oe=n(k,2);{let P=M(()=>({name:e(o).name,description:e(o).description,type:e(o).type,status:e(o).status,quantity:e(o).quantity,location:e(o).location,shareableWith:e(o).shareableWith}));Re(oe,{showStatus:!0,get initialValues(){return e(P)},onSubmit:v,onCancel:p})}var re=n(oe,2);{var ge=P=>{var G=Oa(),ae=r(G),de=r(ae,!0);t(ae),t(G),j(()=>A(de,e(y))),d(P,G)};C(re,P=>{e(y)&&P(ge)})}d(_,w)},W=_=>{var w=Wa();d(_,w)};C(L,_=>{e(o)?_(g):_(W,!1)})}d(J,q)}}),d(x,S)},$$slots:{default:!0}}),ye()}var Ra=u('<div class="flex flex-wrap gap-3"></div>'),Ga=u('<div class="flex flex-wrap gap-3"></div>'),Qa=u('<div class="flex flex-wrap gap-3"></div>'),Ha=u('<div><div class="mb-4 flex items-center justify-between"><h4 class="text-lg font-bold"><!> Filtres</h4> <button class="btn btn-warning btn-sm"><!> Effacer</button></div> <!> <!> <!></div>');function Ja(H,a){he(a,!0);let h=te(a,"filters",15),y=te(a,"disabled",3,!1);function o(g,W){const _=g.indexOf(W);_===-1?g.push(W):g.splice(_,1),h({...h()})}function z(g){return{electronic:"Électronique",manual:"Manuel",other:"Autre",tools:"Outils",dish:"Vaisselle",cooking:"Cuisine",gaz:"Gaz",hygiene:"Hygiène"}[g]||g}function v(g){return{ok:"OK",lost:"Perdu",loan:"Utilisé",reserved:"Réservé",torepair:"À réparer"}[g]||g}var p=Ha();let x;var T=r(p),S=r(T),D=r(S);_a(D,{class:"inline size-4 align-baseline"}),ne(),t(S);var F=n(S,2);F.__click=function(...g){a.onReset?.apply(this,g)};var J=r(F);xa(J,{class:"h-4 w-4"}),ne(),t(F),t(T);var K=n(T,2);Te(K,{legend:"Type",get iconComponent(){return Ae},children:(g,W)=>{var _=Ra();Me(_,20,()=>a.availableTypes,w=>w,(w,k)=>{{let N=M(()=>h().types.includes(k)),R=M(()=>z(k));Ee(w,{get checked(){return e(N)},get label(){return e(R)},onchange:()=>o(h().types,k),get disabled(){return y()},color:"secondary",size:"md"})}}),t(_),d(g,_)},$$slots:{default:!0}});var q=n(K,2);Te(q,{legend:"Lieu",get iconComponent(){return Pe},children:(g,W)=>{var _=Ga();Me(_,20,()=>a.availableLocations,w=>w,(w,k)=>{{let N=M(()=>h().locations.includes(k));Ee(w,{get checked(){return e(N)},get label(){return k},onchange:()=>o(h().locations,k),get disabled(){return y()},color:"secondary",size:"md"})}}),t(_),d(g,_)},$$slots:{default:!0}});var L=n(q,2);Te(L,{legend:"Statut",get iconComponent(){return ha},children:(g,W)=>{var _=Qa();Me(_,20,()=>a.availableStatuses,w=>w,(w,k)=>{{let N=M(()=>h().statuses.includes(k)),R=M(()=>v(k));Ee(w,{get checked(){return e(N)},get label(){return e(R)},onchange:()=>o(h().statuses,k),get disabled(){return y()},color:"secondary",size:"md"})}}),t(_),d(g,_)},$$slots:{default:!0}}),t(p),j(()=>{x=xe(p,1,"mt-16 space-y-4",null,x,{"opacity-30":y()}),F.disabled=y()}),d(H,p),ye()}ze(["click"]);var Ka=u('<button><!> <span class="badge badge-sm badge-neutral ml-2"> </span></button>'),Xa=u('<div class="tabs tabs-border bg-base-200 tabs-lg mb-6 font-semibold"></div>'),Ya=u('<div class="mb-6 text-end"><button class="btn btn-wide btn-primary"><!> Ajouter du matériel</button></div>'),Za=u('<div class="card bg-base-100 mb-6 shadow-lg"><div class="card-body"><!></div></div>'),$a=u('<div class="alert alert-warning"><span>Vous devez être connecté pour voir le matériel.</span></div>'),et=u('<div class="alert alert-error shadow-lg"><span> </span></div>'),at=u('<div class="alert alert-info"><span>Sélectionnez une équipe pour voir son matériel.</span></div>'),tt=u('<div class="py-12 text-center"><p class="text-base-content/60 mb-4 text-lg">Aucun matériel ne correspond aux critères de filtrage...</p> <button class="btn btn-warning btn-sm">Effacer les filtres</button></div>'),rt=u(`<div class="bg-base-200 rounded-box border-base-200 border-2 border-dashed py-20 text-center"><div class="bg-base-200 mb-4 inline-block rounded-full p-4"><!></div> <h3 class="mb-2 text-lg font-bold">Aucun matériel</h3> <p class="text-base-content/60 mb-6">Cette équipe n'a pas encore de matériel.</p></div>`),lt=u('<div class="grid grid-cols-1"></div>'),st=u('<!> <div class="p-4 lg:ml-100"><div class="mx-auto max-w-7xl px-4 py-8"><!> <!> <!> <!></div></div> <!>',1);function bt(H,a){he(a,!0);let h=U(!1),y=U(null),o=U(null),z=U(!1),v=U(fe({types:[],locations:[],statuses:[]}));function p(){E(h,!e(h))}function x(){E(h,!1)}function T(s){E(y,s,!0)}function S(){E(y,null)}async function D(s){try{await _e.createMateriel(s),x(),console.log("[MaterielPage] Matériel créé avec succès")}catch(m){console.error("[MaterielPage] Erreur création:",m)}}function F(){console.log("[MaterielPage] Matériel mis à jour"),S()}const J=["electronic","manual","other","tools","dish","cooking","gaz","hygiene"],K=["ok","lost","loan","reserved","torepair"],q=M(()=>ta.myTeams),L=M(()=>e(o)?e(q).find(s=>s.$id===e(o)):null),g=M(()=>e(o)?_e.materiels.filter(s=>s.ownerData.teamId===e(o)||s.shareableWith?.includes(e(o))):[]),W=M(()=>{const s=e(g),m=new Set;return s.forEach(b=>{b.location&&m.add(b.location)}),Array.from(m).sort()}),_=M(()=>{const s=e(g);return e(v).types.length>0||e(v).locations.length>0||e(v).statuses.length>0?s.filter(b=>{const V=e(v).types.length===0||b.type&&e(v).types.includes(b.type),l=e(v).locations.length===0||b.location&&e(v).locations.includes(b.location),i=e(v).statuses.length===0||e(v).statuses.includes(b.status);return V&&l&&i}):s});function w(){E(v,{types:[],locations:[],statuses:[]},!0)}function k(s){Ne(`/dashboard/materiel/${s}`)}Le(()=>{const s=ea.params.teamId;s&&s!==e(o)?e(q).find(b=>b.$id===s)&&E(o,s,!0):!s&&!e(o)&&!e(z)&&e(q).length>0&&(E(z,!0),Ne(`/dashboard/materiel/${e(q)[0].$id}`))}),Le(()=>{const m=(e(o)?e(q).find(b=>b.$id===e(o)):null)?.name||"Matériel";je.setConfig({title:m})}),aa(()=>{je.reset()});var N=st(),R=me(N);pa(R,{width:"100",children:(s,m)=>{Ja(s,{disabled:!1,get availableTypes(){return J},get availableLocations(){return e(W)},get availableStatuses(){return K},onReset:w,get filters(){return e(v)},set filters(b){E(v,b,!0)}})},$$slots:{default:!0}});var Z=n(R,2),$=r(Z),ee=r($);{var oe=s=>{var m=Xa();Me(m,21,()=>e(q),b=>b.$id,(b,V)=>{var l=Ka();l.__click=()=>k(e(V).$id);var i=r(l);Ve(i,{class:"mr-2 h-4 w-4"});var c=n(i),I=n(c),B=r(I,!0);t(I),t(l),j(le=>{xe(l,1,`tab ${e(o)===e(V).$id?"tab-active":""}`),A(c,` ${e(V).name??""} `),A(B,le)},[()=>_e.materiels.filter(le=>le.ownerData.teamId===e(V).$id||le.shareableWith?.includes(e(V).$id)).length]),d(b,l)}),t(m),d(s,m)};C(ee,s=>{e(q).length>1&&s(oe)})}var re=n(ee,2);{var ge=s=>{var m=Ya(),b=r(m);b.__click=p;var V=r(b);ya(V,{class:"h-4 w-4"}),ne(),t(b),t(m),d(s,m)};C(re,s=>{e(h)||s(ge)})}var P=n(re,2);{var G=s=>{var m=Za(),b=r(m),V=r(b);Re(V,{showStatus:!1,onSubmit:D,onCancel:x,get ownerId(){return e(L).$id},get ownerName(){return e(L).name}}),t(b),t(m),Oe(3,m,()=>slide),d(s,m)};C(P,s=>{e(h)&&e(L)&&s(G)})}var ae=n(P,2);{var de=s=>{var m=$a();d(s,m)},ve=s=>{var m=Ie(),b=me(m);{var V=i=>{var c=et(),I=r(c),B=r(I,!0);t(I),t(c),j(()=>A(B,_e.error)),d(i,c)},l=i=>{var c=Ie(),I=me(c);{var B=X=>{var be=at();d(X,be)},le=X=>{var be=Ie(),ke=me(be);{var Y=ie=>{var f=Ie(),O=me(f);{var Q=se=>{var ue=tt(),we=n(r(ue),2);we.__click=w,t(ue),d(se,ue)},ce=se=>{var ue=rt(),we=r(ue),Se=r(we);Ae(Se,{class:"h-8 w-8 opacity-50"}),t(we),ne(4),t(ue),d(se,ue)};C(O,se=>{e(v).types.length>0||e(v).locations.length>0||e(v).statuses.length>0?se(Q):se(ce,!1)})}d(ie,f)},pe=ie=>{var f=lt();Me(f,21,()=>e(_),O=>O.$id,(O,Q)=>{qa(O,{get materiel(){return e(Q)},onEdit:ce=>T(ce)})}),t(f),d(ie,f)};C(ke,ie=>{e(_).length===0?ie(Y):ie(pe,!1)})}d(X,be)};C(I,X=>{e(o)?X(le,!1):X(B)},!0)}d(i,c)};C(b,i=>{_e.error?i(V):i(l,!1)},!0)}d(s,m)};C(ae,s=>{Fe.isAuthenticated?s(ve,!1):s(de)})}t($),t(Z);var Ce=n(Z,2);{let s=M(()=>e(y)!==null);Ua(Ce,{get materielId(){return e(y)},get isOpen(){return e(s)},onClose:S,onSuccess:F})}Oe(3,Z,()=>ia),d(H,N),ye()}ze(["click"]);export{bt as default};
