import{aQ as We,aR as Qe,r as He,D as Ge,k as Je,aS as Ke,aT as Ze,J as Pe,U as Ve,az as Xe,z as Re,ax as Ae,aU as Ye,X as $e,w as ea,F as aa,n as ta,P as ra}from"./icons.js";import{B as Ie,d as he,v as u,m as e,u as M,g as r,a6 as la,o as t,h as n,I as C,K as ne,w as j,aY as sa,aZ as ia,a_ as na,C as xe,x as A,aa as oa,b as d,c as ye,G as Fe,a$ as da,b0 as va,S as ca,p as ae,e as Me,y as U,z as fe,k as me,A as q,R as De,U as Ee,aq as ua,j as ze,a2 as _e,H as Le,$ as ma,E as Ne,F as ba,O as fa}from"./appwrite.js";import{M as ga,a as _a,b as xa,n as Oe,s as ha}from"./index.js";import{g as je}from"./date-helpers.js";import{C as qe}from"./CheckboxBadge.js";import"./BadgeList.js";import{F as Te}from"./Fieldset.js";import{L as ya}from"./LeftPanel.js";var pa=u('<div class="flex items-center gap-1"><!> <span class="max-w-[100px] truncate"> </span></div>'),wa=u('<div class="flex items-center gap-1"><!> <span> </span></div>'),Ma=u('<div class="text-base-content/70 text-xs"> </div>'),Ca=u('<div class="text-base-content/60 line-clamp-1 text-xs"> </div>'),ka=u("<div> </div>"),Sa=u('<div><div class="text-xs"><span class="text-info font-semibold"> </span> <span class="text-base-content/80 ml-2 font-medium"> <!></span></div></div>'),za=u('<button class="btn btn-ghost btn-xs text-primary" aria-label="Éditer"><!></button>'),Ia=u('<div class="card card-side bg-base-100 border-base-200 hover:border-primary/50 group cursor-pointer border text-left shadow-sm transition-all hover:shadow-md" role="button" tabindex="0"><div class="hidden pl-4 sm:flex sm:items-center"><div><!></div></div> <div class="card-body py-3"><div class="flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between"><div class="flex min-w-0 flex-col gap-1"><div class="flex flex-wrap items-center gap-x-4 gap-y-0"><div class="flex items-center gap-2"><h3 class="text-primary group-hover:text-primary/80 text-base font-semibold transition-colors"> </h3> <span> </span></div> <div class="text-base-content/80 flex flex-wrap items-center gap-x-2 gap-y-1 text-sm"><!> <!></div></div> <div class="flex flex-wrap items-baseline gap-x-4 gap-y-2"><div class="text-sm font-medium"><span> </span> <span class="text-base-content/60 ml-1 text-xs">disp.</span></div> <!> <!> <!></div></div> <div class="flex flex-col items-start gap-1 sm:items-center"><!></div> <div class="flex items-center justify-end"><!></div></div></div></div>');function Da(G,a){he(a,!0);const h=M(()=>{switch(a.materiel.type){case"electronic":return Ze;case"manual":return Ke;case"cooking":return Je;case"dish":return Ge;case"gaz":return He;case"hygiene":return Qe;default:return We}}),y=M(()=>{if(!a.materiel||!a.materiel.status)return{label:"Chargement...",badgeClass:"badge-neutral",priority:99};const l=va(a.materiel.status);return{ok:{label:l,badgeClass:"badge-success",priority:0},lost:{label:l,badgeClass:"badge-error",priority:4},torepair:{label:l,badgeClass:"badge-warning",priority:1}}[a.materiel.status]||{label:l,badgeClass:"badge-neutral",priority:99}}),o=M(()=>Fe.userId?!!(a.materiel.ownerData?.userId===Fe.userId||a.materiel.ownerData?.teamId):!1),I=M(()=>a.materiel.description?a.materiel.description.length>80?a.materiel.description.substring(0,80)+"...":a.materiel.description:null);var v=Ia();v.__click=()=>e(o)&&a.onEdit?.(a.materiel.$id),v.__keydown=l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),e(o)&&a.onEdit?.(a.materiel.$id))};var p=r(v),x=r(p),T=r(x);{let l=M(()=>da(a.materiel.type));la(T,()=>e(h),(i,c)=>{c(i,{get class(){return`${e(l)??""} h-6 w-6`}})})}t(x),t(p);var S=n(p,2),D=r(S),F=r(D),J=r(F),K=r(J),E=r(K),L=r(E,!0);t(E);var g=n(E,2),B=r(g,!0);t(g),t(K);var _=n(K,2),w=r(_);{var k=l=>{var i=pa(),c=r(i);Pe(c,{class:"h-3 w-3"});var z=n(c,2),R=r(z,!0);t(z),t(i),j(()=>A(R,a.materiel.location)),d(l,i)};C(w,l=>{a.materiel.location&&l(k)})}var N=n(w,2);{var W=l=>{var i=wa(),c=r(i);Ve(c,{class:"h-3 w-3"});var z=n(c,2),R=r(z,!0);t(z),t(i),j(()=>A(R,a.materiel.ownerData.teamName)),d(l,i)};C(N,l=>{a.materiel.ownerData?.teamName&&l(W)})}t(_),t(J);var te=n(J,2),Y=r(te),$=r(Y),oe=r($);t($),ne(2),t(Y);var re=n(Y,2);{var ge=l=>{var i=Ma(),c=r(i);t(i),j(()=>A(c,`${a.materiel.totalLoanedQuantity??""}/${a.materiel.quantity??""} en prêt(s)`)),d(l,i)};C(re,l=>{a.materiel.totalLoanedQuantity>0&&l(ge)})}var P=n(re,2);{var Q=l=>{var i=Ca(),c=r(i,!0);t(i),j(()=>A(c,e(I))),d(l,i)};C(P,l=>{e(I)&&l(Q)})}var ee=n(P,2);{var de=l=>{var i=ka(),c=r(i,!0);t(i),j(()=>{xe(i,1,`badge ${e(y).badgeClass??""} badge-xs gap-1 py-0`),A(c,e(y).label)}),d(l,i)};C(ee,l=>{a.materiel.status!=="ok"&&l(de)})}t(te),t(F);var ve=n(F,2),Ce=r(ve);{var s=l=>{var i=Sa(),c=r(i),z=r(c),R=r(z);t(z);var le=n(z,2),Z=r(le),be=n(Z);{var ke=X=>{var pe=ca();j((ie,f)=>A(pe,`du ${ie??""}
                  jusqu'au ${f??""}`),[()=>je(a.materiel.loanDetails[0].startDate),()=>je(a.materiel.loanDetails[0].endDate)]),d(X,pe)};C(be,X=>{a.materiel.loanDetails.length>0&&X(ke)})}t(le),t(c),t(i),j(X=>{A(R,`${a.materiel.loanDetails.length??""} réservation :`),A(Z,`${X??""} `)},[()=>a.materiel.loanDetails.map(X=>`${X.responsibleName} (${X.quantity})`).join(", ")]),d(l,i)};C(Ce,l=>{a.materiel.loanDetails.length>0&&l(s)})}t(ve);var m=n(ve,2),b=r(m);{var V=l=>{var i=za();i.__click=z=>{z.stopPropagation(),a.onEdit?.(a.materiel.$id)};var c=r(i);Xe(c,{class:"h-4 w-4"}),t(i),d(l,i)};C(b,l=>{e(o)&&l(V)})}t(m),t(D),t(S),t(v),j((l,i,c)=>{xe(x,1,`${l??""} rounded-lg p-3`),A(L,a.materiel.name),xe(g,1,`badge ${i??""} badge-soft badge-sm gap-1 py-0`),A(B,c),xe($,1,oa(a.materiel.availableQuantity>0?"text-success":"text-error")),A(oe,`${a.materiel.availableQuantity??""}/${a.materiel.quantity??""}`)},[()=>sa(a.materiel.type),()=>ia(a.materiel.type),()=>na(a.materiel.type).label]),d(G,v),ye()}Ie(["click","keydown"]);var Ea=u('<button type="button"><span> </span> <!></button>');function qa(G,a){he(a,!0);let h=ae(a,"selectedValue",15),y=ae(a,"color",3,"primary"),o=ae(a,"size",3,"sm"),I=ae(a,"disabled",3,!1);function v(L){return{xs:"btn-xs",sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[L]||"btn-sm"}const p=M(()=>a.value===h()),x=M(()=>v(o()));function T(){I()||h(a.value)}var S=Ea();let D;S.__click=T;var F=r(S),J=r(F,!0);t(F);var K=n(F,2);{var E=L=>{Re(L,{class:"h-3 w-3"})};C(K,L=>{e(p)&&L(E)})}t(S),j(()=>{D=xe(S,1,`btn ${e(x)??""} flex items-center gap-2 transition-all ${`btn-${y()}`} duration-200 ${e(p)?"":"btn-dash"}`,null,D,{"opacity-50":I(),"cursor-not-allowed":I()}),S.disabled=I(),A(J,a.label)}),d(G,S),ye()}Ie(["click"]);var Ta=u('<div class="flex flex-wrap gap-2"></div>');function Be(G,a){he(a,!0);let h=ae(a,"selected",15),y=ae(a,"size",3,"sm"),o=ae(a,"disabled",3,!1),I=ae(a,"color",3,"primary");var v=Ta();Me(v,21,()=>a.items,p=>p.id,(p,x)=>{qa(p,{get value(){return e(x).id},get label(){return e(x).label},get color(){return I()},get size(){return y()},get disabled(){return o()},get selectedValue(){return h()},set selectedValue(T){h(T)}})}),t(v),d(G,v),ye()}var Fa=u('<div class="flex min-w-[200px] flex-1 flex-col gap-1"><span class="label-text-alt text-base-content/70">Status</span> <!></div>'),Pa=u('<div class="alert alert-error alert-sm"><span class="text-sm"> </span></div>'),Va=u('<div class="ms-auto mt-8 flex justify-end gap-2"><button class="btn btn-ghost"><!> Annuler</button> <button class="btn btn-primary"><!> Enregistrer</button></div>'),Aa=u(`<div class="space-y-6"><div class="text-lg font-medium">Ajouter du matériel a l'inventaire de <span class="font-bold italic"> </span></div> <div class="space-y-3"><div class="flex flex-wrap gap-x-6 gap-y-4"><label class="input min-w-1/2"><span class="label"><!> Nom *</span> <input type="text" class="grow" placeholder="Ex: Mixeur professionnel" maxlength="100"/></label></div> <fieldset class="fieldset bg-base-100"><legend class="fieldset-legend">Description</legend> <textarea class="textarea textarea-bordered w-full" rows="2" placeholder="Décrivez le matériel..." maxlength="500"></textarea></fieldset></div> <div class="flex flex-wrap items-center gap-x-4 gap-y-3"><div class="flex min-w-[200px] flex-1 flex-col gap-1"><span class="label-text-alt text-base-content/70">Type</span> <!></div> <!></div> <div class="flex flex-1 flex-wrap gap-x-6 gap-y-4"><label class="input w-58"><span class="label"><!>Quantité *</span> <input type="number" min="1"/></label> <label class="input flex-1"><span class="label"><!>Localisation</span> <input type="text" class="grow" placeholder="où c'est stocker" maxlength="50"/></label></div>  <!></div> <div><!></div>`,1);function Ue(G,a){he(a,!0);let h=ae(a,"showStatus",3,!1),y=ae(a,"buttonAction",3,!0),o=U(fe(a.initialValues?.name||"")),I=U(fe(a.initialValues?.description||"")),v=U(fe(a.initialValues?.type||"")),p=U(fe(a.initialValues?.status||"ok")),x=U(fe(a.initialValues?.quantity||1)),T=U(fe(a.initialValues?.location||"")),S=U(fe(a.initialValues?.shareableWith||[])),D=!1,F=U(null);const J=M(()=>a.ownerId),K=M(()=>[{id:"electronic",label:"Électronique"},{id:"manual",label:"Ustensile"},{id:"tools",label:"Outils"},{id:"dish",label:"Vaisselle"},{id:"cooking",label:"Matériel de Cuisine"},{id:"gaz",label:"Gaz"},{id:"hygiene",label:"Hygiène"},{id:"other",label:"Autre"}]),E=M(()=>[{id:"ok",label:"OK"},{id:"lost",label:"Perdu"},{id:"torepair",label:"À réparer"}]),L=M(()=>e(J)&&a.ownerId?JSON.stringify({teamName:a.ownerName||"",teamId:a.ownerId}):JSON.stringify({teamName:"",teamId:""})),g=M(()=>e(o).trim().length>0&&e(x)>=1&&!D);function B(){if(!e(g))return;const f={name:e(o).trim(),description:e(I).trim()||null,type:e(v)||"other",status:e(p),quantity:e(x),location:e(T).trim()||null,shareableWith:e(S).length>0?e(S):null,owner:e(L)};a.onSubmit?.(f)}function _(){a.onCancel?.()}var w=Aa(),k=me(w),N=r(k),W=n(r(N)),te=r(W,!0);t(W),t(N);var Y=n(N,2),$=r(Y),oe=r($),re=r(oe),ge=r(re);Ae(ge,{class:"h-4 w-4 "}),ne(),t(re);var P=n(re,2);Ee(P),P.disabled=D,t(oe),t($);var Q=n($,2),ee=n(r(Q),2);ua(ee),ee.disabled=D,t(Q),t(Y);var de=n(Y,2),ve=r(de),Ce=n(r(ve),2);Be(Ce,{get items(){return e(K)},size:"sm",disabled:D,get selected(){return e(v)},set selected(f){q(v,f,!0)}}),t(ve);var s=n(ve,2);{var m=f=>{var O=Fa(),H=n(r(O),2);Be(H,{get items(){return e(E)},size:"sm",disabled:D,get selected(){return e(p)},set selected(ce){q(p,ce,!0)}}),t(O),d(f,O)};C(s,f=>{h()&&f(m)})}t(de);var b=n(de,2),V=r(b),l=r(V),i=r(l);Ye(i,{class:"size-4"}),ne(),t(l);var c=n(l,2);Ee(c),c.disabled=D,t(V);var z=n(V,2),R=r(z),le=r(R);Pe(le,{class:"size-4"}),ne(),t(R);var Z=n(R,2);Ee(Z),Z.disabled=D,t(z),t(b);var be=n(b,2);{var ke=f=>{var O=Pa(),H=r(O),ce=r(H,!0);t(H),t(O),j(()=>A(ce,e(F))),d(f,O)};C(be,f=>{e(F)&&f(ke)})}t(k);var X=n(k,2),pe=r(X);{var ie=f=>{var O=Va(),H=r(O);H.__click=_,H.disabled=D;var ce=r(H);$e(ce,{class:"h-5 w-5"}),ne(),t(H);var se=n(H,2);se.__click=B;var ue=r(se);{var we=Se=>{Re(Se,{class:"h-5 w-5"})};C(ue,Se=>{Se(we,!1)})}ne(),t(se),t(O),j(()=>se.disabled=!e(g)),d(f,O)};C(pe,f=>{y()&&f(ie)})}t(X),j(()=>A(te,a.ownerName)),De(P,()=>e(o),f=>q(o,f)),De(ee,()=>e(I),f=>q(I,f)),De(c,()=>e(x),f=>q(x,f)),De(Z,()=>e(T),f=>q(T,f)),d(G,w),ye()}Ie(["click"]);var La=u('<div><span class="font-semibold">Équipe propriétaire :</span> </div>'),Na=u('<div class="alert alert-error"><span class="text-sm"> </span></div>'),Oa=u('<div class="alert alert-soft mb-4"><div class="flex items-center gap-2 text-sm"><!> <div><!></div></div></div> <!> <!>',1),ja=u('<div class="alert alert-warning"><span>Matériel introuvable</span></div>'),Ba=u("<!> <!>",1);function Ra(G,a){he(a,!0);let h=U(!1),y=U(null);const o=M(()=>a.materielId?_e.getMaterielById(a.materielId):null);function I(){q(y,null)}async function v(x){if(!a.materielId){q(y,"ID du matériel manquant");return}q(h,!0),q(y,null);try{await _e.updateMateriel(a.materielId,{name:x.name,description:x.description||void 0,type:x.type||"other",status:x.status,quantity:x.quantity,location:x.location||void 0}),console.log("[EditMaterielModal] Matériel mis à jour:",a.materielId),a.onSuccess?.(),I(),a.onClose()}catch(T){q(y,T.message||"Erreur lors de la mise à jour du matériel",!0),console.error("[EditMaterielModal] Erreur:",T)}finally{q(h,!1)}}function p(){I(),a.onClose()}ga(G,{get isOpen(){return a.isOpen},onClose:p,children:(x,T)=>{var S=Ba(),D=me(S);_a(D,{title:"Modifier le matériel",onClose:p});var F=n(D,2);xa(F,{children:(J,K)=>{var E=ze(),L=me(E);{var g=_=>{var w=Oa(),k=me(w),N=r(k),W=r(N);Ve(W,{class:"h-4 w-4"});var te=n(W,2),Y=r(te);{var $=P=>{var Q=La(),ee=n(r(Q));t(Q),j(()=>A(ee,` ${e(o).ownerData.teamName??""}`)),d(P,Q)};C(Y,P=>{e(o).ownerData?.teamId&&P($)})}t(te),t(N),t(k);var oe=n(k,2);{let P=M(()=>({name:e(o).name,description:e(o).description,type:e(o).type,status:e(o).status,quantity:e(o).quantity,location:e(o).location,shareableWith:e(o).shareableWith}));Ue(oe,{showStatus:!0,get initialValues(){return e(P)},onSubmit:v,onCancel:p})}var re=n(oe,2);{var ge=P=>{var Q=Na(),ee=r(Q),de=r(ee,!0);t(ee),t(Q),j(()=>A(de,e(y))),d(P,Q)};C(re,P=>{e(y)&&P(ge)})}d(_,w)},B=_=>{var w=ja();d(_,w)};C(L,_=>{e(o)?_(g):_(B,!1)})}d(J,E)}}),d(x,S)},$$slots:{default:!0}}),ye()}var Ua=u('<div class="flex flex-wrap gap-3"></div>'),Wa=u('<div class="flex flex-wrap gap-3"></div>'),Qa=u('<div class="flex flex-wrap gap-3"></div>'),Ha=u('<div><div class="mb-4 flex items-center justify-between"><h4 class="text-lg font-bold"><!> Filtres</h4> <button class="btn btn-warning btn-sm"><!> Effacer</button></div> <!> <!> <!></div>');function Ga(G,a){he(a,!0);let h=ae(a,"filters",15),y=ae(a,"disabled",3,!1);function o(g,B){const _=g.indexOf(B);_===-1?g.push(B):g.splice(_,1),h({...h()})}function I(g){return{electronic:"Électronique",manual:"Manuel",other:"Autre",tools:"Outils",dish:"Vaisselle",cooking:"Cuisine",gaz:"Gaz",hygiene:"Hygiène"}[g]||g}function v(g){return{ok:"OK",lost:"Perdu",loan:"Utilisé",reserved:"Réservé",torepair:"À réparer"}[g]||g}var p=Ha();let x;var T=r(p),S=r(T),D=r(S);ea(D,{class:"inline size-4 align-baseline"}),ne(),t(S);var F=n(S,2);F.__click=function(...g){a.onReset?.apply(this,g)};var J=r(F);aa(J,{class:"h-4 w-4"}),ne(),t(F),t(T);var K=n(T,2);Te(K,{legend:"Type",get iconComponent(){return Ae},children:(g,B)=>{var _=Ua();Me(_,20,()=>a.availableTypes,w=>w,(w,k)=>{{let N=M(()=>h().types.includes(k)),W=M(()=>I(k));qe(w,{get checked(){return e(N)},get label(){return e(W)},onchange:()=>o(h().types,k),get disabled(){return y()},color:"secondary",size:"md"})}}),t(_),d(g,_)},$$slots:{default:!0}});var E=n(K,2);Te(E,{legend:"Lieu",get iconComponent(){return Pe},children:(g,B)=>{var _=Wa();Me(_,20,()=>a.availableLocations,w=>w,(w,k)=>{{let N=M(()=>h().locations.includes(k));qe(w,{get checked(){return e(N)},get label(){return k},onchange:()=>o(h().locations,k),get disabled(){return y()},color:"secondary",size:"md"})}}),t(_),d(g,_)},$$slots:{default:!0}});var L=n(E,2);Te(L,{legend:"Statut",get iconComponent(){return ta},children:(g,B)=>{var _=Qa();Me(_,20,()=>a.availableStatuses,w=>w,(w,k)=>{{let N=M(()=>h().statuses.includes(k)),W=M(()=>v(k));qe(w,{get checked(){return e(N)},get label(){return e(W)},onchange:()=>o(h().statuses,k),get disabled(){return y()},color:"secondary",size:"md"})}}),t(_),d(g,_)},$$slots:{default:!0}}),t(p),j(()=>{x=xe(p,1,"mt-16 space-y-4",null,x,{"opacity-30":y()}),F.disabled=y()}),d(G,p),ye()}Ie(["click"]);var Ja=u('<button><!> <span class="badge badge-sm badge-neutral ml-2"> </span></button>'),Ka=u('<div class="tabs tabs-border bg-base-200 tabs-lg mb-6 font-semibold"></div>'),Za=u('<div class="mb-6 text-end"><button class="btn btn-wide btn-primary"><!> Ajouter du matériel</button></div>'),Xa=u('<div class="card bg-base-100 mb-6 shadow-lg"><div class="card-body"><!></div></div>'),Ya=u('<div class="alert alert-warning"><span>Vous devez être connecté pour voir le matériel.</span></div>'),$a=u('<div class="alert alert-error shadow-lg"><span> </span></div>'),et=u('<div class="alert alert-info"><span>Sélectionnez une équipe pour voir son matériel.</span></div>'),at=u('<div class="py-12 text-center"><p class="text-base-content/60 mb-4 text-lg">Aucun matériel ne correspond aux critères de filtrage...</p> <button class="btn btn-warning btn-sm">Effacer les filtres</button></div>'),tt=u(`<div class="bg-base-200 rounded-box border-base-200 border-2 border-dashed py-20 text-center"><div class="bg-base-200 mb-4 inline-block rounded-full p-4"><!></div> <h3 class="mb-2 text-lg font-bold">Aucun matériel</h3> <p class="text-base-content/60 mb-6">Cette équipe n'a pas encore de matériel.</p></div>`),rt=u('<div class="grid grid-cols-1"></div>'),lt=u('<!> <div class="p-4 lg:ml-100"><div class="mx-auto max-w-7xl px-4 py-8"><!> <!> <!> <!></div></div> <!>',1);function mt(G,a){he(a,!0);let h=U(!1),y=U(null),o=U(null),I=U(!1),v=U(fe({types:[],locations:[],statuses:[]}));function p(){q(h,!e(h))}function x(){q(h,!1)}function T(s){q(y,s,!0)}function S(){q(y,null)}async function D(s){try{await _e.createMateriel(s),x(),console.log("[MaterielPage] Matériel créé avec succès")}catch(m){console.error("[MaterielPage] Erreur création:",m)}}function F(){console.log("[MaterielPage] Matériel mis à jour"),S()}const J=["electronic","manual","other","tools","dish","cooking","gaz","hygiene"],K=["ok","lost","loan","reserved","torepair"],E=M(()=>ba.myTeams),L=M(()=>e(o)?e(E).find(s=>s.$id===e(o)):null),g=M(()=>e(o)?_e.materiels.filter(s=>s.ownerData.teamId===e(o)||s.shareableWith?.includes(e(o))):[]),B=M(()=>{const s=e(g),m=new Set;return s.forEach(b=>{b.location&&m.add(b.location)}),Array.from(m).sort()}),_=M(()=>{const s=e(g);return e(v).types.length>0||e(v).locations.length>0||e(v).statuses.length>0?s.filter(b=>{const V=e(v).types.length===0||b.type&&e(v).types.includes(b.type),l=e(v).locations.length===0||b.location&&e(v).locations.includes(b.location),i=e(v).statuses.length===0||e(v).statuses.includes(b.status);return V&&l&&i}):s});function w(){q(v,{types:[],locations:[],statuses:[]},!0)}function k(s){Ne(`/dashboard/materiel/${s}`)}Le(()=>{const s=a.params?.teamId;s&&s!==e(o)?e(E).find(b=>b.$id===s)&&q(o,s,!0):!s&&!e(o)&&!e(I)&&e(E).length>0&&(q(I,!0),Ne(`/dashboard/materiel/${e(E)[0].$id}`))}),Le(()=>{const m=(e(o)?e(E).find(b=>b.$id===e(o)):null)?.name||"Matériel";Oe.setConfig({title:m,materielContext:"materiel",teamId:e(o)||void 0})}),ma(()=>{Oe.reset()});var N=lt(),W=me(N);ya(W,{width:"100",children:(s,m)=>{Ga(s,{disabled:!1,get availableTypes(){return J},get availableLocations(){return e(B)},get availableStatuses(){return K},onReset:w,get filters(){return e(v)},set filters(b){q(v,b,!0)}})},$$slots:{default:!0}});var te=n(W,2),Y=r(te),$=r(Y);{var oe=s=>{var m=Ka();Me(m,21,()=>e(E),b=>b.$id,(b,V)=>{var l=Ja();l.__click=()=>k(e(V).$id);var i=r(l);Ve(i,{class:"mr-2 h-4 w-4"});var c=n(i),z=n(c),R=r(z,!0);t(z),t(l),j(le=>{xe(l,1,`tab ${e(o)===e(V).$id?"tab-active":""}`),A(c,` ${e(V).name??""} `),A(R,le)},[()=>_e.materiels.filter(le=>le.ownerData.teamId===e(V).$id||le.shareableWith?.includes(e(V).$id)).length]),d(b,l)}),t(m),d(s,m)};C($,s=>{e(E).length>1&&s(oe)})}var re=n($,2);{var ge=s=>{var m=Za(),b=r(m);b.__click=p;var V=r(b);ra(V,{class:"h-4 w-4"}),ne(),t(b),t(m),d(s,m)};C(re,s=>{e(h)||s(ge)})}var P=n(re,2);{var Q=s=>{var m=Xa(),b=r(m),V=r(b);Ue(V,{showStatus:!1,onSubmit:D,onCancel:x,get ownerId(){return e(L).$id},get ownerName(){return e(L).name}}),t(b),t(m),fa(3,m,()=>ha),d(s,m)};C(P,s=>{e(h)&&e(L)&&s(Q)})}var ee=n(P,2);{var de=s=>{var m=Ya();d(s,m)},ve=s=>{var m=ze(),b=me(m);{var V=i=>{var c=$a(),z=r(c),R=r(z,!0);t(z),t(c),j(()=>A(R,_e.error)),d(i,c)},l=i=>{var c=ze(),z=me(c);{var R=Z=>{var be=et();d(Z,be)},le=Z=>{var be=ze(),ke=me(be);{var X=ie=>{var f=ze(),O=me(f);{var H=se=>{var ue=at(),we=n(r(ue),2);we.__click=w,t(ue),d(se,ue)},ce=se=>{var ue=tt(),we=r(ue),Se=r(we);Ae(Se,{class:"h-8 w-8 opacity-50"}),t(we),ne(4),t(ue),d(se,ue)};C(O,se=>{e(v).types.length>0||e(v).locations.length>0||e(v).statuses.length>0?se(H):se(ce,!1)})}d(ie,f)},pe=ie=>{var f=rt();Me(f,21,()=>e(_),O=>O.$id,(O,H)=>{Da(O,{get materiel(){return e(H)},onEdit:ce=>T(ce)})}),t(f),d(ie,f)};C(ke,ie=>{e(_).length===0?ie(X):ie(pe,!1)})}d(Z,be)};C(z,Z=>{e(o)?Z(le,!1):Z(R)},!0)}d(i,c)};C(b,i=>{_e.error?i(V):i(l,!1)},!0)}d(s,m)};C(ee,s=>{Fe.isAuthenticated?s(ve,!1):s(de)})}t(Y),t(te);var Ce=n(te,2);{let s=M(()=>e(y)!==null);Ra(Ce,{get materielId(){return e(y)},get isOpen(){return e(s)},onClose:S,onSuccess:F})}d(G,N),ye()}Ie(["click"]);export{mt as default};
