const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/VerifyEmailPage.js","assets/appwrite.js","assets/icons.js","assets/RecipesListPage.js","assets/Fieldset.js","assets/AutocompleteInput.js","assets/keyboardNavigation.svelte.js","assets/BadgeList.js","assets/CheckboxBadge.js","assets/RecipeRegimeBadges.js","assets/LeftPanel.js","assets/RecipeDataStore.svelte.js","assets/RecipeCreatePage.js","assets/RecipeEditPage2.js","assets/products-display.js","assets/tiptap-markdown.es.js","assets/BtnGroupCheck.js","assets/RecipeEditPage.css","assets/UnsavedChangesGuard.js","assets/RecipeEditPage.js","assets/ConfirmModal.js","assets/RecipeVariants.js","assets/RecipeDetailPage.js","assets/RecipePreparation.js","assets/SvelteMarkdown.js","assets/SvelteMarkdown.css","assets/AcceptInvite.js","assets/ResetPassword.js","assets/ResetPassword.css","assets/DashboardPage.js","assets/date-helpers.js","assets/CreateTeamModal.js","assets/InfoCollapse.js","assets/EventCard.js","assets/event-stats-helpers.js","assets/DocCard.js","assets/TeamsManagement.js","assets/EventCreatePage.js","assets/EventMealCard.js","assets/EventEditPage.js","assets/EventInvitationAlert.js","assets/EventStats.js","assets/EventRecipesPage.js","assets/EventRecipesPage.css","assets/EventProductsPage.js","assets/EventProductsPage.css","assets/EventPosterPage.js","assets/EventPosterPage.css","assets/MaterielPage.js","assets/LoansPage.js","assets/LoanReturnPage.js","assets/EventListPage.js","assets/CreateDocumentPage.js","assets/MarkdownEditorAdvanced.js","assets/MarkdownEditorAdvanced.css","assets/CreateDocumentPage.css","assets/EditDocumentPage.js","assets/EditDocumentPage.css","assets/DocumentListPage.js"])))=>i.map(i=>d[i]);
var _t=v=>{throw TypeError(v)};var Tt=(v,r,i)=>r.has(v)||_t("Cannot "+i);var Re=(v,r,i)=>(Tt(v,r,"read from private field"),i?i.call(v):r.get(v)),pt=(v,r,i)=>r.has(v)?_t("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(v):r.set(v,i);import{v as p,g as a,h as o,w as Y,x as de,b as s,o as t,y as Q,z as Rt,m as e,A as b,B as $e,d as Pe,p as Ie,e as De,C as Ze,u as be,i as Be,c as Le,D as $,E as ge,F as at,G as z,H as Ue,k as K,I as R,j as _e,s as Qe,J as Je,K as ae,L as Ot,M as ze,t as Dt,N as At,O as He,P as it,Q as lt,R as Xe,S as et,T as dt,U as Ke,V as zt,_ as U,W as je,X as qe,Y as Mt,Z as Vt,$ as $t,a0 as St,a1 as ft,a2 as rt,a3 as st,a4 as ot,a5 as ct,a6 as Ft,a7 as qt,a8 as Bt}from"./appwrite.js";import{C as kt,a as Nt,L as bt,b as nt,U as Yt,P as Ht,B as jt,R as Ut,c as Gt,d as Wt,e as Xt,f as Kt,X as Ct,A as Jt,g as Qt,h as Zt,M as vt,i as ea,j as ta,k as aa,l as ra,m as ht,E as sa,n as oa,H as ia}from"./icons.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))y(n);new MutationObserver(n=>{for(const _ of n)if(_.type==="childList")for(const d of _.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&y(d)}).observe(document,{childList:!0,subtree:!0});function i(n){const _={};return n.integrity&&(_.integrity=n.integrity),n.referrerPolicy&&(_.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?_.credentials="include":n.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function y(n){if(n.ep)return;n.ep=!0;const _=i(n);fetch(n.href,_)}})();var na=p('<div class="alert alert-error max-md:alert-vertical shadow-lg"><!> <div><h3 class="font-bold">Erreur</h3> <div class="text-sm"> </div></div></div>');function gt(v,r){var i=na(),y=a(i);kt(y,{class:"h-6 w-6 shrink-0 stroke-current"});var n=o(y,2),_=o(a(n),2),d=a(_,!0);t(_),t(n),t(i),Y(()=>de(d,r.message)),s(v,i)}var he;class la{constructor(){pt(this,he,Q(Rt({title:""})))}get title(){return e(Re(this,he)).title||"ENKA Cookbook"}get backAction(){return e(Re(this,he)).backAction}get actions(){return e(Re(this,he)).actions}get tabs(){return e(Re(this,he)).tabs}get eventId(){return e(Re(this,he)).eventId}get basePath(){return e(Re(this,he)).basePath||"/dashboard/eventEdit"}get activeTab(){return e(Re(this,he)).activeTab||0}get isLockedByOthers(){return e(Re(this,he)).isLockedByOthers||!1}get lockedByUserName(){return e(Re(this,he)).lockedByUserName||""}get hasUnsavedChanges(){return e(Re(this,he)).hasUnsavedChanges||!1}get materielContext(){return e(Re(this,he)).materielContext||null}get teamId(){return e(Re(this,he)).teamId}setConfig(r){b(Re(this,he),{...r},!0)}reset(){b(Re(this,he),{title:""},!0)}}he=new WeakMap;const ne=new la;var da=p("<button> </button>"),ca=p('<div class="rounded-box bg-secondary/10 px-4 py-1"><div class="tabs tabs-border justify-center"></div></div>');function yt(v,r){Pe(r,!0);let i=Ie(r,"basePath",3,"/dashboard/eventEdit");const y=[{label:"Éditer l'événement",relativePath:""},{label:"Voir les recettes",relativePath:"recipes"},{label:"Listes des produits",relativePath:"products"},{label:"Affiches",relativePath:"posters"}],n=be(()=>{const c=$.path;return c.includes(`${i()}/recipes/`)?1:c.includes(`${i()}/products/`)?2:c.includes(`${i()}/posters/`)?3:(c.includes(i())&&r.eventId&&new RegExp(`${i()}/${r.eventId}(/?$)`).test(c),0)});function _(c){if(!r.eventId)return;const g=y[c].relativePath,A=g?`${i()}/${g}/${r.eventId}`:`${i()}/${r.eventId}`;ge(A)}var d=ca(),u=a(d);De(u,21,()=>y,Be,(c,g,A)=>{var T=da();T.__click=()=>_(A);var E=a(T,!0);t(T),Y(()=>{Ze(T,1,`tab font-semibold ${A===e(n)?"tab-active":""}`),de(E,e(g).label)}),s(c,T)}),t(u),t(d),s(v,d),Le()}$e(["click"]);var va=p("<button> </button>"),ua=p('<div class="tabs tabs-lg tabs-border justify-center"></div>');function xt(v,r){Pe(r,!0);const i=[{label:"Matériel",getPath:()=>n()},{label:"Reservations",getPath:()=>_()}],y=be(()=>$.path.includes("/loans")?1:0);function n(){if(r.currentTeamId)return`/dashboard/materiel/${r.currentTeamId}`;const c=at.myTeams;return c.length>0?`/dashboard/materiel/${c[0].$id}`:"/dashboard/materiel"}function _(){if(r.currentTeamId)return`/dashboard/loans/${r.currentTeamId}`;const c=at.myTeams;return c.length>0?`/dashboard/loans/${c[0].$id}`:"/dashboard/loans"}function d(c){const g=i[c].getPath();ge(g)}var u=ua();De(u,21,()=>i,Be,(c,g,A)=>{var T=va();T.__click=()=>d(A);var E=a(T,!0);t(T),Y(()=>{Ze(T,1,`tab font-medium ${A===e(y)?"tab-active":""}`),de(E,e(g).label)}),s(c,T)}),t(u),s(v,u),Le()}$e(["click"]);var ma=p('<button class="btn btn-ghost not-md:btn-square md:gap-2"><!> <span class="hidden md:inline">Tableau de bord</span></button>'),_a=p('<h1 class="font-family-fredoka truncate text-sm font-bold tracking-wider uppercase opacity-70"> </h1>'),pa=p('<div class="navbar-center absolute left-1/2 -translate-x-1/2 transform"><!></div>'),fa=p('<div class="badge badge-warning flex items-center gap-1 py-3 font-medium"><!> <span class="text-xs"> </span></div>'),ba=p('<div class="dropdown dropdown-end"><div tabindex="0" role="button" class="btn btn-ghost btn-circle avatar bg-primary/10 text-primary border-primary/20 border"><div class="flex w-10 items-center justify-center rounded-full text-lg font-bold"> </div></div> <ul class="menu menu-sm dropdown-content bg-base-100 border-base-200 z-[1] mt-3 w-56 rounded-xl border p-2 shadow-xl"><li class="border-base-100 mb-1 border-b px-4 py-2"><span class="block truncate p-0 text-xs font-medium italic opacity-60"> </span></li> <li><button><!> Dashboard</button></li> <li><button><!> Équipes</button></li> <li><button><!> Nouvel événement</button></li> <li><button><!> Recettes</button></li> <li><button class="disabled:opacity-50"><!> </button></li> <!> <li class="border-base-100 my-1 border-t"></li> <li><button class="text-error hover:bg-error/10"><!> Se déconnecter</button></li></ul></div>'),ha=p('<button class="btn btn-primary btn-sm shadow-md"><!> Connexion</button>'),ga=p('<h1 class="text-center text-sm font-bold tracking-wider uppercase opacity-70"> </h1>'),ya=p('<div class="border-base-300 bg-base-100 border-b px-4 py-3"><!></div>'),xa=p('<div><div class="navbar-start w-fit shrink-0 gap-1"><button class="btn btn-ghost btn-circle"><img src="images/favicon.png" alt="logo" class="h-8 w-8"/></button> <div class="flex items-center gap-1"><!> <button class="btn btn-ghost not-md:btn-square md:gap-2"><!> <span class="hidden md:inline">Recettes</span></button></div></div> <!> <div class="navbar-end ms-auto w-fit flex-shrink-0 gap-4"><!> <div class="flex items-center gap-2"><!></div> <!></div></div> <!>',1);function wa(v,r){Pe(r,!0);let i=Q(!1),y=Q(!1);z.initializeScrollDirection();function n(){b(i,!1)}async function _(){try{await z.logout(),window.location.href="/"}catch(C){console.error("Erreur lors de la déconnexion:",C)}}function d(){z.authModal.showLogin=!0,z.authModal.isOpen=!0}async function u(){if(z.userId){b(y,!0);try{await Je.forceReloadAllRecipes(),n()}catch(C){console.error("Erreur lors du rechargement des recettes:",C),alert("Erreur lors du rechargement des recettes")}finally{b(y,!1)}}}function c(C){C.target.closest(".svelte-user-dropdown")||n()}Ue(()=>{if(e(i))return document.addEventListener("click",c),()=>document.removeEventListener("click",c)});var g=xa(),A=K(g),T=a(A),E=a(T);E.__click=()=>ge("/");var q=o(E,2),S=a(q);{var re=C=>{var L=ma();L.__click=()=>ge("/dashboard");var O=a(L);bt(O,{size:18}),ae(2),t(L),s(C,L)};R(S,C=>{z.isAuthenticated&&C(re)})}var W=o(S,2);W.__click=()=>ge("/recipe");var B=a(W);Nt(B,{size:18}),ae(2),t(W),t(q),t(T);var k=o(T,2);{var h=C=>{var L=pa(),O=a(L);{var H=F=>{xt(F,{get currentTeamId(){return ne.teamId}})},J=F=>{var te=_e(),me=K(te);{var we=V=>{var ie=_e(),ce=K(ie);Qe(ce,()=>ne.tabs),s(V,ie)},ee=V=>{var ie=_e(),ce=K(ie);{var N=w=>{yt(w,{get eventId(){return ne.eventId},get basePath(){return ne.basePath}})},M=w=>{var j=_a(),oe=a(j,!0);t(j),Y(()=>{Ot(j,"title",ne.title),de(oe,ne.title)}),s(w,j)};R(ce,w=>{ne.eventId!==void 0?w(N):w(M,!1)},!0)}s(V,ie)};R(me,V=>{ne.tabs?V(we):V(ee,!1)},!0)}s(F,te)};R(O,F=>{ne.materielContext?F(H):F(J,!1)})}t(L),s(C,L)};R(k,C=>{z.isDesktop&&C(h)})}var G=o(k,2),Z=a(G);{var Ee=C=>{var L=fa(),O=a(L);nt(O,{size:14});var H=o(O,2),J=a(H);t(H),t(L),Y(()=>de(J,`Édition par ${ne.lockedByUserName??""}`)),s(C,L)};R(Z,C=>{ne.isLockedByOthers&&C(Ee)})}var pe=o(Z,2),I=a(pe);{var X=C=>{var L=_e(),O=K(L);Qe(O,()=>ne.actions),s(C,L)};R(I,C=>{ne.actions&&C(X)})}t(pe);var le=o(pe,2);{var ye=C=>{var L=ba(),O=a(L),H=a(O),J=a(H,!0);t(H),t(O);var F=o(O,2),te=a(F),me=a(te),we=a(me,!0);t(me),t(te);var ee=o(te,2),V=a(ee);V.__click=()=>ge("/dashboard");var ie=a(V);bt(ie,{size:16}),ae(),t(V),t(ee);var ce=o(ee,2),N=a(ce);N.__click=()=>ge("/dashboard/teams");var M=a(N);Yt(M,{size:16}),ae(),t(N),t(ce);var w=o(ce,2),j=a(w);j.__click=()=>ge("/dashboard/eventCreate");var oe=a(j);Ht(oe,{size:16}),ae(),t(j),t(w);var m=o(w,2),l=a(m);l.__click=()=>ge("/recipe");var f=a(l);jt(f,{size:16}),ae(),t(l),t(m);var P=o(m,2),x=a(P);x.__click=u;var ve=a(x);{let Ce=be(()=>e(y)?"animate-spin":"");Ut(ve,{size:16,get class(){return e(Ce)}})}var ue=o(ve);t(x),t(P);var Ae=o(P,2);R(Ae,Ce=>{});var Se=o(Ae,4),ke=a(Se);ke.__click=_;var Me=a(ke);Gt(Me,{size:16}),ae(),t(ke),t(Se),t(F),t(L),Y(Ce=>{de(J,Ce),de(we,z.user?.email),x.disabled=e(y),de(ue,` ${e(y)?"Chargement...":"Recharger les recettes"}`)},[()=>z.user?.name?.charAt(0).toUpperCase()||"U"]),s(C,L)},D=C=>{var L=ha();L.__click=d;var O=a(L);Wt(O,{size:16}),ae(),t(L),s(C,L)};R(le,C=>{z.isAuthenticated?C(ye):C(D,!1)})}t(G),t(A);var se=o(A,2);{var xe=C=>{var L=ya(),O=a(L);{var H=F=>{xt(F,{get currentTeamId(){return ne.teamId}})},J=F=>{var te=_e(),me=K(te);{var we=V=>{yt(V,{get eventId(){return ne.eventId},get basePath(){return ne.basePath}})},ee=V=>{var ie=_e(),ce=K(ie);{var N=w=>{var j=_e(),oe=K(j);Qe(oe,()=>ne.tabs),s(w,j)},M=w=>{var j=_e(),oe=K(j);{var m=l=>{var f=ga(),P=a(f,!0);t(f),Y(()=>de(P,ne.title)),s(l,f)};R(oe,l=>{ne.title&&l(m)},!0)}s(w,j)};R(ce,w=>{ne.tabs?w(N):w(M,!1)},!0)}s(V,ie)};R(me,V=>{ne.eventId!==void 0?V(we):V(ee,!1)},!0)}s(F,te)};R(O,F=>{ne.materielContext?F(H):F(J,!1)})}t(L),s(C,L)};R(se,C=>{z.isDesktop||C(xe)})}Y(()=>Ze(A,1,`navbar bg-base-100 border-base-300 sticky top-0 z-1000 min-h-13 border-b px-4 py-0 shadow-sm print:hidden ${(z.isMobile&&"min-h-11")??""} ${(z.isMobile&&!z.headerVisible&&"-translate-y-full")??""} transition-transform duration-300`)),s(v,g),Le()}$e(["click"]);var Ea=p('<button class="btn btn-sm btn-primary"> </button>'),Ra=p('<button class="btn btn-ghost btn-xs btn-square" title="Voir les détails" aria-label="Voir les détails"><!></button>'),Aa=p('<button class="btn btn-ghost btn-xs btn-circle" title="Fermer" aria-label="Fermer la notification"><!></button>'),ka=p('<div><div class="flex items-center justify-between gap-4"><div class="flex flex-1 items-center gap-2"><!> <span class="text-sm"> </span></div> <!> <!> <!></div></div>'),Ca=p("<div></div>");function Ia(v,r){Pe(r,!0);let i=Ie(r,"position",3,"toast-center toast-bottom"),y=Ie(r,"padding",3,"sm");const n=be(()=>y()==="sm"?" py-0.5":"py-1"),_=be(()=>ze.toasts),d=be(()=>()=>{const E=new Map;for(const q of e(_)){const S=q.position||i();E.has(S)||E.set(S,[]),E.get(S).push(q)}return E});function u(E){ze.dismiss(E.id)}function c(E){r.onShowDetails?.({id:E.id,message:E.message,details:E.details})}function g(E,q){q.onClick()}var A=_e(),T=K(A);De(T,17,()=>Array.from(e(d)().entries()),([E,q])=>E,(E,q)=>{var S=be(()=>Dt(e(q),2));let re=()=>e(S)[0],W=()=>e(S)[1];var B=Ca();De(B,21,W,k=>k.id,(k,h)=>{var G=ka(),Z=a(G),Ee=a(Z),pe=a(Ee);{var I=O=>{Xt(O,{class:"h-5 w-5 animate-spin"})};R(pe,O=>{e(h).state==="loading"&&O(I)})}var X=o(pe,2),le=a(X,!0);t(X),t(Ee);var ye=o(Ee,2);{var D=O=>{var H=_e(),J=K(H);De(J,17,()=>e(h).actions,Be,(F,te)=>{var me=Ea();me.__click=()=>g(e(h),e(te));var we=a(me,!0);t(me),Y(()=>de(we,e(te).label)),s(F,me)}),s(O,H)};R(ye,O=>{e(h).actions&&e(h).actions.length>0&&O(D)})}var se=o(ye,2);{var xe=O=>{var H=Ra();H.__click=()=>c(e(h));var J=a(H);Kt(J,{class:"h-3 w-3"}),t(H),s(O,H)};R(se,O=>{e(h).details&&O(xe)})}var C=o(se,2);{var L=O=>{var H=Aa();H.__click=()=>u(e(h));var J=a(H);Ct(J,{class:"h-4 w-4"}),t(H),s(O,H)};R(C,O=>{(e(h).state==="error"||e(h).state==="warning"||e(h).state==="loading")&&O(L)})}t(Z),t(G),Y(()=>{Ze(G,1,`alert alert-${e(h).state??""}  ${e(n)??""} shadow-lg`),de(le,e(h).message)}),s(k,G)}),t(B),Y(()=>Ze(B,1,`toast ${re()??""} z-1050`)),s(E,B)}),s(v,A),Le()}$e(["click"]);const Pa=v=>v;function ut(v){const r=v-1;return r*r*r+1}function wt(v){const r=typeof v=="string"&&v.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return r?[parseFloat(r[1]),r[2]||"px"]:[v,"px"]}function mt(v,{delay:r=0,duration:i=400,easing:y=Pa}={}){const n=+getComputedStyle(v).opacity;return{delay:r,duration:i,easing:y,css:_=>`opacity: ${_*n}`}}function Et(v,{delay:r=0,duration:i=400,easing:y=ut,x:n=0,y:_=0,opacity:d=0}={}){const u=getComputedStyle(v),c=+u.opacity,g=u.transform==="none"?"":u.transform,A=c*(1-d),[T,E]=wt(n),[q,S]=wt(_);return{delay:r,duration:i,easing:y,css:(re,W)=>`
			transform: ${g} translate(${(1-re)*T}${E}, ${(1-re)*q}${S});
			opacity: ${c-A*W}`}}function Mr(v,{delay:r=0,duration:i=400,easing:y=ut,axis:n="y"}={}){const _=getComputedStyle(v),d=+_.opacity,u=n==="y"?"height":"width",c=parseFloat(_[u]),g=n==="y"?["top","bottom"]:["left","right"],A=g.map(B=>`${B[0].toUpperCase()}${B.slice(1)}`),T=parseFloat(_[`padding${A[0]}`]),E=parseFloat(_[`padding${A[1]}`]),q=parseFloat(_[`margin${A[0]}`]),S=parseFloat(_[`margin${A[1]}`]),re=parseFloat(_[`border${A[0]}Width`]),W=parseFloat(_[`border${A[1]}Width`]);return{delay:r,duration:i,easing:y,css:B=>`overflow: hidden;opacity: ${Math.min(B*20,1)*d};${u}: ${B*c}px;padding-${g[0]}: ${B*T}px;padding-${g[1]}: ${B*E}px;margin-${g[0]}: ${B*q}px;margin-${g[1]}: ${B*S}px;border-${g[0]}-width: ${B*re}px;border-${g[1]}-width: ${B*W}px;min-${u}: 0`}}function Vr(v,{delay:r=0,duration:i=400,easing:y=ut,start:n=0,opacity:_=0}={}){const d=getComputedStyle(v),u=+d.opacity,c=d.transform==="none"?"":d.transform,g=1-n,A=u*(1-_);return{delay:r,duration:i,easing:y,css:(T,E)=>`
			transform: ${c} scale(${1-g*E});
			opacity: ${u-A*E}
		`}}var La=p('<button class="btn btn-primary btn-circle fixed right-6 bottom-6 z-50 rounded-full shadow-lg" aria-label="Retour en haut de page"><!></button>');function Ta(v,r){Pe(r,!0);let i=be(()=>(At.current||0)>300);function y(){window.scrollTo({top:0,behavior:"smooth"})}var n=_e(),_=K(n);{var d=u=>{var c=La();c.__click=y;var g=a(c);Jt(g,{class:"h-6 w-6"}),t(c),He(3,c,()=>mt),s(u,c)};R(_,u=>{e(i)&&u(d)})}s(v,n),Le()}$e(["click"]);function Oa(v,r){Pe(r,!0),Le()}var Da=p('<div role="dialog" aria-modal="true"><!></div>'),za=p('<div class="modal modal-open" style="z-index: 1100"><div class="modal-box max-w-md"><h3 class="text-lg font-bold">Confirmer la fermeture</h3> <p class="py-4"> </p> <div class="modal-action"><button class="btn btn-ghost">Annuler</button> <button class="btn btn-error">Fermer sans sauvegarder</button></div></div></div>'),Ma=p("<div><!></div> <!>",1);function Va(v,r){Pe(r,!0);let i=Ie(r,"fullscreenOnMobile",3,!0);Ie(r,"closeOnBackdropClick",3,!1);let y=Ie(r,"hasUnsavedChanges",3,!1),n=Ie(r,"confirmCloseMessage",3,"Vous avez des modifications non sauvegardées. Voulez-vous vraiment fermer ?"),_=Ie(r,"maxWidth",3,"lg");Ie(r,"maxHeight",3,"xl");let d=Ie(r,"modalClass",3,"");function u(k,h){return{sm:{"max-w":"max-w-[28rem]","max-h":"max-h-[85dvh]"},lg:{"max-w":"max-w-[64rem]","max-h":"max-h-[85dvh]"},xl:{"max-w":"max-w-[90vw]","max-h":"max-h-[85dvh]"}}[k][h]}let c=Q(!1);function g(){y()?b(c,!0):r.onClose()}function A(){b(c,!1),r.onClose()}function T(){b(c,!1)}Ue(()=>{if(!r.isOpen)return;const k=h=>{h.key==="Escape"&&!e(c)&&g()};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)}),Ue(()=>{if(r.isOpen)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}});var E=Ma(),q=K(E),S=a(q);{var re=k=>{var h=Da(),G=a(h);Qe(G,()=>r.children),t(h),Y(Z=>Ze(h,1,`modal-box flex flex-col p-0 ${d()??""} ${i()&&z.isMobile?"fixed inset-0 m-0 h-lvh w-lvw rounded-none":"fixed top-10 m-auto "} ${Z??""} ${!(i()&&z.isMobile)&&!d()&&"max-h-[85dvh]"}`),[()=>!(i()&&z.isMobile)&&u(_(),"max-w")]),s(k,h)};R(S,k=>{r.isOpen&&k(re)})}t(q);var W=o(q,2);{var B=k=>{var h=za(),G=a(h),Z=o(a(G),2),Ee=a(Z,!0);t(Z);var pe=o(Z,2),I=a(pe);I.__click=T;var X=o(I,2);X.__click=A,t(pe),t(G),t(h),Y(()=>de(Ee,n())),s(k,h)};R(W,k=>{e(c)&&k(B)})}Y(()=>Ze(q,1,`modal ${(r.isOpen&&"modal-open")??""} `)),s(v,E),Le()}$e(["click"]);var $a=p('<button class="btn btn-circle btn-ghost btn-sm flex-none" aria-label="Retour"><!></button>'),Sa=p('<button class="btn btn-circle btn-ghost btn-sm flex-none" aria-label="Retour"><!></button>'),Fa=p('<p class="text-base-content/70 truncate text-sm"> </p>'),qa=p('<div class="flex items-center gap-2 sm:me-10"><!></div>'),Ba=p('<div class="border-base-300 flex-none border-b px-4 py-3"><div class="absolute top-2 right-2"><!></div> <div class="flex flex-wrap items-center gap-2"><div class="flex min-w-0 flex-1 items-center gap-2"><!> <div class="max-w-11/12 min-w-0 flex-1 items-baseline"><h3 class="truncate text-lg font-bold"> </h3> <!></div></div> <!></div></div>');function Na(v,r){Pe(r,!0);let i=Ie(r,"showBackButton",3,!0);var y=Ba(),n=a(y),_=a(n);{var d=k=>{var h=$a();h.__click=function(...Z){r.onClose?.apply(this,Z)};var G=a(h);Ct(G,{class:"h-5 w-5"}),t(h),s(k,h)};R(_,k=>{z.isMobile||k(d)})}t(n);var u=o(n,2),c=a(u),g=a(c);{var A=k=>{var h=Sa();h.__click=function(...Z){r.onClose?.apply(this,Z)};var G=a(h);Qt(G,{class:"h-5 w-5"}),t(h),s(k,h)};R(g,k=>{i()&&z.isMobile&&k(A)})}var T=o(g,2),E=a(T),q=a(E,!0);t(E);var S=o(E,2);{var re=k=>{var h=Fa(),G=a(h,!0);t(h),Y(()=>de(G,r.subtitle)),s(k,h)};R(S,k=>{r.subtitle&&k(re)})}t(T),t(c);var W=o(c,2);{var B=k=>{var h=qa(),G=a(h);Qe(G,()=>r.children),t(h),s(k,h)};R(W,k=>{r.children&&k(B)})}t(u),t(y),Y(()=>de(q,r.title)),s(v,y),Le()}$e(["click"]);var Ya=p('<div class="flex-1 overflow-y-auto p-4 sm:p-6 sm:pt-2"><!></div>');function Ha(v,r){var i=Ya(),y=a(i);Qe(y,()=>r.children),t(i),s(v,i)}var ja=p('<div class="border-base-300 flex-none border-t px-4 py-3"><div class="flex flex-wrap items-center justify-end gap-2"><!></div></div>');function Ua(v,r){var i=ja(),y=a(i),n=a(y);Qe(n,()=>r.children),t(y),t(i),s(v,i)}var Ga=p('<div role="alert" class="alert alert-error max-md:alert-vertical svelte-o861tn"><!> <span> </span></div>'),Wa=p('<div role="alert" class="alert alert-success max-md:alert-vertical svelte-o861tn"><!> <span> </span></div>'),Xa=p(`<form id="forgotForm" class="space-y-4 svelte-o861tn"><fieldset class="svelte-o861tn"><label class="input validator w-full"><!> <input type="email" placeholder="votre@email.com" required/></label> <span class="validator-hint hidden">Adresse email valide requise</span></fieldset> <div class="alert alert-info alert-soft svelte-o861tn">Un email avec un lien vous sera envoyé pour renouveller votre mot de
            passe.". Pensez à vérifier s'il n'a pas attéri dans votre dossier
            spam.</div></form> <div class="text-center svelte-o861tn"><button class="btn btn-ghost btn-sm">← Retour à la connexion</button></div>`,1),Ka=p(`<form id="loginForm" class="space-y-4 svelte-o861tn"><fieldset class="svelte-o861tn"><label class="input validator w-full"><!> <input type="email" placeholder="votre@email.com" required/></label> <span class="validator-hint hidden">Adresse email valide requise</span></fieldset> <fieldset class="svelte-o861tn"><label class="input validator w-full"><!> <input type="password" placeholder="Mot de passe" required/></label> <span class="validator-hint hidden">Mot de passe requis</span></fieldset></form> <div class="space-y-2 text-center svelte-o861tn"><button class="btn btn-link btn-sm btn-primary svelte-o861tn">Mot de passe oublié ?</button> <div class="text-base-content/70 text-sm svelte-o861tn">Pas encore de compte ? <button class="btn btn-primary btn-sm btn-soft ms-1">S'inscrire</button></div></div>`,1),Ja=p(`<form id="registerForm" class="space-y-4 svelte-o861tn"><fieldset class="svelte-o861tn"><label class="input validator w-full"><!> <input type="text" placeholder="Votre nom" required minlength="3" maxlength="25"/></label> <span class="validator-hint hidden">Doit comporter entre 3 et 25 caractères.</span></fieldset> <fieldset class="svelte-o861tn"><label class="input validator w-full"><!> <input type="email" placeholder="votre@email.com" required/></label> <span class="validator-hint hidden">Adresse email valide requise</span></fieldset> <fieldset class="svelte-o861tn"><label class="input validator w-full"><!> <input type="password" placeholder="Mot de passe" required minlength="8" maxlength="25"/></label> <span class="validator-hint hidden">Doit comporter entre 8 et 25 caractères.</span></fieldset> <fieldset class="svelte-o861tn"><label class="input validator w-full"><!> <input type="password" placeholder="Confirmer le mot de passe" required minlength="8" maxlength="25"/></label> <span class="validator-hint hidden">Doit être identique au mot de passe ci-dessus.</span></fieldset> <div class="alert alert-info alert-soft svelte-o861tn">Un email avec un lien vous sera envoyé. Pensez à vérifier s'il n'a
            pas attéri dans votre dossier spam.</div></form> <div class="text-base-content/70 text-center text-sm svelte-o861tn">Déjà un compte ? <button class="btn btn-soft btn-sm btn-primary ms-1">Se connecter</button></div>`,1),Qa=p('<div class="space-y-4 py-4 svelte-o861tn"><!> <!> <!></div>'),Za=p('<span class="loading loading-spinner"></span>'),er=p('<button form="forgotForm" type="submit" class="btn btn-primary btn-block"><!></button>'),tr=p('<span class="loading loading-spinner"></span>'),ar=p('<button form="loginForm" type="submit" class="btn btn-primary btn-block"><!></button>'),rr=p('<span class="loading loading-spinner"></span>'),sr=p('<button form="registerForm" type="submit" class="btn btn-success btn-block"><!></button>'),or=p("<!> <!> <!>",1);function ir(v,r){Pe(r,!0);let i=Ie(r,"isOpen",15),y=Ie(r,"onAuth_success",3,async()=>{}),n=Ie(r,"showLogin",3,!0),_=Q(Rt(n())),d=Q(!1),u=Q(""),c=Q("");Ue(()=>{i()&&(b(_,n()),b(W,!1))});let g=Q(""),A=Q(""),T=Q(""),E=Q(""),q=Q(""),S=Q(""),re=Q(""),W=Q(!1),B,k,h;async function G(D){if(D.preventDefault(),!B.checkValidity()){B.reportValidity(),b(u,"Formulaire invalide. Veuillez vérifier les champs.");return}b(u,""),await pe()}async function Z(D){if(D.preventDefault(),e(q)!==e(S)){b(u,"Les mots de passe ne correspondent pas.");return}if(!k.checkValidity()){k.reportValidity(),b(u,"Formulaire invalide. Veuillez vérifier les champs.");return}b(u,""),await I()}async function Ee(D){if(D.preventDefault(),!h.checkValidity()){h.reportValidity(),b(u,"Formulaire invalide. Veuillez vérifier les champs.");return}b(u,""),await X()}async function pe(){b(d,!0);try{const{account:D}=await dt();await D.createEmailPasswordSession({email:e(g),password:e(A)}),b(c,"Connexion réussie !"),setTimeout(()=>{y()()},1e3)}catch(D){console.error("Erreur de connexion:",D),b(u,D.message||"Erreur lors de la connexion",!0)}finally{b(d,!1)}}async function I(){b(d,!0);try{const{account:D}=await dt();await D.create({userId:"unique()",email:e(E),password:e(q),name:e(T)}),await D.createEmailPasswordSession({email:e(E),password:e(q)}),b(c,"Compte créé et connecté !"),setTimeout(()=>{y()()},1e3)}catch(D){console.error("Erreur d'inscription:",D),b(u,D.message||"Erreur lors de la création du compte",!0)}finally{b(d,!1)}}async function X(){b(d,!0);try{const{account:D}=await dt();await D.createRecovery({email:e(re),url:`${window.location.origin}/#/reset-password`}),b(c,"Email de réinitialisation envoyé !"),setTimeout(()=>{b(W,!1),b(re,"")},2e3)}catch(D){console.error("Erreur mot de passe oublié:",D),b(u,D.message||"Erreur lors de l'envoi de l'email",!0)}finally{b(d,!1)}}function le(){e(d)||i(!1)}Ue(()=>{(e(_)||e(W))&&(b(u,""),b(c,""))});function ye(){return e(W)?"Mot de passe oublié":e(_)?"Connexion":"Inscription"}Va(v,{get isOpen(){return i()},onClose:le,maxWidth:"sm",children:(D,se)=>{var xe=or(),C=K(xe);{let H=be(ye);Na(C,{get title(){return e(H)},onClose:le})}var L=o(C,2);Ha(L,{children:(H,J)=>{var F=Qa(),te=a(F);{var me=N=>{var M=Ga(),w=a(M);kt(w,{class:"h-6 w-6 shrink-0 stroke-current"});var j=o(w,2),oe=a(j,!0);t(j),t(M),Y(()=>de(oe,e(u))),s(N,M)};R(te,N=>{e(u)&&N(me)})}var we=o(te,2);{var ee=N=>{var M=Wa(),w=a(M);Zt(w,{class:"h-6 w-6 shrink-0 stroke-current"});var j=o(w,2),oe=a(j,!0);t(j),t(M),Y(()=>de(oe,e(c))),s(N,M)};R(we,N=>{e(c)&&N(ee)})}var V=o(we,2);{var ie=N=>{var M=Xa(),w=K(M),j=a(w),oe=a(j),m=a(oe);vt(m,{class:"h-4 w-4 opacity-50"});var l=o(m,2);Ke(l),t(oe),ae(2),t(j),ae(2),t(w),it(w,x=>h=x,()=>h);var f=o(w,2),P=a(f);P.__click=()=>b(W,!1),t(f),Y(()=>{l.disabled=e(d),P.disabled=e(d)}),lt("submit",w,Ee),Xe(l,()=>e(re),x=>b(re,x)),s(N,M)},ce=N=>{var M=_e(),w=K(M);{var j=m=>{var l=Ka(),f=K(l),P=a(f),x=a(P),ve=a(x);vt(ve,{class:"h-4 w-4 opacity-50"});var ue=o(ve,2);Ke(ue),t(x),ae(2),t(P);var Ae=o(P,2),Se=a(Ae),ke=a(Se);nt(ke,{class:"h-4 w-4 opacity-50"});var Me=o(ke,2);Ke(Me),t(Se),ae(2),t(Ae),t(f),it(f,fe=>B=fe,()=>B);var Ce=o(f,2),Ne=a(Ce);Ne.__click=()=>b(W,!0);var Ge=o(Ne,2),Ye=o(a(Ge));Ye.__click=()=>b(_,!1),t(Ge),t(Ce),Y(()=>{ue.disabled=e(d),Me.disabled=e(d),Ne.disabled=e(d),Ye.disabled=e(d)}),lt("submit",f,G),Xe(ue,()=>e(g),fe=>b(g,fe)),Xe(Me,()=>e(A),fe=>b(A,fe)),s(m,l)},oe=m=>{var l=Ja(),f=K(l),P=a(f),x=a(P),ve=a(x);ea(ve,{class:"h-4 w-4 opacity-50"});var ue=o(ve,2);Ke(ue),t(x),ae(2),t(P);var Ae=o(P,2),Se=a(Ae),ke=a(Se);vt(ke,{class:"h-4 w-4 opacity-50"});var Me=o(ke,2);Ke(Me),t(Se),ae(2),t(Ae);var Ce=o(Ae,2),Ne=a(Ce),Ge=a(Ne);nt(Ge,{class:"h-4 w-4 opacity-50"});var Ye=o(Ge,2);Ke(Ye),t(Ne),ae(2),t(Ce);var fe=o(Ce,2),Te=a(fe),Fe=a(Te);nt(Fe,{class:"h-4 w-4 opacity-50"});var Ve=o(Fe,2);Ke(Ve),t(Te),ae(2),t(fe),ae(2),t(f),it(f,Oe=>k=Oe,()=>k);var tt=o(f,2),We=o(a(tt));We.__click=()=>b(_,!0),t(tt),Y(()=>{ue.disabled=e(d),Me.disabled=e(d),Ye.disabled=e(d),Ve.disabled=e(d),We.disabled=e(d)}),lt("submit",f,Z),Xe(ue,()=>e(T),Oe=>b(T,Oe)),Xe(Me,()=>e(E),Oe=>b(E,Oe)),Xe(Ye,()=>e(q),Oe=>b(q,Oe)),Xe(Ve,()=>e(S),Oe=>b(S,Oe)),s(m,l)};R(w,m=>{e(_)?m(j):m(oe,!1)},!0)}s(N,M)};R(V,N=>{e(W)?N(ie):N(ce,!1)})}t(F),s(H,F)}});var O=o(L,2);Ua(O,{children:(H,J)=>{var F=_e(),te=K(F);{var me=ee=>{var V=er(),ie=a(V);{var ce=M=>{var w=Za();s(M,w)},N=M=>{var w=et("Envoyer l'email de réinitialisation");s(M,w)};R(ie,M=>{e(d)?M(ce):M(N,!1)})}t(V),Y(()=>V.disabled=e(d)),s(ee,V)},we=ee=>{var V=_e(),ie=K(V);{var ce=M=>{var w=ar(),j=a(w);{var oe=l=>{var f=tr();s(l,f)},m=l=>{var f=et("Se connecter");s(l,f)};R(j,l=>{e(d)?l(oe):l(m,!1)})}t(w),Y(()=>w.disabled=e(d)),s(M,w)},N=M=>{var w=sr(),j=a(w);{var oe=l=>{var f=rr();s(l,f)},m=l=>{var f=et("Créer un compte");s(l,f)};R(j,l=>{e(d)?l(oe):l(m,!1)})}t(w),Y(()=>w.disabled=e(d)),s(M,w)};R(ie,M=>{e(_)?M(ce):M(N,!1)},!0)}s(ee,V)};R(te,ee=>{e(W)?ee(me):ee(we,!1)})}s(H,F)}}),s(D,xe)},$$slots:{default:!0}}),Le()}$e(["click"]);function nr(v){return v<.5?4*v*v*v:.5*Math.pow(2*v-2,3)+1}function $r(v){const r=v-1;return r*r*r+1}zt();var lr=p(`<div class="alert alert-warning max-md:alert-vertical mx-auto mt-4 max-w-4xl shadow-lg" role="alert"><!> <div class="flex-1"><h3 class="font-semibold">Email non vérifié</h3> <p class="text-sm opacity-90">Veuillez cliquez sur le lien envoyé sur votre email pour finaliser
        l'inscription (pensez à vérifier le dossier spam) <button class="link font-medium">Renvoyer l'email de vérification</button></p></div></div>`);function dr(v,r){Pe(r,!0);async function i(){try{const{account:u}=await U(()=>import("./appwrite.js").then(g=>g.b3),[]).then(g=>g.getAppwriteInstances()),c=await u.createEmailVerification({url:window.location.origin+"/#/verify-email"});ze.success("Email de vérification envoyé ! Vérifiez votre boîte de réception.")}catch(u){console.error("Erreur lors de l'envoi de l'email de vérification:",u),ze.error(u instanceof Error?u.message:"Impossible d'envoyer l'email de vérification")}}const y=be(()=>z.isAuthenticated&&z.user?.emailVerification===!1);var n=_e(),_=K(n);{var d=u=>{var c=lr(),g=a(c);ta(g,{class:"size-6 shrink-0 "});var A=o(g,2),T=o(a(A),2),E=o(a(T));E.__click=i,t(T),t(A),t(c),He(1,c,()=>mt,()=>({duration:300})),s(u,c)};R(_,u=>{e(y)&&u(d)})}s(v,n),Le()}$e(["click"]);var cr=p('<span class="hover:text-primary transition-colors duration-200"> </span>'),vr=p('<div class=" hover:text-primary inline-block transition-all duration-75 hover:rotate-3"> </div>'),ur=p('<button class="btn btn-outline md:btn-lg transition-all duration-300 hover:scale-110"><!> Accéder au tableau de bord</button>'),mr=p('<button class="btn btn-secondary md:btn-lg transition-all duration-300 hover:scale-110">Créer un compte pour commencer <!></button>'),_r=p('<p class="text-base-content/60 text-center">Déjà membre ? <button class="link">Connectez-vous</button> pour gérer vos cantines et équipes</p>'),pr=p('<span class="loading loading-spinner"></span>'),fr=p('<div class="absolute inset-0 bg-cover bg-center transition-opacity duration-700 ease-out"></div>'),br=p('<li class="text-base-content flex items-start gap-3"><svg class="text-primary mt-0.5 h-6 w-6 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span> </span></li>'),hr=p('<ul class="mt-8 space-y-3"></ul>'),gr=p('<div class="mt-8"></div>'),yr=p('<div class="absolute inset-0"><div class="space-y-6"><h3 class="text-base-content mt-10 text-3xl font-bold md:text-4xl"> </h3> <p class="text-base-content/70 text-lg leading-relaxed"> </p> <!> <!></div></div>'),xr=p('<div class="bg-base-300 relative h-2 w-12 flex-shrink-0 overflow-hidden rounded-full md:w-16"><div class="bg-primary/30 absolute inset-y-0 left-0 rounded-full transition-all duration-200 ease-out"></div> <div class="bg-primary absolute inset-y-0 left-0 rounded-full transition-all duration-500 ease-out"></div></div>'),wr=p('<div class="h-screen"></div>'),Er=p(`<div class="bg-base-200"><section class="hero bg-base-200 flex flex-col justify-center gap-20 md:min-h-[90vh] md:py-15"><div class="hero-content text-center"><div class="max-w-3xl"><div class="mb-4 flex justify-center"><img src="images/logo.svg" alt="Enka Cookbook" class="size-40 md:size-80"/></div> <h1 class="cherry-bomb-one-regular text-4xl md:text-7xl svelte-1dajxdy"></h1> <div class="text-base-content/70 mt-6 space-x-1 text-base md:text-xl"></div></div></div> <div class="flex flex-wrap items-center justify-center gap-6"><button class="btn btn-primary md:btn-lg transition-all duration-300 hover:scale-110"><!> <span class="flex items-baseline gap-2">Voir les recettes</span></button> <!></div> <!> <!> <div class="text-base-content/40 flex flex-col items-center justify-center gap-2"><div>En savoir plus</div> <button class="btn btn-circle btn-ghost mt-auto animate-bounce"><!></button></div></section> <section class=" relative"><div class="to-neutral/20 from-base-100 sticky top-0 flex min-h-screen flex-col items-center justify-center bg-linear-to-l px-4 pb-10"><button class="btn btn-lg btn-accent mb-10 w-fit"><!> Voir la démo d'événement</button> <div class="items-top grid w-full grid-cols-1 gap-12 lg:grid-cols-5 lg:gap-16"><div class="bg-base-300 relative col-span-3 hidden aspect-video overflow-hidden rounded-4xl shadow-2xl lg:block"></div> <div class="relative col-span-2 min-h-[450px]"><div class="absolute -right-2 bottom-2 flex -translate-y-1/2 items-center justify-center"><img src="images/logo.svg" alt="EC" class="size-16"/></div> <!></div></div> <div class="absolute right-0 bottom-8 left-0 flex justify-center px-4"><div class="bg-base-100/80 flex max-w-full gap-2 overflow-x-auto rounded-full px-4 py-3 shadow-lg backdrop-blur-sm md:gap-3 md:px-6 md:py-4"></div></div></div> <div class="relative -z-10"></div></section></div>`);function Rr(v,r){Pe(r,!0);function i(){z.authModal.isOpen=!0}function y(){z.authModal.showLogin=!1,z.authModal.isOpen=!0}function n(m,{duration:l=300,delay:f=0,start:P=.8}={}){return{delay:f,duration:l,easing:nr,css:x=>`
        opacity: ${x};
        transform: scale(${P+(1-P)*x});
      `}}let _=Q(!1);async function d(){try{const m=ze.loading("Chargement de la démo...");b(_,!0),je.isInitialized||await je.initializeForPublic();const l=je.events.filter(P=>P.status==="local");if(l.length===0){ze.update(m,{state:"error",message:"Aucun événement de démo disponible",autoCloseDelay:3e3});return}const f=l[0];ze.dismiss(m),ge(`/demo/event/${f.$id}`)}catch(m){console.error("[HomePage] Erreur chargement démo:",m),ze.error("Erreur lors du chargement de la démo")}}const u=[{id:"feature-1",title:"Organisation",description:"Élaborez des menus sur plusieurs jours et organisez-vous en équipes",screenshot:"/images/home/events.webp",buttonText:"Voir la démo",buttonAction:d,theme:"secondary"},{id:"feature-2",title:"Listes de courses",description:"Générez automatiquement les listes de courses de vos menus",items:["Suivez l'avancement des achats","Notez les dépenses","Répartissez vous les courses"],screenshot:"/images/home/product.webp",theme:"secondary"},{id:"feature-3",title:"Gérez le matos collectifs",description:"Maintenez un inventaires, gérer les emprunts",screenshot:"/images/home/matos.webp",theme:"secondary"},{id:"feature-4",title:"Imprimez facilement les recettes",description:"L'impression des recettes est optimisé pour un rendu noir et blanc, sans l'interface web",screenshot:"/images/home/recipe-print.webp",theme:"primary"}];let c=Q(void 0),g=Q(0),A=Q(0);z.initializeScrollDirection();const T=be(()=>z.scrollDirection==="down");function E(){if(!e(c))return;const m=e(c).getBoundingClientRect(),l=e(c).scrollHeight,f=window.innerHeight,P=-m.top,x=l-f,ve=Math.max(0,Math.min(u.length,P/x*u.length)),ue=Math.min(u.length-1,Math.max(0,Math.floor(ve+.3)));ue!==e(g)&&b(g,ue,!0),b(A,ve,!0)}Ue(()=>{At.current,E()});function q(m){const l=m===e(g),f=m<e(g),P=m>e(g);let x;return e(T)?x=f?-20:P?20:0:x=f?20:P?-20:0,{opacity:l?1:0,translateX:0,translateY:x,scale:l?1:.88,zIndex:l?10:0,pointerEvents:l?"auto":"none"}}function S(m,l){return l?m*150:0}var re={fadeScale:n},W=Er(),B=a(W),k=a(B),h=a(k),G=a(h),Z=o(G,2);De(Z,20,()=>"Enka Cookbook",Be,(m,l)=>{var f=cr(),P=a(f,!0);t(f),Y(()=>de(P,l)),s(m,f)}),t(Z);var Ee=o(Z,2);De(Ee,20,()=>["Outils"," de"," planification"," pour"," les"," cantines"," autogérées"],Be,(m,l)=>{var f=vr(),P=a(f,!0);t(f),Y(()=>de(P,l)),s(m,f)}),t(Ee),t(h),t(k);var pe=o(k,2),I=a(pe);I.__click=()=>ge("/recipe");var X=a(I);aa(X,{size:24}),ae(2),t(I);var le=o(I,2);{var ye=m=>{var l=ur();l.__click=()=>ge("/dashboard");var f=a(l);ht(f,{size:24}),ae(),t(l),He(1,l,()=>n,()=>({duration:400,delay:500,start:.9})),s(m,l)},D=m=>{var l=mr();l.__click=y;var f=o(a(l));ht(f,{size:24}),t(l),s(m,l)};R(le,m=>{z.isAuthenticated?m(ye):m(D,!1)})}t(pe);var se=o(pe,2);{var xe=m=>{var l=_r(),f=o(a(l));f.__click=i,ae(),t(l),s(m,l)};R(se,m=>{z.isAuthenticated||m(xe)})}var C=o(se,2);dr(C,{});var L=o(C,2),O=o(a(L),2),H=a(O);ra(H,{class:" size-8"}),t(O),t(L),t(B);var J=o(B,2),F=a(J),te=a(F);te.__click=d;var me=a(te);{var we=m=>{var l=pr();s(m,l)},ee=m=>{sa(m,{size:24})};R(me,m=>{e(_)?m(we):m(ee,!1)})}ae(),t(te);var V=o(te,2),ie=a(V);De(ie,21,()=>u,Be,(m,l,f,P)=>{const x=be(()=>q(f)),ve=be(()=>(e(A)-f)*50);var ue=fr();Y(()=>qe(ue,`opacity: ${e(x).opacity??""}; z-index: ${e(x).zIndex??""}; background-image: url('${e(l).screenshot??""}'); background-position-y: calc(${e(ve)*-10}px);`)),s(m,ue)}),t(ie);var ce=o(ie,2),N=a(ce),M=o(N,2);De(M,17,()=>u,Be,(m,l,f)=>{const P=be(()=>q(f)),x=be(()=>f===e(g));var ve=yr(),ue=a(ve),Ae=a(ue),Se=a(Ae,!0);t(Ae);var ke=o(Ae,2),Me=a(ke,!0);t(ke);var Ce=o(ke,2);{var Ne=fe=>{var Te=hr();De(Te,21,()=>e(l).items,Be,(Fe,Ve,tt)=>{var We=br(),Oe=o(a(We),2),It=a(Oe,!0);t(Oe),t(We),Y((Pt,Lt)=>{qe(We,`
                            opacity: ${e(x)?1:0};
                            transform: translateX(${e(x)?0:-10}px);
                            transition: opacity 400ms ease-out ${Pt??""}ms,
                                        transform 400ms ease-out ${Lt??""}ms;
                          `),de(It,e(Ve))},[()=>S(3,e(x))+tt*50,()=>S(3,e(x))+tt*50]),s(Fe,We)}),t(Te),Y((Fe,Ve)=>qe(Te,`
                        opacity: ${e(x)?1:0};
                        transform: translateY(${e(x)?0:15}px);
                        transition: opacity 500ms ease-out ${Fe??""}ms,
                                    transform 500ms ease-out ${Ve??""}ms;
                      `),[()=>S(2,e(x)),()=>S(2,e(x))]),s(fe,Te)};R(Ce,fe=>{e(l).items&&fe(Ne)})}var Ge=o(Ce,2);{var Ye=fe=>{var Te=gr();Y((Fe,Ve)=>qe(Te,`
                        opacity: ${e(x)?1:0};
                        transform: translateY(${e(x)?0:15}px) scale(${e(x)?1:.95});
                        transition: opacity 500ms ease-out ${Fe??""}ms,
                                    transform 500ms ease-out ${Ve??""}ms;
                      `),[()=>S(e(l).items?4:3,e(x)),()=>S(e(l).items?4:3,e(x))]),s(fe,Te)};R(Ge,fe=>{e(l).buttonText&&e(l).buttonAction&&fe(Ye)})}t(ue),t(ve),Y((fe,Te,Fe,Ve)=>{qe(ve,`
                  opacity: ${e(P).opacity??""};
                  transform: translateX(${e(P).translateX??""}px) translateY(${e(P).translateY??""}px) scale(${e(P).scale??""});
                  z-index: ${e(P).zIndex??""};
                  pointer-events: ${e(P).pointerEvents??""};
                  transition: opacity 600ms ease-out, transform 600ms ease-out;
                `),qe(Ae,`
                      opacity: ${e(x)?1:0};
                      transform:  translateX(${e(x)?0:55}px);
                      transition: opacity 500ms ease-out ${fe??""}ms,
                                  transform 500ms ease-out ${Te??""}ms;
                    `),de(Se,e(l).title),qe(ke,`
                      opacity: ${e(x)?1:0};
                      transform: translateX(${e(x)?0:35}px);
                      transition: opacity 500ms ease-out ${Fe??""}ms,
                                  transform 500ms ease-out ${Ve??""}ms;
                    `),de(Me,e(l).description)},[()=>S(0,e(x)),()=>S(0,e(x)),()=>S(1,e(x)),()=>S(1,e(x))]),s(m,ve)}),t(ce),t(V);var w=o(V,2),j=a(w);De(j,21,()=>u,Be,(m,l,f)=>{var P=xr(),x=a(P),ve=o(x,2);t(P),Y(ue=>{qe(x,`width: ${ue??""}%`),qe(ve,`width: ${e(g)===f?100:0}%`)},[()=>Math.max(0,Math.min(1,e(A)-f))*100]),s(m,P)}),t(j),t(w),t(F);var oe=o(F,2);return De(oe,21,()=>u,Be,(m,l)=>{var f=wr();s(m,f)}),t(oe),t(J),it(J,m=>b(c,m),()=>e(c)),t(W),Y(()=>qe(N,`transform: rotate(${e(A)*180}deg); transition: none;`)),He(1,G,()=>mt,()=>({duration:800})),He(1,Z,()=>Et,()=>({y:30,duration:600,delay:100})),He(1,Ee,()=>Et,()=>({y:20,duration:800,delay:200})),He(1,I,()=>n,()=>({duration:400,delay:450,start:.9})),He(1,pe,()=>n,()=>({duration:400,delay:400,start:.9})),s(v,W),Le(re)}$e(["click"]);var Ar=p(`<div class="flex min-h-[60vh] flex-col items-center justify-center gap-6 px-4"><div class="flex flex-col items-center gap-4 text-center"><div class="text-error flex items-center gap-3"><!> <h1 class="text-6xl font-bold">404</h1></div> <h2 class="text-2xl font-semibold">Page non trouvée</h2> <p class="text-base-content/70 max-w-md">Désolé, la page que vous cherchez n'existe pas ou a été déplacée.</p></div> <button class="btn btn-primary btn-lg gap-2"><!> Retour à l'accueil</button></div>`);function kr(v,r){Pe(r,!1),Mt();var i=Ar(),y=a(i),n=a(y),_=a(n);oa(_,{class:"size-12"}),ae(2),t(n),ae(4),t(y);var d=o(y,2);d.__click=()=>ge("/");var u=a(d);ia(u,{class:"size-5"}),ae(),t(d),t(i),s(v,i),Le()}$e(["click"]);var Cr=p('<div class="flex h-[50vh] items-center justify-center"><!></div>'),Ir=p('<div class="flex h-[80vh] flex-col items-center justify-center gap-4"><div class="loading loading-spinner loading-lg text-primary"></div> <p class="text-base-content/70 animate-pulse font-medium"><!></p></div>'),Pr=p("<!> <!>",1),Lr=p('<link rel="preconnect" href="https://fonts.googleapis.com"/> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/> <link href="https://fonts.googleapis.com/css2?family=Cherry+Bomb+One&amp;family=Fredoka:wght@300..700&amp;display=swap&amp;family=Sora:wght@100..800&amp;display=swap" rel="stylesheet"/> <!> <div class="bg-base-200 min-h-screen"><!></div> <!> <!> <!> <!>',1);function Tr(v,r){Pe(r,!0);let i=Q("BOOTING"),y=Q(null);const n={beforeEnter:async()=>z.isAuthenticated?!0:(console.log("[Router] Accès refusé > Redirection /"),ge("/"),!1)},_={beforeEnter:async I=>{const X=I.params.id;if(!X)return console.log("[Router] EventId manquant > Redirection /"),ge("/"),!1;let le=0;const ye=30;for(;le<ye;){const D=je.getEventById(X);if(D)return D.status!=="local"?(console.log("[Router] Event non local > Redirection /"),ge("/"),!1):(console.log("[Router] Event local validé"),!0);await new Promise(se=>setTimeout(se,100)),le++}return console.log("[Router] Event introuvable après timeout > Redirection /"),ge("/"),!1}};$.addRoute("/",Rr),$.addRoute("/verify-email",()=>U(()=>import("./VerifyEmailPage.js"),__vite__mapDeps([0,1,2]))),$.addRoute("/recipe",()=>U(()=>import("./RecipesListPage.js"),__vite__mapDeps([3,2,1,4,5,6,7,8,9,10,11]))),$.addRoute("/recipe/my",()=>U(()=>import("./RecipesListPage.js"),__vite__mapDeps([3,2,1,4,5,6,7,8,9,10,11])),n),$.addRoute("/recipe/my/draft",()=>U(()=>import("./RecipesListPage.js"),__vite__mapDeps([3,2,1,4,5,6,7,8,9,10,11])),n),$.addRoute("/recipe/new",()=>U(()=>import("./RecipeCreatePage.js"),__vite__mapDeps([12,2,1,11,13,14,15,4,16,8,17,18])),n),$.addRoute("/recipe/:uuid/edit",()=>U(()=>import("./RecipeEditPage.js"),__vite__mapDeps([19,2,1,11,13,14,15,4,16,8,17,5,6,20,18,21])),n),$.addRoute("/recipe/:uuid/duplicate",()=>U(()=>import("./RecipeCreatePage.js"),__vite__mapDeps([12,2,1,11,13,14,15,4,16,8,17,18])),n),$.addRoute("/recipe/:uuid",()=>U(()=>import("./RecipeDetailPage.js"),__vite__mapDeps([22,2,1,9,23,14,4,24,25,21]))),$.addRoute("/accept-invite",()=>U(()=>import("./AcceptInvite.js"),__vite__mapDeps([26,2,1]))),$.addRoute("/reset-password",()=>U(()=>import("./ResetPassword.js"),__vite__mapDeps([27,2,1,28]))),$.addRoute("/dashboard",()=>U(()=>import("./DashboardPage.js"),__vite__mapDeps([29,2,1,30,31,20,32,33,14,34,35])),n),$.addRoute("/dashboard/teams",()=>U(()=>import("./TeamsManagement.js"),__vite__mapDeps([36,2,1,31,20,32])),n),$.addRoute("/dashboard/eventCreate",()=>U(()=>import("./EventCreatePage.js"),__vite__mapDeps([37,2,1,38,6,20,14,30,4])),n),$.addRoute("/dashboard/eventEdit/:id",()=>U(()=>import("./EventEditPage.js"),__vite__mapDeps([39,2,1,38,6,20,14,30,4,40,34,41,8,16,18])),n),$.addRoute("/dashboard/eventEdit/recipes/:id",()=>U(()=>import("./EventRecipesPage.js"),__vite__mapDeps([42,2,1,34,41,30,23,14,4,24,25,9,10,5,6,43])),n),$.addRoute("/dashboard/eventEdit/products/:id",()=>U(()=>import("./EventProductsPage.js"),__vite__mapDeps([44,2,1,30,16,8,32,14,4,41,34,40,10,45])),n),$.addRoute("/dashboard/eventEdit/posters/:id",()=>U(()=>import("./EventPosterPage.js"),__vite__mapDeps([46,2,1,40,4,20,10,47])),n),$.addRoute("/dashboard/materiel",()=>U(()=>import("./MaterielPage.js"),__vite__mapDeps([48,2,1,30,8,7,4,10])),n),$.addRoute("/dashboard/materiel/:teamId",()=>U(()=>import("./MaterielPage.js"),__vite__mapDeps([48,2,1,30,8,7,4,10])),n),$.addRoute("/dashboard/loans",()=>U(()=>import("./LoansPage.js"),__vite__mapDeps([49,2,1,5,6,16,8,30])),n),$.addRoute("/dashboard/loans/:teamId",()=>U(()=>import("./LoansPage.js"),__vite__mapDeps([49,2,1,5,6,16,8,30])),n),$.addRoute("/dashboard/loans/return/:loanId",()=>U(()=>import("./LoanReturnPage.js"),__vite__mapDeps([50,2,1,30])),n),$.addRoute("/eventList",()=>U(()=>import("./EventListPage.js"),__vite__mapDeps([51,2,1,33,14,34])),n),$.addRoute("/createdocument/:teamId/new",()=>U(()=>import("./CreateDocumentPage.js"),__vite__mapDeps([52,2,1,53,15,54,16,8,55])),n),$.addRoute("/editdocument/:teamId/:docId",()=>U(()=>import("./EditDocumentPage.js"),__vite__mapDeps([56,2,1,53,15,54,16,8,18,24,25,57])),n),$.addRoute("/documents/:teamId",()=>U(()=>import("./DocumentListPage.js"),__vite__mapDeps([58,2,1,35,30])),n),$.addRoute("/demo/event/:id",()=>U(()=>import("./EventEditPage.js"),__vite__mapDeps([39,2,1,38,6,20,14,30,4,40,34,41,8,16,18])),_),$.addRoute("/demo/event/recipes/:id",()=>U(()=>import("./EventRecipesPage.js"),__vite__mapDeps([42,2,1,34,41,30,23,14,4,24,25,9,10,5,6,43])),_),$.addRoute("/demo/event/products/:id",()=>U(()=>import("./EventProductsPage.js"),__vite__mapDeps([44,2,1,30,16,8,32,14,4,41,34,40,10,45])),_),$.addRoute("/demo/event/posters/:id",()=>U(()=>import("./EventPosterPage.js"),__vite__mapDeps([46,2,1,40,4,20,10,47])),_),$.addRoute(/.*/,kr);let d=Q(null);async function u(){try{if(b(i,"BOOTING"),await z.initializeAuth(),z.isAuthenticated){b(i,"LOADING_PRIVATE_CACHE");const I=ze.loading("Chargement des données...");await Promise.all([je.loadCache(),Je.loadCache(),rt.loadCache(),st.loadCache()]),b(i,"READY_WITH_CACHE"),ze.update(I,{state:"loading",message:"Mise à jour des données en cours..."}),Promise.all([je.syncFromRemote(),Je.syncFromRemote(),rt.syncFromRemote(),at.syncFromRemote(),st.syncFromRemote()]).then(async()=>{await Promise.all([je.setupRealtime(),Je.setupRealtime(),rt.setupRealtime(),at.setupRealtime(),ft.initialize(),st.setupRealtime()]),await ot.initialize(),b(i,"READY_FULLY_SYNCED"),ze.dismiss(I),setTimeout(()=>{ct("/dashboard"),ct("/recipe")},3e3)}).catch(X=>{console.error("[App] Erreur synchro distante:",X),ze.update(I,{state:"warning",message:"Mode hors ligne : données mises en cache",autoCloseDelay:5e3}),ot.initialize().catch(console.error)})}else b(i,"LOADING_PUBLIC_CACHE"),await Je.loadCache(),b(i,"READY_WITH_CACHE"),Promise.all([Je.syncFromRemotePublicOnly(),ot.initialize()]).then(()=>{b(i,"READY_FULLY_SYNCED"),setTimeout(()=>{ct("/recipe")},2e3)}).catch(I=>{console.error("[App] Erreur synchro recettes:",I)})}catch(I){console.error("[App] Erreur fatale d'initialisation:",I),b(y,I.message||"Erreur critique de chargement",!0),b(i,"ERROR")}}let c=Q("");Ue(()=>{const I=$.path,X=e(i);(X==="READY_WITH_CACHE"||X==="READY_FULLY_SYNCED"||X==="READY")&&$.match().then(async le=>{b(d,le,!0),I!==e(c)&&(b(c,I,!0),await St(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"smooth"})})}))})});let g=Q(!1),A=Q(!1);Ue(()=>{const I=z.isAuthenticated;e(A)||e(i)!=="BOOTING"&&e(i)!=="LOADING_PRIVATE_CACHE"&&e(i)!=="LOADING_PUBLIC_CACHE"&&I!==e(g)&&(b(g,I,!0),console.log("[App] Changement d'état Auth détecté -> Rechargement"),b(A,!0),u().finally(()=>{b(A,!1)}))}),Vt(()=>{u()}),$t(()=>{console.log("[App] Destruction de l'application - Nettoyage des stores..."),ft.destroy(),at.destroy(),je.destroy(),Je.destroy(),rt.destroy(),st.destroy(),ot.destroy()});let T=be(()=>e(y)||qt.error);async function E(){z.authModal.isOpen=!1,await z.refreshAuthAfterLogin()}var q=Lr(),S=o(K(q),6);wa(S,{});var re=o(S,2),W=a(re);{var B=I=>{const X=be(()=>e(d).component);var le=_e(),ye=K(le);Ft(ye,()=>e(X),(D,se)=>{se(D,{get params(){return e(d).params},get query(){return e(d).query}})}),s(I,le)},k=I=>{var X=_e(),le=K(X);{var ye=se=>{var xe=Cr(),C=a(xe);{let L=be(()=>e(T)||"Erreur inconnue");gt(C,{get message(){return e(L)}})}t(xe),s(se,xe)},D=se=>{var xe=Ir(),C=o(a(xe),2),L=a(C);{var O=J=>{var F=et("Démarrage...");s(J,F)},H=J=>{var F=_e(),te=K(F);{var me=ee=>{var V=et("Chargement des données en cache...");s(ee,V)},we=ee=>{var V=_e(),ie=K(V);{var ce=N=>{var M=et("Préparation de la cuisine...");s(N,M)};R(ie,N=>{e(i)==="LOADING_PUBLIC_CACHE"&&N(ce)},!0)}s(ee,V)};R(te,ee=>{e(i)==="LOADING_PRIVATE_CACHE"?ee(me):ee(we,!1)},!0)}s(J,F)};R(L,J=>{e(i)==="BOOTING"?J(O):J(H,!1)})}t(C),t(xe),s(se,xe)};R(le,se=>{e(i)==="ERROR"?se(ye):se(D,!1)},!0)}s(I,X)};R(W,I=>{(e(i)==="READY_WITH_CACHE"||e(i)==="READY_FULLY_SYNCED"||e(i)==="READY")&&e(d)?I(B):I(k,!1)})}t(re);var h=o(re,2);Ia(h,{});var G=o(h,2);Ta(G,{});var Z=o(G,2);{var Ee=I=>{var X=Pr(),le=K(X);{var ye=se=>{gt(se,{get message(){return e(T)}})};R(le,se=>{e(T)&&se(ye)})}var D=o(le,2);Oa(D,{}),s(I,X)};R(Z,I=>{z.isAuthenticated&&e(i)==="READY"&&I(Ee)})}var pe=o(Z,2);ir(pe,{get showLogin(){return z.authModal.showLogin},onAuth_success:E,get isOpen(){return z.authModal.isOpen},set isOpen(I){z.authModal.isOpen=I}}),s(v,q),Le()}Bt(Tr,{target:document.getElementById("app")});export{dr as E,Va as M,Na as a,Ha as b,Ua as c,$r as d,Vr as e,mt as f,ne as n,Mr as s};
