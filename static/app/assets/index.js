const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/VerifyEmailPage.js","assets/appwrite.js","assets/icons.js","assets/RecipesListPage.js","assets/Fieldset.js","assets/AutocompleteInput.js","assets/keyboardNavigation.svelte.js","assets/BadgeList.js","assets/CheckboxBadge.js","assets/RecipeRegimeBadges.js","assets/LeftPanel.js","assets/RecipeDataStore.svelte.js","assets/RecipeCreatePage.js","assets/RecipeEditPage2.js","assets/products-display.js","assets/tiptap-markdown.es.js","assets/BtnGroupCheck.js","assets/RecipeEditPage.css","assets/UnsavedChangesGuard.js","assets/RecipeEditPage.js","assets/ConfirmModal.js","assets/RecipeVariants.js","assets/RecipeDetailPage.js","assets/RecipePreparation.js","assets/SvelteMarkdown.js","assets/SvelteMarkdown.css","assets/AcceptInvite.js","assets/ResetPassword.js","assets/ResetPassword.css","assets/DashboardPage.js","assets/date-helpers.js","assets/CreateTeamModal.js","assets/InfoCollapse.js","assets/EventCard.js","assets/event-stats-helpers.js","assets/DocCard.js","assets/TeamsManagement.js","assets/EventCreatePage.js","assets/EventMealCard.js","assets/EventEditPage.js","assets/EventInvitationAlert.js","assets/EventStats.js","assets/EventRecipesPage.js","assets/EventRecipesPage.css","assets/EventProductsPage.js","assets/EventProductsPage.css","assets/EventPosterPage.js","assets/EventPosterPage.css","assets/MaterielPage.js","assets/LoansPage.js","assets/LoanReturnPage.js","assets/EventListPage.js","assets/CreateDocumentPage.js","assets/MarkdownEditorAdvanced.js","assets/MarkdownEditorAdvanced.css","assets/CreateDocumentPage.css","assets/EditDocumentPage.js","assets/EditDocumentPage.css","assets/DocumentListPage.js"])))=>i.map(i=>d[i]);
var mt=c=>{throw TypeError(c)};var Tt=(c,r,i)=>r.has(c)||mt("Cannot "+i);var Re=(c,r,i)=>(Tt(c,r,"read from private field"),i?i.call(c):r.get(c)),_t=(c,r,i)=>r.has(c)?mt("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(c):r.set(c,i);import{v as _,g as a,h as o,w as Y,x as de,b as s,o as t,y as Q,z as Et,m as e,A as f,B as $e,d as Pe,p as Ie,e as De,C as Ze,u as be,i as Be,c as Le,D as $,E as ge,F as at,G as z,H as Ue,k as K,I as E,j as _e,s as Qe,J as Je,K as ae,L as Ot,M as ze,t as Dt,N as Rt,O as He,P as it,Q as lt,R as Xe,S as et,T as dt,U as Ke,V as zt,_ as U,W as je,X as qe,Y as Mt,Z as Vt,$ as $t,a0 as St,a1 as pt,a2 as rt,a3 as st,a4 as ot,a5 as ct,a6 as Ft,a7 as qt,a8 as Bt}from"./appwrite.js";import{C as At,a as Nt,L as ft,b as nt,U as Yt,P as Ht,B as jt,R as Ut,c as Gt,d as Wt,e as Xt,f as Kt,X as kt,A as Jt,g as Qt,h as Zt,M as vt,i as ea,j as ta,k as aa,l as ra,m as bt,E as sa,n as oa,H as ia}from"./icons.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))y(n);new MutationObserver(n=>{for(const b of n)if(b.type==="childList")for(const v of b.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&y(v)}).observe(document,{childList:!0,subtree:!0});function i(n){const b={};return n.integrity&&(b.integrity=n.integrity),n.referrerPolicy&&(b.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?b.credentials="include":n.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function y(n){if(n.ep)return;n.ep=!0;const b=i(n);fetch(n.href,b)}})();var na=_('<div class="alert alert-error max-md:alert-vertical shadow-lg"><!> <div><h3 class="font-bold">Erreur</h3> <div class="text-sm"> </div></div></div>');function ht(c,r){var i=na(),y=a(i);At(y,{class:"h-6 w-6 shrink-0 stroke-current"});var n=o(y,2),b=o(a(n),2),v=a(b,!0);t(b),t(n),t(i),Y(()=>de(v,r.message)),s(c,i)}var he;class la{constructor(){_t(this,he,Q(Et({title:""})))}get title(){return e(Re(this,he)).title||"ENKA Cookbook"}get backAction(){return e(Re(this,he)).backAction}get actions(){return e(Re(this,he)).actions}get tabs(){return e(Re(this,he)).tabs}get eventId(){return e(Re(this,he)).eventId}get basePath(){return e(Re(this,he)).basePath||"/dashboard/eventEdit"}get activeTab(){return e(Re(this,he)).activeTab||0}get isLockedByOthers(){return e(Re(this,he)).isLockedByOthers||!1}get lockedByUserName(){return e(Re(this,he)).lockedByUserName||""}get hasUnsavedChanges(){return e(Re(this,he)).hasUnsavedChanges||!1}get materielContext(){return e(Re(this,he)).materielContext||null}get teamId(){return e(Re(this,he)).teamId}setConfig(r){f(Re(this,he),{...r},!0)}reset(){f(Re(this,he),{title:""},!0)}}he=new WeakMap;const ne=new la;var da=_("<button> </button>"),ca=_('<div class="rounded-box bg-secondary/10 px-4 py-1"><div class="tabs tabs-border justify-center"></div></div>');function gt(c,r){Pe(r,!0);let i=Ie(r,"basePath",3,"/dashboard/eventEdit");const y=[{label:"Éditer l'événement",relativePath:""},{label:"Voir les recettes",relativePath:"recipes"},{label:"Listes des produits",relativePath:"products"},{label:"Affiches",relativePath:"posters"}],n=be(()=>{const d=$.path;return d.includes(`${i()}/recipes/`)?1:d.includes(`${i()}/products/`)?2:d.includes(`${i()}/posters/`)?3:(d.includes(i())&&r.eventId&&new RegExp(`${i()}/${r.eventId}(/?$)`).test(d),0)});function b(d){if(!r.eventId)return;const g=y[d].relativePath,k=g?`${i()}/${g}/${r.eventId}`:`${i()}/${r.eventId}`;ge(k)}var v=ca(),m=a(v);De(m,21,()=>y,Be,(d,g,k)=>{var T=da();T.__click=()=>b(k);var C=a(T,!0);t(T),Y(()=>{Ze(T,1,`tab font-semibold ${k===e(n)?"tab-active":""}`),de(C,e(g).label)}),s(d,T)}),t(m),t(v),s(c,v),Le()}$e(["click"]);var va=_("<button> </button>"),ua=_('<div class="tabs tabs-lg tabs-border justify-center"></div>');function yt(c,r){Pe(r,!0);const i=[{label:"Matériel",getPath:()=>n()},{label:"Reservations",getPath:()=>b()}],y=be(()=>$.path.includes("/loans")?1:0);function n(){if(r.currentTeamId)return`/dashboard/materiel/${r.currentTeamId}`;const d=at.myTeams;return d.length>0?`/dashboard/materiel/${d[0].$id}`:"/dashboard/materiel"}function b(){if(r.currentTeamId)return`/dashboard/loans/${r.currentTeamId}`;const d=at.myTeams;return d.length>0?`/dashboard/loans/${d[0].$id}`:"/dashboard/loans"}function v(d){const g=i[d].getPath();ge(g)}var m=ua();De(m,21,()=>i,Be,(d,g,k)=>{var T=va();T.__click=()=>v(k);var C=a(T,!0);t(T),Y(()=>{Ze(T,1,`tab font-medium ${k===e(y)?"tab-active":""}`),de(C,e(g).label)}),s(d,T)}),t(m),s(c,m),Le()}$e(["click"]);var ma=_('<button class="btn btn-ghost not-md:btn-square md:gap-2"><!> <span class="hidden md:inline">Tableau de bord</span></button>'),_a=_('<h1 class="font-family-fredoka truncate text-sm font-bold tracking-wider uppercase opacity-70"> </h1>'),pa=_('<div class="navbar-center absolute left-1/2 -translate-x-1/2 transform"><!></div>'),fa=_('<div class="badge badge-warning flex items-center gap-1 py-3 font-medium"><!> <span class="text-xs"> </span></div>'),ba=_('<div class="dropdown dropdown-end"><div tabindex="0" role="button" class="btn btn-ghost btn-circle avatar bg-primary/10 text-primary border-primary/20 border"><div class="flex w-10 items-center justify-center rounded-full text-lg font-bold"> </div></div> <ul class="menu menu-sm dropdown-content bg-base-100 border-base-200 z-[1] mt-3 w-56 rounded-xl border p-2 shadow-xl"><li class="border-base-100 mb-1 border-b px-4 py-2"><span class="block truncate p-0 text-xs font-medium italic opacity-60"> </span></li> <li><button><!> Dashboard</button></li> <li><button><!> Équipes</button></li> <li><button><!> Nouvel événement</button></li> <li><button><!> Recettes</button></li> <li><button class="disabled:opacity-50"><!> </button></li> <!> <li class="border-base-100 my-1 border-t"></li> <li><button class="text-error hover:bg-error/10"><!> Se déconnecter</button></li></ul></div>'),ha=_('<button class="btn btn-primary btn-sm shadow-md"><!> Connexion</button>'),ga=_('<h1 class="text-center text-sm font-bold tracking-wider uppercase opacity-70"> </h1>'),ya=_('<div class="border-base-300 bg-base-100 border-b px-4 py-3"><!></div>'),xa=_('<div><div class="navbar-start w-fit shrink-0 gap-1"><button class="btn btn-ghost btn-circle"><img src="images/favicon.png" alt="logo" class="h-8 w-8"/></button> <div class="flex items-center gap-1"><!> <button class="btn btn-ghost not-md:btn-square md:gap-2"><!> <span class="hidden md:inline">Recettes</span></button></div></div> <!> <div class="navbar-end ms-auto w-fit flex-shrink-0 gap-4"><!> <div class="flex items-center gap-2"><!></div> <!></div></div> <!>',1);function wa(c,r){Pe(r,!0);let i=Q(!1),y=Q(!1);z.initializeScrollDirection();function n(){f(i,!1)}async function b(){try{await z.logout(),window.location.href="/"}catch(A){console.error("Erreur lors de la déconnexion:",A)}}function v(){z.authModal.showLogin=!0,z.authModal.isOpen=!0}async function m(){if(z.userId){f(y,!0);try{await Je.forceReloadAllRecipes(),n()}catch(A){console.error("Erreur lors du rechargement des recettes:",A),alert("Erreur lors du rechargement des recettes")}finally{f(y,!1)}}}function d(A){A.target.closest(".svelte-user-dropdown")||n()}Ue(()=>{if(e(i))return document.addEventListener("click",d),()=>document.removeEventListener("click",d)});var g=xa(),k=K(g),T=a(k),C=a(T);C.__click=()=>ge("/");var q=o(C,2),S=a(q);{var re=A=>{var L=ma();L.__click=()=>ge("/dashboard");var O=a(L);ft(O,{size:18}),ae(2),t(L),s(A,L)};E(S,A=>{z.isAuthenticated&&A(re)})}var W=o(S,2);W.__click=()=>ge("/recipe");var B=a(W);Nt(B,{size:18}),ae(2),t(W),t(q),t(T);var R=o(T,2);{var h=A=>{var L=pa(),O=a(L);{var H=F=>{yt(F,{get currentTeamId(){return ne.teamId}})},J=F=>{var te=_e(),me=K(te);{var we=V=>{var ie=_e(),ce=K(ie);Qe(ce,()=>ne.tabs),s(V,ie)},ee=V=>{var ie=_e(),ce=K(ie);{var N=w=>{gt(w,{get eventId(){return ne.eventId},get basePath(){return ne.basePath}})},M=w=>{var j=_a(),oe=a(j,!0);t(j),Y(()=>{Ot(j,"title",ne.title),de(oe,ne.title)}),s(w,j)};E(ce,w=>{ne.eventId!==void 0?w(N):w(M,!1)},!0)}s(V,ie)};E(me,V=>{ne.tabs?V(we):V(ee,!1)},!0)}s(F,te)};E(O,F=>{ne.materielContext?F(H):F(J,!1)})}t(L),s(A,L)};E(R,A=>{z.isDesktop&&A(h)})}var G=o(R,2),Z=a(G);{var Ee=A=>{var L=fa(),O=a(L);nt(O,{size:14});var H=o(O,2),J=a(H);t(H),t(L),Y(()=>de(J,`Édition par ${ne.lockedByUserName??""}`)),s(A,L)};E(Z,A=>{ne.isLockedByOthers&&A(Ee)})}var pe=o(Z,2),I=a(pe);{var X=A=>{var L=_e(),O=K(L);Qe(O,()=>ne.actions),s(A,L)};E(I,A=>{ne.actions&&A(X)})}t(pe);var le=o(pe,2);{var ye=A=>{var L=ba(),O=a(L),H=a(O),J=a(H,!0);t(H),t(O);var F=o(O,2),te=a(F),me=a(te),we=a(me,!0);t(me),t(te);var ee=o(te,2),V=a(ee);V.__click=()=>ge("/dashboard");var ie=a(V);ft(ie,{size:16}),ae(),t(V),t(ee);var ce=o(ee,2),N=a(ce);N.__click=()=>ge("/dashboard/teams");var M=a(N);Yt(M,{size:16}),ae(),t(N),t(ce);var w=o(ce,2),j=a(w);j.__click=()=>ge("/dashboard/eventCreate");var oe=a(j);Ht(oe,{size:16}),ae(),t(j),t(w);var u=o(w,2),l=a(u);l.__click=()=>ge("/recipe");var p=a(l);jt(p,{size:16}),ae(),t(l),t(u);var P=o(u,2),x=a(P);x.__click=m;var ve=a(x);{let Ce=be(()=>e(y)?"animate-spin":"");Ut(ve,{size:16,get class(){return e(Ce)}})}var ue=o(ve);t(x),t(P);var Ae=o(P,2);E(Ae,Ce=>{});var Se=o(Ae,4),ke=a(Se);ke.__click=b;var Me=a(ke);Gt(Me,{size:16}),ae(),t(ke),t(Se),t(F),t(L),Y(Ce=>{de(J,Ce),de(we,z.user?.email),x.disabled=e(y),de(ue,` ${e(y)?"Chargement...":"Recharger les recettes"}`)},[()=>z.user?.name?.charAt(0).toUpperCase()||"U"]),s(A,L)},D=A=>{var L=ha();L.__click=v;var O=a(L);Wt(O,{size:16}),ae(),t(L),s(A,L)};E(le,A=>{z.isAuthenticated?A(ye):A(D,!1)})}t(G),t(k);var se=o(k,2);{var xe=A=>{var L=ya(),O=a(L);{var H=F=>{yt(F,{get currentTeamId(){return ne.teamId}})},J=F=>{var te=_e(),me=K(te);{var we=V=>{gt(V,{get eventId(){return ne.eventId},get basePath(){return ne.basePath}})},ee=V=>{var ie=_e(),ce=K(ie);{var N=w=>{var j=_e(),oe=K(j);Qe(oe,()=>ne.tabs),s(w,j)},M=w=>{var j=_e(),oe=K(j);{var u=l=>{var p=ga(),P=a(p,!0);t(p),Y(()=>de(P,ne.title)),s(l,p)};E(oe,l=>{ne.title&&l(u)},!0)}s(w,j)};E(ce,w=>{ne.tabs?w(N):w(M,!1)},!0)}s(V,ie)};E(me,V=>{ne.eventId!==void 0?V(we):V(ee,!1)},!0)}s(F,te)};E(O,F=>{ne.materielContext?F(H):F(J,!1)})}t(L),s(A,L)};E(se,A=>{z.isDesktop||A(xe)})}Y(()=>Ze(k,1,`navbar bg-base-100 border-base-300 sticky top-0 z-1000 min-h-13 border-b px-4 py-0 shadow-sm print:hidden ${(z.isMobile&&"min-h-11")??""} ${(z.isMobile&&!z.headerVisible&&"-translate-y-full")??""} transition-transform duration-300`)),s(c,g),Le()}$e(["click"]);var Ea=_('<button class="btn btn-sm btn-primary"> </button>'),Ra=_('<button class="btn btn-ghost btn-xs btn-square" title="Voir les détails" aria-label="Voir les détails"><!></button>'),Aa=_('<button class="btn btn-ghost btn-xs btn-circle" title="Fermer" aria-label="Fermer la notification"><!></button>'),ka=_('<div><div class="flex items-center justify-between gap-4"><div class="flex flex-1 items-center gap-2"><!> <span class="text-sm"> </span></div> <!> <!> <!></div></div>'),Ca=_("<div></div>");function Ia(c,r){Pe(r,!0);let i=Ie(r,"position",3,"toast-center toast-bottom"),y=Ie(r,"padding",3,"sm");const n=be(()=>y()==="sm"?" py-0.5":"py-1"),b=be(()=>ze.toasts),v=be(()=>()=>{const C=new Map;for(const q of e(b)){const S=q.position||i();C.has(S)||C.set(S,[]),C.get(S).push(q)}return C});function m(C){ze.dismiss(C.id)}function d(C){r.onShowDetails?.({id:C.id,message:C.message,details:C.details})}function g(C,q){q.onClick()}var k=_e(),T=K(k);De(T,17,()=>Array.from(e(v)().entries()),([C,q])=>C,(C,q)=>{var S=be(()=>Dt(e(q),2));let re=()=>e(S)[0],W=()=>e(S)[1];var B=Ca();De(B,21,W,R=>R.id,(R,h)=>{var G=ka(),Z=a(G),Ee=a(Z),pe=a(Ee);{var I=O=>{Xt(O,{class:"h-5 w-5 animate-spin"})};E(pe,O=>{e(h).state==="loading"&&O(I)})}var X=o(pe,2),le=a(X,!0);t(X),t(Ee);var ye=o(Ee,2);{var D=O=>{var H=_e(),J=K(H);De(J,17,()=>e(h).actions,Be,(F,te)=>{var me=Ea();me.__click=()=>g(e(h),e(te));var we=a(me,!0);t(me),Y(()=>de(we,e(te).label)),s(F,me)}),s(O,H)};E(ye,O=>{e(h).actions&&e(h).actions.length>0&&O(D)})}var se=o(ye,2);{var xe=O=>{var H=Ra();H.__click=()=>d(e(h));var J=a(H);Kt(J,{class:"h-3 w-3"}),t(H),s(O,H)};E(se,O=>{e(h).details&&O(xe)})}var A=o(se,2);{var L=O=>{var H=Aa();H.__click=()=>m(e(h));var J=a(H);kt(J,{class:"h-4 w-4"}),t(H),s(O,H)};E(A,O=>{(e(h).state==="error"||e(h).state==="warning"||e(h).state==="loading")&&O(L)})}t(Z),t(G),Y(()=>{Ze(G,1,`alert alert-${e(h).state??""}  ${e(n)??""} shadow-lg`),de(le,e(h).message)}),s(R,G)}),t(B),Y(()=>Ze(B,1,`toast ${re()??""} z-1050`)),s(C,B)}),s(c,k),Le()}$e(["click"]);const Pa=c=>c;function Ct(c){const r=c-1;return r*r*r+1}function xt(c){const r=typeof c=="string"&&c.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return r?[parseFloat(r[1]),r[2]||"px"]:[c,"px"]}function ut(c,{delay:r=0,duration:i=400,easing:y=Pa}={}){const n=+getComputedStyle(c).opacity;return{delay:r,duration:i,easing:y,css:b=>`opacity: ${b*n}`}}function wt(c,{delay:r=0,duration:i=400,easing:y=Ct,x:n=0,y:b=0,opacity:v=0}={}){const m=getComputedStyle(c),d=+m.opacity,g=m.transform==="none"?"":m.transform,k=d*(1-v),[T,C]=xt(n),[q,S]=xt(b);return{delay:r,duration:i,easing:y,css:(re,W)=>`
			transform: ${g} translate(${(1-re)*T}${C}, ${(1-re)*q}${S});
			opacity: ${d-k*W}`}}function Mr(c,{delay:r=0,duration:i=400,easing:y=Ct,axis:n="y"}={}){const b=getComputedStyle(c),v=+b.opacity,m=n==="y"?"height":"width",d=parseFloat(b[m]),g=n==="y"?["top","bottom"]:["left","right"],k=g.map(B=>`${B[0].toUpperCase()}${B.slice(1)}`),T=parseFloat(b[`padding${k[0]}`]),C=parseFloat(b[`padding${k[1]}`]),q=parseFloat(b[`margin${k[0]}`]),S=parseFloat(b[`margin${k[1]}`]),re=parseFloat(b[`border${k[0]}Width`]),W=parseFloat(b[`border${k[1]}Width`]);return{delay:r,duration:i,easing:y,css:B=>`overflow: hidden;opacity: ${Math.min(B*20,1)*v};${m}: ${B*d}px;padding-${g[0]}: ${B*T}px;padding-${g[1]}: ${B*C}px;margin-${g[0]}: ${B*q}px;margin-${g[1]}: ${B*S}px;border-${g[0]}-width: ${B*re}px;border-${g[1]}-width: ${B*W}px;min-${m}: 0`}}var La=_('<button class="btn btn-primary btn-circle fixed right-6 bottom-6 z-50 rounded-full shadow-lg" aria-label="Retour en haut de page"><!></button>');function Ta(c,r){Pe(r,!0);let i=be(()=>(Rt.current||0)>300);function y(){window.scrollTo({top:0,behavior:"smooth"})}var n=_e(),b=K(n);{var v=m=>{var d=La();d.__click=y;var g=a(d);Jt(g,{class:"h-6 w-6"}),t(d),He(3,d,()=>ut),s(m,d)};E(b,m=>{e(i)&&m(v)})}s(c,n),Le()}$e(["click"]);function Oa(c,r){Pe(r,!0),Le()}var Da=_('<div role="dialog" aria-modal="true"><!></div>'),za=_('<div class="modal modal-open" style="z-index: 1100"><div class="modal-box max-w-md"><h3 class="text-lg font-bold">Confirmer la fermeture</h3> <p class="py-4"> </p> <div class="modal-action"><button class="btn btn-ghost">Annuler</button> <button class="btn btn-error">Fermer sans sauvegarder</button></div></div></div>'),Ma=_("<div><!></div> <!>",1);function Va(c,r){Pe(r,!0);let i=Ie(r,"fullscreenOnMobile",3,!0);Ie(r,"closeOnBackdropClick",3,!1);let y=Ie(r,"hasUnsavedChanges",3,!1),n=Ie(r,"confirmCloseMessage",3,"Vous avez des modifications non sauvegardées. Voulez-vous vraiment fermer ?"),b=Ie(r,"maxWidth",3,"lg");Ie(r,"maxHeight",3,"xl");let v=Ie(r,"modalClass",3,"");function m(R,h){return{sm:{"max-w":"max-w-[28rem]","max-h":"max-h-[85dvh]"},lg:{"max-w":"max-w-[64rem]","max-h":"max-h-[85dvh]"},xl:{"max-w":"max-w-[90vw]","max-h":"max-h-[85dvh]"}}[R][h]}let d=Q(!1);function g(){y()?f(d,!0):r.onClose()}function k(){f(d,!1),r.onClose()}function T(){f(d,!1)}Ue(()=>{if(!r.isOpen)return;const R=h=>{h.key==="Escape"&&!e(d)&&g()};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)}),Ue(()=>{if(r.isOpen)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}});var C=Ma(),q=K(C),S=a(q);{var re=R=>{var h=Da(),G=a(h);Qe(G,()=>r.children),t(h),Y(Z=>Ze(h,1,`modal-box flex flex-col p-0 ${v()??""} ${i()&&z.isMobile?"fixed inset-0 m-0 h-lvh w-lvw rounded-none":"fixed top-10 m-auto "} ${Z??""} ${!(i()&&z.isMobile)&&!v()&&"max-h-[85dvh]"}`),[()=>!(i()&&z.isMobile)&&m(b(),"max-w")]),s(R,h)};E(S,R=>{r.isOpen&&R(re)})}t(q);var W=o(q,2);{var B=R=>{var h=za(),G=a(h),Z=o(a(G),2),Ee=a(Z,!0);t(Z);var pe=o(Z,2),I=a(pe);I.__click=T;var X=o(I,2);X.__click=k,t(pe),t(G),t(h),Y(()=>de(Ee,n())),s(R,h)};E(W,R=>{e(d)&&R(B)})}Y(()=>Ze(q,1,`modal ${(r.isOpen&&"modal-open")??""} `)),s(c,C),Le()}$e(["click"]);var $a=_('<button class="btn btn-circle btn-ghost btn-sm flex-none" aria-label="Retour"><!></button>'),Sa=_('<button class="btn btn-circle btn-ghost btn-sm flex-none" aria-label="Retour"><!></button>'),Fa=_('<p class="text-base-content/70 truncate text-sm"> </p>'),qa=_('<div class="flex items-center gap-2 sm:me-10"><!></div>'),Ba=_('<div class="border-base-300 flex-none border-b px-4 py-3"><div class="absolute top-2 right-2"><!></div> <div class="flex flex-wrap items-center gap-2"><div class="flex min-w-0 flex-1 items-center gap-2"><!> <div class="max-w-11/12 min-w-0 flex-1 items-baseline"><h3 class="truncate text-lg font-bold"> </h3> <!></div></div> <!></div></div>');function Na(c,r){Pe(r,!0);let i=Ie(r,"showBackButton",3,!0);var y=Ba(),n=a(y),b=a(n);{var v=R=>{var h=$a();h.__click=function(...Z){r.onClose?.apply(this,Z)};var G=a(h);kt(G,{class:"h-5 w-5"}),t(h),s(R,h)};E(b,R=>{z.isMobile||R(v)})}t(n);var m=o(n,2),d=a(m),g=a(d);{var k=R=>{var h=Sa();h.__click=function(...Z){r.onClose?.apply(this,Z)};var G=a(h);Qt(G,{class:"h-5 w-5"}),t(h),s(R,h)};E(g,R=>{i()&&z.isMobile&&R(k)})}var T=o(g,2),C=a(T),q=a(C,!0);t(C);var S=o(C,2);{var re=R=>{var h=Fa(),G=a(h,!0);t(h),Y(()=>de(G,r.subtitle)),s(R,h)};E(S,R=>{r.subtitle&&R(re)})}t(T),t(d);var W=o(d,2);{var B=R=>{var h=qa(),G=a(h);Qe(G,()=>r.children),t(h),s(R,h)};E(W,R=>{r.children&&R(B)})}t(m),t(y),Y(()=>de(q,r.title)),s(c,y),Le()}$e(["click"]);var Ya=_('<div class="flex-1 overflow-y-auto p-4 sm:p-6 sm:pt-2"><!></div>');function Ha(c,r){var i=Ya(),y=a(i);Qe(y,()=>r.children),t(i),s(c,i)}var ja=_('<div class="border-base-300 flex-none border-t px-4 py-3"><div class="flex flex-wrap items-center justify-end gap-2"><!></div></div>');function Ua(c,r){var i=ja(),y=a(i),n=a(y);Qe(n,()=>r.children),t(y),t(i),s(c,i)}var Ga=_('<div role="alert" class="alert alert-error max-md:alert-vertical svelte-o861tn"><!> <span> </span></div>'),Wa=_('<div role="alert" class="alert alert-success max-md:alert-vertical svelte-o861tn"><!> <span> </span></div>'),Xa=_(`<form id="forgotForm" class="space-y-4 svelte-o861tn"><fieldset class="svelte-o861tn"><label class="input validator w-full"><!> <input type="email" placeholder="votre@email.com" required/></label> <span class="validator-hint hidden">Adresse email valide requise</span></fieldset> <div class="alert alert-info alert-soft svelte-o861tn">Un email avec un lien vous sera envoyé pour renouveller votre mot de
            passe.". Pensez à vérifier s'il n'a pas attéri dans votre dossier
            spam.</div></form> <div class="text-center svelte-o861tn"><button class="btn btn-ghost btn-sm">← Retour à la connexion</button></div>`,1),Ka=_(`<form id="loginForm" class="space-y-4 svelte-o861tn"><fieldset class="svelte-o861tn"><label class="input validator w-full"><!> <input type="email" placeholder="votre@email.com" required/></label> <span class="validator-hint hidden">Adresse email valide requise</span></fieldset> <fieldset class="svelte-o861tn"><label class="input validator w-full"><!> <input type="password" placeholder="Mot de passe" required/></label> <span class="validator-hint hidden">Mot de passe requis</span></fieldset></form> <div class="space-y-2 text-center svelte-o861tn"><button class="btn btn-link btn-sm btn-primary svelte-o861tn">Mot de passe oublié ?</button> <div class="text-base-content/70 text-sm svelte-o861tn">Pas encore de compte ? <button class="btn btn-primary btn-sm btn-soft ms-1">S'inscrire</button></div></div>`,1),Ja=_(`<form id="registerForm" class="space-y-4 svelte-o861tn"><fieldset class="svelte-o861tn"><label class="input validator w-full"><!> <input type="text" placeholder="Votre nom" required minlength="3" maxlength="25"/></label> <span class="validator-hint hidden">Doit comporter entre 3 et 25 caractères.</span></fieldset> <fieldset class="svelte-o861tn"><label class="input validator w-full"><!> <input type="email" placeholder="votre@email.com" required/></label> <span class="validator-hint hidden">Adresse email valide requise</span></fieldset> <fieldset class="svelte-o861tn"><label class="input validator w-full"><!> <input type="password" placeholder="Mot de passe" required minlength="8" maxlength="25"/></label> <span class="validator-hint hidden">Doit comporter entre 8 et 25 caractères.</span></fieldset> <fieldset class="svelte-o861tn"><label class="input validator w-full"><!> <input type="password" placeholder="Confirmer le mot de passe" required minlength="8" maxlength="25"/></label> <span class="validator-hint hidden">Doit être identique au mot de passe ci-dessus.</span></fieldset> <div class="alert alert-info alert-soft svelte-o861tn">Un email avec un lien vous sera envoyé. Pensez à vérifier s'il n'a
            pas attéri dans votre dossier spam.</div></form> <div class="text-base-content/70 text-center text-sm svelte-o861tn">Déjà un compte ? <button class="btn btn-soft btn-sm btn-primary ms-1">Se connecter</button></div>`,1),Qa=_('<div class="space-y-4 py-4 svelte-o861tn"><!> <!> <!></div>'),Za=_('<span class="loading loading-spinner"></span>'),er=_('<button form="forgotForm" type="submit" class="btn btn-primary btn-block"><!></button>'),tr=_('<span class="loading loading-spinner"></span>'),ar=_('<button form="loginForm" type="submit" class="btn btn-primary btn-block"><!></button>'),rr=_('<span class="loading loading-spinner"></span>'),sr=_('<button form="registerForm" type="submit" class="btn btn-success btn-block"><!></button>'),or=_("<!> <!> <!>",1);function ir(c,r){Pe(r,!0);let i=Ie(r,"isOpen",15),y=Ie(r,"onAuth_success",3,async()=>{}),n=Ie(r,"showLogin",3,!0),b=Q(Et(n())),v=Q(!1),m=Q(""),d=Q("");Ue(()=>{i()&&(f(b,n()),f(W,!1))});let g=Q(""),k=Q(""),T=Q(""),C=Q(""),q=Q(""),S=Q(""),re=Q(""),W=Q(!1),B,R,h;async function G(D){if(D.preventDefault(),!B.checkValidity()){B.reportValidity(),f(m,"Formulaire invalide. Veuillez vérifier les champs.");return}f(m,""),await pe()}async function Z(D){if(D.preventDefault(),e(q)!==e(S)){f(m,"Les mots de passe ne correspondent pas.");return}if(!R.checkValidity()){R.reportValidity(),f(m,"Formulaire invalide. Veuillez vérifier les champs.");return}f(m,""),await I()}async function Ee(D){if(D.preventDefault(),!h.checkValidity()){h.reportValidity(),f(m,"Formulaire invalide. Veuillez vérifier les champs.");return}f(m,""),await X()}async function pe(){f(v,!0);try{const{account:D}=await dt();await D.createEmailPasswordSession({email:e(g),password:e(k)}),f(d,"Connexion réussie !"),setTimeout(()=>{y()()},1e3)}catch(D){console.error("Erreur de connexion:",D),f(m,D.message||"Erreur lors de la connexion",!0)}finally{f(v,!1)}}async function I(){f(v,!0);try{const{account:D}=await dt();await D.create({userId:"unique()",email:e(C),password:e(q),name:e(T)}),await D.createEmailPasswordSession({email:e(C),password:e(q)}),f(d,"Compte créé et connecté !"),setTimeout(()=>{y()()},1e3)}catch(D){console.error("Erreur d'inscription:",D),f(m,D.message||"Erreur lors de la création du compte",!0)}finally{f(v,!1)}}async function X(){f(v,!0);try{const{account:D}=await dt();await D.createRecovery({email:e(re),url:`${window.location.origin}/#/reset-password`}),f(d,"Email de réinitialisation envoyé !"),setTimeout(()=>{f(W,!1),f(re,"")},2e3)}catch(D){console.error("Erreur mot de passe oublié:",D),f(m,D.message||"Erreur lors de l'envoi de l'email",!0)}finally{f(v,!1)}}function le(){e(v)||i(!1)}Ue(()=>{(e(b)||e(W))&&(f(m,""),f(d,""))});function ye(){return e(W)?"Mot de passe oublié":e(b)?"Connexion":"Inscription"}Va(c,{get isOpen(){return i()},onClose:le,maxWidth:"sm",children:(D,se)=>{var xe=or(),A=K(xe);{let H=be(ye);Na(A,{get title(){return e(H)},onClose:le})}var L=o(A,2);Ha(L,{children:(H,J)=>{var F=Qa(),te=a(F);{var me=N=>{var M=Ga(),w=a(M);At(w,{class:"h-6 w-6 shrink-0 stroke-current"});var j=o(w,2),oe=a(j,!0);t(j),t(M),Y(()=>de(oe,e(m))),s(N,M)};E(te,N=>{e(m)&&N(me)})}var we=o(te,2);{var ee=N=>{var M=Wa(),w=a(M);Zt(w,{class:"h-6 w-6 shrink-0 stroke-current"});var j=o(w,2),oe=a(j,!0);t(j),t(M),Y(()=>de(oe,e(d))),s(N,M)};E(we,N=>{e(d)&&N(ee)})}var V=o(we,2);{var ie=N=>{var M=Xa(),w=K(M),j=a(w),oe=a(j),u=a(oe);vt(u,{class:"h-4 w-4 opacity-50"});var l=o(u,2);Ke(l),t(oe),ae(2),t(j),ae(2),t(w),it(w,x=>h=x,()=>h);var p=o(w,2),P=a(p);P.__click=()=>f(W,!1),t(p),Y(()=>{l.disabled=e(v),P.disabled=e(v)}),lt("submit",w,Ee),Xe(l,()=>e(re),x=>f(re,x)),s(N,M)},ce=N=>{var M=_e(),w=K(M);{var j=u=>{var l=Ka(),p=K(l),P=a(p),x=a(P),ve=a(x);vt(ve,{class:"h-4 w-4 opacity-50"});var ue=o(ve,2);Ke(ue),t(x),ae(2),t(P);var Ae=o(P,2),Se=a(Ae),ke=a(Se);nt(ke,{class:"h-4 w-4 opacity-50"});var Me=o(ke,2);Ke(Me),t(Se),ae(2),t(Ae),t(p),it(p,fe=>B=fe,()=>B);var Ce=o(p,2),Ne=a(Ce);Ne.__click=()=>f(W,!0);var Ge=o(Ne,2),Ye=o(a(Ge));Ye.__click=()=>f(b,!1),t(Ge),t(Ce),Y(()=>{ue.disabled=e(v),Me.disabled=e(v),Ne.disabled=e(v),Ye.disabled=e(v)}),lt("submit",p,G),Xe(ue,()=>e(g),fe=>f(g,fe)),Xe(Me,()=>e(k),fe=>f(k,fe)),s(u,l)},oe=u=>{var l=Ja(),p=K(l),P=a(p),x=a(P),ve=a(x);ea(ve,{class:"h-4 w-4 opacity-50"});var ue=o(ve,2);Ke(ue),t(x),ae(2),t(P);var Ae=o(P,2),Se=a(Ae),ke=a(Se);vt(ke,{class:"h-4 w-4 opacity-50"});var Me=o(ke,2);Ke(Me),t(Se),ae(2),t(Ae);var Ce=o(Ae,2),Ne=a(Ce),Ge=a(Ne);nt(Ge,{class:"h-4 w-4 opacity-50"});var Ye=o(Ge,2);Ke(Ye),t(Ne),ae(2),t(Ce);var fe=o(Ce,2),Te=a(fe),Fe=a(Te);nt(Fe,{class:"h-4 w-4 opacity-50"});var Ve=o(Fe,2);Ke(Ve),t(Te),ae(2),t(fe),ae(2),t(p),it(p,Oe=>R=Oe,()=>R);var tt=o(p,2),We=o(a(tt));We.__click=()=>f(b,!0),t(tt),Y(()=>{ue.disabled=e(v),Me.disabled=e(v),Ye.disabled=e(v),Ve.disabled=e(v),We.disabled=e(v)}),lt("submit",p,Z),Xe(ue,()=>e(T),Oe=>f(T,Oe)),Xe(Me,()=>e(C),Oe=>f(C,Oe)),Xe(Ye,()=>e(q),Oe=>f(q,Oe)),Xe(Ve,()=>e(S),Oe=>f(S,Oe)),s(u,l)};E(w,u=>{e(b)?u(j):u(oe,!1)},!0)}s(N,M)};E(V,N=>{e(W)?N(ie):N(ce,!1)})}t(F),s(H,F)}});var O=o(L,2);Ua(O,{children:(H,J)=>{var F=_e(),te=K(F);{var me=ee=>{var V=er(),ie=a(V);{var ce=M=>{var w=Za();s(M,w)},N=M=>{var w=et("Envoyer l'email de réinitialisation");s(M,w)};E(ie,M=>{e(v)?M(ce):M(N,!1)})}t(V),Y(()=>V.disabled=e(v)),s(ee,V)},we=ee=>{var V=_e(),ie=K(V);{var ce=M=>{var w=ar(),j=a(w);{var oe=l=>{var p=tr();s(l,p)},u=l=>{var p=et("Se connecter");s(l,p)};E(j,l=>{e(v)?l(oe):l(u,!1)})}t(w),Y(()=>w.disabled=e(v)),s(M,w)},N=M=>{var w=sr(),j=a(w);{var oe=l=>{var p=rr();s(l,p)},u=l=>{var p=et("Créer un compte");s(l,p)};E(j,l=>{e(v)?l(oe):l(u,!1)})}t(w),Y(()=>w.disabled=e(v)),s(M,w)};E(ie,M=>{e(b)?M(ce):M(N,!1)},!0)}s(ee,V)};E(te,ee=>{e(W)?ee(me):ee(we,!1)})}s(H,F)}}),s(D,xe)},$$slots:{default:!0}}),Le()}$e(["click"]);function nr(c){return c<.5?4*c*c*c:.5*Math.pow(2*c-2,3)+1}function Vr(c){const r=c-1;return r*r*r+1}zt();var lr=_(`<div class="alert alert-warning max-md:alert-vertical mx-auto mt-4 max-w-4xl shadow-lg" role="alert"><!> <div class="flex-1"><h3 class="font-semibold">Email non vérifié</h3> <p class="text-sm opacity-90">Veuillez cliquez sur le lien envoyé sur votre email pour finaliser
        l'inscription (pensez à vérifier le dossier spam) <button class="link font-medium">Renvoyer l'email de vérification</button></p></div></div>`);function dr(c,r){Pe(r,!0);async function i(){try{const{account:m}=await U(()=>import("./appwrite.js").then(g=>g.b3),[]).then(g=>g.getAppwriteInstances()),d=await m.createEmailVerification({url:window.location.origin+"/#/verify-email"});ze.success("Email de vérification envoyé ! Vérifiez votre boîte de réception.")}catch(m){console.error("Erreur lors de l'envoi de l'email de vérification:",m),ze.error(m instanceof Error?m.message:"Impossible d'envoyer l'email de vérification")}}const y=be(()=>z.isAuthenticated&&z.user?.emailVerification===!1);var n=_e(),b=K(n);{var v=m=>{var d=lr(),g=a(d);ta(g,{class:"size-6 shrink-0 "});var k=o(g,2),T=o(a(k),2),C=o(a(T));C.__click=i,t(T),t(k),t(d),He(1,d,()=>ut,()=>({duration:300})),s(m,d)};E(b,m=>{e(y)&&m(v)})}s(c,n),Le()}$e(["click"]);var cr=_('<span class="hover:text-primary transition-colors duration-200"> </span>'),vr=_('<div class=" hover:text-primary inline-block transition-all duration-75 hover:rotate-3"> </div>'),ur=_('<button class="btn btn-outline md:btn-lg transition-all duration-300 hover:scale-110"><!> Accéder au tableau de bord</button>'),mr=_('<button class="btn btn-secondary md:btn-lg transition-all duration-300 hover:scale-110">Créer un compte pour commencer <!></button>'),_r=_('<p class="text-base-content/60 text-center">Déjà membre ? <button class="link">Connectez-vous</button> pour gérer vos cantines et équipes</p>'),pr=_('<span class="loading loading-spinner"></span>'),fr=_('<div class="absolute inset-0 bg-cover bg-center transition-opacity duration-700 ease-out"></div>'),br=_('<li class="text-base-content flex items-start gap-3"><svg class="text-primary mt-0.5 h-6 w-6 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span> </span></li>'),hr=_('<ul class="mt-8 space-y-3"></ul>'),gr=_('<div class="mt-8"></div>'),yr=_('<div class="absolute inset-0"><div class="space-y-6"><h3 class="text-base-content mt-10 text-3xl font-bold md:text-4xl"> </h3> <p class="text-base-content/70 text-lg leading-relaxed"> </p> <!> <!></div></div>'),xr=_('<div class="bg-base-300 relative h-2 w-12 flex-shrink-0 overflow-hidden rounded-full md:w-16"><div class="bg-primary/30 absolute inset-y-0 left-0 rounded-full transition-all duration-200 ease-out"></div> <div class="bg-primary absolute inset-y-0 left-0 rounded-full transition-all duration-500 ease-out"></div></div>'),wr=_('<div class="h-screen"></div>'),Er=_(`<div class="bg-base-200"><section class="hero bg-base-200 flex flex-col justify-center gap-20 md:h-[90vh] md:py-15"><div class="hero-content text-center"><div class="max-w-3xl"><div class="mb-4 flex justify-center"><img src="images/logo.svg" alt="Enka Cookbook" class="size-40 md:size-80"/></div> <h1 class="cherry-bomb-one-regular text-4xl md:text-7xl svelte-1dajxdy"></h1> <div class="text-base-content/70 mt-6 space-x-1 text-base md:text-xl"></div></div></div> <div class="flex flex-wrap items-center justify-center gap-6"><button class="btn btn-primary md:btn-lg transition-all duration-300 hover:scale-110"><!> <span class="flex items-baseline gap-2">Voir les recettes</span></button> <!></div> <!> <!> <div class="text-base-content/40 flex flex-col items-center justify-center gap-2"><div>En savoir plus</div> <button class="btn btn-circle btn-ghost mt-auto animate-bounce"><!></button></div></section> <section class=" relative"><div class="to-neutral/20 from-base-100 sticky top-0 flex min-h-screen flex-col items-center justify-center bg-linear-to-l px-4 pb-10"><button class="btn btn-lg btn-accent mb-10 w-fit"><!> Voir la démo d'événement</button> <div class="items-top grid w-full grid-cols-1 gap-12 lg:grid-cols-5 lg:gap-16"><div class="bg-base-300 relative col-span-3 hidden aspect-video overflow-hidden rounded-4xl shadow-2xl lg:block"></div> <div class="relative col-span-2 min-h-[450px]"><div class="absolute -right-2 bottom-2 flex -translate-y-1/2 items-center justify-center"><img src="images/logo.svg" alt="EC" class="size-16"/></div> <!></div></div> <div class="absolute right-0 bottom-8 left-0 flex justify-center px-4"><div class="bg-base-100/80 flex max-w-full gap-2 overflow-x-auto rounded-full px-4 py-3 shadow-lg backdrop-blur-sm md:gap-3 md:px-6 md:py-4"></div></div></div> <div class="relative -z-10"></div></section></div>`);function Rr(c,r){Pe(r,!0);function i(){z.authModal.isOpen=!0}function y(){z.authModal.showLogin=!1,z.authModal.isOpen=!0}function n(u,{duration:l=300,delay:p=0,start:P=.8}={}){return{delay:p,duration:l,easing:nr,css:x=>`
        opacity: ${x};
        transform: scale(${P+(1-P)*x});
      `}}let b=Q(!1);async function v(){try{const u=ze.loading("Chargement de la démo...");f(b,!0),je.isInitialized||await je.initializeForPublic();const l=je.events.filter(P=>P.status==="local");if(l.length===0){ze.update(u,{state:"error",message:"Aucun événement de démo disponible",autoCloseDelay:3e3});return}const p=l[0];ze.dismiss(u),ge(`/demo/event/${p.$id}`)}catch(u){console.error("[HomePage] Erreur chargement démo:",u),ze.error("Erreur lors du chargement de la démo")}}const m=[{id:"feature-1",title:"Organisation",description:"Élaborez des menus sur plusieurs jours et organisez-vous en équipes",screenshot:"/images/home/events.webp",buttonText:"Voir la démo",buttonAction:v,theme:"secondary"},{id:"feature-2",title:"Listes de courses",description:"Générez automatiquement les listes de courses de vos menus",items:["Suivez l'avancement des achats","Notez les dépenses","Répartissez vous les courses"],screenshot:"/images/home/product.webp",theme:"secondary"},{id:"feature-3",title:"Gérez le matos collectifs",description:"Maintenez un inventaires, gérer les emprunts",screenshot:"/images/home/matos.webp",theme:"secondary"},{id:"feature-4",title:"Imprimez facilement les recettes",description:"L'impression des recettes est optimisé pour un rendu noir et blanc, sans l'interface web",screenshot:"/images/home/recipe-print.webp",theme:"primary"}];let d=Q(void 0),g=Q(0),k=Q(0);z.initializeScrollDirection();const T=be(()=>z.scrollDirection==="down");function C(){if(!e(d))return;const u=e(d).getBoundingClientRect(),l=e(d).scrollHeight,p=window.innerHeight,P=-u.top,x=l-p,ve=Math.max(0,Math.min(m.length,P/x*m.length)),ue=Math.min(m.length-1,Math.max(0,Math.floor(ve+.3)));ue!==e(g)&&f(g,ue,!0),f(k,ve,!0)}Ue(()=>{Rt.current,C()});function q(u){const l=u===e(g),p=u<e(g),P=u>e(g);let x;return e(T)?x=p?-20:P?20:0:x=p?20:P?-20:0,{opacity:l?1:0,translateX:0,translateY:x,scale:l?1:.88,zIndex:l?10:0,pointerEvents:l?"auto":"none"}}function S(u,l){return l?u*150:0}var re={fadeScale:n},W=Er(),B=a(W),R=a(B),h=a(R),G=a(h),Z=o(G,2);De(Z,20,()=>"Enka Cookbook",Be,(u,l)=>{var p=cr(),P=a(p,!0);t(p),Y(()=>de(P,l)),s(u,p)}),t(Z);var Ee=o(Z,2);De(Ee,20,()=>["Outils"," de"," planification"," pour"," les"," cantines"," autogérées"],Be,(u,l)=>{var p=vr(),P=a(p,!0);t(p),Y(()=>de(P,l)),s(u,p)}),t(Ee),t(h),t(R);var pe=o(R,2),I=a(pe);I.__click=()=>ge("/recipe");var X=a(I);aa(X,{size:24}),ae(2),t(I);var le=o(I,2);{var ye=u=>{var l=ur();l.__click=()=>ge("/dashboard");var p=a(l);bt(p,{size:24}),ae(),t(l),He(1,l,()=>n,()=>({duration:400,delay:500,start:.9})),s(u,l)},D=u=>{var l=mr();l.__click=y;var p=o(a(l));bt(p,{size:24}),t(l),s(u,l)};E(le,u=>{z.isAuthenticated?u(ye):u(D,!1)})}t(pe);var se=o(pe,2);{var xe=u=>{var l=_r(),p=o(a(l));p.__click=i,ae(),t(l),s(u,l)};E(se,u=>{z.isAuthenticated||u(xe)})}var A=o(se,2);dr(A,{});var L=o(A,2),O=o(a(L),2),H=a(O);ra(H,{class:" size-8"}),t(O),t(L),t(B);var J=o(B,2),F=a(J),te=a(F);te.__click=v;var me=a(te);{var we=u=>{var l=pr();s(u,l)},ee=u=>{sa(u,{size:24})};E(me,u=>{e(b)?u(we):u(ee,!1)})}ae(),t(te);var V=o(te,2),ie=a(V);De(ie,21,()=>m,Be,(u,l,p,P)=>{const x=be(()=>q(p)),ve=be(()=>(e(k)-p)*50);var ue=fr();Y(()=>qe(ue,`opacity: ${e(x).opacity??""}; z-index: ${e(x).zIndex??""}; background-image: url('${e(l).screenshot??""}'); background-position-y: calc(${e(ve)*-10}px);`)),s(u,ue)}),t(ie);var ce=o(ie,2),N=a(ce),M=o(N,2);De(M,17,()=>m,Be,(u,l,p)=>{const P=be(()=>q(p)),x=be(()=>p===e(g));var ve=yr(),ue=a(ve),Ae=a(ue),Se=a(Ae,!0);t(Ae);var ke=o(Ae,2),Me=a(ke,!0);t(ke);var Ce=o(ke,2);{var Ne=fe=>{var Te=hr();De(Te,21,()=>e(l).items,Be,(Fe,Ve,tt)=>{var We=br(),Oe=o(a(We),2),It=a(Oe,!0);t(Oe),t(We),Y((Pt,Lt)=>{qe(We,`
                            opacity: ${e(x)?1:0};
                            transform: translateX(${e(x)?0:-10}px);
                            transition: opacity 400ms ease-out ${Pt??""}ms,
                                        transform 400ms ease-out ${Lt??""}ms;
                          `),de(It,e(Ve))},[()=>S(3,e(x))+tt*50,()=>S(3,e(x))+tt*50]),s(Fe,We)}),t(Te),Y((Fe,Ve)=>qe(Te,`
                        opacity: ${e(x)?1:0};
                        transform: translateY(${e(x)?0:15}px);
                        transition: opacity 500ms ease-out ${Fe??""}ms,
                                    transform 500ms ease-out ${Ve??""}ms;
                      `),[()=>S(2,e(x)),()=>S(2,e(x))]),s(fe,Te)};E(Ce,fe=>{e(l).items&&fe(Ne)})}var Ge=o(Ce,2);{var Ye=fe=>{var Te=gr();Y((Fe,Ve)=>qe(Te,`
                        opacity: ${e(x)?1:0};
                        transform: translateY(${e(x)?0:15}px) scale(${e(x)?1:.95});
                        transition: opacity 500ms ease-out ${Fe??""}ms,
                                    transform 500ms ease-out ${Ve??""}ms;
                      `),[()=>S(e(l).items?4:3,e(x)),()=>S(e(l).items?4:3,e(x))]),s(fe,Te)};E(Ge,fe=>{e(l).buttonText&&e(l).buttonAction&&fe(Ye)})}t(ue),t(ve),Y((fe,Te,Fe,Ve)=>{qe(ve,`
                  opacity: ${e(P).opacity??""};
                  transform: translateX(${e(P).translateX??""}px) translateY(${e(P).translateY??""}px) scale(${e(P).scale??""});
                  z-index: ${e(P).zIndex??""};
                  pointer-events: ${e(P).pointerEvents??""};
                  transition: opacity 600ms ease-out, transform 600ms ease-out;
                `),qe(Ae,`
                      opacity: ${e(x)?1:0};
                      transform:  translateX(${e(x)?0:55}px);
                      transition: opacity 500ms ease-out ${fe??""}ms,
                                  transform 500ms ease-out ${Te??""}ms;
                    `),de(Se,e(l).title),qe(ke,`
                      opacity: ${e(x)?1:0};
                      transform: translateX(${e(x)?0:35}px);
                      transition: opacity 500ms ease-out ${Fe??""}ms,
                                  transform 500ms ease-out ${Ve??""}ms;
                    `),de(Me,e(l).description)},[()=>S(0,e(x)),()=>S(0,e(x)),()=>S(1,e(x)),()=>S(1,e(x))]),s(u,ve)}),t(ce),t(V);var w=o(V,2),j=a(w);De(j,21,()=>m,Be,(u,l,p)=>{var P=xr(),x=a(P),ve=o(x,2);t(P),Y(ue=>{qe(x,`width: ${ue??""}%`),qe(ve,`width: ${e(g)===p?100:0}%`)},[()=>Math.max(0,Math.min(1,e(k)-p))*100]),s(u,P)}),t(j),t(w),t(F);var oe=o(F,2);return De(oe,21,()=>m,Be,(u,l)=>{var p=wr();s(u,p)}),t(oe),t(J),it(J,u=>f(d,u),()=>e(d)),t(W),Y(()=>qe(N,`transform: rotate(${e(k)*180}deg); transition: none;`)),He(1,G,()=>ut,()=>({duration:800})),He(1,Z,()=>wt,()=>({y:30,duration:600,delay:100})),He(1,Ee,()=>wt,()=>({y:20,duration:800,delay:200})),He(1,I,()=>n,()=>({duration:400,delay:450,start:.9})),He(1,pe,()=>n,()=>({duration:400,delay:400,start:.9})),s(c,W),Le(re)}$e(["click"]);var Ar=_(`<div class="flex min-h-[60vh] flex-col items-center justify-center gap-6 px-4"><div class="flex flex-col items-center gap-4 text-center"><div class="text-error flex items-center gap-3"><!> <h1 class="text-6xl font-bold">404</h1></div> <h2 class="text-2xl font-semibold">Page non trouvée</h2> <p class="text-base-content/70 max-w-md">Désolé, la page que vous cherchez n'existe pas ou a été déplacée.</p></div> <button class="btn btn-primary btn-lg gap-2"><!> Retour à l'accueil</button></div>`);function kr(c,r){Pe(r,!1),Mt();var i=Ar(),y=a(i),n=a(y),b=a(n);oa(b,{class:"size-12"}),ae(2),t(n),ae(4),t(y);var v=o(y,2);v.__click=()=>ge("/");var m=a(v);ia(m,{class:"size-5"}),ae(),t(v),t(i),s(c,i),Le()}$e(["click"]);var Cr=_('<div class="flex h-[50vh] items-center justify-center"><!></div>'),Ir=_('<div class="flex h-[80vh] flex-col items-center justify-center gap-4"><div class="loading loading-spinner loading-lg text-primary"></div> <p class="text-base-content/70 animate-pulse font-medium"><!></p></div>'),Pr=_("<!> <!>",1),Lr=_('<link rel="preconnect" href="https://fonts.googleapis.com"/> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/> <link href="https://fonts.googleapis.com/css2?family=Cherry+Bomb+One&amp;family=Fredoka:wght@300..700&amp;display=swap&amp;family=Sora:wght@100..800&amp;display=swap" rel="stylesheet"/> <!> <div class="bg-base-200 min-h-screen"><!></div> <!> <!> <!> <!>',1);function Tr(c,r){Pe(r,!0);let i=Q("BOOTING"),y=Q(null);const n={beforeEnter:async()=>z.isAuthenticated?!0:(console.log("[Router] Accès refusé > Redirection /"),ge("/"),!1)},b={beforeEnter:async I=>{const X=I.params.id;if(!X)return console.log("[Router] EventId manquant > Redirection /"),ge("/"),!1;let le=0;const ye=30;for(;le<ye;){const D=je.getEventById(X);if(D)return D.status!=="local"?(console.log("[Router] Event non local > Redirection /"),ge("/"),!1):(console.log("[Router] Event local validé"),!0);await new Promise(se=>setTimeout(se,100)),le++}return console.log("[Router] Event introuvable après timeout > Redirection /"),ge("/"),!1}};$.addRoute("/",Rr),$.addRoute("/verify-email",()=>U(()=>import("./VerifyEmailPage.js"),__vite__mapDeps([0,1,2]))),$.addRoute("/recipe",()=>U(()=>import("./RecipesListPage.js"),__vite__mapDeps([3,2,1,4,5,6,7,8,9,10,11]))),$.addRoute("/recipe/my",()=>U(()=>import("./RecipesListPage.js"),__vite__mapDeps([3,2,1,4,5,6,7,8,9,10,11])),n),$.addRoute("/recipe/my/draft",()=>U(()=>import("./RecipesListPage.js"),__vite__mapDeps([3,2,1,4,5,6,7,8,9,10,11])),n),$.addRoute("/recipe/new",()=>U(()=>import("./RecipeCreatePage.js"),__vite__mapDeps([12,2,1,11,13,14,15,4,16,8,17,18])),n),$.addRoute("/recipe/:uuid/edit",()=>U(()=>import("./RecipeEditPage.js"),__vite__mapDeps([19,2,1,11,13,14,15,4,16,8,17,5,6,20,18,21])),n),$.addRoute("/recipe/:uuid/duplicate",()=>U(()=>import("./RecipeCreatePage.js"),__vite__mapDeps([12,2,1,11,13,14,15,4,16,8,17,18])),n),$.addRoute("/recipe/:uuid",()=>U(()=>import("./RecipeDetailPage.js"),__vite__mapDeps([22,2,1,9,23,14,4,24,25,21]))),$.addRoute("/accept-invite",()=>U(()=>import("./AcceptInvite.js"),__vite__mapDeps([26,2,1]))),$.addRoute("/reset-password",()=>U(()=>import("./ResetPassword.js"),__vite__mapDeps([27,2,1,28]))),$.addRoute("/dashboard",()=>U(()=>import("./DashboardPage.js"),__vite__mapDeps([29,2,1,30,31,20,32,33,14,34,35])),n),$.addRoute("/dashboard/teams",()=>U(()=>import("./TeamsManagement.js"),__vite__mapDeps([36,2,1,31,20,32])),n),$.addRoute("/dashboard/eventCreate",()=>U(()=>import("./EventCreatePage.js"),__vite__mapDeps([37,2,1,38,6,20,14,30,4])),n),$.addRoute("/dashboard/eventEdit/:id",()=>U(()=>import("./EventEditPage.js"),__vite__mapDeps([39,2,1,38,6,20,14,30,4,40,34,41,8,16,18])),n),$.addRoute("/dashboard/eventEdit/recipes/:id",()=>U(()=>import("./EventRecipesPage.js"),__vite__mapDeps([42,2,1,34,41,30,23,14,4,24,25,9,10,5,6,43])),n),$.addRoute("/dashboard/eventEdit/products/:id",()=>U(()=>import("./EventProductsPage.js"),__vite__mapDeps([44,2,1,30,16,8,32,14,4,41,34,40,10,45])),n),$.addRoute("/dashboard/eventEdit/posters/:id",()=>U(()=>import("./EventPosterPage.js"),__vite__mapDeps([46,2,1,40,4,20,10,47])),n),$.addRoute("/dashboard/materiel",()=>U(()=>import("./MaterielPage.js"),__vite__mapDeps([48,2,1,30,8,7,4,10])),n),$.addRoute("/dashboard/materiel/:teamId",()=>U(()=>import("./MaterielPage.js"),__vite__mapDeps([48,2,1,30,8,7,4,10])),n),$.addRoute("/dashboard/loans",()=>U(()=>import("./LoansPage.js"),__vite__mapDeps([49,2,1,5,6,16,8,30])),n),$.addRoute("/dashboard/loans/:teamId",()=>U(()=>import("./LoansPage.js"),__vite__mapDeps([49,2,1,5,6,16,8,30])),n),$.addRoute("/dashboard/loans/return/:loanId",()=>U(()=>import("./LoanReturnPage.js"),__vite__mapDeps([50,2,1,30])),n),$.addRoute("/eventList",()=>U(()=>import("./EventListPage.js"),__vite__mapDeps([51,2,1,33,14,34])),n),$.addRoute("/createdocument/:teamId/new",()=>U(()=>import("./CreateDocumentPage.js"),__vite__mapDeps([52,2,1,53,15,54,16,8,55])),n),$.addRoute("/editdocument/:teamId/:docId",()=>U(()=>import("./EditDocumentPage.js"),__vite__mapDeps([56,2,1,53,15,54,16,8,18,24,25,57])),n),$.addRoute("/documents/:teamId",()=>U(()=>import("./DocumentListPage.js"),__vite__mapDeps([58,2,1,35,30,10,4,8])),n),$.addRoute("/demo/event/:id",()=>U(()=>import("./EventEditPage.js"),__vite__mapDeps([39,2,1,38,6,20,14,30,4,40,34,41,8,16,18])),b),$.addRoute("/demo/event/recipes/:id",()=>U(()=>import("./EventRecipesPage.js"),__vite__mapDeps([42,2,1,34,41,30,23,14,4,24,25,9,10,5,6,43])),b),$.addRoute("/demo/event/products/:id",()=>U(()=>import("./EventProductsPage.js"),__vite__mapDeps([44,2,1,30,16,8,32,14,4,41,34,40,10,45])),b),$.addRoute("/demo/event/posters/:id",()=>U(()=>import("./EventPosterPage.js"),__vite__mapDeps([46,2,1,40,4,20,10,47])),b),$.addRoute(/.*/,kr);let v=Q(null);async function m(){try{if(f(i,"BOOTING"),await z.initializeAuth(),z.isAuthenticated){f(i,"LOADING_PRIVATE_CACHE");const I=ze.loading("Chargement des données...");await Promise.all([je.loadCache(),Je.loadCache(),rt.loadCache(),st.loadCache()]),f(i,"READY_WITH_CACHE"),ze.update(I,{state:"loading",message:"Mise à jour des données en cours..."}),Promise.all([je.syncFromRemote(),Je.syncFromRemote(),rt.syncFromRemote(),at.syncFromRemote(),st.syncFromRemote()]).then(async()=>{await Promise.all([je.setupRealtime(),Je.setupRealtime(),rt.setupRealtime(),at.setupRealtime(),pt.initialize(),st.setupRealtime()]),await ot.initialize(),f(i,"READY_FULLY_SYNCED"),ze.dismiss(I),setTimeout(()=>{ct("/dashboard"),ct("/recipe")},3e3)}).catch(X=>{console.error("[App] Erreur synchro distante:",X),ze.update(I,{state:"warning",message:"Mode hors ligne : données mises en cache",autoCloseDelay:5e3}),ot.initialize().catch(console.error)})}else f(i,"LOADING_PUBLIC_CACHE"),await Je.loadCache(),f(i,"READY_WITH_CACHE"),Promise.all([Je.syncFromRemotePublicOnly(),ot.initialize()]).then(()=>{f(i,"READY_FULLY_SYNCED"),setTimeout(()=>{ct("/recipe")},2e3)}).catch(I=>{console.error("[App] Erreur synchro recettes:",I)})}catch(I){console.error("[App] Erreur fatale d'initialisation:",I),f(y,I.message||"Erreur critique de chargement",!0),f(i,"ERROR")}}let d=Q("");Ue(()=>{const I=$.path,X=e(i);(X==="READY_WITH_CACHE"||X==="READY_FULLY_SYNCED"||X==="READY")&&$.match().then(async le=>{f(v,le,!0),I!==e(d)&&(f(d,I,!0),await St(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"smooth"})})}))})});let g=Q(!1),k=Q(!1);Ue(()=>{const I=z.isAuthenticated;e(k)||e(i)!=="BOOTING"&&e(i)!=="LOADING_PRIVATE_CACHE"&&e(i)!=="LOADING_PUBLIC_CACHE"&&I!==e(g)&&(f(g,I,!0),console.log("[App] Changement d'état Auth détecté -> Rechargement"),f(k,!0),m().finally(()=>{f(k,!1)}))}),Vt(()=>{m()}),$t(()=>{console.log("[App] Destruction de l'application - Nettoyage des stores..."),pt.destroy(),at.destroy(),je.destroy(),Je.destroy(),rt.destroy(),st.destroy(),ot.destroy()});let T=be(()=>e(y)||qt.error);async function C(){z.authModal.isOpen=!1,await z.refreshAuthAfterLogin()}var q=Lr(),S=o(K(q),6);wa(S,{});var re=o(S,2),W=a(re);{var B=I=>{const X=be(()=>e(v).component);var le=_e(),ye=K(le);Ft(ye,()=>e(X),(D,se)=>{se(D,{get params(){return e(v).params},get query(){return e(v).query}})}),s(I,le)},R=I=>{var X=_e(),le=K(X);{var ye=se=>{var xe=Cr(),A=a(xe);{let L=be(()=>e(T)||"Erreur inconnue");ht(A,{get message(){return e(L)}})}t(xe),s(se,xe)},D=se=>{var xe=Ir(),A=o(a(xe),2),L=a(A);{var O=J=>{var F=et("Démarrage...");s(J,F)},H=J=>{var F=_e(),te=K(F);{var me=ee=>{var V=et("Chargement des données en cache...");s(ee,V)},we=ee=>{var V=_e(),ie=K(V);{var ce=N=>{var M=et("Préparation de la cuisine...");s(N,M)};E(ie,N=>{e(i)==="LOADING_PUBLIC_CACHE"&&N(ce)},!0)}s(ee,V)};E(te,ee=>{e(i)==="LOADING_PRIVATE_CACHE"?ee(me):ee(we,!1)},!0)}s(J,F)};E(L,J=>{e(i)==="BOOTING"?J(O):J(H,!1)})}t(A),t(xe),s(se,xe)};E(le,se=>{e(i)==="ERROR"?se(ye):se(D,!1)},!0)}s(I,X)};E(W,I=>{(e(i)==="READY_WITH_CACHE"||e(i)==="READY_FULLY_SYNCED"||e(i)==="READY")&&e(v)?I(B):I(R,!1)})}t(re);var h=o(re,2);Ia(h,{});var G=o(h,2);Ta(G,{});var Z=o(G,2);{var Ee=I=>{var X=Pr(),le=K(X);{var ye=se=>{ht(se,{get message(){return e(T)}})};E(le,se=>{e(T)&&se(ye)})}var D=o(le,2);Oa(D,{}),s(I,X)};E(Z,I=>{z.isAuthenticated&&e(i)==="READY"&&I(Ee)})}var pe=o(Z,2);ir(pe,{get showLogin(){return z.authModal.showLogin},onAuth_success:C,get isOpen(){return z.authModal.isOpen},set isOpen(I){z.authModal.isOpen=I}}),s(c,q),Le()}Bt(Tr,{target:document.getElementById("app")});export{dr as E,Va as M,Na as a,Ha as b,Ua as c,Vr as d,ut as f,ne as n,Mr as s};
