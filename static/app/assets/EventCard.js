import{B as ut,d as xt,p as K,v as b,E as m,h as a,o as s,g as n,K as u,G as x,w as g,C as H,M as gt,x as o,P as ft,b as _,c as ht,k as A,j as kt}from"./appwrite.js";import{f as R}from"./products-display.js";import{g as pt,a as wt,b as yt}from"./event-stats-helpers.js";import{s as Ct}from"./index.js";import{k as zt,a as St,ax as Et,aa as Pt,J as Dt,ay as jt,az as At,m as Rt,t as L,aA as qt,U as N}from"./icons.js";var Mt=b("<!> ",1),Tt=b("<!> ",1),Ut=b('<div class="badge badge-info badge-lg ms-auto h-auto"><!> Vous êtes invité à participer</div>'),Vt=b('<div class="text-primary flex items-center gap-1 font-semibold"><!> <span> </span></div>'),Bt=b('<div class="text-base-content/90 flex items-center gap-1"><!> <span> </span> <span> </span></div>'),Ft=b('<div role="button" tabindex="0"><div class="min-w-0 flex-1 space-y-4"><div class="flex flex-wrap items-center gap-4"><div class="text-primary truncate text-lg font-semibold"> </div> <div class="badge badge-lg h-auto font-medium"><!></div> <div> </div> <!></div> <div class="text-base-content/70 mt-2 flex flex-wrap items-center gap-3 text-sm"><!> <!> <div class="flex items-center gap-1"><!> <span> </span></div> <div class="flex items-center gap-1"><!> <span> </span></div> <div class="flex items-center gap-1"><!> <span> </span></div></div> <div class="mt-6 flex flex-wrap justify-end gap-2"><button class="btn btn-outline btn-secondary @max-sm:btn-xs btn-sm"><!> Éditer</button> <button class="btn btn-outline btn-secondary @max-sm:btn-xs btn-sm"><!> Recettes</button> <button class="btn btn-outline btn-secondary @max-sm:btn-xs btn-sm"><!> Produits</button> <button class="btn btn-outline btn-secondary @max-sm:btn-xs btn-sm"><!> Affiches</button></div></div> <!></div>');function Lt(O,t){xt(t,!0);let Q=K(t,"cardClass",3,""),W=K(t,"contributorStatus",3,null);var c=Ft();c.__click=()=>m(`/event/${t.event.$id}`),c.__keydown=e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),m(`/event/${t.event.$id}`))};var y=a(c),C=a(y),z=a(C),X=a(z,!0);s(z);var S=n(z,2),Y=a(S);{var Z=e=>{var i=Mt(),v=A(i);L(v,{class:"h-4 w-4"});var r=n(v);g((d,l)=>o(r,` ${d??""} au ${l??""}`),[()=>R(t.event.dateStart),()=>R(t.event.dateEnd)]),_(e,i)},$=e=>{var i=kt(),v=A(i);{var r=d=>{var l=Tt(),w=A(l);L(w,{class:"h-4 w-4"});var mt=n(w);g(bt=>o(mt,` ${bt??""}`),[()=>R(t.event.dateStart)]),_(d,l)};u(v,d=>{t.event.dateStart&&d(r)},!0)}_(e,i)};u(Y,e=>{t.event.allDates&&t.event.allDates.length>1&&t.event.dateStart&&t.event.dateEnd?e(Z):e($,!1)})}s(S);var f=n(S,2),tt=a(f,!0);s(f);var et=n(f,2);{var at=e=>{var i=Ut(),v=a(i);qt(v,{class:"size-4"}),x(),s(i),_(e,i)};u(et,e=>{W()==="invited"&&e(at)})}s(C);var E=n(C,2),q=a(E);{var st=e=>{var i=Vt(),v=a(i);N(v,{class:"h-3 w-3 stroke-3"});var r=n(v,2),d=a(r,!0);s(r),s(i),g(l=>o(d,l),[()=>t.event.teams.join(", ")]),_(e,i)};u(q,e=>{t.event.teams&&t.event.teams.length>0&&e(st)})}var M=n(q,2);{var nt=e=>{var i=Bt(),v=a(i);N(v,{class:"h-3 w-3"});var r=n(v,2),d=a(r);s(r);var l=n(r,2),w=a(l);s(l),s(i),g(()=>{o(d,`${t.event.contributors.length??""} participant${t.event.contributors.length>1?"s":""}`),o(w,`(${t.event.minContrib??""} requis)`)}),_(e,i)};u(M,e=>{t.event.contributors&&t.event.contributors.length>0&&e(nt)})}var P=n(M,2),T=a(P);zt(T,{class:"h-3 w-3"});var U=n(T,2),it=a(U);s(U),s(P);var D=n(P,2),V=a(D);St(V,{class:"h-3 w-3"});var B=n(V,2),vt=a(B);s(B),s(D);var F=n(D,2),G=a(F);Et(G,{class:"h-3 w-3"});var I=n(G,2),rt=a(I);s(I),s(F),s(E);var J=n(E,2),h=a(J);h.__click=e=>{e.stopPropagation(),m(`/event/${t.event.$id}`)};var ot=a(h);Pt(ot,{class:"size-4 @max-xs:size-3"}),x(),s(h);var k=n(h,2);k.__click=e=>{e.stopPropagation(),m(`/event/${t.event.$id}/recipes`)};var dt=a(k);Dt(dt,{class:"size-4 @max-xs:size-3"}),x(),s(k);var p=n(k,2);p.__click=e=>{e.stopPropagation(),m(`/event/${t.event.$id}/products`)};var lt=a(p);jt(lt,{class:"size-4 @max-xs:size-3"}),x(),s(p);var j=n(p,2);j.__click=e=>{e.stopPropagation(),m(`/event/${t.event.$id}/posters`)};var ct=a(j);At(ct,{class:"size-4 @max-xs:size-3"}),x(),s(j),s(J),s(y);var _t=n(y,2);Rt(_t,{class:"mt-1 h-4 w-4 shrink-0 opacity-40"}),s(c),g((e,i,v)=>{H(c,1,`bg-base-200/60 hover:bg-base-200 flex cursor-pointer items-start gap-3 rounded-lg p-3 transition-colors ${Q()??""} @container`),gt(c,"title",`Voir les détails de ${t.event.name??""}`),o(X,t.event.name),H(f,1,`badge badge-outline badge-sm font-medium ${t.event.status==="proposition"?"badge-accent":"badge-success"}`),o(tt,t.event.status==="proposition"?"proposition":"confirmé"),o(it,`${e??""} repas`),o(vt,`${i??""} recettes`),o(rt,`${v??""} tâches`)},[()=>pt(t.event),()=>wt(t.event),()=>yt(t.event)]),ft(3,c,()=>Ct),_(O,c),ht()}ut(["click","keydown"]);export{Lt as E};
