import{S as ae}from"./icons.js";import{d as le,p as i,v as h,h as w,g as d,aE as se,I as p,w as T,Q as C,R as re,b,c as ie,m as t,u as E,A as n,y as B,B as oe,C as O,L as U,e as ne,x as ue,U as de,o as u}from"./appwrite.js";import{k as ce}from"./keyboardNavigation.svelte.js";var fe=h('<div class="loading loading-spinner loading-xs"></div>'),ve=h('<li><button><span class="block truncate"> </span></button></li>'),be=h('<div class="absolute z-10 mt-1 w-full"><ul class="rounded-box bg-base-100 border-base-300 max-h-60 overflow-y-auto border shadow-lg"></ul></div>'),he=h('<div class="rounded-box bg-base-100 border-base-300 text-base-content/60 absolute z-10 mt-1 w-full border p-4 text-center text-sm shadow-lg">Aucun résultat trouvé</div>'),ge=h('<div class="relative"><label><!> <input type="text" class="grow"/> <!></label> <!> <!></div>');function xe(K,a){le(a,!0);let c=i(a,"value",15,""),N=i(a,"placeholder",3,"Rechercher..."),x=i(a,"itemToString",3,e=>String(e)),A=i(a,"disabled",3,!1),j=i(a,"autoFocus",3,!1),F=i(a,"loading",3,!1),I=i(a,"minQueryLength",3,1),g=i(a,"maxResults",3,void 0),q=i(a,"showAllOnFocus",3,!0),G=i(a,"inputSize",3,""),l=B(-1),f=B(!1),o=E(()=>{if(t(f)&&c().trim().length===0&&q())return g()?a.items.slice(0,g()):a.items;const e=c().toLowerCase().trim();if(e.length<I())return[];const r=a.items.filter(_=>x()(_).toLowerCase().includes(e));return g()?r.slice(0,g()):r}),H=E(()=>t(f)&&t(o).length>0);function L(e){a.onSelect?.(e),c(""),n(l,-1)}function J(e){t(o).length&&(e.key==="ArrowDown"?(e.preventDefault(),n(l,(t(l)+1)%t(o).length)):e.key==="ArrowUp"?(e.preventDefault(),n(l,t(l)<=0?t(o).length-1:t(l)-1,!0)):(e.key==="Enter"||e.key==="Tab")&&t(l)>=0&&t(l)<t(o).length?(e.preventDefault(),L(t(o)[t(l)])):e.key==="Escape"&&n(l,-1))}function M(){n(f,!0),t(o).length>0&&t(l)===-1&&n(l,0)}function P(){setTimeout(()=>{n(f,!1),n(l,-1)},150)}var y=ge(),m=d(y),R=d(m);ae(R,{class:"h-4 w-4 opacity-50"});var s=w(R,2);de(s),s.__keydown=J,se(s,()=>ce({shouldFocus:j()}));var V=w(s,2);{var W=e=>{var r=fe();b(e,r)};p(V,e=>{F()&&e(W)})}u(m);var z=w(m,2);{var X=e=>{var r=be(),_=d(r);ne(_,23,()=>t(o),k=>x()(k),(k,D,$)=>{var S=ve(),v=d(S);v.__click=()=>L(t(D));var Q=d(v),ee=d(Q,!0);u(Q),u(v),u(S),T(te=>{O(v,1,`hover:bg-base-200 focus:bg-base-200 w-full px-3 py-2 text-left text-sm ${t($)===t(l)&&"bg-base-200"}`),v.disabled=A(),ue(ee,te)},[()=>x()(t(D))]),b(k,S)}),u(_),u(r),b(e,r)};p(z,e=>{t(H)&&e(X)})}var Y=w(z,2);{var Z=e=>{var r=he();b(e,r)};p(Y,e=>{t(f)&&c().length>=I()&&t(o).length===0&&!F()&&e(Z)})}u(y),T(()=>{O(m,1,`input w-full ${G()??""}`),U(s,"id",a.id),U(s,"placeholder",N()),s.disabled=A()}),C("focus",s,M),C("blur",s,P),re(s,c),b(K,y),ie()}oe(["keydown","click"]);export{xe as A};
