import{d as ae,p as i,v as h,g as w,h as d,aI as le,K as p,m as t,u as C,y as Q,w as B,C as E,M as K,S as O,T as se,b,c as re,A as n,e as ie,B as oe,x as ne,W as ue,o as u}from"./appwrite.js";import{k as de}from"./keyboardNavigation.svelte.js";import{S as ce}from"./icons.js";var fe=h('<div class="loading loading-spinner loading-xs"></div>'),ve=h('<li><button><span class="block truncate"> </span></button></li>'),be=h('<div class="absolute z-10 mt-1 w-full"><ul class="rounded-box bg-base-100 border-base-300 max-h-60 overflow-y-auto border shadow-lg"></ul></div>'),he=h('<div class="rounded-box bg-base-100 border-base-300 text-base-content/60 absolute z-10 mt-1 w-full border p-4 text-center text-sm shadow-lg">Aucun résultat trouvé</div>'),ge=h('<div class="relative"><label><!> <input type="text" class="grow"/> <!></label> <!> <!></div>');function xe(M,a){ae(a,!0);let c=i(a,"value",15,""),N=i(a,"placeholder",3,"Rechercher..."),x=i(a,"itemToString",3,e=>String(e)),A=i(a,"disabled",3,!1),U=i(a,"autoFocus",3,!1),F=i(a,"loading",3,!1),I=i(a,"minQueryLength",3,1),g=i(a,"maxResults",3,void 0),W=i(a,"showAllOnFocus",3,!0),j=i(a,"inputSize",3,""),l=Q(-1),f=Q(!1),o=C(()=>{if(t(f)&&c().trim().length===0&&W())return g()?a.items.slice(0,g()):a.items;const e=c().toLowerCase().trim();if(e.length<I())return[];const r=a.items.filter(_=>x()(_).toLowerCase().includes(e));return g()?r.slice(0,g()):r}),q=C(()=>t(f)&&t(o).length>0);function T(e){a.onSelect?.(e),c(""),n(l,-1)}function G(e){t(o).length&&(e.key==="ArrowDown"?(e.preventDefault(),n(l,(t(l)+1)%t(o).length)):e.key==="ArrowUp"?(e.preventDefault(),n(l,t(l)<=0?t(o).length-1:t(l)-1,!0)):(e.key==="Enter"||e.key==="Tab")&&t(l)>=0&&t(l)<t(o).length?(e.preventDefault(),T(t(o)[t(l)])):e.key==="Escape"&&n(l,-1))}function H(){n(f,!0),t(o).length>0&&t(l)===-1&&n(l,0)}function J(){setTimeout(()=>{n(f,!1),n(l,-1)},150)}var y=ge(),m=d(y),z=d(m);ce(z,{class:"h-4 w-4 opacity-50"});var s=w(z,2);ue(s),s.__keydown=G,le(s,()=>de({shouldFocus:U()}));var P=w(s,2);{var V=e=>{var r=fe();b(e,r)};p(P,e=>{F()&&e(V)})}u(m);var D=w(m,2);{var X=e=>{var r=be(),_=d(r);ie(_,23,()=>t(o),k=>x()(k),(k,L,$)=>{var S=ve(),v=d(S);v.__click=()=>T(t(L));var R=d(v),ee=d(R,!0);u(R),u(v),u(S),B(te=>{E(v,1,`hover:bg-base-200 focus:bg-base-200 w-full px-3 py-2 text-left text-sm ${t($)===t(l)&&"bg-base-200"}`),v.disabled=A(),ne(ee,te)},[()=>x()(t(L))]),b(k,S)}),u(_),u(r),b(e,r)};p(D,e=>{t(q)&&e(X)})}var Y=w(D,2);{var Z=e=>{var r=he();b(e,r)};p(Y,e=>{t(f)&&c().length>=I()&&t(o).length===0&&!F()&&e(Z)})}u(y),B(()=>{E(m,1,`input w-full ${j()??""}`),K(s,"id",a.id),K(s,"placeholder",N()),s.disabled=A()}),O("focus",s,H),O("blur",s,J),se(s,c),b(M,y),re()}oe(["keydown","click"]);export{xe as A};
