import{d as kt,p as Dt,a8 as St,v as l,h as a,o as t,g as s,K as u,m as e,u as p,w as I,M as rt,x as m,b as i,c as Et,C as We,e as te,y as ie,z as pt,X as Mt,A as n,at as jt,au as It,J as gt,_ as ot,Y as Ut,k as P,I as Ct,P as Pt,D as Ft,N as zt,i as ct,j as me,B as Bt,G as ut,t as bt}from"./appwrite.js";import{a as Lt}from"./event-stats-helpers.js";import{E as Tt}from"./EventStats.js";import{c as Gt,e as Ht,b as Xe,g as mt}from"./date-helpers.js";import{R as Jt,a as Nt}from"./RecipePreparation.js";import{R as Ot}from"./RecipeRegimeBadges.js";import{U as Kt,t as _t,X as Wt,E as ft,y as Xt,w as qt,a7 as ht,a as xt}from"./icons.js";import{L as Qt}from"./LeftPanel.js";import{A as Yt}from"./AutocompleteInput.js";import{f as Ke}from"./products-display.js";import{n as yt,f as Vt}from"./index.js";import"./Fieldset.js";import"./SvelteMarkdown.js";import"./legacy.js";import"./keyboardNavigation.svelte.js";var Zt=l("<span> </span>"),$t=l('<div class="text-base-content/80 flex items-center gap-2 text-base font-bold"><!> <span> </span> <!></div>'),ea=l("<div> </div>"),ta=l('<span class="badge badge-error badge-sm badge-soft">Servir Chaud</span>'),aa=l('<span class="badge badge-info badge-sm badge-soft">Servir Froid</span>'),ra=l('<span class="badge badge-warning badge-sm badge-soft">Avec Cuisson</span>'),sa=l('<span class="badge badge-success badge-sm badge-soft">Sans Cuisson</span>'),ia=l('<span class="badge badge-ghost badge-sm"> </span>'),na=l('<div class="flex flex-wrap gap-1"></div>'),va=l('<div class="card bg-base-100 border-base-300 print-break-auto border shadow-lg print:border-none print:shadow-none"><div class="card-body p-2 md:p-6 svelte-1xi0ayb"><div class="border-base-300 mb-4 border-b pb-4"><div class="flex flex-wrap items-baseline justify-between gap-4 print:gap-1"><div class="flex min-w-2/3 flex-1 gap-2"><svg class="size-6"><use></use></svg> <div class="text-xl font-bold"> </div></div> <div class="ms-auto flex flex-wrap items-center justify-end gap-4"><!> <!> <div class="flex-shrink-0"><!></div></div></div> <div class="border-base-300 flex flex-wrap items-center gap-4 pt-4 print:gap-2 print:pt-0"><div class="text-base-content/80 flex items-center gap-2 py-2 text-lg"><!> <span> </span></div> <div class="flex flex-wrap gap-1"><!> <!></div> <!></div></div> <div class=" gap-6 md:flex print:flex"><div class="w-full space-y-4 md:w-1/3 print:w-2/6"><!></div> <div class="flex-1 space-y-4 print:w-4/6"><!></div></div></div></div>');function wt(Pe,o){kt(o,!0),Dt(o,"totalGuests",3,0);const N=p(()=>o.meal?.date?Ht(o.meal.date):null),O=p(()=>o.meal?.date?Xe(o.meal.date):null),ne=p(()=>{if(!e(O))return"";switch(e(O)){case"matin":return"Matin";case"midi":return"Midi";case"soir":return"Soir";default:return""}}),ve=p(()=>o.mealRecipe?.typeR?o.mealRecipe.typeR:o.recipe.typeR),ae=p(()=>o.mealRecipe?.plates||o.recipe.plate);function re(r){return r===1?"1 couvert":`${r} couverts`}function ke(r){switch(r){case"entree":return"Entr√©e";case"plat":return"Plat";case"dessert":return"Dessert";case"autre":return"Autre";default:return r}}function A(r){return r==="entree"?"bg-lime-100 border-lime-200":r==="plat"?"bg-orange-100 border-orange-200":r==="dessert"?"bg-pink-100 border-pink-200":r==="autre"?"bg-purple-100 border-purple-200":"bg-base-200"}const Fe=p(()=>e(N)?Gt(e(N)):""),qe=St(o.recipe.typeR,o.recipe.categories||void 0);var Ee=va(),w=a(Ee),k=a(w),S=a(k),he=a(S),Re=a(he),st=a(Re);t(Re);var ze=s(Re,2),Ae=a(ze,!0);t(ze),t(he);var Be=s(he,2),Le=a(Be);{var Qe=r=>{var f=$t(),B=a(f);_t(B,{class:"h-4 w-4"});var T=s(B,2),U=a(T,!0);t(T);var ue=s(T,2);{var ye=fe=>{var le=Zt(),Me=a(le,!0);t(le),I(()=>m(Me,e(ne))),i(fe,le)};u(ue,fe=>{e(ne)&&fe(ye)})}t(f),I(()=>m(U,e(Fe))),i(r,f)};u(Le,r=>{e(Fe)&&r(Qe)})}var Ye=s(Le,2);{var it=r=>{var f=ea(),B=a(f,!0);t(f),I((T,U)=>{We(f,1,`badge text-base-content/80 font-medium ${T??""}`,"svelte-1xi0ayb"),m(B,U)},[()=>A(e(ve)),()=>ke(e(ve))]),i(r,f)};u(Ye,r=>{e(ve)&&r(it)})}var xe=s(Ye,2),Te=a(xe);{var nt=r=>{Ot(r,{get regimes(){return o.recipe.regime},iconOnly:!0,colorClass:"success"})};u(Te,r=>{o.recipe.regime&&r(nt)})}t(xe),t(Be),t(S);var De=s(S,2),Se=a(De),Ve=a(Se);Kt(Ve,{class:"h-4 w-4"});var Ze=s(Ve,2),vt=a(Ze,!0);t(Ze),t(Se);var v=s(Se,2),d=a(v);{var c=r=>{var f=ta();i(r,f)},j=r=>{var f=aa();i(r,f)};u(d,r=>{o.recipe.serveHot?r(c):r(j,!1)})}var V=s(d,2);{var F=r=>{var f=ra();i(r,f)},K=r=>{var f=sa();i(r,f)};u(V,r=>{o.recipe.cuisson?r(F):r(K,!1)})}t(v);var Z=s(v,2);{var W=r=>{var f=na();te(f,20,()=>o.recipe.materiel,B=>B,(B,T)=>{var U=ia(),ue=a(U,!0);t(U),I(()=>m(ue,T)),i(B,U)}),t(f),i(r,f)};u(Z,r=>{o.recipe.materiel&&o.recipe.materiel.length>0&&r(W)})}t(De),t(k);var X=s(k,2),Q=a(X),R=a(Q);Jt(R,{get ingredients(){return o.recipe.ingredients},get servings(){return e(ae)},get defaultServings(){return o.recipe.plate}}),t(Q);var E=s(Q,2),z=a(E);{let r=p(()=>o.recipe.preparation24h||void 0),f=p(()=>o.recipe.astuces||[]);Nt(z,{get preparation(){return o.recipe.preparation},get preparation24h(){return e(r)},get preparationHtml(){return o.recipe.preparationHtml},get preparation24hHtml(){return o.recipe.preparation24hHtml},get astuces(){return e(f)}})}t(E),t(X),t(w),t(Ee),I(r=>{rt(Ee,"id",`recipe-${o.recipe.$id??""}`),rt(st,"href",`/icons/sprite.svg#${qe.iconId}`),m(Ae,o.recipe.title),m(vt,r)},[()=>re(e(ae))]),i(Pe,Ee),Et()}const la=Pe=>{var o=da(),N=a(o);N.__click=()=>window.print();var O=a(N);Xt(O,{size:18}),t(N),t(o),i(Pe,o)};var da=l('<div class="flex gap-2"><button class="btn btn-circle btn-primary"><!></button></div>'),oa=l('<button class="btn btn-circle btn-error btn-outline btn-xs absolute top-1/2 right-2 z-10 -translate-y-1/2 opacity-60 hover:opacity-100" aria-label="Effacer la recherche"><!></button>'),ca=l('<li><button><span class="max-w-75 truncate text-left"> </span></button></li>'),ua=l('<li><button><span class="flex w-full items-center justify-between"><span> </span></span></button></li> <ul></ul>',1),fa=l("<li><button><span> </span></button></li> <ul></ul>",1),_a=l('<div class="my-4"><button class="btn btn-dash btn-block btn-primary" aria-label="Afficher toutes les recettes"><!> Afficher toutes les recettes</button></div>'),pa=l('<div class="mt-16 mb-6"><h3 class="mb-3 text-lg font-semibold">Rechercher par ingr√©dient</h3> <div class="relative"><!> <!></div></div> <ul class="menu bg-base-100 rounded-box w-100 drop-shadow-lg"></ul> <!>',1),ga=l('<div class="skeleton h-4 w-full"></div>'),ba=l('<div class="flex gap-2"><div class="skeleton h-4 w-6 shrink-0"></div> <div class="skeleton h-4 w-full"></div></div>'),ma=l('<div class="space-y-6"><div class="card bg-accent/20 flex flex-row items-center justify-center gap-6 p-4"><div class="skeleton h-6 w-32"></div> <div class="skeleton h-6 w-20"></div> <div class="skeleton h-8 w-16 rounded-full"></div> <div class="skeleton h-8 w-16 rounded-full"></div></div> <div class="card bg-base-100 shadow-xl"><div class="card-body"><div class="flex justify-between"><div class="flex-1"><div class="mb-4"><div class="skeleton mb-2 h-8 w-3/4"></div> <div class="flex gap-2"><div class="skeleton h-5 w-20 rounded-full"></div> <div class="skeleton h-5 w-16 rounded-full"></div></div></div> <div class="mb-4 flex flex-wrap gap-4 text-sm"><div class="skeleton h-4 w-24"></div> <div class="skeleton h-4 w-24"></div> <div class="skeleton h-4 w-24"></div></div> <div class="mb-6"><h3 class="mb-2 flex items-center gap-2 font-semibold"><div class="skeleton h-5 w-6"></div> <div class="skeleton h-5 w-32"></div></h3> <div class="space-y-2"></div></div> <div><h3 class="mb-2 flex items-center gap-2 font-semibold"><div class="skeleton h-5 w-6"></div> <div class="skeleton h-5 w-32"></div></h3> <div class="space-y-2"></div></div></div></div></div></div></div>'),ha=l('<div class="mb-8 space-y-4 print:hidden"><div class="flex flex-wrap items-center justify-between gap-4"><div class="space-y-2"><div class="skeleton h-6 w-64"></div> <div class="skeleton h-4 w-48"></div></div></div> <div class="flex justify-end p-4"><div class="skeleton h-10 w-3/4"></div></div></div> <div class="space-y-10 print:space-y-0"></div>',1),xa=l('<div class="alert alert-error"><div><h3 class="font-bold">Erreur</h3> <div> </div></div></div>'),ya=l("<!> ",1),wa=l("<!> ",1),ka=l('<span class="mr-1"> </span>'),Ea=l('<span class="mr-1"> </span>'),Ra=l('<span class="mr-1">recette</span>'),Aa=l("<span> </span>"),Da=l('<div class="m-4 flex items-center justify-center gap-2"><div class="badge badge-xl badge-primary"><!> filtre : <!> <!> <!> <!></div> <button class="btn btn-dash btn-sm" aria-label="Afficher toutes les recettes"><!> Afficher toutes les recettes</button></div>'),Sa=l('<div class="bg-base-100 border-base-300 rounded-xl border p-8 text-center"><p class="text-base-content/60 text-lg"> </p></div>'),Ma=l('<div class="page-break-after"><!></div>'),ja=l('<div class="card bg-accent text-accent-content flex flex-row items-center justify-center gap-6 p-4 text-lg font-black print:hidden"><div> </div> <div> </div> <div class="badge badge-outline"><!> </div> <div class="badge badge-outline"><!> </div></div> <!>',1),Ia=l('<div class="space-y-8 print:space-y-0"></div>'),Ua=l('<div class="bg-base-100 border-base-300 rounded-xl border p-8 text-center"><p class="text-base-content/60 text-lg">Aucune recette ne correspond aux filtres s√©lectionn√©s.</p> <button class="btn btn-primary mt-4">R√©initialiser les filtres</button></div>'),Ca=l('<div class="page-break-after mb-14"><!></div>'),Pa=l('<div class="card bg-primary text-primary-content flex flex-row items-center justify-center gap-6 p-4 text-lg font-black shadow-lg print:hidden"><div> </div> <div> </div> <div class="badge badge-outline"><!> </div> <div class="badge badge-outline"><!> </div></div> <!>',1),Fa=l('<button class="btn btn-dash btn-block my-5" aria-label="Afficher toutes les recettes"><!> Afficher toutes les recettes</button>'),za=l('<div class="space-y-10 print:space-y-0"></div> <!>',1),Ba=l(`<div class="bg-base-100 border-base-300 rounded-xl border p-8 text-center"><p class="text-base-content/60 text-lg">Aucune recette n'a encore √©t√© ajout√©e √† cet √©v√©nement.</p></div>`),La=l('<div class="mb-8 space-y-4 print:hidden"><div class="flex flex-wrap items-center justify-between gap-4"><div><h1> </h1> <div class="text-base-content/60 text-sm"><!></div></div></div> <div class="flex justify-end p-4"><!></div> <!></div> <!> <!>',1),Ta=l('<div class="bg-base-200 min-h-screen"><div class="print:hidden"><!></div> <div><div class="mx-auto max-w-6xl px-1 py-8 md:px-4"><!></div></div></div>');function tr(Pe,o){kt(o,!0);let N=ie(!0),O=ie(null),ne=p(()=>Ft.params.id??null);const ve=p(()=>e(ne)?ot.getEventById(e(ne)):null);let ae=ie(pt([])),re=ie(pt([])),ke=ie(!1),A=ie(""),Fe=ie("");const qe=p(()=>{const v=new Set;return e(re).forEach(d=>{d.ingredients?.forEach(c=>{c.name&&v.add(c.name)})}),Array.from(v).sort()}),Ee=p(()=>e(A)?e(qe).filter(v=>v!==e(A)):e(qe));let w=ie(null),k=ie(null),S=ie(null);const he=p(()=>e(w)?e(ae).filter(v=>{const d=Ke(v.date),c=Xe(v.date),j=d===e(w),V=!e(k)||c===e(k);return j&&V}):e(ae)),Re=p(()=>{let v=e(re);if(e(A)&&(v=v.filter(d=>d.ingredients?.some(c=>c.name&&c.name.toLowerCase()===e(A).toLowerCase()))),e(w)){const d=new Set;e(he).forEach(c=>{c.recipes.forEach(j=>{d.add(j.recipeUuid)})}),v=v.filter(c=>d.has(c.$id))}return v}),st=p(()=>{const v=new Map;return e(ae).forEach(d=>{const c=Ke(d.date),j=Xe(d.date);v.has(c)||v.set(c,new Map),v.get(c).has(j)||v.get(c).set(j,[]),v.get(c).get(j).push(d)}),v}),ze=p(()=>e(ve)?.name??""),Ae=p(()=>e(ve)?.dateStart??null),Be=p(()=>e(ve)?.dateEnd??null),Le=p(()=>Lt(e(ve)));async function Qe(v){if(!(e(ke)||!v)){n(N,!0),n(ke,!0),n(O,null);try{const d=ot.getEventById(v);if(!d){n(O,"√âv√©nement non trouv√©");return}n(ae,d.meals||[],!0);const c=e(ae).flatMap(V=>V.recipes.map(F=>F.recipeUuid)),j=await zt.getRecipesByUuidsBulk(c);n(re,Array.from(j.values()).filter(Boolean),!0),console.log(`[EventRecipesPage] ${e(re).length}/${c.length} recettes charg√©es`)}catch(d){console.error("Erreur lors du chargement des donn√©es:",d),n(O,d instanceof Error?d.message:"Erreur lors du chargement",!0)}finally{n(N,!1),n(ke,!1)}}}Mt(async()=>{const v=e(ne);if(!v){n(O,"ID d'√©v√©nement manquant"),n(N,!1);return}try{if(await jt(),!await It(v)){n(O,"√âv√©nement non trouv√©"),n(N,!1);return}await Qe(v)}catch(d){console.error("[EventRecipesPage] Erreur lors du chargement:",d),n(O,d instanceof Error?d.message:"Erreur lors du chargement",!0),n(N,!1)}}),gt(()=>{if(!e(ne))return;const v=ot.getEventById(e(ne));if(!v)return;const d=JSON.stringify(v.meals),c=JSON.stringify(e(ae));d!==c&&!e(ke)&&(console.log("[EventRecipesPage] Meals mis √† jour via realtime, rafra√Æchissement..."),Qe(e(ne)))}),gt(()=>{yt.setConfig({actions:la})}),Ut(()=>{yt.reset()});function Ye(v){n(A,v,!0),n(w,null),n(k,null),n(S,null)}function it(){n(A,"")}var xe=Ta(),Te=a(xe),nt=a(Te);Qt(nt,{width:"120",children:(v,d)=>{var c=pa(),j=P(c),V=s(a(j),2),F=a(V);{let R=p(()=>e(A)||"Filtrer par ingr√©dients...");Yt(F,{get items(){return e(Ee)},onSelect:Ye,get placeholder(){return e(R)},minQueryLength:1,get value(){return e(Fe)},set value(E){n(Fe,E,!0)}})}var K=s(F,2);{var Z=R=>{var E=oa();E.__click=it;var z=a(E);Wt(z,{size:14}),t(E),i(R,E)};u(K,R=>{e(A)&&R(Z)})}t(V),t(j);var W=s(j,2);te(W,21,()=>Array.from(e(st).entries()),([R,E])=>R,(R,E)=>{var z=p(()=>bt(e(E),2));let r=()=>e(z)[0],f=()=>e(z)[1];var B=fa(),T=P(B),U=a(T);U.__click=()=>{n(k,null),n(S,null),n(A,""),n(w,e(w)===r()?null:r(),!0)};var ue=a(U),ye=a(ue,!0);t(ue),t(U),t(T);var fe=s(T,2);te(fe,21,()=>Array.from(f().entries()),([le,Me])=>le,(le,Me)=>{var Ge=p(()=>bt(e(Me),2));let _e=()=>e(Ge)[0],He=()=>e(Ge)[1];var $e=ua(),Je=P($e),g=a(Je);g.__click=()=>{n(w,r(),!0),n(k,e(k)===_e()?null:_e(),!0),n(S,null),n(A,"")};var M=a(g),G=a(M),Y=a(G);t(G),t(M),t(g),t(Je);var H=s(Je,2);te(H,23,()=>He()[0].recipes,(h,x)=>h.recipeUuid+"-"+x,(h,x,C)=>{const D=p(()=>e(re).find(q=>q.$id===e(x).recipeUuid)),de=p(()=>(He()[0].id||He()[0].date)+"_"+e(C));var L=me(),y=P(L);{var $=q=>{var _=ca(),b=a(_);b.__click=()=>{n(w,null),n(k,null),n(S,e(S)===e(de)?null:e(de),!0),n(A,"")};var J=a(b),ee=a(J,!0);t(J),t(b),t(_),I(()=>{We(b,1,`btn btn-sm ml-8 justify-start ${e(S)===e(de)?"btn-accent":"btn-ghost"}`),m(ee,e(D).title)}),i(q,_)};u(y,q=>{e(D)&&q($)})}i(h,L)}),t(H),I(()=>{We(g,1,`btn btn-sm justify-start pl-4 ${e(w)===r()&&e(k)===_e()?"btn-accent":"btn-ghost "}`),m(Y,`${_e()==="matin"?"üåÖ":_e()==="midi"?"‚òÄÔ∏è":"üåô"}
                      ${_e()??""}`)}),i(le,$e)}),t(fe),I(()=>{We(U,1,`btn btn-sm justify-start ${e(w)===r()&&!e(k)?"btn-accent":"btn-ghost"}`),m(ye,r())}),i(R,B)}),t(W);var X=s(W,2);{var Q=R=>{var E=_a(),z=a(E);z.__click=()=>{n(w,null),n(k,null),n(S,null)};var r=a(z);ft(r,{size:18}),ut(),t(z),t(E),i(R,E)};u(X,R=>{(e(w)||e(k)||e(S))&&R(Q)})}i(v,c)},$$slots:{default:!0}}),t(Te);var De=s(Te,2),Se=a(De),Ve=a(Se);{var Ze=v=>{var d=ha(),c=s(P(d),2);te(c,20,()=>Array(3),ct,(j,V)=>{var F=ma(),K=s(a(F),2),Z=a(K),W=a(Z),X=a(W),Q=s(a(X),4),R=s(a(Q),2);te(R,20,()=>Array(4),ct,(r,f,B,T)=>{var U=ga();i(r,U)}),t(R),t(Q);var E=s(Q,2),z=s(a(E),2);te(z,20,()=>Array(3),ct,(r,f,B,T)=>{var U=ba();i(r,U)}),t(z),t(E),t(X),t(W),t(Z),t(K),t(F),i(j,F)}),t(c),i(v,d)},vt=v=>{var d=me(),c=P(d);{var j=F=>{var K=xa(),Z=a(K),W=s(a(Z),2),X=a(W,!0);t(W),t(Z),t(K),I(()=>m(X,e(O))),i(F,K)},V=F=>{var K=me(),Z=P(K);{var W=X=>{var Q=La(),R=P(Q),E=a(R),z=a(E),r=a(z),f=a(r,!0);t(r);var B=s(r,2),T=a(B);{var U=g=>{var M=ya(),G=P(M);_t(G,{class:"inline h-4 w-4"});var Y=s(G);I((H,h)=>m(Y,` ${H??""} au ${h??""}`),[()=>Ke(e(Ae)),()=>Ke(e(Be))]),i(g,M)},ue=g=>{var M=me(),G=P(M);{var Y=H=>{var h=wa(),x=P(h);_t(x,{class:"inline h-4 w-4"});var C=s(x);I(D=>m(C,` ${D??""}`),[()=>Ke(e(Ae))]),i(H,h)};u(G,H=>{e(Ae)&&H(Y)},!0)}i(g,M)};u(T,g=>{e(Ae)&&e(Be)?g(U):g(ue,!1)})}t(B),t(z),t(E);var ye=s(E,2),fe=a(ye);Tt(fe,{get currentEvent(){return e(ve)}}),t(ye);var le=s(ye,2);{var Me=g=>{var M=Da(),G=a(M),Y=a(G);qt(Y,{class:"mr-1 h-4 w-4"});var H=s(Y,2);{var h=_=>{var b=ka(),J=a(b,!0);t(b),I(()=>m(J,e(w))),i(_,b)};u(H,_=>{e(w)&&_(h)})}var x=s(H,2);{var C=_=>{var b=Ea(),J=a(b,!0);t(b),I(()=>m(J,e(k))),i(_,b)};u(x,_=>{e(k)&&_(C)})}var D=s(x,2);{var de=_=>{var b=Ra();i(_,b)};u(D,_=>{e(S)&&_(de)})}var L=s(D,2);{var y=_=>{var b=Aa(),J=a(b,!0);t(b),I(()=>m(J,e(A))),i(_,b)};u(L,_=>{e(A)&&_(y)})}t(G);var $=s(G,2);$.__click=()=>{n(w,null),n(k,null),n(S,null),n(A,"")};var q=a($);ft(q,{class:"h-4 w-4"}),ut(),t($),t(M),i(g,M)};u(le,g=>{(e(w)||e(k)||e(S)||e(A))&&g(Me)})}t(R);var Ge=s(R,2);{var _e=g=>{var M=me(),G=P(M);{var Y=h=>{var x=Sa(),C=a(x),D=a(C);t(C),t(x),I(()=>m(D,`Aucune recette ne contient l'ingr√©dient "${e(A)??""}".`)),i(h,x)},H=h=>{var x=Ia();te(x,23,()=>e(ae),(C,D)=>C.id||D,(C,D,de)=>{const L=p(()=>e(D).recipes.filter(_=>e(Re).some(b=>b.$id===_.recipeUuid)));var y=me(),$=P(y);{var q=_=>{var b=ja(),J=P(b),ee=a(J),je=a(ee,!0);t(ee);var se=s(ee,2),Ie=a(se,!0);t(se);var we=s(se,2),Ue=a(we);ht(Ue,{size:16});var lt=s(Ue);t(we);var Ce=s(we,2),Ne=a(Ce);xt(Ne,{size:16});var dt=s(Ne);t(Ce),t(J);var et=s(J,2);te(et,19,()=>e(L),(pe,ge)=>(e(D).id||e(de))+"-"+pe.recipeUuid+"-"+ge,(pe,ge)=>{const tt=p(()=>e(re).find(ce=>ce.$id===e(ge).recipeUuid));var oe=Ma(),be=a(oe);{var at=ce=>{wt(ce,{get recipe(){return e(tt)},get meal(){return e(D)},get mealRecipe(){return e(ge)},get totalGuests(){return e(Le)}})};u(be,ce=>{e(tt)&&ce(at)})}t(oe),i(pe,oe)}),I((pe,ge)=>{rt(J,"id",`meal-${e(D).date??""}`),m(je,pe),m(Ie,ge),m(lt,` ${e(D).guests??""}`),m(dt,` ${e(L).length??""}`)},[()=>mt(e(D).date),()=>Xe(e(D).date)]),i(_,b)};u($,_=>{e(L).length>0&&_(q)})}i(C,y)}),t(x),i(h,x)};u(G,h=>{e(Re).length===0?h(Y):h(H,!1)})}i(g,M)},He=g=>{var M=me(),G=P(M);{var Y=h=>{var x=Ua(),C=s(a(x),2);C.__click=()=>{n(w,null),n(k,null),n(S,null)},t(x),i(h,x)},H=h=>{var x=za(),C=P(x);te(C,23,()=>e(he),(L,y)=>L.id||y,(L,y,$)=>{const q=p(()=>e(S)?(()=>{const[ee,je]=e(S).split("_"),se=e(y).id||e(y).date;return ee!==se.toString()?[]:e(y).recipes.filter((Ie,we)=>we===parseInt(je))})():e(y).recipes);var _=me(),b=P(_);{var J=ee=>{var je=Pa(),se=P(je),Ie=a(se),we=a(Ie,!0);t(Ie);var Ue=s(Ie,2),lt=a(Ue,!0);t(Ue);var Ce=s(Ue,2),Ne=a(Ce);ht(Ne,{size:16});var dt=s(Ne);t(Ce);var et=s(Ce,2),pe=a(et);xt(pe,{size:16});var ge=s(pe);t(et),t(se);var tt=s(se,2);te(tt,19,()=>e(q),(oe,be)=>(e(y).id||e($))+"-"+oe.recipeUuid+"-"+be,(oe,be)=>{const at=p(()=>e(re).find(Oe=>Oe.$id===e(be).recipeUuid));var ce=Ca(),Rt=a(ce);{var At=Oe=>{wt(Oe,{get recipe(){return e(at)},get meal(){return e(y)},get mealRecipe(){return e(be)},get totalGuests(){return e(Le)}})};u(Rt,Oe=>{e(at)&&Oe(At)})}t(ce),i(oe,ce)}),I((oe,be)=>{rt(se,"id",`meal-${e(y).date??""}`),m(we,oe),m(lt,be),m(dt,` ${e(y).guests??""}`),m(ge,` ${e(q).length??""}`)},[()=>mt(e(y).date),()=>Xe(e(y).date)]),i(ee,je)};u(b,ee=>{e(q).length>0&&ee(J)})}i(L,_)}),t(C);var D=s(C,2);{var de=L=>{var y=Fa();y.__click=()=>{n(w,null),n(k,null),n(S,null),n(A,"")};var $=a(y);ft($,{class:"h-4 w-4"}),ut(),t(y),i(L,y)};u(D,L=>{(e(w)||e(k)||e(S))&&L(de)})}i(h,x)};u(G,h=>{e(he).length===0&&(e(w)||e(k))?h(Y):h(H,!1)})}i(g,M)};u(Ge,g=>{e(A)?g(_e):g(He,!1)})}var $e=s(Ge,2);{var Je=g=>{var M=Ba();i(g,M)};u($e,g=>{!e(A)&&e(re).length===0&&!e(N)&&g(Je)})}I(()=>m(f,e(ze))),i(X,Q)};u(Z,X=>{e(ze)&&X(W)},!0)}i(F,K)};u(c,F=>{e(O)?F(j):F(V,!1)},!0)}i(v,d)};u(Ve,v=>{e(N)?v(Ze):v(vt,!1)})}t(Se),t(De),t(xe),I(()=>We(De,1,`print:ml-0 ${(Ct.isDesktop&&" ml-110")??""}`)),Pt(1,xe,()=>Vt),i(Pe,xe),Et()}Bt(["click"]);export{tr as default};
