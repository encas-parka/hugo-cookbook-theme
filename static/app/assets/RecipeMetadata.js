import{B as U,d as N,y as M,z as W,X as Y,j as G,k as K,K as A,m as s,b as n,c as O,A as D,N as Z,v as m,u as $,h as r,g as i,o as e,e as aa,E as ea,w as R,x as g,i as ta}from"./appwrite.js";import{z as ra}from"./icons.js";var sa=m('<div class="card bg-base-100 mt-4 shadow-sm"><div class="card-body p-4"><div class="loading loading-spinner loading-sm"></div></div></div>'),ia=m('<span class="badge badge-ghost badge-xs"> </span>'),da=m('<span class="badge badge-primary badge-xs badge-soft">Originale</span>'),na=m('<button class="btn btn-ghost"><div class="flex items-center gap-2 text-sm"> <!> <!></div></button>'),oa=m('<div class="card bg-base-100 mt-4 shadow-sm"><div class="card-body p-4"><h4 class="card-title flex items-center gap-2"><!> </h4> <div class="flex flex-wrap gap-x-4 gap-y-2"></div></div></div>');function ma(F,t){N(t,!0);let f=M(W([])),p=M(null),l=M(!0);async function S(){D(l,!0);try{const a=await Z.getVariantGroup(t.recipeId,2);D(p,a.root,!0),D(f,a.variants.sort((v,d)=>v.title.localeCompare(d.title,"fr-FR")),!0)}catch(a){console.error("[RecipeVariants] Erreur chargement:",a)}finally{D(l,!1)}}Y(()=>{S()});let o=$(()=>s(f).filter(a=>a.$id!==t.recipeId));var _=G(),V=K(_);{var u=a=>{var v=sa();n(a,v)},k=a=>{var v=G(),d=K(v);{var b=x=>{var h=oa(),z=r(h),C=r(z),B=r(C);ra(B,{class:"h-4 w-4"});var X=i(B);e(C);var E=i(C,2);aa(E,21,()=>s(o),ta,(q,y)=>{var I=na();I.__click=()=>ea(`/recipe/${s(y).$id}`);var L=r(I),T=r(L),j=i(T);{var H=c=>{var w=ia(),Q=r(w,!0);e(w),R(()=>g(Q,s(y).versionLabel)),n(c,w)};A(j,c=>{s(y).versionLabel&&c(H)})}var J=i(j,2);{var P=c=>{var w=da();n(c,w)};A(J,c=>{s(y).$id===s(p)?.$id&&c(P)})}e(L),e(I),R(()=>g(T,`${s(y).title??""} `)),n(q,I)}),e(E),e(z),e(h),R(()=>g(X,` ${s(o).length??""} variante${s(o).length>1?"s":""}
        de cette recette`)),n(x,h)};A(d,x=>{s(o).length>0&&x(b)},!0)}n(a,v)};A(V,a=>{s(l)?a(u):a(k,!1)})}n(F,_),O()}U(["click"]);var va=m('<div><span class="font-semibold">Modifié le :</span> </div>'),la=m('<div class="bg-base-200 rounded-box mt-12 p-6 text-sm opacity-60 print:hidden"><div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"><div><span class="font-semibold">Auteur :</span> </div> <div><span class="font-semibold">ID :</span> <span class="font-mono"> </span></div> <div><span class="font-semibold">Créé le :</span> </div> <!></div></div>');function fa(F,t){N(t,!0);var f=la(),p=r(f),l=r(p),S=i(r(l));e(l);var o=i(l,2),_=i(r(o),2),V=r(_,!0);e(_),e(o);var u=i(o,2),k=i(r(u));e(u);var a=i(u,2);{var v=d=>{var b=va(),x=i(r(b));e(b),R(h=>g(x,` ${h??""}`),[()=>new Intl.DateTimeFormat("fr-FR",{dateStyle:"long",timeStyle:"short"}).format(new Date(t.updatedAt))]),n(d,b)};A(a,d=>{t.updatedAt&&t.updatedAt!==t.createdAt&&d(v)})}e(p),e(f),R(d=>{g(S,` ${(t.auteur||t.createdBy||"Inconnu")??""}`),g(V,t.id),g(k,` ${d??""}`)},[()=>new Intl.DateTimeFormat("fr-FR",{dateStyle:"long",timeStyle:"short"}).format(new Date(t.createdAt))]),n(F,f),O()}export{fa as R,ma as a};
