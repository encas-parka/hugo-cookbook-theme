import{P as ut,ak as vt,_ as gt,T as bt,x as at,V as mt,W as _t,Q as nt,aO as it,a4 as dt,aP as pt,E as ht,n as xt,a1 as yt}from"./icons.js";import{B as Ne,d as qe,p as Me,v as b,k as oe,g as i,U as ue,K as G,o as a,h as o,am as ke,b as f,I as j,R as Ae,n as Te,j as Ie,m as t,aW as wt,e as Ee,A as u,y as X,w as Y,C as $,x as ie,i as Ve,u as H,c as He,aX as kt,al as Dt,z as Se,as as Rt,P as Ye,Q as $e,X as De,aq as rt,S as Et,L as St,au as Fe,J as Le,Z as It,H as ot,$ as Ct,aC as Bt,aD as zt,W as Be,E as Tt,a0 as st,G as fe,aB as lt}from"./appwrite.js";import{E as Pt}from"./EventInvitationAlert.js";import{F as Pe}from"./Fieldset.js";import{C as At}from"./ConfirmModal.js";import{n as ct}from"./index.js";import{L as Vt}from"./LeftPanel.js";var qt=b('<div class="flex flex-wrap gap-x-4 gap-y-1"><label class="label cursor-pointer justify-start gap-3"><input type="checkbox" class="checkbox checkbox-primary"/> <span class="label-text">Date</span></label> <label class="label cursor-pointer justify-start gap-3"><input type="checkbox" class="checkbox checkbox-primary"/> <span class="label-text">Horaire</span></label> <label class="label cursor-pointer justify-start gap-3"><input type="checkbox" class="checkbox checkbox-primary"/> <span class="label-text">Description</span></label> <label class="label cursor-pointer justify-start gap-3"><input type="checkbox" class="checkbox checkbox-primary"/> <span class="label-text">Catégories</span></label></div> <fieldset class="fieldset my-2"><div class="flex flex-wrap gap-x-4 gap-y-1"><label class="label cursor-pointer justify-start gap-3"><input type="checkbox" class="checkbox checkbox-primary"/> <span class="label-text">Régimes</span></label> <label class="label cursor-pointer justify-start gap-3"><input type="checkbox" class="checkbox checkbox-primary"/> <span class="label-text">Allergènes</span></label> <label class="label cursor-pointer justify-start gap-3"><input type="checkbox" class="checkbox checkbox-primary"/> <span class="label-text">Liste Ingrédients</span></label></div></fieldset>',1),Ht=b('<div><label class="label cursor-pointer justify-start gap-3"><input type="checkbox" class="checkbox checkbox-primary"/> <span class="label-text">Date en haut de chaque page</span></label></div>'),Ut=b('<div class="mb-4"><label class="label cursor-pointer justify-start gap-3"><input type="checkbox" class="checkbox checkbox-primary"/> <span class="label-text text-wrap">Nouvelle page par catégorie (entrée/plat/dessert)</span></label></div> <!> <div><label class="label cursor-pointer justify-start gap-3"><input type="checkbox" class="checkbox checkbox-primary"/> <span class="label-text">Centrer le contenu sur la page</span></label></div>',1),jt=b('<fieldset class="fieldset w-full"><legend class="fieldset-legend text-xs opacity-60">Message en haut de chaque fiche</legend> <label class="input input-sm w-full"><input type="text" class="grow" placeholder="Ajouter un message en haut..."/></label></fieldset> <fieldset class="fieldset w-full"><legend class="fieldset-legend text-xs opacity-60">Message en bas de chaque fiche</legend> <label class="input input-sm w-full"><input type="text" class="grow" placeholder="Ajouter un message en bas..."/></label></fieldset>',1),Mt=b("<div></div>"),Ft=b('<div class="border-base-content/5 bg-base-200/30 rounded-xl border p-3"><div class="mb-2 flex items-center justify-between"><span class="text-xs font-bold uppercase opacity-60"> </span> <div class="flex items-center gap-1"><div class="mr-2 flex gap-0.5"><button title="Gras"><!></button> <button title="Italique"><!></button></div> <button class="btn btn-ghost btn-xs btn-square font-bold">A-</button> <div class="flex gap-0.5"></div> <button class="btn btn-ghost btn-xs btn-square font-bold">A+</button></div></div> <select class="select select-sm select-bordered w-full"><option>Montserrat (Standard)</option><option>Playfair (Élégant)</option><option>Oswald (Bistro/Impact)</option><option>Quicksand (Moderne)</option><option>Dancing Script (Cursive)</option><option>Pacifico (Script)</option><option>Caveat (Manuscrit)</option><option>Gluten (Funky)</option></select></div>'),Lt=b('<div class="space-y-4"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div>'),Nt=b('<div class="text-base-content/50 py-2 text-center text-sm italic">Aucune version archivée</div>'),Kt=b('<div><div class="flex flex-col"><span class="text-sm font-medium"> </span> <span class="text-base-content/50 flex items-center gap-1 text-xs"><!> </span></div> <div class="flex gap-2"><button class="btn btn-ghost btn-xs btn-square" title="Charger cette version"><!></button> <button class="btn btn-ghost text-error btn-xs btn-square" title="Supprimer"><!></button></div></div>'),Ot=b('<div class="space-y-4"><div class="max-h-60 space-y-2 overflow-y-auto pr-1"><!></div> <button class="btn btn-outline btn-block gap-2 border-dashed"><!> Créer une nouvelle version</button> <p class="text-center text-[10px] opacity-40">Maximum 3 versions sauvegardées</p></div>'),Qt=b(`<div class="modal modal-open"><div class="modal-box"><h3 class="text-warning flex items-center gap-2 text-lg font-bold"><!> Limite atteinte</h3> <p class="py-4">Vous avez atteint la limite de <strong>3 versions sauvegardées</strong>.</p> <p class="mb-4 text-sm opacity-80">Veuillez supprimer une version existante avant d'en créer une nouvelle.</p> <div class="modal-action"><button class="btn">Fermer</button></div></div> <button class="modal-backdrop">close</button></div>`),Wt=b(`<div class="modal modal-open"><div class="modal-box border-warning/20 border"><div class="text-warning mb-4 flex items-center gap-3"><!> <h3 class="text-lg font-bold">Sauvegarde locale</h3></div> <p class="py-4">Cette configuration sera enregistrée <strong>uniquement sur ce navigateur</strong>.</p> <div class="bg-warning/5 border-warning/10 space-y-2 rounded-lg border p-4 text-sm"><p>⚠️ <strong>Attention :</strong></p> <ul class="list-disc pl-5 opacity-80"><li>Elle ne sera pas visible sur vos autres appareils.</li> <li>Elle sera perdue si vous videz le cache ou les données du site dans
            votre navigateur.</li></ul></div> <div class="modal-action"><button class="btn btn-ghost">Annuler</button> <button class="btn btn-warning gap-2"><!> Confirmer la sauvegarde</button></div></div> <button class="modal-backdrop" aria-label="Fermer">close</button></div>`),Xt=b(`<div class="bg-base-200 h-full w-full space-y-6 pt-10 sm:pt-16"><!> <!> <!> <!> <!> <div class="px-4 pb-10"><button class="btn btn-primary btn-block gap-2 shadow-lg"><!> Sauvegarder l'état actuel</button> <p class="mt-2 text-center text-[10px] opacity-40">Mémoire locale uniquement</p></div></div> <!> <!> <!>`,1);function Jt(Re,e){qe(e,!0);let r=Me(e,"config",15),h=Me(e,"versions",19,()=>[]),ae=Me(e,"activeVersionId",3,null);Me(e,"disabled",3,!1);let M=X(!1),q=X(!1),A=X(null);function ne(){u(M,!1),e.onSave?.()}function N(){if(h().length>=3){u(q,!0);return}e.onCreateVersion?.()}var se=Xt(),ee=oe(se),_e=i(ee);Pe(_e,{legend:"Éléments à afficher",children:(E,W)=>{var S=qt(),l=oe(S),D=i(l),x=i(D);ue(x),G(2),a(D);var z=o(D,2),U=i(z);ue(U),G(2),a(z);var L=o(z,2),y=i(L);ue(y),G(2),a(L);var V=o(L,2),F=i(V);ue(F),G(2),a(V),a(l);var O=o(l,2),g=i(O),n=i(g),s=i(n);ue(s),G(2),a(n);var m=o(n,2),w=i(m);ue(w),G(2),a(m);var K=o(m,2),I=i(K);ue(I),G(2),a(K),a(g),a(O),ke(x,()=>r().showDate,v=>r(r().showDate=v,!0)),ke(U,()=>r().showHoraire,v=>r(r().showHoraire=v,!0)),ke(y,()=>r().showDescription,v=>r(r().showDescription=v,!0)),ke(F,()=>r().showCategories,v=>r(r().showCategories=v,!0)),ke(s,()=>r().showRegimes,v=>r(r().showRegimes=v,!0)),ke(w,()=>r().showAllergens,v=>r(r().showAllergens=v,!0)),ke(I,()=>r().showIngredients,v=>r(r().showIngredients=v,!0)),f(E,S)},$$slots:{default:!0}});var ve=o(_e,2);Pe(ve,{legend:"Options d'impression",children:(E,W)=>{var S=Ut(),l=oe(S),D=i(l),x=i(D);ue(x),G(2),a(D),a(l);var z=o(l,2);{var U=F=>{var O=Ht(),g=i(O),n=i(g);ue(n),G(2),a(g),a(O),ke(n,()=>r().dateByPageBreak,s=>r(r().dateByPageBreak=s,!0)),f(F,O)};j(z,F=>{r().catPageBreak&&F(U)})}var L=o(z,2),y=i(L),V=i(y);ue(V),G(2),a(y),a(L),ke(x,()=>r().catPageBreak,F=>r(r().catPageBreak=F,!0)),ke(V,()=>r().centerVertical,F=>r(r().centerVertical=F,!0)),f(E,S)},$$slots:{default:!0}});var he=o(ve,2);Pe(he,{legend:"Messages personnalisés",children:(E,W)=>{var S=jt(),l=oe(S),D=o(i(l),2),x=i(D);ue(x),a(D),a(l);var z=o(l,2),U=o(i(z),2),L=i(U);ue(L),a(U),a(z),Ae(x,()=>r().messageTop,y=>r(r().messageTop=y,!0)),Ae(L,()=>r().messageBottom,y=>r(r().messageBottom=y,!0)),f(E,S)},$$slots:{default:!0}});var ge=o(he,2);Pe(ge,{legend:"Personnalisation des textes",children:(E,W)=>{var S=Lt();{const g=(n,s=Te,m=Te,w=Te,K=Te,I=Te,v)=>{let d=wt(()=>kt(v?.(),!0));var c=Ie(),k=oe(c);{var _=p=>{var T=Ft(),P=i(T),B=i(P),Q=i(B,!0);a(B);var pe=o(B,2),be=i(pe),de=i(be);de.__click=()=>r(r()[K()]=!r()[K()],!0);var Ce=i(de);mt(Ce,{class:"size-3"}),a(de);var ye=o(de,2);ye.__click=()=>r(r()[I()]=!r()[I()],!0);var me=i(ye);_t(me,{class:"size-3"}),a(ye),a(be);var we=o(be,2);we.__click=()=>r(r()[w()]=Math.max(0,r()[w()]-1),!0);var Ue=o(we,2);Ee(Ue,20,()=>[0,1,2,3],Ve,(Ge,ft)=>{var tt=Mt();Y(()=>$(tt,1,`h-1 w-2 rounded-full transition-colors ${r()[w()]>=ft?"bg-secondary":"bg-base-content/10"}`)),f(Ge,tt)}),a(Ue);var je=o(Ue,2);je.__click=()=>r(r()[w()]=Math.min(3,r()[w()]+1),!0),a(pe),a(P);var ze=o(P,2),Ke=i(ze);Ke.value=Ke.__value="montserrat-font";var Oe=o(Ke);Oe.value=Oe.__value="playfair-display";var Qe=o(Oe);Qe.value=Qe.__value="oswald-font";var We=o(Qe);We.value=We.__value="quicksand-font";var Xe=o(We);Xe.value=Xe.__value="dancing-script";var Je=o(Xe);Je.value=Je.__value="pacifico-regular";var Ze=o(Je);Ze.value=Ze.__value="caveat-font";var et=o(Ze);et.value=et.__value="gluten-font",a(ze),a(T),Y(()=>{ie(Q,s()),$(de,1,`btn btn-xs btn-square ${(r()[K()]&&"btn-secondary")??""}`),$(ye,1,`btn btn-xs btn-square ${(r()[I()]&&"btn-secondary")??""}`),we.disabled=r()[w()]===0,je.disabled=r()[w()]===3}),Dt(ze,()=>r()[m()],Ge=>r(r()[m()]=Ge,!0)),f(p,T)};j(k,p=>{t(d)&&p(_)})}f(n,c)};var l=i(S);g(l,()=>"Date",()=>"fontDate",()=>"fontSizeDate",()=>"boldDate",()=>"italicDate",()=>r().showDate);var D=o(l,2);g(D,()=>"Horaire",()=>"fontHoraire",()=>"fontSizeHoraire",()=>"boldHoraire",()=>"italicHoraire",()=>r().showHoraire);var x=o(D,2);g(x,()=>"Catégories",()=>"fontCat",()=>"fontSizeCat",()=>"boldCat",()=>"italicCat",()=>r().showCategories);var z=o(x,2);g(z,()=>"Titre Recettes",()=>"fontRecettes",()=>"fontSizeRecettes",()=>"boldRecettes",()=>"italicRecettes",()=>!0);var U=o(z,2);g(U,()=>"Description",()=>"fontDesc",()=>"fontSizeDesc",()=>"boldDesc",()=>"italicDesc",()=>r().showDescription);var L=o(U,2);g(L,()=>"Régimes",()=>"fontRegimes",()=>"fontSizeRegimes",()=>"boldRegimes",()=>"italicRegimes",()=>r().showRegimes);var y=o(L,2);g(y,()=>"Ingrédients",()=>"fontIng",()=>"fontSizeIng",()=>"boldIng",()=>"italicIng",()=>r().showIngredients);var V=o(y,2);g(V,()=>"Allergènes",()=>"fontAlert",()=>"fontSizeAlert",()=>"boldAlert",()=>"italicAlert",()=>r().showAllergens);var F=o(V,2);g(F,()=>"Message Haut",()=>"fontTop",()=>"fontSizeTop",()=>"boldTop",()=>"italicTop",()=>!!r().messageTop);var O=o(F,2);g(O,()=>"Message Bas",()=>"fontBottom",()=>"fontSizeBottom",()=>"boldBottom",()=>"italicBottom",()=>!!r().messageBottom),a(S)}f(E,S)},$$slots:{default:!0}});var le=o(ge,2);Pe(le,{legend:"Mes Versions",children:(E,W)=>{var S=Ot(),l=i(S),D=i(l);{var x=y=>{var V=Nt();f(y,V)},z=y=>{var V=Ie(),F=oe(V);Ee(F,17,h,Ve,(O,g)=>{var n=Kt(),s=i(n),m=i(s),w=i(m,!0);a(m);var K=o(m,2),I=i(K);vt(I,{class:"size-3"});var v=o(I);a(K),a(s);var d=o(s,2),c=i(d);c.__click=()=>e.onLoadVersion?.(t(g));var k=i(c);gt(k,{class:"size-4"}),a(c);var _=o(c,2);_.__click=()=>u(A,t(g).id,!0);var p=i(_);bt(p,{class:"size-4"}),a(_),a(d),a(n),Y(T=>{$(n,1,`flex items-center justify-between rounded-lg border p-3 transition-all ${ae()===t(g).id?"bg-secondary/30 border-secondary/30":"bg-base-100/50 hover:bg-base-100 hover:border-base-300 border-transparent"}`),ie(w,t(g).name),ie(v,` ${T??""}`)},[()=>new Date(t(g).createdAt).toLocaleDateString()]),f(O,n)}),f(y,V)};j(D,y=>{h().length===0?y(x):y(z,!1)})}a(l);var U=o(l,2);U.__click=N;var L=i(U);ut(L,{class:"size-4"}),G(),a(U),G(2),a(S),f(E,S)},$$slots:{default:!0}});var ce=o(le,2),xe=i(ce);xe.__click=()=>u(M,!0);var R=i(xe);at(R,{class:"size-5"}),G(),a(xe),G(2),a(ce),a(ee);var C=o(ee,2);{var J=E=>{var W=Qt(),S=i(W),l=i(S),D=i(l);nt(D,{class:"size-6"}),G(),a(l);var x=o(l,6),z=i(x);z.__click=()=>u(q,!1),a(x),a(S);var U=o(S,2);U.__click=()=>u(q,!1),a(W),f(E,W)};j(C,E=>{t(q)&&E(J)})}var Z=o(C,2);{let E=H(()=>!!t(A));At(Z,{title:"Supprimer la version",message:"Êtes-vous sûr de vouloir supprimer cette version ? Cette action est irréversible.",variant:"danger",confirmLabel:"Supprimer",get isOpen(){return t(E)},onConfirm:()=>{t(A)&&(e.onDeleteVersion?.(t(A)),u(A,null))},onCancel:()=>u(A,null)})}var te=o(Z,2);{var re=E=>{var W=Wt(),S=i(W),l=i(S),D=i(l);nt(D,{class:"size-8"}),G(2),a(l);var x=o(l,6),z=i(x);z.__click=()=>u(M,!1);var U=o(z,2);U.__click=ne;var L=i(U);at(L,{class:"size-4"}),G(),a(U),a(x),a(S);var y=o(S,2);y.__click=()=>u(M,!1),a(W),f(E,W)};j(te,E=>{t(M)&&E(re)})}f(Re,se),He()}Ne(["click"]);var Zt=b('<div class="mx-auto mb-2 max-w-sm"><label class="input input-sm w-full"><input type="text" class="grow text-center"/></label></div>'),Gt=b('<button type="button"> </button>'),Yt=b('<div class="mx-auto mt-2 max-w-sm"><textarea class="textarea textarea-bordered textarea-xs w-full text-center" rows="2" placeholder="Ajouter une description..."></textarea></div>'),$t=b('<span class="no-print opacity-50">(Cliquez pour ajouter une description)</span>'),ea=b('<div class="flex items-center justify-center gap-2 px-4"><button type="button"><!></button> <button class="no-print btn btn-ghost btn-circle btn-xs hover:bg-error/10 hover:text-error opacity-0 transition-opacity group-hover/desc:opacity-100" title="Masquer la description"><!></button></div>'),ta=b('<div class="description-container group/desc relative mx-auto max-w-xl text-center"><!></div>'),aa=b("<span> </span>"),na=b('<div class="mt-3 flex flex-wrap justify-center gap-2"></div>'),ia=b('<div class="text-xs"><span class="text-[0.6rem] font-bold tracking-widest uppercase">Attention:</span> <span> </span></div>'),ra=b(`<div class="mx-auto mt-1 max-w-sm"><textarea class="textarea textarea-bordered textarea-xs w-full text-center" rows="3" placeholder="Liste d'ingrédients séparés par des virgules..."></textarea> <p class="mt-1 text-[0.5rem] tracking-tighter uppercase opacity-50">Entrée pour valider · Maj+Entrée pour nouvelle ligne</p></div>`),oa=b('<button type="button"> </button>'),sa=b('<div class="text-xs"><span class="text-[0.6rem] font-bold tracking-widest uppercase">Ingrédients:</span> <!></div>'),la=b('<div class="recipe-container mb-6 svelte-ryaxea"><div class="recipe-actions no-print flex gap-1 svelte-ryaxea"><button class="btn btn-ghost btn-circle hover:bg-error/10 hover:text-error transition-colors" title="Masquer la recette"><!></button></div> <div class="recipe-content bg-transparent p-0 text-center"><!> <!> <!> <div class="mt-3 space-y-1 text-black"><!> <!></div></div></div>');function ca(Re,e){qe(e,!0);let r=X(void 0),h=X(void 0),ae=X(void 0),M=X(Se(e.name)),q=X(!1),A=X(!1),ne=X(""),N=X("");function se(){u(M,e.name,!0),e.onStartEdit(e.recipeKey),setTimeout(()=>{t(r)?.focus(),t(r)?.select()},0)}function ee(){e.onUpdateName(e.recipeKey,t(M)),e.onFinishEdit()}function _e(l){l.key==="Enter"?ee():l.key==="Escape"&&(u(M,e.name,!0),e.onFinishEdit())}function ve(){u(ne,t(C).join(", "),!0),u(q,!0),setTimeout(()=>{t(h)?.focus()},0)}function he(){if(!t(q))return;const l=t(ne).split(/[,;\n]/),D=Array.from(new Set(l.map(x=>x.trim()).filter(x=>x.length>0).map(x=>x.toLowerCase().replace(/\b\w/g,z=>z.toUpperCase()))));e.onUpdateIngredients(e.recipeKey,D),u(q,!1)}function ge(l){l.key==="Enter"&&!l.shiftKey?(l.preventDefault(),he()):l.key==="Escape"&&u(q,!1)}function le(){u(N,t(R),!0),u(A,!0),setTimeout(()=>{t(ae)?.focus()},0)}function ce(){t(A)&&(e.onUpdateDescription(e.recipeKey,t(N).trim()),u(A,!1))}function xe(l){l.key==="Enter"&&!l.shiftKey?(l.preventDefault(),ce()):l.key==="Escape"&&u(A,!1)}let R=H(()=>e.customDescription??e.recipeData?.description??""),C=H(()=>e.customIngredients?e.customIngredients:e.recipeData?.ingredients?e.recipeData.ingredients.map(l=>l.name):[]),J=H(()=>{if(!e.recipeData?.ingredients)return[];const l=new Rt;return e.recipeData.ingredients.forEach(D=>{D.allergens?.forEach(x=>l.add(x))}),Array.from(l)}),Z=H(()=>e.recipeData?.regime?e.recipeData.regime:[]);function te(l){return`font-size: ${["1.5rem","2rem","2.5rem","3.2rem"][l]||"2.5rem"}`}function re(l){return`font-size: ${["0.7rem","0.85rem","1rem","1.2rem"][l]||"1rem"}`}var E=Ie(),W=oe(E);{var S=l=>{var D=la(),x=i(D),z=i(x);z.__click=()=>e.onToggle(e.recipeKey);var U=i(z);it(U,{}),a(z),a(x);var L=o(x,2),y=i(L);{var V=d=>{var c=Zt(),k=i(c),_=i(k);ue(_),_.__keydown=_e,Ye(_,p=>u(r,p),()=>t(r)),a(k),a(c),$e("blur",_,ee),Ae(_,()=>t(M),p=>u(M,p)),f(d,c)},F=d=>{var c=Gt();let k;c.__click=se;var _=i(c,!0);a(c),Y(p=>{k=$(c,1,"recipe-title mb-2 block w-full border-none bg-transparent p-0 text-center text-lg text-black transition-colors hover:bg-black/5 svelte-ryaxea",null,k,{"cursor-pointer":!e.isEditing,"montserrat-font":e.config.fontRecettes==="montserrat-font","playfair-display":e.config.fontRecettes==="playfair-display","oswald-font":e.config.fontRecettes==="oswald-font","quicksand-font":e.config.fontRecettes==="quicksand-font","dancing-script":e.config.fontRecettes==="dancing-script","pacifico-regular":e.config.fontRecettes==="pacifico-regular","caveat-font":e.config.fontRecettes==="caveat-font","gluten-font":e.config.fontRecettes==="gluten-font","font-bold":e.config.boldRecettes,italic:e.config.italicRecettes}),De(c,p),ie(_,e.name)},[()=>te(e.config.fontSizeRecettes)]),f(d,c)};j(y,d=>{e.isEditing?d(V):d(F,!1)})}var O=o(y,2);{var g=d=>{var c=ta(),k=i(c);{var _=T=>{var P=Yt(),B=i(P);rt(B),B.__keydown=xe,Ye(B,Q=>u(ae,Q),()=>t(ae)),a(P),$e("blur",B,ce),Ae(B,()=>t(N),Q=>u(N,Q)),f(T,P)},p=T=>{var P=ea(),B=i(P);let Q;B.__click=le;var pe=i(B);{var be=me=>{var we=Et();Y(()=>ie(we,t(R))),f(me,we)},de=me=>{var we=$t();f(me,we)};j(pe,me=>{t(R)?me(be):me(de,!1)})}a(B);var Ce=o(B,2);Ce.__click=()=>e.onToggleDescription(e.recipeKey);var ye=i(Ce);it(ye,{class:"h-3 w-3 opacity-50"}),a(Ce),a(P),Y(me=>{Q=$(B,1,"recipe-description block border-none bg-transparent p-0 text-sm text-black opacity-90 transition-colors hover:bg-black/5 svelte-ryaxea",null,Q,{"cursor-pointer":!t(A),"montserrat-font":e.config.fontDesc==="montserrat-font","playfair-display":e.config.fontDesc==="playfair-display","oswald-font":e.config.fontDesc==="oswald-font","quicksand-font":e.config.fontDesc==="quicksand-font","dancing-script":e.config.fontDesc==="dancing-script","pacifico-regular":e.config.fontDesc==="pacifico-regular","caveat-font":e.config.fontDesc==="caveat-font","gluten-font":e.config.fontDesc==="gluten-font","font-bold":e.config.boldDesc,italic:e.config.italicDesc}),De(B,me)},[()=>re(e.config.fontSizeDesc)]),f(T,P)};j(k,T=>{t(A)?T(_):T(p,!1)})}a(c),f(d,c)};j(O,d=>{(e.config.showDescription||t(A))&&(e.descriptionVisible||t(A))&&d(g)})}var n=o(O,2);{var s=d=>{var c=na();Ee(c,20,()=>t(Z),k=>k,(k,_)=>{var p=aa();let T;var P=i(p,!0);a(p),Y(B=>{T=$(p,1,`border-black
              bg-transparent
              font-medium
              text-black`,null,T,{"montserrat-font":e.config.fontRegimes==="montserrat-font","playfair-display":e.config.fontRegimes==="playfair-display","oswald-font":e.config.fontRegimes==="oswald-font","quicksand-font":e.config.fontRegimes==="quicksand-font","dancing-script":e.config.fontRegimes==="dancing-script","pacifico-regular":e.config.fontRegimes==="pacifico-regular","caveat-font":e.config.fontRegimes==="caveat-font","gluten-font":e.config.fontRegimes==="gluten-font","font-bold":e.config.boldRegimes,italic:e.config.italicRegimes}),De(p,B),ie(P,_)},[()=>re(e.config.fontSizeRegimes)]),f(k,p)}),a(c),f(d,c)};j(n,d=>{e.config.showRegimes&&t(Z).length>0&&d(s)})}var m=o(n,2),w=i(m);{var K=d=>{var c=ia(),k=o(i(c),2);let _;var p=i(k,!0);a(k),a(c),Y((T,P)=>{De(k,T),_=$(k,1,"opacity-80",null,_,{"montserrat-font":e.config.fontAlert==="montserrat-font","playfair-display":e.config.fontAlert==="playfair-display","oswald-font":e.config.fontAlert==="oswald-font","quicksand-font":e.config.fontAlert==="quicksand-font","dancing-script":e.config.fontAlert==="dancing-script","pacifico-regular":e.config.fontAlert==="pacifico-regular","caveat-font":e.config.fontAlert==="caveat-font","gluten-font":e.config.fontAlert==="gluten-font","font-bold":e.config.boldAlert,italic:e.config.italicAlert}),ie(p,P)},[()=>re(e.config.fontSizeAlert),()=>t(J).join(", ")]),f(d,c)};j(w,d=>{e.config.showAllergens&&t(J).length>0&&d(K)})}var I=o(w,2);{var v=d=>{var c=sa(),k=o(i(c),2);{var _=T=>{var P=ra(),B=i(P);rt(B),B.__keydown=ge,Ye(B,Q=>u(h,Q),()=>t(h)),G(2),a(P),$e("blur",B,he),Ae(B,()=>t(ne),Q=>u(ne,Q)),f(T,P)},p=T=>{var P=oa();let B;P.__click=ve;var Q=i(P,!0);a(P),Y((pe,be)=>{B=$(P,1,"mx-auto block border-none bg-transparent p-0 text-xs font-normal capitalize decoration-dotted opacity-80 transition-colors hover:bg-black/5 hover:underline",null,B,{"cursor-pointer":!t(q),"montserrat-font":e.config.fontIng==="montserrat-font","playfair-display":e.config.fontIng==="playfair-display","oswald-font":e.config.fontIng==="oswald-font","quicksand-font":e.config.fontIng==="quicksand-font","dancing-script":e.config.fontIng==="dancing-script","pacifico-regular":e.config.fontIng==="pacifico-regular","caveat-font":e.config.fontIng==="caveat-font","gluten-font":e.config.fontIng==="gluten-font","font-bold":e.config.boldIng,italic:e.config.italicIng}),De(P,pe),ie(Q,be)},[()=>re(e.config.fontSizeIng),()=>t(C).join(", ")]),f(T,P)};j(k,T=>{t(q)?T(_):T(p,!1)})}a(c),f(d,c)};j(I,d=>{e.config.showIngredients&&(t(C).length>0||t(q))&&d(v)})}a(m),a(L),a(D),f(l,D)};j(W,l=>{e.visible&&l(S)})}f(Re,E),He()}Ne(["click","keydown"]);var da=b("<div> </div>"),fa=b("<p> </p>"),ua=b("<p> </p>"),va=b('<div class="separator mx-auto my-6 w-48 border-t border-black opacity-20 svelte-dikxtg"></div>'),ga=b('<div class="mb-8 text-center"><!> <!> <!></div>'),ba=b("<h3> </h3>"),ma=b('<div class="category-block mb-10 svelte-dikxtg"><!> <div class="recipes-grid avoid-break-inside"></div></div>'),_a=b("<div> </div>"),pa=b('<div><div class="group absolute top-4 right-4 print:hidden"><button class="btn btn-circle opacity-60 transition-opacity hover:opacity-100" title="Imprimer cette page"><!></button></div> <div><!> <!> <!> <div><!></div></div></div>'),ha=b('<button class="btn btn-secondary btn-outline flex h-auto max-w-20 flex-col py-3" title="Afficher la recette"><!> <span> </span></button>'),xa=b('<button class="btn btn-secondary btn-outline flex h-auto flex-col py-3" title="Afficher la description"><!> <span><span class="font-bold italic">Desc:</span> </span></button>'),ya=b("<!> <!>",1),wa=b('<div class="grid grid-cols-[1fr_auto] items-start gap-4 md:p-2 svelte-dikxtg"><div class="flex flex-col items-end gap-8 svelte-dikxtg"></div> <div class="m-auto flex flex-col gap-4 print:hidden svelte-dikxtg"></div></div>');function ka(Re,e){qe(e,!0);let r=Se({}),h=Se({}),ae=Se({});function M(R,C){r[R]=C}function q(R,C){h[R]=C}function A(R){const C=ae[R]??!0;ae[R]=!C}let ne=H(()=>e.date.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"})),N=H(()=>{const R=new Fe;return e.meals.forEach(C=>{C.recipes.forEach(J=>{const Z=J.typeR||"autre";R.has(Z)||R.set(Z,[]),R.get(Z).push({...J,mealId:C.id,guests:C.guests})})}),R}),se=["entree","plat","dessert"],ee=H(()=>Array.from(t(N).keys()).sort((C,J)=>{const Z=se.indexOf(C),te=se.indexOf(J);return Z!==-1&&te!==-1?Z-te:Z!==-1?-1:te!==-1?1:C.localeCompare(J)}));function _e(R){return{entree:"Entrée",plat:"Plat",dessert:"Dessert",autre:"Autre"}[R]||R}function ve(R){return`font-size: ${["1.5rem","2rem","2.5rem","3.2rem"][R]||"2.5rem"}`}function he(R){return`font-size: ${["1.3rem","1.7rem","2rem","2.5rem"][R]||"2.5rem"}`}let ge=H(()=>e.config.catPageBreak?t(ee).map((R,C)=>({categories:[R],isFirst:C===0,isLast:C===t(ee).length-1})):[{categories:t(ee),isFirst:!0,isLast:!0}]);var le=wa(),ce=i(le);Ee(ce,21,()=>t(ge),Ve,(R,C,J)=>{const Z=H(()=>J===0?e.sectionId:`${e.sectionId}-page-${J}`);var te=pa(),re=i(te),E=i(re);E.__click=()=>e.onPrintThis(J===0?e.sectionId:`${e.sectionId}-page-${J}`);var W=i(E);dt(W,{class:"h-4 w-4"}),a(E),a(re);var S=o(re,2);let l;var D=i(S);{var x=g=>{var n=da();let s;var m=i(n,!0);a(n),Y(w=>{s=$(n,1,"mb-8 text-center",null,s,{"montserrat-font":e.config.fontTop==="montserrat-font","playfair-display":e.config.fontTop==="playfair-display","oswald-font":e.config.fontTop==="oswald-font","quicksand-font":e.config.fontTop==="quicksand-font","dancing-script":e.config.fontTop==="dancing-script","pacifico-regular":e.config.fontTop==="pacifico-regular","caveat-font":e.config.fontTop==="caveat-font","gluten-font":e.config.fontTop==="gluten-font","font-bold":e.config.boldTop,italic:e.config.italicTop}),De(n,w),ie(m,e.config.messageTop)},[()=>he(e.config.fontSizeTop)]),f(g,n)};j(D,g=>{e.config.messageTop&&(t(C).isFirst||e.config.dateByPageBreak)&&g(x)})}var z=o(D,2);{var U=g=>{var n=ga(),s=i(n);{var m=d=>{var c=fa();let k;var _=i(c,!0);a(c),Y(p=>{k=$(c,1,"m-0 text-center text-3xl",null,k,{"montserrat-font":e.config.fontDate==="montserrat-font","gluten-font":e.config.fontDate==="gluten-font","pacifico-regular":e.config.fontDate==="pacifico-regular","font-bold":e.config.boldDate,italic:e.config.italicDate}),De(c,p),ie(_,t(ne))},[()=>ve(e.config.fontSizeDate)]),f(d,c)};j(s,d=>{e.config.showDate&&d(m)})}var w=o(s,2);{var K=d=>{var c=ua();let k;var _=i(c,!0);a(c),Y(p=>{k=$(c,1,"m-0 text-center text-3xl",null,k,{"montserrat-font":e.config.fontHoraire==="montserrat-font","playfair-display":e.config.fontHoraire==="playfair-display","oswald-font":e.config.fontHoraire==="oswald-font","quicksand-font":e.config.fontHoraire==="quicksand-font","dancing-script":e.config.fontHoraire==="dancing-script","pacifico-regular":e.config.fontHoraire==="pacifico-regular","caveat-font":e.config.fontHoraire==="caveat-font","gluten-font":e.config.fontHoraire==="gluten-font","font-bold":e.config.boldHoraire,italic:e.config.italicHoraire}),De(c,p),ie(_,e.horaire)},[()=>ve(e.config.fontSizeHoraire)]),f(d,c)};j(w,d=>{e.config.showHoraire&&d(K)})}var I=o(w,2);{var v=d=>{var c=va();f(d,c)};j(I,d=>{(e.config.showHoraire||e.config.showDate)&&d(v)})}a(n),f(g,n)};j(z,g=>{(t(C).isFirst||e.config.dateByPageBreak)&&g(U)})}var L=o(z,2);Ee(L,16,()=>t(C).categories,g=>g,(g,n)=>{var s=ma(),m=i(s);{var w=I=>{var v=ba();let d;var c=i(v,!0);a(v),Y((k,_)=>{d=$(v,1,"mb-6 text-center text-xl tracking-widest uppercase opacity-60",null,d,{"montserrat-font":e.config.fontCat==="montserrat-font","playfair-display":e.config.fontCat==="playfair-display","oswald-font":e.config.fontCat==="oswald-font","quicksand-font":e.config.fontCat==="quicksand-font","dancing-script":e.config.fontCat==="dancing-script","pacifico-regular":e.config.fontCat==="pacifico-regular","caveat-font":e.config.fontCat==="caveat-font","gluten-font":e.config.fontCat==="gluten-font","font-bold":e.config.boldCat,italic:e.config.italicCat}),De(v,k),ie(c,_)},[()=>ve(e.config.fontSizeCat),()=>_e(n)]),f(I,v)};j(m,I=>{e.config.showCategories&&I(w)})}var K=o(m,2);Ee(K,21,()=>t(N).get(n)??[],I=>I.recipeUuid,(I,v)=>{const d=H(()=>`${e.dateKey}${e.horaire}_${t(v).recipeUuid}`),c=H(()=>e.recipeVisibility[t(d)]??!0),k=H(()=>e.recipeNames[t(d)]||Le.getRecipeIndexByUuid(t(v).recipeUuid)?.title||t(v).recipeUuid),_=H(()=>e.recipesDetails.find(Q=>Q.$id===t(v).recipeUuid)||null),p=H(()=>ae[t(d)]??!0);var T=Ie(),P=oe(T);{var B=Q=>{{let pe=H(()=>r[t(d)]||null),be=H(()=>h[t(d)]||null),de=H(()=>e.editingRecipe===t(d));ca(Q,{get recipeKey(){return t(d)},get recipeUuid(){return t(v).recipeUuid},get plates(){return t(v).plates},get typeR(){return t(v).typeR},get category(){return n},get config(){return e.config},get visible(){return t(c)},get name(){return t(k)},get recipeData(){return t(_)},get customIngredients(){return t(pe)},get customDescription(){return t(be)},get descriptionVisible(){return t(p)},get isEditing(){return t(de)},get onToggle(){return e.onToggleRecipe},get onStartEdit(){return e.onStartEditRecipe},get onFinishEdit(){return e.onFinishEditRecipe},get onUpdateName(){return e.onUpdateRecipeName},onUpdateIngredients:M,onUpdateDescription:q,onToggleDescription:A})}};j(P,Q=>{t(c)&&Q(B)})}f(I,T)}),a(K),a(s),f(g,s)});var y=o(L,2);let V;var F=i(y);{var O=g=>{var n=_a();let s;var m=i(n,!0);a(n),Y(w=>{s=$(n,1,"text-center opacity-60",null,s,{"montserrat-font":e.config.fontBottom==="montserrat-font","playfair-display":e.config.fontBottom==="playfair-display","oswald-font":e.config.fontBottom==="oswald-font","quicksand-font":e.config.fontBottom==="quicksand-font","dancing-script":e.config.fontBottom==="dancing-script","pacifico-regular":e.config.fontBottom==="pacifico-regular","caveat-font":e.config.fontBottom==="caveat-font","gluten-font":e.config.fontBottom==="gluten-font","font-bold":e.config.boldBottom,italic:e.config.italicBottom}),De(n,w),ie(m,e.config.messageBottom)},[()=>he(e.config.fontSizeBottom)]),f(g,n)};j(F,g=>{e.config.messageBottom&&g(O)})}a(y),a(S),a(te),Y(()=>{St(te,"id",t(Z)),$(te,1,`meal-poster-section relative flex max-w-svw bg-white
        shadow-2xl transition-shadow ${e.currentPrintTarget!==null&&e.currentPrintTarget!==t(Z)&&"no-print"}`,"svelte-dikxtg"),l=$(S,1,"poster-content text-black svelte-dikxtg",null,l,{"centered-content":e.config.centerVertical}),V=$(y,1,"pt-8",null,V,{"mt-auto":!e.config.centerVertical})}),f(R,te)}),a(ce);var xe=o(ce,2);Ee(xe,21,()=>t(ee),Ve,(R,C)=>{var J=Ie(),Z=oe(J);Ee(Z,17,()=>t(N).get(t(C))??[],Ve,(te,re)=>{const E=H(()=>`${e.dateKey}${e.horaire}_${t(re).recipeUuid}`),W=H(()=>e.recipeVisibility[t(E)]??!0),S=H(()=>ae[t(E)]??!0),l=H(()=>e.getRecipeName(t(E),Le.getRecipeIndexByUuid(t(re).recipeUuid)?.title||"Recette"));var D=ya(),x=oe(D);{var z=y=>{var V=ha();V.__click=()=>e.onToggleRecipe(t(E));var F=i(V);pt(F,{class:"size-5"});var O=o(F,2),g=i(O,!0);a(O),a(V),Y(()=>ie(g,t(l))),f(y,V)};j(x,y=>{t(W)||y(z)})}var U=o(x,2);{var L=y=>{var V=xa();V.__click=()=>A(t(E));var F=i(V);ht(F,{class:"size-5"});var O=o(F,2),g=o(i(O));a(O),a(V),Y(()=>ie(g,` ${t(l)??""}`)),f(y,V)};j(U,y=>{t(W)&&!t(S)&&y(L)})}f(te,D)}),f(R,J)}),a(xe),a(le),f(Re,le),He()}Ne(["click"]);var Da=b('<div class="bg-base-200 flex-1 overflow-auto p-4 print:m-0 print:overflow-visible print:p-0"><div class="mx-auto max-w-5xl print:m-0 print:w-full print:max-w-none"></div></div>');function Ra(Re,e){qe(e,!0);let r=H(()=>{const M=[];return e.groupedMeals.forEach((q,A)=>{q.forEach((ne,N)=>{M.push({dateKey:A,date:new Date(A),horaire:N,meals:ne})})}),M.sort((q,A)=>q.date.getTime()-A.date.getTime())});var h=Da(),ae=i(h);Ee(ae,21,()=>t(r),M=>M.dateKey+M.horaire,(M,q)=>{const A=H(()=>`affiche${t(q).dateKey}${t(q).horaire}`);ka(M,{get sectionId(){return t(A)},get dateKey(){return t(q).dateKey},get date(){return t(q).date},get horaire(){return t(q).horaire},get meals(){return t(q).meals},get config(){return e.config},get currentPrintTarget(){return e.currentPrintTarget},get recipesDetails(){return e.recipesDetails},get recipeVisibility(){return e.recipeVisibility},get recipeNames(){return e.recipeNames},get editingRecipe(){return e.editingRecipe},get onPrintThis(){return e.printThis},get onToggleRecipe(){return e.toggleRecipeVisibility},get onStartEditRecipe(){return e.startEditingRecipe},get onFinishEditRecipe(){return e.finishEditingRecipe},get onUpdateRecipeName(){return e.updateRecipeName},get getRecipeName(){return e.getRecipeName}})}),a(ae),a(h),f(Re,h),He()}var Ea=b('<button class="btn btn-primary gap-2"><!> Imprimer tout</button>'),Sa=b('<div class="flex min-h-[60vh] items-center justify-center"><div class="loading loading-spinner loading-lg text-primary"></div></div>'),Ia=b('<div class="container mx-auto p-4"><div class="alert alert-error max-md:alert-vertical"><!> <span> </span></div></div>'),Ca=b('<div class="flex min-h-[60vh] items-center justify-center"><div class="alert alert-info alert-vertical"><!> <p class="text-lg">Aucune recette pour le moment</p></div></div>'),Ba=b('<!> <div class="bg-base-200 min-h-screen print:h-auto print:min-h-0"><div class="mx-auto px-4 py-4 print:hidden"><!></div> <div><!></div></div>',1);function Ua(Re,e){qe(e,!0);const r=n=>{var s=Ea();s.__click=S;var m=i(s);dt(m,{class:"h-5 w-5"}),G(),a(s),f(n,s)};let h=H(()=>Be.getEventById(e.params.id));const ae=H(()=>t(h)?.status==="local"?"/demo/event":"/dashboard/eventEdit");let M=X(!1),q=X(null),A=X(Se([])),ne=X(!1),N=X(Se({showDate:!0,showHoraire:!0,showDescription:!1,showCategories:!0,showRecipes:!0,showRegimes:!1,showAllergens:!1,showIngredients:!1,catPageBreak:!1,dateByPageBreak:!1,messageTop:"",fontTop:"montserrat-font",fontSizeTop:1,boldTop:!1,italicTop:!1,messageBottom:"",fontBottom:"montserrat-font",fontSizeBottom:1,boldBottom:!1,italicBottom:!1,fontDate:"montserrat-font",fontSizeDate:1,boldDate:!1,italicDate:!1,fontHoraire:"montserrat-font",fontSizeHoraire:1,boldHoraire:!1,italicHoraire:!1,fontCat:"montserrat-font",fontSizeCat:1,boldCat:!1,italicCat:!1,fontRecettes:"pacifico-regular",fontSizeRecettes:2,boldRecettes:!1,italicRecettes:!1,fontDesc:"montserrat-font",fontSizeDesc:1,boldDesc:!1,italicDesc:!1,fontRegimes:"montserrat-font",fontSizeRegimes:1,boldRegimes:!1,italicRegimes:!1,fontAlert:"montserrat-font",fontSizeAlert:1,boldAlert:!1,italicAlert:!1,fontIng:"montserrat-font",fontSizeIng:1,boldIng:!1,italicIng:!1,centerVertical:!0})),se=X(Se([])),ee=X(null),_e=X(null),ve=X(!1);const he=H(()=>{if(!t(h))return!1;const n=fe.userId||"";return t(h).createdBy===n?!0:t(h).contributors?.find(m=>m.id===n)?.status==="accepted"});let ge=Se({}),le=Se({}),ce=X(null),xe=H(()=>{if(!t(h)?.meals)return new Fe;const n=new Fe;return t(h).meals.forEach(s=>{const m=new Date(s.date),w=m.toISOString().split("T")[0],K=m.getHours(),I=K<12?"Petit-déjeuner":K<14?"Déjeuner":K<18?"Goûter":"Dîner";n.has(w)||n.set(w,new Fe);const v=n.get(w);v.has(I)||v.set(I,[]),v.get(I).push(s)}),n});It(()=>{(async()=>{if(await Bt(),!await zt(e.params.id)){u(q,"Événement non trouvé"),u(M,!1);return}if(!t(h)){u(M,!0);try{await Be.fetchEvent(e.params.id)}catch(s){u(q,s instanceof Error?s.message:"Erreur de chargement",!0)}finally{u(M,!1)}}await R()})()});async function R(){try{const n=await Be.loadPosterConfig(e.params.id);n&&(console.log("[EventPoster] Configuration chargée depuis le cache"),n.current?(u(N,{...t(N),...n.current},!0),u(se,n.versions||[],!0)):(u(N,{...t(N),...n},!0),u(se,[],!0)))}catch(n){console.error("[EventPoster] Erreur chargement config cache:",n)}}async function C(){try{await Be.savePosterConfig(e.params.id,lt(t(N))),fe.toast.success("Configuration sauvegardée",{details:"Les réglages courants sont enregistrés localement."})}catch(n){console.error("[EventPoster] Erreur sauvegarde config cache:",n),fe.toast.error("Erreur de sauvegarde",{details:"Impossible d'enregistrer la configuration localement."})}}async function J(){try{const n=new Date,m=`Version du ${new Intl.DateTimeFormat("fr-FR",{dateStyle:"short",timeStyle:"short"}).format(n)}`,w=await Be.createPosterVersion(e.params.id,lt(t(N)),m);await R(),w&&u(ee,w.id,!0),fe.toast.success("Version créée",{details:"Une nouvelle version de la configuration a été archivée."})}catch(n){console.error("[EventPoster] Erreur création version:",n),fe.toast.error("Erreur de création",{details:n.message||"Impossible de créer une nouvelle version."})}}async function Z(n){try{await Be.deletePosterVersion(e.params.id,n),u(se,t(se).filter(s=>s.id!==n),!0),t(ee)===n&&u(ee,null),fe.toast.success("Version supprimée",{details:"La version archivée a été supprimée."})}catch(s){console.error("[EventPoster] Erreur suppression version:",s),fe.toast.error("Erreur de suppression",{details:"Impossible de supprimer la version."})}}function te(n){u(N,{...t(N),...n.config},!0),u(ee,n.id,!0),fe.toast.info("Version chargée",{details:`La configuration "${n.name}" a été appliquée.`})}ot(()=>{if(!t(h)||t(M))return;if(!(t(h).meals&&t(h).meals.some(s=>s.recipes&&s.recipes.length>0))){u(ne,!1);return}t(A).length===0&&!t(ne)&&re().then(()=>{E()})});async function re(){if(!t(h)?.meals)return;const n=t(h).meals.flatMap(s=>s.recipes.map(m=>m.recipeUuid));if(n.length===0){u(ne,!1);return}u(ne,!0);try{console.log(`[EventPoster] Loading ${n.length} recipes (bulk mode)...`);const s=await Le.getRecipesByUuidsBulk(n);u(A,Array.from(s.values()).filter(m=>m!==null),!0),console.log(`[EventPoster] Loaded ${t(A).length}/${n.length} recipes in bulk`),console.log("[EventPoster] Recipe IDs:",t(A).map(m=>m.$id))}catch(s){console.error("Erreur lors du chargement des recettes:",s)}finally{u(ne,!1)}}function E(){t(h)?.meals&&t(h).meals.forEach(n=>{const s=new Date(n.date),m=s.toISOString().split("T")[0],w=s.getHours(),K=w<12?"Petit-déjeuner":w<14?"Déjeuner":w<18?"Goûter":"Dîner",I=`${m}${K}`;n.recipes.forEach(v=>{const d=`${I}_${v.recipeUuid}`;ge[d]=!0;const c=Le.getRecipeIndexByUuid(v.recipeUuid);le[d]=c?.title||v.recipeUuid})})}async function W(n){u(_e,n,!0),await st(),setTimeout(()=>{window.print(),u(_e,null)},400)}async function S(){u(_e,null),await st(),setTimeout(()=>{window.print()},400)}function l(n){ge[n]=!ge[n],ge[n]||console.log("to-implement")}function D(n){u(ce,n,!0)}function x(){u(ce,null)}function z(n,s){le[n]=s}function U(n,s){return le[n]||s}function L(){Tt(`${t(ae)}/${e.params.id}`)}async function y(n){if(!(!e.params.id||!fe.userId))try{u(ve,!0);const s=n?"accepted":"declined";await Be.updateContributorStatus(e.params.id,fe.userId,s),fe.toast.success(n?"Invitation acceptée":"Invitation déclinée")}catch(s){console.error("Erreur réponse invitation:",s),fe.toast.error("Erreur lors de la réponse")}finally{u(ve,!1)}}ot(()=>{t(h)&&ct.setConfig({eventId:e.params.id,basePath:t(ae),title:`Affiches : ${t(h).name}`,backAction:L,actions:r})}),Ct(()=>{ct.reset()});var V=Ie(),F=oe(V);{var O=n=>{var s=Sa();f(n,s)},g=n=>{var s=Ie(),m=oe(s);{var w=I=>{var v=Ia(),d=i(v),c=i(d);xt(c,{class:"h-6 w-6 shrink-0"});var k=o(c,2),_=i(k,!0);a(k),a(d),a(v),Y(()=>ie(_,t(q))),f(I,v)},K=I=>{var v=Ie(),d=oe(v);{var c=_=>{var p=Ca(),T=i(p),P=i(T);yt(P,{}),G(2),a(T),a(p),f(_,p)},k=_=>{var p=Ie(),T=oe(p);{var P=B=>{var Q=Ba(),pe=oe(Q);Vt(pe,{bgClass:"bg-base-200",width:"120",children:(we,Ue)=>{{let je=H(()=>!t(he));Jt(we,{get versions(){return t(se)},get activeVersionId(){return t(ee)},onSave:C,onCreateVersion:J,onDeleteVersion:Z,onLoadVersion:te,get disabled(){return t(je)},get config(){return t(N)},set config(ze){u(N,ze,!0)}})}},$$slots:{default:!0}});var be=o(pe,2),de=i(be),Ce=i(de);Pt(Ce,{get currentEvent(){return t(h)},get isBusy(){return t(ve)},onRespond:y}),a(de);var ye=o(de,2),me=i(ye);Ra(me,{get event(){return t(h)},get groupedMeals(){return t(xe)},get config(){return t(N)},get currentPrintTarget(){return t(_e)},get recipesDetails(){return t(A)},get recipeVisibility(){return ge},get recipeNames(){return le},get editingRecipe(){return t(ce)},printThis:W,toggleRecipeVisibility:l,startEditingRecipe:D,finishEditingRecipe:x,updateRecipeName:z,getRecipeName:U}),a(ye),a(be),Y(()=>$(ye,1,`print:m-0 print:p-0 ${fe.isDesktop?"ml-80":""}`)),f(B,Q)};j(T,B=>{t(h)&&B(P)},!0)}f(_,p)};j(d,_=>{!t(h)||t(h).meals&&t(h).meals.length>0&&t(h).meals.every(p=>!p.recipes||p.recipes.length===0)?_(c):_(k,!1)},!0)}f(I,v)};j(m,I=>{t(q)?I(w):I(K,!1)},!0)}f(n,s)};j(F,n=>{t(M)?n(O):n(g,!1)})}f(Re,V),He()}Ne(["click"]);export{Ua as default};
