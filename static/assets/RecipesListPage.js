import{S as ze,X as Pe,F as Be,o as Oe,p as Le,q as Ne,r as Ee,s as Qe,t as je,u as He,v as qe,A as Ke,l as Ue,w as Ge,P as Je}from"./icons.js";import{p as Re,v as u,h as c,R as Xe,b as i,c as ge,d as fe,g as o,B as me,U as Ze,o as n,e as se,k as L,A as ie,m as t,y as ve,u as $,w as y,i as oe,x as T,C as D,K as Y,I as p,j as ae,S as Ae,a9 as Ve,G as le,E as we,L as Ie,aa as ue,a6 as De,z as We,H as Ce,$ as Ye,Z as $e,O as et,ab as tt,D as at,J as ke,P as rt}from"./appwrite.js";import{F as ce}from"./Fieldset.js";import{A as st}from"./AutocompleteInput.js";import{B as nt}from"./BadgeList.js";import{C as Fe}from"./CheckboxBadge.js";import{R as Me}from"./RecipeRegimeBadges.js";import{L as it}from"./LeftPanel.js";import{r as Se}from"./RecipeDataStore.svelte.js";import{n as Te,f as ot}from"./index.js";import"./keyboardNavigation.svelte.js";var lt=u('<div><label class="input input-lg w-full"><!> <input type="text" placeholder="Rechercher... (parmi les titres, auteur·ices, spécialités. Désactive les filtres sélectionnés)"/> <button class="btn btn-circle" title="Effacer la recherche"><!></button></label></div>');function dt(ee,a){fe(a,!0);let s=Re(a,"searchQuery",15);var d=lt(),O=o(d),S=o(O);ze(S,{class:"h-5 w-5 opacity-50"});var N=c(S,2);Ze(N);var H=c(N,2);H.__click=function(...q){a.onReset?.apply(this,q)};var E=o(H);Pe(E,{class:"h-5 w-5"}),n(H),n(O),n(d),Xe(N,s),i(ee,d),ge()}me(["click"]);var ct=u('<div class="flex flex-wrap gap-3"></div>'),vt=u('<div class="flex flex-wrap gap-3"></div>'),ut=u('<div class="mb-3"><!></div> <div><div class="mb-2 text-xs font-medium"> </div> <!></div>',1),bt=u('<div class="bg-base-100 flex gap-1 rounded-xl p-2 font-semibold"><button type="button" aria-label="Toutes">Toutes</button> <button type="button" aria-label="Testées">Testées</button> <button type="button" aria-label="Non testées">À tester</button></div>'),_t=u('<div class="bg-base-100 flex gap-1 rounded-xl p-2 font-semibold"><button type="button" aria-label="Indifférent">Indifférent</button> <button type="button" aria-label="Servir chaud">Chaud</button> <button type="button" aria-label="Servir froid">Froid</button></div>'),gt=u('<div class="bg-base-100 flex gap-1 rounded-xl p-2 font-semibold"><button type="button" aria-label="Indifférent">Indifférent</button> <button type="button" aria-label="Avec cuisson">Avec</button> <button type="button" aria-label="Sans cuisson">Sans</button></div>'),ft=u('<div class="bg-base-100 flex flex-wrap gap-1 rounded-xl p-2 font-semibold"><button type="button" aria-label="Indifférent">Toutes</button> <button type="button" aria-label="Printemps">Printemps</button> <button type="button" aria-label="Été">Été</button> <button type="button" aria-label="Automne">Automne</button> <button type="button" aria-label="Hiver">Hiver</button></div>'),mt=u('<div><div class="mb-4 flex items-center justify-between"><h4 class="text-lg font-bold">Filtres</h4> <button class="btn btn-warning btn-sm"><!> Effacer</button></div> <!> <!> <!> <!> <!> <!> <!></div>');function pt(ee,a){fe(a,!0);let s=Re(a,"filters",15),d=Re(a,"disabled",3,!1);function O(v,h){const l=v.indexOf(h);l===-1?v.push(h):v.splice(l,1),s({...s()})}let S=ve("");function N(v){s().ingredients.includes(v)||(s().ingredients.push(v),s({...s()}))}function H(v,h){const l=s().ingredients.indexOf(v);l!==-1&&(s().ingredients.splice(l,1),s({...s()}))}let E=$(()=>a.availableIngredients.filter(v=>!s().ingredients.includes(v)));var q=mt();let re;var te=o(q),Z=c(o(te),2);Z.__click=function(...v){a.onReset?.apply(this,v)};var w=o(Z);Be(w,{class:"h-4 w-4"}),Y(),n(Z),n(te);var z=c(te,2);ce(z,{legend:"Catégories",get iconComponent(){return Oe},children:(v,h)=>{var l=ct();se(l,21,()=>a.availableCategories,oe,(g,_)=>{{let m=$(()=>s().categories.includes(t(_)));Fe(g,{get checked(){return t(m)},get label(){return t(_)},onchange:()=>O(s().categories,t(_)),get disabled(){return d()}})}}),n(l),i(v,l)},$$slots:{default:!0}});var K=c(z,2);ce(K,{legend:"Régimes",get iconComponent(){return Le},children:(v,h)=>{var l=vt();se(l,21,()=>a.availableRegimes,oe,(g,_)=>{{let m=$(()=>s().regimes.includes(t(_)));Fe(g,{get checked(){return t(m)},get label(){return t(_)},onchange:()=>O(s().regimes,t(_)),get disabled(){return d()}})}}),n(l),i(v,l)},$$slots:{default:!0}});var U=c(K,2);ce(U,{legend:"Ingrédients",get iconComponent(){return Ne},children:(v,h)=>{var l=ut(),g=L(l),_=o(g);st(_,{get items(){return t(E)},onSelect:N,placeholder:"Ajouter un ingrédient...",get disabled(){return d()},minQueryLength:1,get value(){return t(S)},set value(G){ie(S,G,!0)}}),n(g);var m=c(g,2),P=o(m),R=o(P);n(P);var Q=c(P,2);nt(Q,{get items(){return s().ingredients},onRemove:H,badgeClass:"badge-success",get disabled(){return d()},itemKey:(G,W)=>G}),n(m),y(()=>T(R,`Ingrédients sélectionnés (${s().ingredients.length??""})`)),i(v,l)},$$slots:{default:!0}});var X=c(U,2);ce(X,{legend:"Testé",children:(v,h)=>{var l=bt(),g=o(l);g.__click=()=>s(s().testedStatus="all",!0);var _=c(g,2);_.__click=()=>s(s().testedStatus="tested",!0);var m=c(_,2);m.__click=()=>s(s().testedStatus="untested",!0),n(l),y(()=>{D(g,1,`btn btn-sm flex-1 ${s().testedStatus==="all"&&"btn-secondary"}`),D(_,1,`btn btn-sm flex-1 ${s().testedStatus==="tested"&&"btn-success"}`),D(m,1,`btn btn-sm flex-1 ${s().testedStatus==="untested"&&"btn-error"}`)}),i(v,l)},$$slots:{default:!0}});var F=c(X,2);ce(F,{legend:"Service",get iconComponent(){return Ee},children:(v,h)=>{var l=_t(),g=o(l);g.__click=()=>s(s().temperature="",!0);var _=c(g,2);_.__click=()=>s(s().temperature="Chaud",!0);var m=c(_,2);m.__click=()=>s(s().temperature="Froid",!0),n(l),y(()=>{D(g,1,`btn btn-sm flex-1 ${s().temperature===""&&"btn-secondary"}`),D(_,1,`btn btn-sm flex-1 ${s().temperature==="Chaud"&&"btn-error"}`),D(m,1,`btn btn-sm flex-1 ${s().temperature==="Froid"&&"btn-info"}`)}),i(v,l)},$$slots:{default:!0}});var M=c(F,2);ce(M,{legend:"Cuisson",get iconComponent(){return Qe},children:(v,h)=>{var l=gt(),g=o(l);g.__click=()=>s(s().cuisson="",!0);var _=c(g,2);_.__click=()=>s(s().cuisson="Oui",!0);var m=c(_,2);m.__click=()=>s(s().cuisson="Non",!0),n(l),y(()=>{D(g,1,`btn btn-sm flex-1 ${s().cuisson===""&&"btn-secondary"}`),D(_,1,`btn btn-sm flex-1 ${s().cuisson==="Oui"&&"btn-warning"}`),D(m,1,`btn btn-sm flex-1 ${s().cuisson==="Non"&&"btn-success"}`)}),i(v,l)},$$slots:{default:!0}});var V=c(M,2);ce(V,{legend:"Saison",get iconComponent(){return je},children:(v,h)=>{var l=ft(),g=o(l);g.__click=()=>s(s().saison="",!0);var _=c(g,2);_.__click=()=>s(s().saison="printemps",!0);var m=c(_,2);m.__click=()=>s(s().saison="ete",!0);var P=c(m,2);P.__click=()=>s(s().saison="automne",!0);var R=c(P,2);R.__click=()=>s(s().saison="hiver",!0),n(l),y(()=>{D(g,1,`btn btn-sm flex-1 ${s().saison===""&&"btn-secondary"}`),D(_,1,`btn btn-sm flex-1 ${s().saison==="printemps"&&"btn-success"}`),D(m,1,`btn btn-sm flex-1 ${s().saison==="ete"&&"btn-warning"}`),D(P,1,`btn btn-sm flex-1 ${s().saison==="automne"&&"btn-accent"}`),D(R,1,`btn btn-sm flex-1 ${s().saison==="hiver"&&"btn-info"}`)}),i(v,l)},$$slots:{default:!0}}),n(q),y(()=>{re=D(q,1,"mt-13 space-y-4 sm:mt-16",null,re,{"opacity-30":d()}),Z.disabled=d()}),i(ee,q),ge()}me(["click"]);var ht=u(`<span class="font-semibold"> </span> correspondent
          aux critères`,1),xt=u(`<span class="font-semibold"> </span> correspondent
          aux critères`,1),yt=u('<span class="font-semibold"> </span> correspond aux critères',1),wt=u('<span class="font-semibold">1 recette</span> correspond aux critères',1),Ct=u('<span class="text-warning"> </span> ne correspond aux critères...',1),kt=u('<span class="text-warning">Aucune recette</span> ne correspond aux critères...',1),St=u('<legend class="legend text-base-content/70 ms-4"><!></legend>'),Rt=u('<div class="text-base-content/70 text-base"><!></div>'),At=u('<div><span class="text-base-content/60 italic">contient (dans son titre/auteur·ice...) :</span> <span class="font-bold"> </span></div>'),It=u('<span class="badge badge-success"> </span>'),Dt=u('<span class="badge badge-secondary"> </span>'),Ft=u('<span class="badge badge-error text-white">Servir Chaud</span>'),Mt=u('<span class="badge badge-info">Servir Froid</span>'),Tt=u('<span class="badge badge-warning">Avec Cuisson</span>'),zt=u('<span class="badge badge-success">Sans Cuisson</span>'),Pt=u('<span class="badge badge-accent"> </span>'),Bt=u('<span class="badge badge-success"> </span>'),Ot=u('<span class="badge badge-success">Testées</span>'),Lt=u('<span class="badge badge-error">À tester</span>'),Nt=u('<span class="badge badge-warning"> </span>'),Et=u('<div class="flex flex-wrap gap-2"><!> <!> <!> <!> <!> <!> <!> <!></div> <div class="mt-3 text-end"><button class="btn btn-warning btn-sm"><!> Effacer tous les filtres</button></div>',1),Qt=u('<fieldset class="fieldset border-base-300 relative rounded-lg border-2"><!> <div class="p-4"><!> <!></div></fieldset>');function jt(ee,a){fe(a,!0);const s=$(()=>a.filters.categories.length>0||a.filters.regimes.length>0||a.filters.ingredients.length>0||a.filters.temperature!==""||a.filters.cuisson!==""||a.filters.saison!==""||a.filters.testedStatus!=="all"),d=$(()=>{switch(a.filters.typeR){case"entree":return"entrée";case"plat":return"plat";case"dessert":return"dessert";default:return""}});var O=Qt(),S=o(O);{var N=w=>{var z=St(),K=o(z);{var U=F=>{var M=ae(),V=L(M);{var v=l=>{var g=ht(),_=L(g),m=o(_);n(_),Y(),y(()=>T(m,`${a.resultCount??""} ${t(d)??""}s`)),i(l,g)},h=l=>{var g=xt(),_=L(g),m=o(_);n(_),Y(),y(()=>T(m,`${a.resultCount??""} recettes`)),i(l,g)};p(V,l=>{t(d)?l(v):l(h,!1)})}i(F,M)},X=F=>{var M=ae(),V=L(M);{var v=l=>{var g=ae(),_=L(g);{var m=R=>{var Q=yt(),G=L(Q),W=o(G);n(G),Y(),y(()=>T(W,`1 ${t(d)??""}`)),i(R,Q)},P=R=>{var Q=wt();Y(),i(R,Q)};p(_,R=>{t(d)?R(m):R(P,!1)})}i(l,g)},h=l=>{var g=ae(),_=L(g);{var m=R=>{var Q=Ct(),G=L(Q),W=o(G);n(G),Y(),y(()=>T(W,`Aucun ${t(d)??""}`)),i(R,Q)},P=R=>{var Q=kt();Y(),i(R,Q)};p(_,R=>{t(d)?R(m):R(P,!1)},!0)}i(l,g)};p(V,l=>{a.resultCount===1?l(v):l(h,!1)},!0)}i(F,M)};p(K,F=>{a.resultCount>1?F(U):F(X,!1)})}n(z),i(w,z)};p(S,w=>{t(s)&&w(N)})}var H=c(S,2),E=o(H);{var q=w=>{var z=Rt(),K=o(z);{var U=F=>{var M=Ae();y(()=>T(M,`${a.resultCount??""} ${t(d)??""}s`)),i(F,M)},X=F=>{var M=Ae();y(()=>T(M,`${a.resultCount??""} recettes`)),i(F,M)};p(K,F=>{t(d)?F(U):F(X,!1)})}n(z),i(w,z)};p(E,w=>{t(s)||w(q)})}var re=c(E,2);{var te=w=>{var z=At(),K=c(o(z),2),U=o(K,!0);n(K),n(z),y(()=>T(U,a.searchQuery)),i(w,z)},Z=w=>{var z=ae(),K=L(z);{var U=X=>{var F=Et(),M=L(F),V=o(M);se(V,17,()=>a.filters.categories,oe,(e,r)=>{var b=It(),C=o(b,!0);n(b),y(()=>T(C,t(r))),i(e,b)});var v=c(V,2);se(v,17,()=>a.filters.regimes,oe,(e,r)=>{var b=Dt(),C=o(b,!0);n(b),y(()=>T(C,t(r))),i(e,b)});var h=c(v,2);{var l=e=>{var r=Ft();i(e,r)},g=e=>{var r=ae(),b=L(r);{var C=k=>{var x=Mt();i(k,x)};p(b,k=>{a.filters.temperature==="Froid"&&k(C)},!0)}i(e,r)};p(h,e=>{a.filters.temperature==="Chaud"?e(l):e(g,!1)})}var _=c(h,2);{var m=e=>{var r=Tt();i(e,r)},P=e=>{var r=ae(),b=L(r);{var C=k=>{var x=zt();i(k,x)};p(b,k=>{a.filters.cuisson==="Non"&&k(C)},!0)}i(e,r)};p(_,e=>{a.filters.cuisson==="Oui"?e(m):e(P,!1)})}var R=c(_,2);{var Q=e=>{var r=Pt(),b=o(r,!0);n(r),y(()=>T(b,a.filters.saison)),i(e,r)};p(R,e=>{a.filters.saison&&e(Q)})}var G=c(R,2);se(G,17,()=>a.filters.ingredients,oe,(e,r)=>{var b=Bt(),C=o(b,!0);n(b),y(()=>T(C,t(r))),i(e,b)});var W=c(G,2);{var pe=e=>{var r=Ot();i(e,r)},he=e=>{var r=ae(),b=L(r);{var C=k=>{var x=Lt();i(k,x)};p(b,k=>{a.filters.testedStatus==="untested"&&k(C)},!0)}i(e,r)};p(W,e=>{a.filters.testedStatus==="tested"?e(pe):e(he,!1)})}var xe=c(W,2);{var be=e=>{var r=Nt(),b=o(r,!0);n(r),y(()=>T(b,t(d))),i(e,r)};p(xe,e=>{a.filters.typeR&&e(be)})}n(M);var _e=c(M,2),f=o(_e);f.__click=function(...e){a.onResetFilters?.apply(this,e)};var A=o(f);He(A,{class:"h-4 w-4"}),Y(),n(f),n(_e),i(X,F)};p(K,X=>{t(s)&&X(U)},!0)}i(w,z)};p(re,w=>{a.searchQuery.length>=2?w(te):w(Z,!1)})}n(H),n(O),i(ee,O),ge()}me(["click"]);var Ht=u('<div class="badge badge-accent badge-outline badge-sm">brouillon</div>'),qt=u('<h3 class="text-primary bg-base-100 rounded-t-box border-t-base-300 absolute -top-4 left-0 flex max-w-4/5 items-center-safe gap-3 border-t py-0.5 ps-4 pe-6"><svg class="inline size-6 shrink-0"><use></use></svg> <!></h3> <div class="bg-base-100 rounded-t-box border-base-300 absolute -top-4 right-0 border-t-1 px-1"><!></div>',1),Kt=u('<div class="badge badge-accent badge-outline badge-sm">brouillon</div>'),Ut=u('<div class="flex gap-4"><div class="text-primary mb-2 inline-flex flex-wrap items-center-safe gap-2 text-lg font-semibold"><div class="items-start-safe inline-flex gap-2"><svg class="mt-0.5 size-6 min-w-6"><use></use></svg> </div> <!></div> <!></div>'),Gt=u('<span class="text-primary text-base font-bold"> </span>'),Jt=u("<span> </span>"),Xt=u("<p> </p>"),Zt=u("<p> <strong>(non testée)</strong></p>"),Vt=u('<span class="badge badge-ghost badge-sm"> </span>'),Wt=u('<span class="badge badge-primary badge-soft badge-sm"> </span>'),Yt=u("<!> <!>",1),$t=u('<span class="badge badge-soft badge-sm badge-error">Servir Chaud</span>'),ea=u('<span class="badge badge-soft badge-sm badge-info">Servir Froid</span>'),ta=u('<span class="badge badge-soft badge-sm badge-warning">Avec Cuisson</span>'),aa=u('<span class="badge badge-soft badge-sm badge-success">Sans Cuisson</span>'),ra=u('<span class="badge badge-soft badge-accent badge-sm"> </span>'),sa=u("<span> <!></span>"),na=u('<div class="my-1 text-sm"><span class="font-semibold">Ingrédients :</span> <!></div>'),ia=u('<span class="me-1"> <!></span>'),oa=u('<div class="text-sm"><span class="font-semibold">Matériel :</span> <!></div>'),la=u('<div role="button" tabindex="0"><!> <div class=" flex flex-wrap items-center justify-between gap-4 @md:my-2"><div class="min-w-72 flex-1"><!> <div class=" flex flex-col"><div><!> <!></div> <div class="text-base-content/60 text-sm"><!></div></div></div> <div class="ms-auto flex flex-col justify-end gap-2"><div class=" flex flex-wrap justify-end gap-1 pt-1"><!></div> <div class="mb-2 flex flex-wrap justify-end gap-1"><!> <!> <!></div></div></div> <!> <!></div>');function da(ee,a){fe(a,!0);let s=Re(a,"highlightedIngredients",19,()=>[]);function d(){we(`/recipe/${a.recipe.$id}`)}const O=Ve(a.recipe.typeR,a.recipe.categories||void 0);var S=la();S.__click=d,S.__keydown=e=>{(e.key==="Enter"||e.key===" ")&&d()};var N=o(S);{var H=e=>{var r=qt(),b=L(r),C=o(b),k=o(C);n(C);var x=c(C),I=c(x);{var j=B=>{var ye=Ht();i(B,ye)};p(I,B=>{a.recipe.draft&&B(j)})}n(b);var J=c(b,2),de=o(J);{var ne=B=>{Me(B,{get regimes(){return a.recipe.regime},iconOnly:!0})};p(de,B=>{a.recipe.regime&&B(ne)})}n(J),y(()=>{Ie(k,"href",`/icons/sprite.svg#${O.iconId}`),T(x,` ${a.recipe.title??""} `)}),i(e,r)};p(N,e=>{le.isDesktop&&e(H)})}var E=c(N,2),q=o(E),re=o(q);{var te=e=>{var r=Ut(),b=o(r),C=o(b),k=o(C),x=o(k);n(k);var I=c(k);n(C);var j=c(C,2);{var J=B=>{var ye=Kt();i(B,ye)};p(j,B=>{a.recipe.draft&&B(J)})}n(b);var de=c(b,2);{var ne=B=>{Me(B,{get regimes(){return a.recipe.regime},iconOnly:!0})};p(de,B=>{a.recipe.regime&&B(ne)})}n(r),y(()=>{Ie(x,"href",`/icons/sprite.svg#${O.iconId}`),T(I,` ${a.recipe.title??""}`)}),i(e,r)};p(re,e=>{le.isDesktop||e(te)})}var Z=c(re,2),w=o(Z),z=o(w);{var K=e=>{var r=Gt(),b=o(r,!0);n(r),y(()=>T(b,a.recipe.versionLabel)),i(e,r)};p(z,e=>{a.recipe.versionLabel&&e(K)})}var U=c(z,2);{var X=e=>{var r=Jt(),b=o(r);n(r),y(()=>{D(r,1,ue(a.recipe.auteur===le.userName?"text-accent font-semibold":"text-base-content/70 ")),T(b,`de ${a.recipe.auteur??""}`)}),i(e,r)};p(U,e=>{a.recipe.auteur&&e(X)})}n(w);var F=c(w,2),M=o(F);{var V=e=>{var r=Xt(),b=o(r);n(r),y(()=>T(b,`testée pour ${a.recipe.plate??""}
              couverts`)),i(e,r)},v=e=>{var r=Zt(),b=o(r);Y(),n(r),y(()=>T(b,`théoriquement pour ${a.recipe.plate??""} couverts `)),i(e,r)};p(M,e=>{a.recipe.check?e(V):e(v,!1)})}n(F),n(Z),n(q);var h=c(q,2),l=o(h),g=o(l);{var _=e=>{var r=Yt(),b=L(r);{var C=x=>{var I=Vt(),j=o(I,!0);n(I),y(()=>T(j,a.recipe.region)),i(x,I)};p(b,x=>{a.recipe.region&&x(C)})}var k=c(b,2);se(k,17,()=>a.recipe.categories,oe,(x,I)=>{var j=Wt(),J=o(j,!0);n(j),y(()=>T(J,t(I))),i(x,j)}),i(e,r)};p(g,e=>{a.recipe.categories&&e(_)})}n(l);var m=c(l,2),P=o(m);{var R=e=>{var r=$t();i(e,r)},Q=e=>{var r=ea();i(e,r)};p(P,e=>{a.recipe.serveHot?e(R):e(Q,!1)})}var G=c(P,2);{var W=e=>{var r=ta();i(e,r)},pe=e=>{var r=aa();i(e,r)};p(G,e=>{a.recipe.cuisson?e(W):e(pe,!1)})}var he=c(G,2);{var xe=e=>{var r=ae(),b=L(r);se(b,17,()=>a.recipe.saison,oe,(C,k)=>{var x=ra(),I=o(x,!0);n(x),y(()=>T(I,t(k))),i(C,x)}),i(e,r)};p(he,e=>{a.recipe.saison&&e(xe)})}n(m),n(h),n(E);var be=c(E,2);{var _e=e=>{var r=na(),b=c(o(r),2);se(b,17,()=>a.recipe.ingredients,oe,(C,k,x)=>{var I=sa();let j;var J=o(I,!0),de=c(J);{var ne=B=>{var ye=Ae(",");i(B,ye)};p(de,B=>{x<a.recipe.ingredients.length-1&&B(ne)})}n(I),y(B=>{j=D(I,1,"me-1",null,j,B),T(J,t(k))},[()=>({"font-bold":s().includes(t(k)),underline:s().includes(t(k))})]),i(C,I)}),n(r),i(e,r)};p(be,e=>{a.recipe.ingredients&&a.recipe.ingredients.length>0&&e(_e)})}var f=c(be,2);{var A=e=>{var r=oa(),b=c(o(r),2);se(b,17,()=>a.recipe.materiel,oe,(C,k,x)=>{var I=ia(),j=o(I,!0),J=c(j);{var de=ne=>{var B=Ae(",");i(ne,B)};p(J,ne=>{x<a.recipe.materiel.length-1&&ne(de)})}n(I),y(()=>T(j,t(k))),i(C,I)}),n(r),i(e,r)};p(f,e=>{a.recipe.materiel&&a.recipe.materiel.length>0&&e(A)})}n(S),y(()=>D(S,1,`card bg-base-100 cursor-pointer p-4 shadow-sm transition-shadow hover:shadow-md ${a.recipe.auteur===le.userName&&"border-accent/60 border-l-3"}`)),i(ee,S),ge()}me(["click","keydown"]);var ca=u('<fieldset class="fieldset"><legend class="legend label"><!> Filtrer :</legend> <div class="btn-group"><button>Tout</button> <button>Mes recettes</button> <button>Mes brouillons</button></div></fieldset>'),va=u('<div class="bg-base-300 rounded-box flex flex-wrap items-center justify-between gap-6 px-6 py-6"><fieldset class="fieldset"><legend class="legend label"><!> Trier par :</legend> <div class="btn-group"><button aria-label="Trier par titre">Titre</button> <button aria-label="Trier par date de création"><!> Date de création</button> <button aria-label="Trier par date de modification"><!> Date de modification</button></div></fieldset> <!></div>');function ua(ee,a){fe(a,!0);const s=v=>a.sortBy!==v?"inactive":a.sortOrder,d=v=>{v==="title"?a.onSortChange("title",a.sortBy==="title"&&a.sortOrder==="asc"?"desc":"asc"):a.sortBy!==v?a.onSortChange(v,"desc"):a.sortOrder==="desc"?a.onSortChange(v,"asc"):a.onSortChange("title","asc")},O=v=>{const h=s(v),l="btn btn-sm btn-primary btn-outline gap-2";return h==="inactive"?`${l}`:h==="asc"?`${l} btn-active`:`${l} btn-active`},S=v=>{const h=s(v);return h==="inactive"?null:h==="asc"?Ke:Ue},N=v=>{const h="btn btn-sm btn-secondary";return a.scope===v?`${h}`:`${h} btn-outline`};var H=va(),E=o(H),q=o(E),re=o(q);qe(re,{class:"inline size-4"}),Y(),n(q);var te=c(q,2),Z=o(te);Z.__click=()=>d("title");var w=c(Z,2);w.__click=()=>d("$createdAt");var z=o(w);{var K=v=>{const h=$(()=>S("$createdAt"));var l=ae(),g=L(l);De(g,()=>t(h),(_,m)=>{m(_,{size:16})}),i(v,l)};p(z,v=>{S("$createdAt")&&v(K)})}Y(),n(w);var U=c(w,2);U.__click=()=>d("$updatedAt");var X=o(U);{var F=v=>{const h=$(()=>S("$updatedAt"));var l=ae(),g=L(l);De(g,()=>t(h),(_,m)=>{m(_,{size:16})}),i(v,l)};p(X,v=>{S("$updatedAt")&&v(F)})}Y(),n(U),n(te),n(E);var M=c(E,2);{var V=v=>{var h=ca(),l=o(h),g=o(l);Ge(g,{class:"inline h-4 w-4"}),Y(),n(l);var _=c(l,2),m=o(_);m.__click=()=>we("/recipe");var P=c(m,2);P.__click=()=>we("/recipe/my");var R=c(P,2);R.__click=()=>we("/recipe/my/draft"),n(_),n(h),y((Q,G,W)=>{D(m,1,Q),D(P,1,G),D(R,1,W)},[()=>ue(N("all")),()=>ue(N("mine")),()=>ue(N("drafts"))]),i(v,h)};p(M,v=>{le.isAuthenticated&&v(V)})}n(H),y((v,h,l)=>{D(Z,1,v),D(w,1,h),D(U,1,l)},[()=>ue(O("title")),()=>ue(O("$createdAt")),()=>ue(O("$updatedAt"))]),i(ee,H),ge()}me(["click"]);const ba=ee=>{var a=ae(),s=L(a);{var d=O=>{var S=_a();S.__click=()=>we("/recipe/new");var N=o(S);Je(N,{size:18}),Y(),n(S),i(O,S)};p(s,O=>{le.isAuthenticated&&O(d)})}i(ee,a)};var _a=u('<button class="btn btn-primary"><!> Créer une recette</button>'),ga=u('<div class="alert alert-error"><span> </span></div>'),fa=u('<div class="py-8 text-center"><span class="loading loading-spinner loading-md"></span></div>'),ma=u('<div class="py-12 text-center"><p class="text-base-content/60 text-lg">Aucune recette ne correspond aux critères...</p></div>'),pa=u('<div class="my-8 space-y-10"></div> <!> <!>',1),ha=u('<!> <div class="p-4 lg:ml-100"><div class="mx-auto max-w-4xl"><div class="mb-10 space-y-6"><div class="tabs tabs-border tabs-lg mb-6 font-bold"><button>Toutes</button> <button>Entrées</button> <button>Plats</button> <button>Desserts</button></div> <div class="mb-4"><!></div> <div class="mb-6"><!></div> <!></div> <!></div></div> ```',1);function Ma(ee,a){fe(a,!0);let s=ve(""),d=ve(We({categories:[],regimes:[],temperature:"",cuisson:"",saison:"",testedStatus:"all",ingredients:[],typeR:"",scope:"all"})),O=20,S=ve(1),N=ve(void 0),H=ve("title"),E=ve("asc");const q=$(()=>ke.isInitialized?ke.getAllRecipes():[]),re=$(()=>{const f=new Set;return t(q).forEach(A=>A.categories?.forEach(e=>f.add(e))),Array.from(f).sort()}),te=["vegan","vegetarien","sans-gluten","sans-lactose"],Z=$(()=>Se.isInitialized?Se.ingredientNames:[]),w=$(()=>{if(t(s).length>=2){const f=t(s).toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,"");return t(q).filter(A=>{const e=A.title.toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,"").includes(f),r=A.auteur?.toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,"").includes(f)||!1,b=A.region?.toLowerCase().normalize("NFD").replace(/\p{Diacritic}/gu,"").includes(f)||!1,C=!t(d).typeR||A.typeR===t(d).typeR;return(e||r||b)&&C})}return t(q).filter(f=>{const A=!t(d).categories.length||t(d).categories.some(J=>f.categories?.includes(J)),e=!t(d).regimes.length||t(d).regimes.some(J=>f.regime?.includes(J)),r=!t(d).temperature||f.serveHot===(t(d).temperature==="Chaud"),b=!t(d).cuisson||(t(d).cuisson==="Oui"?f.cuisson===!0:f.cuisson===!1),C=!t(d).saison||f.saison?.includes(t(d).saison),k=t(d).testedStatus==="all"||t(d).testedStatus==="tested"&&f.check||t(d).testedStatus==="untested"&&!f.check,x=!t(d).ingredients.length||t(d).ingredients.every(J=>f.ingredients?.includes(J)),I=!t(d).typeR||f.typeR===t(d).typeR;let j=!0;return t(d).scope==="mine"?j=f.createdBy===le.userId:t(d).scope==="drafts"&&(j=f.createdBy===le.userId&&f.draft===!0),A&&e&&r&&b&&C&&k&&x&&I&&j})}),z=$(()=>[...t(w)].sort((A,e)=>{if(t(H)==="title")return t(E)==="asc"?A.title.localeCompare(e.title,"fr"):e.title.localeCompare(A.title,"fr");if(t(H)==="$createdAt"){const r=new Date(e.$createdAt||0).getTime()-new Date(A.$createdAt||0).getTime();return t(E)==="asc"?-r:r}else{const r=new Date(e.$updatedAt||0).getTime()-new Date(A.$updatedAt||0).getTime();return t(E)==="asc"?-r:r}})),K=$(()=>t(z).slice(0,t(S)*O)),U=$(()=>t(s).length>=2);function X(){ie(s,"")}function F(){ie(d,{categories:[],regimes:[],temperature:"",cuisson:"",saison:"",testedStatus:"all",ingredients:[],typeR:"",scope:t(d).scope},!0)}Ce(()=>{if(!t(N))return;const f=new IntersectionObserver(A=>{A[0].isIntersecting&&t(K).length<t(w).length&&tt(S)},{threshold:.1});return f.observe(t(N)),()=>f.disconnect()}),Ce(()=>{t(w),t(H),t(E),ie(S,1)}),Ce(()=>{const f=at.path;f==="/recipe/my/draft"?t(d).scope="drafts":f==="/recipe/my"?t(d).scope="mine":t(d).scope="all"}),Ce(()=>{Te.setConfig({title:t(d).scope==="mine"?"Mes recettes":t(d).scope==="drafts"?"Mes brouillons":"Recettes",actions:ba})}),Ye(()=>{Te.reset()}),$e(async()=>{Se.isInitialized||await Se.initialize()});var M=ha(),V=L(M);it(V,{width:"100",children:(f,A)=>{pt(f,{get disabled(){return t(U)},get availableCategories(){return t(re)},get availableRegimes(){return te},get availableIngredients(){return t(Z)},onReset:F,get filters(){return t(d)},set filters(e){ie(d,e,!0)}})},$$slots:{default:!0}});var v=c(V,2),h=o(v),l=o(h),g=o(l),_=o(g);_.__click=()=>t(d).typeR="";var m=c(_,2);m.__click=()=>t(d).typeR="entree";var P=c(m,2);P.__click=()=>t(d).typeR="plat";var R=c(P,2);R.__click=()=>t(d).typeR="dessert",n(g);var Q=c(g,2),G=o(Q);dt(G,{onReset:X,get searchQuery(){return t(s)},set searchQuery(f){ie(s,f,!0)}}),n(Q);var W=c(Q,2),pe=o(W);jt(pe,{get searchQuery(){return t(s)},get filters(){return t(d)},get resultCount(){return t(w).length},onResetFilters:F}),n(W);var he=c(W,2);ua(he,{get sortBy(){return t(H)},get sortOrder(){return t(E)},onSortChange:(f,A)=>{ie(H,f,!0),ie(E,A,!0)},get scope(){return t(d).scope}}),n(l);var xe=c(l,2);{var be=f=>{var A=ga(),e=o(A),r=o(e);n(e),n(A),y(()=>T(r,`Erreur : ${ke.error??""}`)),i(f,A)},_e=f=>{var A=pa(),e=L(A);se(e,21,()=>t(K),x=>x.$id,(x,I)=>{da(x,{get recipe(){return t(I)},get highlightedIngredients(){return t(d).ingredients}})}),n(e);var r=c(e,2);{var b=x=>{var I=fa();rt(I,j=>ie(N,j),()=>t(N)),i(x,I)};p(r,x=>{t(K).length<t(w).length&&x(b)})}var C=c(r,2);{var k=x=>{var I=ma();i(x,I)};p(C,x=>{t(w).length===0&&x(k)})}i(f,A)};p(xe,f=>{ke.error?f(be):f(_e,!1)})}n(h),n(v),Y(),y(()=>{D(_,1,`tab ${t(d).typeR===""?"tab-active":""}`),D(m,1,`tab ${t(d).typeR==="entree"?"tab-active":""}`),D(P,1,`tab ${t(d).typeR==="plat"?"tab-active":""}`),D(R,1,`tab ${t(d).typeR==="dessert"?"tab-active":""}`)}),et(1,v,()=>ot),i(ee,M),ge()}me(["click"]);export{Ma as default};
